

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>9. Remote Controller devices &mdash; The Linux Kernel 4.10.0-rc8+ documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="../../_static/theme_overrides.css" type="text/css" />
  

  
        <link rel="index" title="Index"
              href="../../genindex.html"/>
        <link rel="search" title="Search" href="../../search.html"/>
    <link rel="top" title="The Linux Kernel 4.10.0-rc8+ documentation" href="../../index.html"/>
        <link rel="up" title="Media subsystem kernel internal API" href="../media_kapi.html"/>
        <link rel="next" title="10. Media Controller devices" href="mc-core.html"/>
        <link rel="prev" title="2. Digital TV (DVB) devices" href="dtv-core.html"/> 

  
  <script src="../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../index.html" class="icon icon-home"> The Linux Kernel
          

          
          </a>

          
            
            
              <div class="version">
                4.10.0-rc8
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul>
<li class="toctree-l1"><a class="reference internal" href="../../admin-guide/index.html">The Linux kernel user&#8217;s and administrator&#8217;s guide</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../process/index.html">Working with the kernel development community</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../dev-tools/index.html">Development tools for the kernel</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../doc-guide/index.html">How to write kernel documentation</a></li>
</ul>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../driver-api/index.html">The Linux driver implementer&#8217;s API guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../core-api/index.html">Core API Documentation</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Linux Media Subsystem Documentation</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../media_uapi.html">Linux Media Infrastructure userspace API</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../media_kapi.html">Media subsystem kernel internal API</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="v4l2-core.html">1. Video2Linux devices</a></li>
<li class="toctree-l3"><a class="reference internal" href="dtv-core.html">2. Digital TV (DVB) devices</a></li>
<li class="toctree-l3"><a class="reference internal" href="dtv-core.html#digital-tv-common-functions">3. Digital TV Common functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="dtv-core.html#digital-tv-ring-buffer">4. Digital TV Ring buffer</a></li>
<li class="toctree-l3"><a class="reference internal" href="dtv-core.html#digital-tv-frontend-kabi">5. Digital TV Frontend kABI</a></li>
<li class="toctree-l3"><a class="reference internal" href="dtv-core.html#digital-tv-demux-kabi">6. Digital TV Demux kABI</a></li>
<li class="toctree-l3"><a class="reference internal" href="dtv-core.html#demux-callback-api">7. Demux Callback API</a></li>
<li class="toctree-l3"><a class="reference internal" href="dtv-core.html#digital-tv-conditional-access-kabi">8. Digital TV Conditional Access kABI</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">9. Remote Controller devices</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#remote-controller-core">9.1. Remote Controller core</a></li>
<li class="toctree-l4"><a class="reference internal" href="#lirc">9.2. LIRC</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="mc-core.html">10. Media Controller devices</a></li>
<li class="toctree-l3"><a class="reference internal" href="cec-core.html">11. CEC Kernel Support</a></li>
<li class="toctree-l3"><a class="reference internal" href="cec-core.html#the-kernel-interface">12. The Kernel Interface</a></li>
<li class="toctree-l3"><a class="reference internal" href="csi2.html">13. MIPI CSI-2</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../dvb-drivers/index.html">Linux Digital TV driver-specific documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../v4l-drivers/index.html">Video4Linux (V4L)  driver-specific documentation</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../gpu/index.html">Linux GPU Driver Developer&#8217;s Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../security/index.html">Security documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../sound/index.html">Linux Sound Subsystem Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../crypto/index.html">Linux Kernel Crypto API</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../translations/ko_KR/index.html">Korean translations</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../../index.html">The Linux Kernel</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../index.html">Docs</a> &raquo;</li>
      
          <li><a href="../index.html">Linux Media Subsystem Documentation</a> &raquo;</li>
      
          <li><a href="../media_kapi.html">Media subsystem kernel internal API</a> &raquo;</li>
      
    <li>9. Remote Controller devices</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../../_sources/media/kapi/rc-core.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="remote-controller-devices">
<h1>9. Remote Controller devices<a class="headerlink" href="#remote-controller-devices" title="Permalink to this headline">¶</a></h1>
<div class="section" id="remote-controller-core">
<h2>9.1. Remote Controller core<a class="headerlink" href="#remote-controller-core" title="Permalink to this headline">¶</a></h2>
<dl class="type">
<dt id="c.rc_driver_type">
enum <code class="descname">rc_driver_type</code><a class="headerlink" href="#c.rc_driver_type" title="Permalink to this definition">¶</a></dt>
<dd><p>type of the RC output</p>
</dd></dl>

<p><strong>Constants</strong></p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">RC_DRIVER_SCANCODE</span></code></dt>
<dd>Driver or hardware generates a scancode</dd>
<dt><code class="docutils literal"><span class="pre">RC_DRIVER_IR_RAW</span></code></dt>
<dd>Driver or hardware generates pulse/space sequences.
It needs a Infra-Red pulse/space decoder</dd>
</dl>
<dl class="type">
<dt id="c.rc_scancode_filter">
struct <code class="descname">rc_scancode_filter</code><a class="headerlink" href="#c.rc_scancode_filter" title="Permalink to this definition">¶</a></dt>
<dd><p>Filter scan codes.</p>
</dd></dl>

<p><strong>Definition</strong></p>
<div class="highlight-none"><div class="highlight"><pre><span></span>struct rc_scancode_filter {
  u32 data;
  u32 mask;
};
</pre></div>
</div>
<p><strong>Members</strong></p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">data</span></code></dt>
<dd>Scancode data to match.</dd>
<dt><code class="docutils literal"><span class="pre">mask</span></code></dt>
<dd>Mask of bits of scancode to compare.</dd>
</dl>
<dl class="type">
<dt id="c.rc_filter_type">
enum <code class="descname">rc_filter_type</code><a class="headerlink" href="#c.rc_filter_type" title="Permalink to this definition">¶</a></dt>
<dd><p>Filter type constants.</p>
</dd></dl>

<p><strong>Constants</strong></p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">RC_FILTER_NORMAL</span></code></dt>
<dd>Filter for normal operation.</dd>
<dt><code class="docutils literal"><span class="pre">RC_FILTER_WAKEUP</span></code></dt>
<dd>Filter for waking from suspend.</dd>
<dt><code class="docutils literal"><span class="pre">RC_FILTER_MAX</span></code></dt>
<dd>Number of filter types.</dd>
</dl>
<dl class="type">
<dt id="c.rc_dev">
struct <code class="descname">rc_dev</code><a class="headerlink" href="#c.rc_dev" title="Permalink to this definition">¶</a></dt>
<dd><p>represents a remote control device</p>
</dd></dl>

<p><strong>Definition</strong></p>
<div class="highlight-none"><div class="highlight"><pre><span></span>struct rc_dev {
  struct device dev;
  atomic_t initialized;
  bool managed_alloc;
  const struct attribute_group * sysfs_groups[5];
  const char * input_name;
  const char * input_phys;
  struct input_id input_id;
  char * driver_name;
  const char * map_name;
  struct rc_map rc_map;
  struct mutex lock;
  unsigned int minor;
  struct ir_raw_event_ctrl * raw;
  struct input_dev * input_dev;
  enum rc_driver_type driver_type;
  bool idle;
  u64 allowed_protocols;
  u64 enabled_protocols;
  u64 allowed_wakeup_protocols;
  u64 enabled_wakeup_protocols;
  struct rc_scancode_filter scancode_filter;
  struct rc_scancode_filter scancode_wakeup_filter;
  u32 scancode_mask;
  u32 users;
  void * priv;
  spinlock_t keylock;
  bool keypressed;
  unsigned long keyup_jiffies;
  struct timer_list timer_keyup;
  u32 last_keycode;
  enum rc_type last_protocol;
  u32 last_scancode;
  u8 last_toggle;
  u32 timeout;
  u32 min_timeout;
  u32 max_timeout;
  u32 rx_resolution;
  u32 tx_resolution;
  int (* change_protocol) (struct rc_dev *dev, u64 *rc_type);
  int (* change_wakeup_protocol) (struct rc_dev *dev, u64 *rc_type);
  int (* open) (struct rc_dev *dev);
  void (* close) (struct rc_dev *dev);
  int (* s_tx_mask) (struct rc_dev *dev, u32 mask);
  int (* s_tx_carrier) (struct rc_dev *dev, u32 carrier);
  int (* s_tx_duty_cycle) (struct rc_dev *dev, u32 duty_cycle);
  int (* s_rx_carrier_range) (struct rc_dev *dev, u32 min, u32 max);
  int (* tx_ir) (struct rc_dev *dev, unsigned *txbuf, unsigned n);
  void (* s_idle) (struct rc_dev *dev, bool enable);
  int (* s_learning_mode) (struct rc_dev *dev, int enable);
  int (* s_carrier_report) (struct rc_dev *dev, int enable);
  int (* s_filter) (struct rc_dev *dev,struct rc_scancode_filter *filter);
  int (* s_wakeup_filter) (struct rc_dev *dev,struct rc_scancode_filter *filter);
  int (* s_timeout) (struct rc_dev *dev,unsigned int timeout);
};
</pre></div>
</div>
<p><strong>Members</strong></p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">dev</span></code></dt>
<dd>driver model&#8217;s view of this device</dd>
<dt><code class="docutils literal"><span class="pre">initialized</span></code></dt>
<dd>1 if the device init has completed, 0 otherwise</dd>
<dt><code class="docutils literal"><span class="pre">managed_alloc</span></code></dt>
<dd>devm_rc_allocate_device was used to create rc_dev</dd>
<dt><code class="docutils literal"><span class="pre">sysfs_groups[5]</span></code></dt>
<dd>sysfs attribute groups</dd>
<dt><code class="docutils literal"><span class="pre">input_name</span></code></dt>
<dd>name of the input child device</dd>
<dt><code class="docutils literal"><span class="pre">input_phys</span></code></dt>
<dd>physical path to the input child device</dd>
<dt><code class="docutils literal"><span class="pre">input_id</span></code></dt>
<dd>id of the input child device (struct input_id)</dd>
<dt><code class="docutils literal"><span class="pre">driver_name</span></code></dt>
<dd>name of the hardware driver which registered this device</dd>
<dt><code class="docutils literal"><span class="pre">map_name</span></code></dt>
<dd>name of the default keymap</dd>
<dt><code class="docutils literal"><span class="pre">rc_map</span></code></dt>
<dd>current scan/key table</dd>
<dt><code class="docutils literal"><span class="pre">lock</span></code></dt>
<dd>used to ensure we&#8217;ve filled in all protocol details before
anyone can call show_protocols or store_protocols</dd>
<dt><code class="docutils literal"><span class="pre">minor</span></code></dt>
<dd>unique minor remote control device number</dd>
<dt><code class="docutils literal"><span class="pre">raw</span></code></dt>
<dd>additional data for raw pulse/space devices</dd>
<dt><code class="docutils literal"><span class="pre">input_dev</span></code></dt>
<dd>the input child device used to communicate events to userspace</dd>
<dt><code class="docutils literal"><span class="pre">driver_type</span></code></dt>
<dd>specifies if protocol decoding is done in hardware or software</dd>
<dt><code class="docutils literal"><span class="pre">idle</span></code></dt>
<dd>used to keep track of RX state</dd>
<dt><code class="docutils literal"><span class="pre">allowed_protocols</span></code></dt>
<dd>bitmask with the supported RC_BIT_* protocols</dd>
<dt><code class="docutils literal"><span class="pre">enabled_protocols</span></code></dt>
<dd>bitmask with the enabled RC_BIT_* protocols</dd>
<dt><code class="docutils literal"><span class="pre">allowed_wakeup_protocols</span></code></dt>
<dd>bitmask with the supported RC_BIT_* wakeup protocols</dd>
<dt><code class="docutils literal"><span class="pre">enabled_wakeup_protocols</span></code></dt>
<dd>bitmask with the enabled RC_BIT_* wakeup protocols</dd>
<dt><code class="docutils literal"><span class="pre">scancode_filter</span></code></dt>
<dd>scancode filter</dd>
<dt><code class="docutils literal"><span class="pre">scancode_wakeup_filter</span></code></dt>
<dd>scancode wakeup filters</dd>
<dt><code class="docutils literal"><span class="pre">scancode_mask</span></code></dt>
<dd>some hardware decoders are not capable of providing the full
scancode to the application. As this is a hardware limit, we can&#8217;t do
anything with it. Yet, as the same keycode table can be used with other
devices, a mask is provided to allow its usage. Drivers should generally
leave this field in blank</dd>
<dt><code class="docutils literal"><span class="pre">users</span></code></dt>
<dd>number of current users of the device</dd>
<dt><code class="docutils literal"><span class="pre">priv</span></code></dt>
<dd>driver-specific data</dd>
<dt><code class="docutils literal"><span class="pre">keylock</span></code></dt>
<dd>protects the remaining members of the struct</dd>
<dt><code class="docutils literal"><span class="pre">keypressed</span></code></dt>
<dd>whether a key is currently pressed</dd>
<dt><code class="docutils literal"><span class="pre">keyup_jiffies</span></code></dt>
<dd>time (in jiffies) when the current keypress should be released</dd>
<dt><code class="docutils literal"><span class="pre">timer_keyup</span></code></dt>
<dd>timer for releasing a keypress</dd>
<dt><code class="docutils literal"><span class="pre">last_keycode</span></code></dt>
<dd>keycode of last keypress</dd>
<dt><code class="docutils literal"><span class="pre">last_protocol</span></code></dt>
<dd>protocol of last keypress</dd>
<dt><code class="docutils literal"><span class="pre">last_scancode</span></code></dt>
<dd>scancode of last keypress</dd>
<dt><code class="docutils literal"><span class="pre">last_toggle</span></code></dt>
<dd>toggle value of last command</dd>
<dt><code class="docutils literal"><span class="pre">timeout</span></code></dt>
<dd>optional time after which device stops sending data</dd>
<dt><code class="docutils literal"><span class="pre">min_timeout</span></code></dt>
<dd>minimum timeout supported by device</dd>
<dt><code class="docutils literal"><span class="pre">max_timeout</span></code></dt>
<dd>maximum timeout supported by device</dd>
<dt><code class="docutils literal"><span class="pre">rx_resolution</span></code></dt>
<dd>resolution (in ns) of input sampler</dd>
<dt><code class="docutils literal"><span class="pre">tx_resolution</span></code></dt>
<dd>resolution (in ns) of output sampler</dd>
<dt><code class="docutils literal"><span class="pre">change_protocol</span></code></dt>
<dd>allow changing the protocol used on hardware decoders</dd>
<dt><code class="docutils literal"><span class="pre">change_wakeup_protocol</span></code></dt>
<dd>allow changing the protocol used for wakeup
filtering</dd>
<dt><code class="docutils literal"><span class="pre">open</span></code></dt>
<dd>callback to allow drivers to enable polling/irq when IR input device
is opened.</dd>
<dt><code class="docutils literal"><span class="pre">close</span></code></dt>
<dd>callback to allow drivers to disable polling/irq when IR input device
is opened.</dd>
<dt><code class="docutils literal"><span class="pre">s_tx_mask</span></code></dt>
<dd>set transmitter mask (for devices with multiple tx outputs)</dd>
<dt><code class="docutils literal"><span class="pre">s_tx_carrier</span></code></dt>
<dd>set transmit carrier frequency</dd>
<dt><code class="docutils literal"><span class="pre">s_tx_duty_cycle</span></code></dt>
<dd>set transmit duty cycle (0% - 100%)</dd>
<dt><code class="docutils literal"><span class="pre">s_rx_carrier_range</span></code></dt>
<dd>inform driver about carrier it is expected to handle</dd>
<dt><code class="docutils literal"><span class="pre">tx_ir</span></code></dt>
<dd>transmit IR</dd>
<dt><code class="docutils literal"><span class="pre">s_idle</span></code></dt>
<dd>enable/disable hardware idle mode, upon which,
device doesn&#8217;t interrupt host until it sees IR pulses</dd>
<dt><code class="docutils literal"><span class="pre">s_learning_mode</span></code></dt>
<dd>enable wide band receiver used for learning</dd>
<dt><code class="docutils literal"><span class="pre">s_carrier_report</span></code></dt>
<dd>enable carrier reports</dd>
<dt><code class="docutils literal"><span class="pre">s_filter</span></code></dt>
<dd>set the scancode filter</dd>
<dt><code class="docutils literal"><span class="pre">s_wakeup_filter</span></code></dt>
<dd>set the wakeup scancode filter</dd>
<dt><code class="docutils literal"><span class="pre">s_timeout</span></code></dt>
<dd>set hardware timeout in ns</dd>
</dl>
<dl class="function">
<dt id="c.rc_allocate_device">
struct <a class="reference internal" href="#c.rc_dev" title="rc_dev">rc_dev</a> * <code class="descname">rc_allocate_device</code><span class="sig-paren">(</span>void<span class="sig-paren">)</span><a class="headerlink" href="#c.rc_allocate_device" title="Permalink to this definition">¶</a></dt>
<dd><p>Allocates a RC device</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">void</span></code></dt>
<dd>no arguments</dd>
</dl>
<p><strong>Description</strong></p>
<p>returns a pointer to struct rc_dev.</p>
<dl class="function">
<dt id="c.devm_rc_allocate_device">
struct <a class="reference internal" href="#c.rc_dev" title="rc_dev">rc_dev</a> * <code class="descname">devm_rc_allocate_device</code><span class="sig-paren">(</span>struct <a class="reference internal" href="../../driver-api/infrastructure.html#c.device" title="device">device</a> *<em>&nbsp;dev</em><span class="sig-paren">)</span><a class="headerlink" href="#c.devm_rc_allocate_device" title="Permalink to this definition">¶</a></dt>
<dd><p>Managed RC device allocation</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">struct</span> <span class="pre">device</span> <span class="pre">*</span> <span class="pre">dev</span></code></dt>
<dd>pointer to struct device
returns a pointer to struct rc_dev.</dd>
</dl>
<dl class="function">
<dt id="c.rc_free_device">
void <code class="descname">rc_free_device</code><span class="sig-paren">(</span>struct <a class="reference internal" href="#c.rc_dev" title="rc_dev">rc_dev</a> *<em>&nbsp;dev</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rc_free_device" title="Permalink to this definition">¶</a></dt>
<dd><p>Frees a RC device</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">struct</span> <span class="pre">rc_dev</span> <span class="pre">*</span> <span class="pre">dev</span></code></dt>
<dd>pointer to struct rc_dev.</dd>
</dl>
<dl class="function">
<dt id="c.rc_register_device">
int <code class="descname">rc_register_device</code><span class="sig-paren">(</span>struct <a class="reference internal" href="#c.rc_dev" title="rc_dev">rc_dev</a> *<em>&nbsp;dev</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rc_register_device" title="Permalink to this definition">¶</a></dt>
<dd><p>Registers a RC device</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">struct</span> <span class="pre">rc_dev</span> <span class="pre">*</span> <span class="pre">dev</span></code></dt>
<dd>pointer to struct rc_dev.</dd>
</dl>
<dl class="function">
<dt id="c.devm_rc_register_device">
int <code class="descname">devm_rc_register_device</code><span class="sig-paren">(</span>struct <a class="reference internal" href="../../driver-api/infrastructure.html#c.device" title="device">device</a> *<em>&nbsp;parent</em>, struct <a class="reference internal" href="#c.rc_dev" title="rc_dev">rc_dev</a> *<em>&nbsp;dev</em><span class="sig-paren">)</span><a class="headerlink" href="#c.devm_rc_register_device" title="Permalink to this definition">¶</a></dt>
<dd><p>Manageded registering of a RC device</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">struct</span> <span class="pre">device</span> <span class="pre">*</span> <span class="pre">parent</span></code></dt>
<dd>pointer to struct device.</dd>
<dt><code class="docutils literal"><span class="pre">struct</span> <span class="pre">rc_dev</span> <span class="pre">*</span> <span class="pre">dev</span></code></dt>
<dd>pointer to struct rc_dev.</dd>
</dl>
<dl class="function">
<dt id="c.rc_unregister_device">
void <code class="descname">rc_unregister_device</code><span class="sig-paren">(</span>struct <a class="reference internal" href="#c.rc_dev" title="rc_dev">rc_dev</a> *<em>&nbsp;dev</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rc_unregister_device" title="Permalink to this definition">¶</a></dt>
<dd><p>Unregisters a RC device</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">struct</span> <span class="pre">rc_dev</span> <span class="pre">*</span> <span class="pre">dev</span></code></dt>
<dd>pointer to struct rc_dev.</dd>
</dl>
<dl class="function">
<dt id="c.rc_open">
int <code class="descname">rc_open</code><span class="sig-paren">(</span>struct <a class="reference internal" href="#c.rc_dev" title="rc_dev">rc_dev</a> *<em>&nbsp;rdev</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rc_open" title="Permalink to this definition">¶</a></dt>
<dd><p>Opens a RC device</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">struct</span> <span class="pre">rc_dev</span> <span class="pre">*</span> <span class="pre">rdev</span></code></dt>
<dd>pointer to struct rc_dev.</dd>
</dl>
<dl class="function">
<dt id="c.rc_close">
void <code class="descname">rc_close</code><span class="sig-paren">(</span>struct <a class="reference internal" href="#c.rc_dev" title="rc_dev">rc_dev</a> *<em>&nbsp;rdev</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rc_close" title="Permalink to this definition">¶</a></dt>
<dd><p>Closes a RC device</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">struct</span> <span class="pre">rc_dev</span> <span class="pre">*</span> <span class="pre">rdev</span></code></dt>
<dd>pointer to struct rc_dev.</dd>
</dl>
<dl class="type">
<dt id="c.rc_type">
enum <code class="descname">rc_type</code><a class="headerlink" href="#c.rc_type" title="Permalink to this definition">¶</a></dt>
<dd><p>type of the Remote Controller protocol</p>
</dd></dl>

<p><strong>Constants</strong></p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">RC_TYPE_UNKNOWN</span></code></dt>
<dd>Protocol not known</dd>
<dt><code class="docutils literal"><span class="pre">RC_TYPE_OTHER</span></code></dt>
<dd>Protocol known but proprietary</dd>
<dt><code class="docutils literal"><span class="pre">RC_TYPE_RC5</span></code></dt>
<dd>Philips RC5 protocol</dd>
<dt><code class="docutils literal"><span class="pre">RC_TYPE_RC5X</span></code></dt>
<dd>Philips RC5x protocol</dd>
<dt><code class="docutils literal"><span class="pre">RC_TYPE_RC5_SZ</span></code></dt>
<dd>StreamZap variant of RC5</dd>
<dt><code class="docutils literal"><span class="pre">RC_TYPE_JVC</span></code></dt>
<dd>JVC protocol</dd>
<dt><code class="docutils literal"><span class="pre">RC_TYPE_SONY12</span></code></dt>
<dd>Sony 12 bit protocol</dd>
<dt><code class="docutils literal"><span class="pre">RC_TYPE_SONY15</span></code></dt>
<dd>Sony 15 bit protocol</dd>
<dt><code class="docutils literal"><span class="pre">RC_TYPE_SONY20</span></code></dt>
<dd>Sony 20 bit protocol</dd>
<dt><code class="docutils literal"><span class="pre">RC_TYPE_NEC</span></code></dt>
<dd>NEC protocol</dd>
<dt><code class="docutils literal"><span class="pre">RC_TYPE_NECX</span></code></dt>
<dd>Extended NEC protocol</dd>
<dt><code class="docutils literal"><span class="pre">RC_TYPE_NEC32</span></code></dt>
<dd>NEC 32 bit protocol</dd>
<dt><code class="docutils literal"><span class="pre">RC_TYPE_SANYO</span></code></dt>
<dd>Sanyo protocol</dd>
<dt><code class="docutils literal"><span class="pre">RC_TYPE_MCE_KBD</span></code></dt>
<dd>RC6-ish MCE keyboard/mouse</dd>
<dt><code class="docutils literal"><span class="pre">RC_TYPE_RC6_0</span></code></dt>
<dd>Philips RC6-0-16 protocol</dd>
<dt><code class="docutils literal"><span class="pre">RC_TYPE_RC6_6A_20</span></code></dt>
<dd>Philips RC6-6A-20 protocol</dd>
<dt><code class="docutils literal"><span class="pre">RC_TYPE_RC6_6A_24</span></code></dt>
<dd>Philips RC6-6A-24 protocol</dd>
<dt><code class="docutils literal"><span class="pre">RC_TYPE_RC6_6A_32</span></code></dt>
<dd>Philips RC6-6A-32 protocol</dd>
<dt><code class="docutils literal"><span class="pre">RC_TYPE_RC6_MCE</span></code></dt>
<dd>MCE (Philips RC6-6A-32 subtype) protocol</dd>
<dt><code class="docutils literal"><span class="pre">RC_TYPE_SHARP</span></code></dt>
<dd>Sharp protocol</dd>
<dt><code class="docutils literal"><span class="pre">RC_TYPE_XMP</span></code></dt>
<dd>XMP protocol</dd>
<dt><code class="docutils literal"><span class="pre">RC_TYPE_CEC</span></code></dt>
<dd>CEC protocol</dd>
</dl>
<dl class="type">
<dt id="c.rc_map_table">
struct <code class="descname">rc_map_table</code><a class="headerlink" href="#c.rc_map_table" title="Permalink to this definition">¶</a></dt>
<dd><p>represents a scancode/keycode pair</p>
</dd></dl>

<p><strong>Definition</strong></p>
<div class="highlight-none"><div class="highlight"><pre><span></span>struct rc_map_table {
  u32 scancode;
  u32 keycode;
};
</pre></div>
</div>
<p><strong>Members</strong></p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">scancode</span></code></dt>
<dd>scan code (u32)</dd>
<dt><code class="docutils literal"><span class="pre">keycode</span></code></dt>
<dd>Linux input keycode</dd>
</dl>
<dl class="type">
<dt id="c.rc_map">
struct <code class="descname">rc_map</code><a class="headerlink" href="#c.rc_map" title="Permalink to this definition">¶</a></dt>
<dd><p>represents a keycode map table</p>
</dd></dl>

<p><strong>Definition</strong></p>
<div class="highlight-none"><div class="highlight"><pre><span></span>struct rc_map {
  struct rc_map_table * scan;
  unsigned int size;
  unsigned int len;
  unsigned int alloc;
  enum rc_type rc_type;
  const char * name;
  spinlock_t lock;
};
</pre></div>
</div>
<p><strong>Members</strong></p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">scan</span></code></dt>
<dd>pointer to struct <a class="reference internal" href="#c.rc_map_table" title="rc_map_table"><code class="xref c c-type docutils literal"><span class="pre">rc_map_table</span></code></a></dd>
<dt><code class="docutils literal"><span class="pre">size</span></code></dt>
<dd>Max number of entries</dd>
<dt><code class="docutils literal"><span class="pre">len</span></code></dt>
<dd>Number of entries that are in use</dd>
<dt><code class="docutils literal"><span class="pre">alloc</span></code></dt>
<dd>size of *scan, in bytes</dd>
<dt><code class="docutils literal"><span class="pre">rc_type</span></code></dt>
<dd>type of the remote controller protocol, as defined at
enum <a class="reference internal" href="#c.rc_type" title="rc_type"><code class="xref c c-type docutils literal"><span class="pre">rc_type</span></code></a></dd>
<dt><code class="docutils literal"><span class="pre">name</span></code></dt>
<dd>name of the key map table</dd>
<dt><code class="docutils literal"><span class="pre">lock</span></code></dt>
<dd>lock to protect access to this structure</dd>
</dl>
<dl class="type">
<dt id="c.rc_map_list">
struct <code class="descname">rc_map_list</code><a class="headerlink" href="#c.rc_map_list" title="Permalink to this definition">¶</a></dt>
<dd><p>list of the registered <a class="reference internal" href="#c.rc_map" title="rc_map"><code class="xref c c-type docutils literal"><span class="pre">rc_map</span></code></a> maps</p>
</dd></dl>

<p><strong>Definition</strong></p>
<div class="highlight-none"><div class="highlight"><pre><span></span>struct rc_map_list {
  struct list_head list;
  struct rc_map map;
};
</pre></div>
</div>
<p><strong>Members</strong></p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">list</span></code></dt>
<dd>pointer to struct <code class="xref c c-type docutils literal"><span class="pre">list_head</span></code></dd>
<dt><code class="docutils literal"><span class="pre">map</span></code></dt>
<dd>pointer to struct <a class="reference internal" href="#c.rc_map" title="rc_map"><code class="xref c c-type docutils literal"><span class="pre">rc_map</span></code></a></dd>
</dl>
<dl class="function">
<dt id="c.rc_map_register">
int <code class="descname">rc_map_register</code><span class="sig-paren">(</span>struct <a class="reference internal" href="#c.rc_map_list" title="rc_map_list">rc_map_list</a> *<em>&nbsp;map</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rc_map_register" title="Permalink to this definition">¶</a></dt>
<dd><p>Registers a Remote Controler scancode map</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">struct</span> <span class="pre">rc_map_list</span> <span class="pre">*</span> <span class="pre">map</span></code></dt>
<dd>pointer to struct rc_map_list</dd>
</dl>
<dl class="function">
<dt id="c.rc_map_unregister">
void <code class="descname">rc_map_unregister</code><span class="sig-paren">(</span>struct <a class="reference internal" href="#c.rc_map_list" title="rc_map_list">rc_map_list</a> *<em>&nbsp;map</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rc_map_unregister" title="Permalink to this definition">¶</a></dt>
<dd><p>Unregisters a Remote Controler scancode map</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">struct</span> <span class="pre">rc_map_list</span> <span class="pre">*</span> <span class="pre">map</span></code></dt>
<dd>pointer to struct rc_map_list</dd>
</dl>
<dl class="function">
<dt id="c.rc_map_get">
struct <a class="reference internal" href="#c.rc_map" title="rc_map">rc_map</a> * <code class="descname">rc_map_get</code><span class="sig-paren">(</span>const char *<em>&nbsp;name</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rc_map_get" title="Permalink to this definition">¶</a></dt>
<dd><p>gets an RC map from its name</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">const</span> <span class="pre">char</span> <span class="pre">*</span> <span class="pre">name</span></code></dt>
<dd>name of the RC scancode map</dd>
</dl>
</div>
<div class="section" id="lirc">
<h2>9.2. LIRC<a class="headerlink" href="#lirc" title="Permalink to this headline">¶</a></h2>
<dl class="type">
<dt id="c.lirc_driver">
struct <code class="descname">lirc_driver</code><a class="headerlink" href="#c.lirc_driver" title="Permalink to this definition">¶</a></dt>
<dd><p>Defines the parameters on a LIRC driver</p>
</dd></dl>

<p><strong>Definition</strong></p>
<div class="highlight-none"><div class="highlight"><pre><span></span>struct lirc_driver {
  char name[40];
  int minor;
  __u32 code_length;
  unsigned int buffer_size;
  int sample_rate;
  __u32 features;
  unsigned int chunk_size;
  void * data;
  int min_timeout;
  int max_timeout;
  int (* add_to_buf) (void *data, struct lirc_buffer *buf);
  struct lirc_buffer * rbuf;
  int (* set_use_inc) (void *data);
  void (* set_use_dec) (void *data);
  struct rc_dev * rdev;
  const struct file_operations * fops;
  struct device * dev;
  struct module * owner;
};
</pre></div>
</div>
<p><strong>Members</strong></p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">name[40]</span></code></dt>
<dd>this string will be used for logs</dd>
<dt><code class="docutils literal"><span class="pre">minor</span></code></dt>
<dd>indicates minor device (/dev/lirc) number for
registered driver if caller fills it with negative
value, then the first free minor number will be used
(if available).</dd>
<dt><code class="docutils literal"><span class="pre">code_length</span></code></dt>
<dd>length of the remote control key code expressed in bits.</dd>
<dt><code class="docutils literal"><span class="pre">buffer_size</span></code></dt>
<dd>Number of FIFO buffers with <strong>chunk_size</strong> size. If zero,
creates a buffer with BUFLEN size (16 bytes).</dd>
<dt><code class="docutils literal"><span class="pre">sample_rate</span></code></dt>
<dd>if zero, the device will wait for an event with a new
code to be parsed. Otherwise, specifies the sample
rate for polling. Value should be between 0
and HZ. If equal to HZ, it would mean one polling per
second.</dd>
<dt><code class="docutils literal"><span class="pre">features</span></code></dt>
<dd>lirc compatible hardware features, like LIRC_MODE_RAW,
LIRC_CAN_*, as defined at include/media/lirc.h.</dd>
<dt><code class="docutils literal"><span class="pre">chunk_size</span></code></dt>
<dd>Size of each FIFO buffer.</dd>
<dt><code class="docutils literal"><span class="pre">data</span></code></dt>
<dd>it may point to any driver data and this pointer will
be passed to all callback functions.</dd>
<dt><code class="docutils literal"><span class="pre">min_timeout</span></code></dt>
<dd>Minimum timeout for record. Valid only if
LIRC_CAN_SET_REC_TIMEOUT is defined.</dd>
<dt><code class="docutils literal"><span class="pre">max_timeout</span></code></dt>
<dd>Maximum timeout for record. Valid only if
LIRC_CAN_SET_REC_TIMEOUT is defined.</dd>
<dt><code class="docutils literal"><span class="pre">add_to_buf</span></code></dt>
<dd>add_to_buf will be called after specified period of the
time or triggered by the external event, this behavior
depends on value of the sample_rate this function will
be called in user context. This routine should return
0 if data was added to the buffer and -ENODATA if none
was available. This should add some number of bits
evenly divisible by code_length to the buffer.</dd>
<dt><code class="docutils literal"><span class="pre">rbuf</span></code></dt>
<dd>if not NULL, it will be used as a read buffer, you will
have to write to the buffer by other means, like irq&#8217;s
(see also lirc_serial.c).</dd>
<dt><code class="docutils literal"><span class="pre">set_use_inc</span></code></dt>
<dd>set_use_inc will be called after device is opened</dd>
<dt><code class="docutils literal"><span class="pre">set_use_dec</span></code></dt>
<dd>set_use_dec will be called after device is closed</dd>
<dt><code class="docutils literal"><span class="pre">rdev</span></code></dt>
<dd>Pointed to struct rc_dev associated with the LIRC
device.</dd>
<dt><code class="docutils literal"><span class="pre">fops</span></code></dt>
<dd>file_operations for drivers which don&#8217;t fit the current
driver model.
Some ioctl&#8217;s can be directly handled by lirc_dev if the
driver&#8217;s ioctl function is NULL or if it returns
-ENOIOCTLCMD (see also lirc_serial.c).</dd>
<dt><code class="docutils literal"><span class="pre">dev</span></code></dt>
<dd>pointer to the struct device associated with the LIRC
device.</dd>
<dt><code class="docutils literal"><span class="pre">owner</span></code></dt>
<dd>the module owning this struct</dd>
</dl>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="mc-core.html" class="btn btn-neutral float-right" title="10. Media Controller devices" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="dtv-core.html" class="btn btn-neutral" title="2. Digital TV (DVB) devices" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016, The kernel development community.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../',
            VERSION:'4.10.0-rc8+',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>