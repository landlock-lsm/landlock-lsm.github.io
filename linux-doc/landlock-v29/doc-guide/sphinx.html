

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Introduction &mdash; The Linux Kernel 5.11.0+ documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/theme_overrides.css" type="text/css" />

  
  

  
  

  

  
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Writing kernel-doc comments" href="kernel-doc.html" />
    <link rel="prev" title="How to write kernel documentation" href="index.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> The Linux Kernel
          

          
          </a>

          
            
            
              <div class="version">
                5.11.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../admin-guide/index.html">The Linux kernel user’s and administrator’s guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../kbuild/index.html">Kernel Build System</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../firmware-guide/index.html">The Linux kernel firmware guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../devicetree/index.html">Open Firmware and Device Tree</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../userspace-api/index.html">The Linux kernel user-space API guide</a></li>
</ul>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../process/index.html">Working with the kernel development community</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dev-tools/index.html">Development tools for the kernel</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">How to write kernel documentation</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="#sphinx-install">Sphinx Install</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#image-output">Image output</a></li>
<li class="toctree-l3"><a class="reference internal" href="#pdf-and-latex-builds">PDF and LaTeX builds</a></li>
<li class="toctree-l3"><a class="reference internal" href="#checking-for-sphinx-dependencies">Checking for Sphinx dependencies</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#sphinx-build">Sphinx Build</a></li>
<li class="toctree-l2"><a class="reference internal" href="#writing-documentation">Writing Documentation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#specific-guidelines-for-the-kernel-documentation">Specific guidelines for the kernel documentation</a></li>
<li class="toctree-l3"><a class="reference internal" href="#the-c-domain">the C domain</a></li>
<li class="toctree-l3"><a class="reference internal" href="#list-tables">list tables</a></li>
<li class="toctree-l3"><a class="reference internal" href="#cross-referencing">Cross-referencing</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#figures-images">Figures &amp; Images</a></li>
<li class="toctree-l2"><a class="reference internal" href="kernel-doc.html">Writing kernel-doc comments</a></li>
<li class="toctree-l2"><a class="reference internal" href="kernel-doc.html#including-kernel-doc-comments">Including kernel-doc comments</a></li>
<li class="toctree-l2"><a class="reference internal" href="parse-headers.html">Including uAPI header files</a></li>
<li class="toctree-l2"><a class="reference internal" href="contributing.html">How to help improve kernel documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="maintainer-profile.html">Documentation subsystem maintainer entry profile</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../kernel-hacking/index.html">Kernel Hacking Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../trace/index.html">Linux Tracing Technologies</a></li>
<li class="toctree-l1"><a class="reference internal" href="../maintainer/index.html">Kernel Maintainer Handbook</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fault-injection/index.html">fault-injection</a></li>
<li class="toctree-l1"><a class="reference internal" href="../livepatch/index.html">Kernel Livepatching</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../driver-api/index.html">The Linux driver implementer’s API guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../core-api/index.html">Core API Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../locking/index.html">locking</a></li>
<li class="toctree-l1"><a class="reference internal" href="../accounting/index.html">Accounting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../block/index.html">Block</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cdrom/index.html">cdrom</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cpu-freq/index.html">Linux CPUFreq - CPU frequency and voltage scaling code in the Linux(TM) kernel</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ide/index.html">Integrated Drive Electronics (IDE)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fb/index.html">Frame Buffer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fpga/index.html">fpga</a></li>
<li class="toctree-l1"><a class="reference internal" href="../hid/index.html">Human Interface Devices (HID)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../i2c/index.html">I2C/SMBus Subsystem</a></li>
<li class="toctree-l1"><a class="reference internal" href="../iio/index.html">Industrial I/O</a></li>
<li class="toctree-l1"><a class="reference internal" href="../isdn/index.html">ISDN</a></li>
<li class="toctree-l1"><a class="reference internal" href="../infiniband/index.html">InfiniBand</a></li>
<li class="toctree-l1"><a class="reference internal" href="../leds/index.html">LEDs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../netlabel/index.html">NetLabel</a></li>
<li class="toctree-l1"><a class="reference internal" href="../networking/index.html">Linux Networking Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pcmcia/index.html">pcmcia</a></li>
<li class="toctree-l1"><a class="reference internal" href="../power/index.html">Power Management</a></li>
<li class="toctree-l1"><a class="reference internal" href="../target/index.html">TCM Virtual Device</a></li>
<li class="toctree-l1"><a class="reference internal" href="../timers/index.html">timers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../spi/index.html">Serial Peripheral Interface (SPI)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../w1/index.html">1-Wire Subsystem</a></li>
<li class="toctree-l1"><a class="reference internal" href="../watchdog/index.html">Linux Watchdog Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../virt/index.html">Linux Virtualization Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../input/index.html">The Linux Input Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../hwmon/index.html">Linux Hardware Monitoring</a></li>
<li class="toctree-l1"><a class="reference internal" href="../gpu/index.html">Linux GPU Driver Developer’s Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../security/index.html">Security Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../sound/index.html">Linux Sound Subsystem Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../crypto/index.html">Linux Kernel Crypto API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../filesystems/index.html">Filesystems in the Linux kernel</a></li>
<li class="toctree-l1"><a class="reference internal" href="../vm/index.html">Linux Memory Management Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../bpf/index.html">BPF Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../usb/index.html">USB support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../PCI/index.html">Linux PCI Bus Subsystem</a></li>
<li class="toctree-l1"><a class="reference internal" href="../scsi/index.html">Linux SCSI Subsystem</a></li>
<li class="toctree-l1"><a class="reference internal" href="../misc-devices/index.html">Assorted Miscellaneous Devices Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../scheduler/index.html">Linux Scheduler</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mhi/index.html">MHI</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../asm-annotations.html">Assembler Annotations</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../arm/index.html">ARM Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../arm64/index.html">ARM64 Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ia64/index.html">IA-64 Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../m68k/index.html">m68k Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mips/index.html">MIPS-specific Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../nios2/index.html">Nios II Specific Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../openrisc/index.html">OpenRISC Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../parisc/index.html">PA-RISC Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../powerpc/index.html">powerpc</a></li>
<li class="toctree-l1"><a class="reference internal" href="../riscv/index.html">RISC-V architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../s390/index.html">s390 Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../sh/index.html">SuperH Interfaces Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../sparc/index.html">Sparc Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../x86/index.html">x86-specific Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../xtensa/index.html">Xtensa Architecture</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../filesystems/ext4/index.html">ext4 Data Structures and Algorithms</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../staging/index.html">Unsorted Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../staging/index.html#atomic-types">Atomic Types</a></li>
<li class="toctree-l1"><a class="reference internal" href="../staging/index.html#atomic-bitops">Atomic bitops</a></li>
<li class="toctree-l1"><a class="reference internal" href="../staging/index.html#memory-barriers">Memory Barriers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../watch_queue.html">General notification mechanism</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../translations/index.html">Translations</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">The Linux Kernel</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="index.html">How to write kernel documentation</a> &raquo;</li>
        
      <li>Introduction</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../_sources/doc-guide/sphinx.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="introduction">
<span id="sphinxdoc"></span><h1>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h1>
<p>The Linux kernel uses <a class="reference external" href="http://www.sphinx-doc.org/">Sphinx</a> to generate pretty documentation from
<a class="reference external" href="http://docutils.sourceforge.net/rst.html">reStructuredText</a> files under <code class="docutils literal notranslate"><span class="pre">Documentation</span></code>. To build the documentation in
HTML or PDF formats, use <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">htmldocs</span></code> or <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">pdfdocs</span></code>. The generated
documentation is placed in <code class="docutils literal notranslate"><span class="pre">Documentation/output</span></code>.</p>
<p>The reStructuredText files may contain directives to include structured
documentation comments, or kernel-doc comments, from source files. Usually these
are used to describe the functions and types and design of the code. The
kernel-doc comments have some special structure and formatting, but beyond that
they are also treated as reStructuredText.</p>
<p>Finally, there are thousands of plain text documentation files scattered around
<code class="docutils literal notranslate"><span class="pre">Documentation</span></code>. Some of these will likely be converted to reStructuredText
over time, but the bulk of them will remain in plain text.</p>
</div>
<div class="section" id="sphinx-install">
<span id="id1"></span><h1>Sphinx Install<a class="headerlink" href="#sphinx-install" title="Permalink to this headline">¶</a></h1>
<p>The ReST markups currently used by the Documentation/ files are meant to be
built with <code class="docutils literal notranslate"><span class="pre">Sphinx</span></code> version 1.3 or higher.</p>
<p>There’s a script that checks for the Sphinx requirements. Please see
<a class="reference internal" href="#sphinx-pre-install"><span class="std std-ref">Checking for Sphinx dependencies</span></a> for further details.</p>
<p>Most distributions are shipped with Sphinx, but its toolchain is fragile,
and it is not uncommon that upgrading it or some other Python packages
on your machine would cause the documentation build to break.</p>
<p>A way to avoid that is to use a different version than the one shipped
with your distributions. In order to do so, it is recommended to install
Sphinx inside a virtual environment, using <code class="docutils literal notranslate"><span class="pre">virtualenv-3</span></code>
or <code class="docutils literal notranslate"><span class="pre">virtualenv</span></code>, depending on how your distribution packaged Python 3.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ol class="arabic simple">
<li><p>Sphinx versions below 1.5 don’t work properly with Python’s
docutils version 0.13.1 or higher. So, if you’re willing to use
those versions, you should run <code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">'docutils==0.12'</span></code>.</p></li>
<li><p>It is recommended to use the RTD theme for html output. Depending
on the Sphinx version, it should be installed separately,
with <code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">sphinx_rtd_theme</span></code>.</p></li>
<li><p>Some ReST pages contain math expressions. Due to the way Sphinx works,
those expressions are written using LaTeX notation. It needs texlive
installed with amsfonts and amsmath in order to evaluate them.</p></li>
</ol>
</div>
<p>In summary, if you want to install Sphinx version 1.7.9, you should do:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ virtualenv sphinx_1.7.9
$ . sphinx_1.7.9/bin/activate
(sphinx_1.7.9) $ pip install -r Documentation/sphinx/requirements.txt
</pre></div>
</div>
<p>After running <code class="docutils literal notranslate"><span class="pre">.</span> <span class="pre">sphinx_1.7.9/bin/activate</span></code>, the prompt will change,
in order to indicate that you’re using the new environment. If you
open a new shell, you need to rerun this command to enter again at
the virtual environment before building the documentation.</p>
<div class="section" id="image-output">
<h2>Image output<a class="headerlink" href="#image-output" title="Permalink to this headline">¶</a></h2>
<p>The kernel documentation build system contains an extension that
handles images on both GraphViz and SVG formats (see
<a class="reference internal" href="#sphinx-kfigure"><span class="std std-ref">Figures &amp; Images</span></a>).</p>
<p>For it to work, you need to install both GraphViz and ImageMagick
packages. If those packages are not installed, the build system will
still build the documentation, but won’t include any images at the
output.</p>
</div>
<div class="section" id="pdf-and-latex-builds">
<h2>PDF and LaTeX builds<a class="headerlink" href="#pdf-and-latex-builds" title="Permalink to this headline">¶</a></h2>
<p>Such builds are currently supported only with Sphinx versions 1.4 and higher.</p>
<p>For PDF and LaTeX output, you’ll also need <code class="docutils literal notranslate"><span class="pre">XeLaTeX</span></code> version 3.14159265.</p>
<p>Depending on the distribution, you may also need to install a series of
<code class="docutils literal notranslate"><span class="pre">texlive</span></code> packages that provide the minimal set of functionalities
required for <code class="docutils literal notranslate"><span class="pre">XeLaTeX</span></code> to work.</p>
</div>
<div class="section" id="checking-for-sphinx-dependencies">
<span id="sphinx-pre-install"></span><h2>Checking for Sphinx dependencies<a class="headerlink" href="#checking-for-sphinx-dependencies" title="Permalink to this headline">¶</a></h2>
<p>There’s a script that automatically check for Sphinx dependencies. If it can
recognize your distribution, it will also give a hint about the install
command line options for your distro:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ ./scripts/sphinx-pre-install
Checking if the needed tools for Fedora release 26 (Twenty Six) are available
Warning: better to also install &quot;texlive-luatex85&quot;.
You should run:

        sudo dnf install -y texlive-luatex85
        /usr/bin/virtualenv sphinx_1.7.9
        . sphinx_1.7.9/bin/activate
        pip install -r Documentation/sphinx/requirements.txt

Can&#39;t build as 1 mandatory dependency is missing at ./scripts/sphinx-pre-install line 468.
</pre></div>
</div>
<p>By default, it checks all the requirements for both html and PDF, including
the requirements for images, math expressions and LaTeX build, and assumes
that a virtual Python environment will be used. The ones needed for html
builds are assumed to be mandatory; the others to be optional.</p>
<p>It supports two optional parameters:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">--no-pdf</span></code></dt><dd><p>Disable checks for PDF;</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">--no-virtualenv</span></code></dt><dd><p>Use OS packaging for Sphinx instead of Python virtual environment.</p>
</dd>
</dl>
</div>
</div>
<div class="section" id="sphinx-build">
<h1>Sphinx Build<a class="headerlink" href="#sphinx-build" title="Permalink to this headline">¶</a></h1>
<p>The usual way to generate the documentation is to run <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">htmldocs</span></code> or
<code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">pdfdocs</span></code>. There are also other formats available: see the documentation
section of <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">help</span></code>. The generated documentation is placed in
format-specific subdirectories under <code class="docutils literal notranslate"><span class="pre">Documentation/output</span></code>.</p>
<p>To generate documentation, Sphinx (<code class="docutils literal notranslate"><span class="pre">sphinx-build</span></code>) must obviously be
installed. For prettier HTML output, the Read the Docs Sphinx theme
(<code class="docutils literal notranslate"><span class="pre">sphinx_rtd_theme</span></code>) is used if available. For PDF output you’ll also need
<code class="docutils literal notranslate"><span class="pre">XeLaTeX</span></code> and <code class="docutils literal notranslate"><span class="pre">convert(1)</span></code> from ImageMagick (<a class="reference external" href="https://www.imagemagick.org">https://www.imagemagick.org</a>).
All of these are widely available and packaged in distributions.</p>
<p>To pass extra options to Sphinx, you can use the <code class="docutils literal notranslate"><span class="pre">SPHINXOPTS</span></code> make
variable. For example, use <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">SPHINXOPTS=-v</span> <span class="pre">htmldocs</span></code> to get more verbose
output.</p>
<p>To remove the generated documentation, run <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">cleandocs</span></code>.</p>
</div>
<div class="section" id="writing-documentation">
<h1>Writing Documentation<a class="headerlink" href="#writing-documentation" title="Permalink to this headline">¶</a></h1>
<p>Adding new documentation can be as simple as:</p>
<ol class="arabic simple">
<li><p>Add a new <code class="docutils literal notranslate"><span class="pre">.rst</span></code> file somewhere under <code class="docutils literal notranslate"><span class="pre">Documentation</span></code>.</p></li>
<li><p>Refer to it from the Sphinx main <a class="reference external" href="http://www.sphinx-doc.org/en/stable/markup/toctree.html">TOC tree</a> in <code class="docutils literal notranslate"><span class="pre">Documentation/index.rst</span></code>.</p></li>
</ol>
<p>This is usually good enough for simple documentation (like the one you’re
reading right now), but for larger documents it may be advisable to create a
subdirectory (or use an existing one). For example, the graphics subsystem
documentation is under <code class="docutils literal notranslate"><span class="pre">Documentation/gpu</span></code>, split to several <code class="docutils literal notranslate"><span class="pre">.rst</span></code> files,
and has a separate <code class="docutils literal notranslate"><span class="pre">index.rst</span></code> (with a <code class="docutils literal notranslate"><span class="pre">toctree</span></code> of its own) referenced from
the main index.</p>
<p>See the documentation for <a class="reference external" href="http://www.sphinx-doc.org/">Sphinx</a> and <a class="reference external" href="http://docutils.sourceforge.net/rst.html">reStructuredText</a> on what you can do
with them. In particular, the Sphinx <a class="reference external" href="http://www.sphinx-doc.org/en/stable/rest.html">reStructuredText Primer</a> is a good place
to get started with reStructuredText. There are also some <a class="reference external" href="http://www.sphinx-doc.org/en/stable/markup/index.html">Sphinx specific
markup constructs</a>.</p>
<div class="section" id="specific-guidelines-for-the-kernel-documentation">
<h2>Specific guidelines for the kernel documentation<a class="headerlink" href="#specific-guidelines-for-the-kernel-documentation" title="Permalink to this headline">¶</a></h2>
<p>Here are some specific guidelines for the kernel documentation:</p>
<ul>
<li><p>Please don’t go overboard with reStructuredText markup. Keep it
simple. For the most part the documentation should be plain text with
just enough consistency in formatting that it can be converted to
other formats.</p></li>
<li><p>Please keep the formatting changes minimal when converting existing
documentation to reStructuredText.</p></li>
<li><p>Also update the content, not just the formatting, when converting
documentation.</p></li>
<li><p>Please stick to this order of heading adornments:</p>
<ol class="arabic">
<li><p><code class="docutils literal notranslate"><span class="pre">=</span></code> with overline for document title:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>==============
Document title
==============
</pre></div>
</div>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">=</span></code> for chapters:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Chapters
========
</pre></div>
</div>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">-</span></code> for sections:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Section
-------
</pre></div>
</div>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">~</span></code> for subsections:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Subsection
~~~~~~~~~~
</pre></div>
</div>
</li>
</ol>
<p>Although RST doesn’t mandate a specific order (“Rather than imposing a fixed
number and order of section title adornment styles, the order enforced will be
the order as encountered.”), having the higher levels the same overall makes
it easier to follow the documents.</p>
</li>
<li><p>For inserting fixed width text blocks (for code examples, use case
examples, etc.), use <code class="docutils literal notranslate"><span class="pre">::</span></code> for anything that doesn’t really benefit
from syntax highlighting, especially short snippets. Use
<code class="docutils literal notranslate"><span class="pre">..</span> <span class="pre">code-block::</span> <span class="pre">&lt;language&gt;</span></code> for longer code blocks that benefit
from highlighting. For a short snippet of code embedded in the text, use ``.</p></li>
</ul>
</div>
<div class="section" id="the-c-domain">
<h2>the C domain<a class="headerlink" href="#the-c-domain" title="Permalink to this headline">¶</a></h2>
<p>The <strong>Sphinx C Domain</strong> (name c) is suited for documentation of C API. E.g. a
function prototype:</p>
<div class="highlight-rst notranslate"><div class="highlight"><pre><span></span><span class="p">..</span> <span class="ow">c:function</span><span class="p">::</span> int ioctl( int fd, int request )
</pre></div>
</div>
<p>The C domain of the kernel-doc has some additional features. E.g. you can
<em>rename</em> the reference name of a function with a common name like <code class="docutils literal notranslate"><span class="pre">open</span></code> or
<code class="docutils literal notranslate"><span class="pre">ioctl</span></code>:</p>
<div class="highlight-rst notranslate"><div class="highlight"><pre><span></span><span class="p">..</span> <span class="ow">c:function</span><span class="p">::</span> int ioctl( int fd, int request )
   <span class="nc">:name:</span> VIDIOC_LOG_STATUS
</pre></div>
</div>
<p>The func-name (e.g. ioctl) remains in the output but the ref-name changed from
<code class="docutils literal notranslate"><span class="pre">ioctl</span></code> to <code class="docutils literal notranslate"><span class="pre">VIDIOC_LOG_STATUS</span></code>. The index entry for this function is also
changed to <code class="docutils literal notranslate"><span class="pre">VIDIOC_LOG_STATUS</span></code>.</p>
<p>Please note that there is no need to use <code class="docutils literal notranslate"><span class="pre">c:func:</span></code> to generate cross
references to function documentation.  Due to some Sphinx extension magic,
the documentation build system will automatically turn a reference to
<code class="docutils literal notranslate"><span class="pre">function()</span></code> into a cross reference if an index entry for the given
function name exists.  If you see <code class="docutils literal notranslate"><span class="pre">c:func:</span></code> use in a kernel document,
please feel free to remove it.</p>
</div>
<div class="section" id="list-tables">
<h2>list tables<a class="headerlink" href="#list-tables" title="Permalink to this headline">¶</a></h2>
<p>We recommend the use of <em>list table</em> formats. The <em>list table</em> formats are
double-stage lists. Compared to the ASCII-art they might not be as
comfortable for
readers of the text files. Their advantage is that they are easy to
create or modify and that the diff of a modification is much more meaningful,
because it is limited to the modified content.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">flat-table</span></code> is a double-stage list similar to the <code class="docutils literal notranslate"><span class="pre">list-table</span></code> with
some additional features:</p>
<ul class="simple">
<li><p>column-span: with the role <code class="docutils literal notranslate"><span class="pre">cspan</span></code> a cell can be extended through
additional columns</p></li>
<li><p>row-span: with the role <code class="docutils literal notranslate"><span class="pre">rspan</span></code> a cell can be extended through
additional rows</p></li>
<li><p>auto span rightmost cell of a table row over the missing cells on the right
side of that table-row.  With Option <code class="docutils literal notranslate"><span class="pre">:fill-cells:</span></code> this behavior can
changed from <em>auto span</em> to <em>auto fill</em>, which automatically inserts (empty)
cells instead of spanning the last cell.</p></li>
</ul>
<p>options:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">:header-rows:</span></code>   [int] count of header rows</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">:stub-columns:</span></code>  [int] count of stub columns</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">:widths:</span></code>        [[int] [int] … ] widths of columns</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">:fill-cells:</span></code>    instead of auto-spanning missing cells, insert missing cells</p></li>
</ul>
<p>roles:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">:cspan:</span></code> [int] additional columns (<em>morecols</em>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">:rspan:</span></code> [int] additional rows (<em>morerows</em>)</p></li>
</ul>
<p>The example below shows how to use this markup.  The first level of the staged
list is the <em>table-row</em>. In the <em>table-row</em> there is only one markup allowed,
the list of the cells in this <em>table-row</em>. Exceptions are <em>comments</em> ( <code class="docutils literal notranslate"><span class="pre">..</span></code> )
and <em>targets</em> (e.g. a ref to <code class="docutils literal notranslate"><span class="pre">:ref:`last</span> <span class="pre">row</span> <span class="pre">&lt;last</span> <span class="pre">row&gt;`</span></code> / <a class="reference internal" href="#last-row"><span class="std std-ref">last row</span></a>).</p>
<div class="highlight-rst notranslate"><div class="highlight"><pre><span></span><span class="p">..</span> <span class="ow">flat-table</span><span class="p">::</span> table title
   <span class="nc">:widths:</span> 2 1 1 3

   <span class="m">*</span> - head col 1
     <span class="m">-</span> head col 2
     <span class="m">-</span> head col 3
     <span class="m">-</span> head col 4

   <span class="m">*</span> - row 1
     <span class="m">-</span> field 1.1
     <span class="m">-</span> field 1.2 with autospan

   <span class="m">*</span> - row 2
     <span class="m">-</span> field 2.1
     <span class="m">-</span> <span class="na">:rspan:</span><span class="nv">`1`</span> <span class="na">:cspan:</span><span class="nv">`1`</span> field 2.2 - 3.3

   <span class="m">*</span> .. _<span class="nv">`last row`</span>:

     <span class="m">-</span> row 3
</pre></div>
</div>
<p>Rendered as:</p>
<blockquote>
<div><table class="docutils align-default" id="id2">
<caption><span class="caption-text">table title</span><a class="headerlink" href="#id2" title="Permalink to this table">¶</a></caption>
<colgroup>
<col style="width: 29%" />
<col style="width: 14%" />
<col style="width: 14%" />
<col style="width: 43%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>head col 1</p></td>
<td><p>head col 2</p></td>
<td><p>head col 3</p></td>
<td><p>head col 4</p></td>
</tr>
<tr class="row-even"><td><p>row 1</p></td>
<td><p>field 1.1</p></td>
<td colspan="2"><p>field 1.2 with autospan</p></td>
</tr>
<tr class="row-odd"><td><p>row 2</p></td>
<td><p>field 2.1</p></td>
<td colspan="2" rowspan="2"><p>  field 2.2 - 3.3</p></td>
</tr>
<tr class="row-even"><td><p id="last-row">row 3</p>
</td>
<td></td>
</tr>
</tbody>
</table>
</div></blockquote>
</div>
<div class="section" id="cross-referencing">
<h2>Cross-referencing<a class="headerlink" href="#cross-referencing" title="Permalink to this headline">¶</a></h2>
<p>Cross-referencing from one documentation page to another can be done by passing
the path to the file starting from the Documentation folder.
For example, to cross-reference to this page (the .rst extension is optional):</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>See Documentation/doc-guide/sphinx.rst.
</pre></div>
</div>
<p>If you want to use a relative path, you need to use Sphinx’s <code class="docutils literal notranslate"><span class="pre">doc</span></code> directive.
For example, referencing this page from the same directory would be done as:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>See :doc:`sphinx`.
</pre></div>
</div>
<p>For information on cross-referencing to kernel-doc functions or types, see
<a class="reference internal" href="kernel-doc.html"><span class="doc">Writing kernel-doc comments</span></a>.</p>
</div>
</div>
<div class="section" id="figures-images">
<span id="sphinx-kfigure"></span><h1>Figures &amp; Images<a class="headerlink" href="#figures-images" title="Permalink to this headline">¶</a></h1>
<p>If you want to add an image, you should use the <code class="docutils literal notranslate"><span class="pre">kernel-figure</span></code> and
<code class="docutils literal notranslate"><span class="pre">kernel-image</span></code> directives. E.g. to insert a figure with a scalable
image format, use SVG (<a class="reference internal" href="#svg-image-example"><span class="std std-ref">SVG image example</span></a>):</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>.. kernel-figure::  svg_image.svg
   :alt:    simple SVG image

   SVG image example
</pre></div>
</div>
<div class="figure align-default" id="id3">
<img alt="simple SVG image" src="../_images/svg_image1.svg" /><p class="caption"><span class="caption-text">SVG image example</span><a class="headerlink" href="#id3" title="Permalink to this image">¶</a></p>
</div>
<p>The kernel figure (and image) directive supports <strong>DOT</strong> formatted files, see</p>
<ul class="simple">
<li><p>DOT: <a class="reference external" href="http://graphviz.org/pdf/dotguide.pdf">http://graphviz.org/pdf/dotguide.pdf</a></p></li>
<li><p>Graphviz: <a class="reference external" href="http://www.graphviz.org/content/dot-language">http://www.graphviz.org/content/dot-language</a></p></li>
</ul>
<p>A simple example (<a class="reference internal" href="#hello-dot-file"><span class="std std-ref">DOT’s hello world example</span></a>):</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>.. kernel-figure::  hello.dot
   :alt:    hello world

   DOT&#39;s hello world example
</pre></div>
</div>
<div class="figure align-default" id="id4">
<img alt="hello world" src="../_images/hello.svg" /><p class="caption"><span class="caption-text">DOT’s hello world example</span><a class="headerlink" href="#id4" title="Permalink to this image">¶</a></p>
</div>
<p>Embedded <em>render</em> markups (or languages) like Graphviz’s <strong>DOT</strong> are provided by the
<code class="docutils literal notranslate"><span class="pre">kernel-render</span></code> directives.:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>.. kernel-render:: DOT
   :alt: foobar digraph
   :caption: Embedded **DOT** (Graphviz) code

   digraph foo {
    &quot;bar&quot; -&gt; &quot;baz&quot;;
   }
</pre></div>
</div>
<p>How this will be rendered depends on the installed tools. If Graphviz is
installed, you will see a vector image. If not, the raw markup is inserted as
<em>literal-block</em> (<a class="reference internal" href="#hello-dot-render"><span class="std std-ref">Embedded DOT (Graphviz) code</span></a>).</p>
<div class="figure align-default" id="id5">
<span id="hello-dot-render"></span><img alt="foobar digraph" src="../_images/DOT-1e38538b2ff52f303e5ecd4abe763316501a0a12.svg" /><p class="caption"><span class="caption-text">Embedded <strong>DOT</strong> (Graphviz) code</span><a class="headerlink" href="#id5" title="Permalink to this image">¶</a></p>
</div>
<p>The <em>render</em> directive has all the options known from the <em>figure</em> directive,
plus option <code class="docutils literal notranslate"><span class="pre">caption</span></code>.  If <code class="docutils literal notranslate"><span class="pre">caption</span></code> has a value, a <em>figure</em> node is
inserted. If not, an <em>image</em> node is inserted. A <code class="docutils literal notranslate"><span class="pre">caption</span></code> is also needed, if
you want to refer to it (<a class="reference internal" href="#hello-svg-render"><span class="std std-ref">Embedded SVG markup</span></a>).</p>
<p>Embedded <strong>SVG</strong>:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>.. kernel-render:: SVG
   :caption: Embedded **SVG** markup
   :alt: so-nw-arrow

   &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
   &lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; version=&quot;1.1&quot; ...&gt;
      ...
   &lt;/svg&gt;
</pre></div>
</div>
<div class="figure align-default" id="id6">
<span id="hello-svg-render"></span><img alt="so-nw-arrow" src="../_images/SVG-3bcc8521eb73e7bcc8b0de14afcc31d733ec6b25.svg" /><p class="caption"><span class="caption-text">Embedded <strong>SVG</strong> markup</span><a class="headerlink" href="#id6" title="Permalink to this image">¶</a></p>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="kernel-doc.html" class="btn btn-neutral float-right" title="Writing kernel-doc comments" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="index.html" class="btn btn-neutral float-left" title="How to write kernel documentation" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright The kernel development community.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>