

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Documentation for /proc/sys/vm/ &mdash; The Linux Kernel  documentation</title>
  

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/theme_overrides.css" type="text/css" />

  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Linux ABI description" href="../abi.html" />
    <link rel="prev" title="Documentation for /proc/sys/user/" href="user.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html" class="icon icon-home" alt="Documentation Home"> The Linux Kernel
          

          
          </a>

          
            
            
              <div class="version">
                5.10.0-rc2
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">The Linux kernel user’s and administrator’s guide</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../README.html">Linux kernel release 5.x &lt;http://kernel.org/&gt;</a></li>
<li class="toctree-l2"><a class="reference internal" href="../kernel-parameters.html">The kernel’s command-line parameters</a></li>
<li class="toctree-l2"><a class="reference internal" href="../devices.html">Linux allocated devices (4.x+ version)</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">Documentation for /proc/sys</a><ul class="current">
<li class="toctree-l3 current"><a class="reference internal" href="index.html#introduction">Introduction</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="abi.html">Documentation for /proc/sys/abi/</a></li>
<li class="toctree-l4"><a class="reference internal" href="fs.html">Documentation for /proc/sys/fs/</a></li>
<li class="toctree-l4"><a class="reference internal" href="kernel.html">Documentation for /proc/sys/kernel/</a></li>
<li class="toctree-l4"><a class="reference internal" href="net.html">Documentation for /proc/sys/net/</a></li>
<li class="toctree-l4"><a class="reference internal" href="sunrpc.html">Documentation for /proc/sys/sunrpc/</a></li>
<li class="toctree-l4"><a class="reference internal" href="user.html">Documentation for /proc/sys/user/</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">Documentation for /proc/sys/vm/</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../abi.html">Linux ABI description</a></li>
<li class="toctree-l2"><a class="reference internal" href="../hw-vuln/index.html">Hardware vulnerabilities</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reporting-bugs.html">Reporting bugs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../security-bugs.html">Security bugs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../bug-hunting.html">Bug hunting</a></li>
<li class="toctree-l2"><a class="reference internal" href="../bug-bisect.html">Bisecting a bug</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tainted-kernels.html">Tainted kernels</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ramoops.html">Ramoops oops/panic logger</a></li>
<li class="toctree-l2"><a class="reference internal" href="../dynamic-debug-howto.html">Dynamic debug</a></li>
<li class="toctree-l2"><a class="reference internal" href="../init.html">Explaining the “No working init found.” boot hang message</a></li>
<li class="toctree-l2"><a class="reference internal" href="../kdump/index.html">Documentation for Kdump - The kexec-based Crash Dumping Solution</a></li>
<li class="toctree-l2"><a class="reference internal" href="../perf/index.html">Performance monitor support</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pstore-blk.html">pstore block oops/panic logger</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sysfs-rules.html">Rules on how to access information in sysfs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../acpi/index.html">ACPI Support</a></li>
<li class="toctree-l2"><a class="reference internal" href="../aoe/index.html">ATA over Ethernet (AoE)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../auxdisplay/index.html">Auxiliary Display Support</a></li>
<li class="toctree-l2"><a class="reference internal" href="../bcache.html">A block layer cache (bcache)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../binderfs.html">The Android binderfs Filesystem</a></li>
<li class="toctree-l2"><a class="reference internal" href="../binfmt-misc.html">Kernel Support for miscellaneous Binary Formats (binfmt_misc)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../blockdev/index.html">The Linux RapidIO Subsystem</a></li>
<li class="toctree-l2"><a class="reference internal" href="../bootconfig.html">Boot Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../braille-console.html">Linux Braille Console</a></li>
<li class="toctree-l2"><a class="reference internal" href="../btmrvl.html">btmrvl driver</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cgroup-v1/index.html">Control Groups version 1</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cgroup-v2.html">Control Group v2</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cifs/index.html">CIFS</a></li>
<li class="toctree-l2"><a class="reference internal" href="../clearing-warn-once.html">Clearing WARN_ONCE</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cpu-load.html">CPU load</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cputopology.html">How CPU topology info is exported via sysfs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../dell_rbu.html">Dell Remote BIOS Update driver (dell_rbu)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../device-mapper/index.html">Device Mapper</a></li>
<li class="toctree-l2"><a class="reference internal" href="../edid.html">EDID</a></li>
<li class="toctree-l2"><a class="reference internal" href="../efi-stub.html">The EFI Boot Stub</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ext4.html">ext4 General Information</a></li>
<li class="toctree-l2"><a class="reference internal" href="../nfs/index.html">NFS</a></li>
<li class="toctree-l2"><a class="reference internal" href="../gpio/index.html">gpio</a></li>
<li class="toctree-l2"><a class="reference internal" href="../highuid.html">Notes on the change from 16-bit UIDs to 32-bit UIDs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../hw_random.html">Linux support for random number generator in i8xx chipsets</a></li>
<li class="toctree-l2"><a class="reference internal" href="../initrd.html">Using the initial RAM disk (initrd)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iostats.html">I/O statistics fields</a></li>
<li class="toctree-l2"><a class="reference internal" href="../java.html">Java(tm) Binary Kernel Support for Linux v1.03</a></li>
<li class="toctree-l2"><a class="reference internal" href="../jfs.html">IBM’s Journaled File System (JFS) for Linux</a></li>
<li class="toctree-l2"><a class="reference internal" href="../kernel-per-CPU-kthreads.html">Reducing OS jitter due to per-cpu kthreads</a></li>
<li class="toctree-l2"><a class="reference internal" href="../laptops/index.html">Laptop Drivers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../lcd-panel-cgram.html">Parallel port LCD/Keypad Panel support</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ldm.html">LDM - Logical Disk Manager (Dynamic Disks)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../lockup-watchdogs.html">Softlockup detector and hardlockup detector (aka nmi_watchdog)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../LSM/index.html">Linux Security Module Usage</a></li>
<li class="toctree-l2"><a class="reference internal" href="../md.html">RAID arrays</a></li>
<li class="toctree-l2"><a class="reference internal" href="../media/index.html">Media subsystem admin and user guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="../mm/index.html">Memory Management</a></li>
<li class="toctree-l2"><a class="reference internal" href="../module-signing.html">Kernel module signing facility</a></li>
<li class="toctree-l2"><a class="reference internal" href="../mono.html">Mono(tm) Binary Kernel Support for Linux</a></li>
<li class="toctree-l2"><a class="reference internal" href="../namespaces/index.html">Namespaces</a></li>
<li class="toctree-l2"><a class="reference internal" href="../numastat.html">Numa policy hit/miss statistics</a></li>
<li class="toctree-l2"><a class="reference internal" href="../parport.html">Parport</a></li>
<li class="toctree-l2"><a class="reference internal" href="../perf-security.html">Perf events and tool security</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pm/index.html">Power Management</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pnp.html">Linux Plug and Play Documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../rapidio.html">RapidIO Subsystem Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ras.html">Reliability, Availability and Serviceability</a></li>
<li class="toctree-l2"><a class="reference internal" href="../rtc.html">Real Time Clock (RTC) Drivers for Linux</a></li>
<li class="toctree-l2"><a class="reference internal" href="../serial-console.html">Linux Serial Console</a></li>
<li class="toctree-l2"><a class="reference internal" href="../svga.html">Video Mode Selection Support 2.13</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sysrq.html">Linux Magic System Request Key Hacks</a></li>
<li class="toctree-l2"><a class="reference internal" href="../thunderbolt.html">USB4 and Thunderbolt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ufs.html">Using UFS</a></li>
<li class="toctree-l2"><a class="reference internal" href="../unicode.html">Unicode support</a></li>
<li class="toctree-l2"><a class="reference internal" href="../vga-softcursor.html">Software cursor for VGA</a></li>
<li class="toctree-l2"><a class="reference internal" href="../video-output.html">Video Output Switcher Control</a></li>
<li class="toctree-l2"><a class="reference internal" href="../wimax/index.html">WiMAX subsystem</a></li>
<li class="toctree-l2"><a class="reference internal" href="../xfs.html">The SGI XFS Filesystem</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../kbuild/index.html">Kernel Build System</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../firmware-guide/index.html">The Linux kernel firmware guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../devicetree/index.html">Open Firmware and Device Tree</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../userspace-api/index.html">The Linux kernel user-space API guide</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../process/index.html">Working with the kernel development community</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../dev-tools/index.html">Development tools for the kernel</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../doc-guide/index.html">How to write kernel documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../kernel-hacking/index.html">Kernel Hacking Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../trace/index.html">Linux Tracing Technologies</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../maintainer/index.html">Kernel Maintainer Handbook</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../fault-injection/index.html">fault-injection</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../livepatch/index.html">Kernel Livepatching</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../driver-api/index.html">The Linux driver implementer’s API guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../core-api/index.html">Core API Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../locking/index.html">locking</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../accounting/index.html">Accounting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../block/index.html">Block</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../cdrom/index.html">cdrom</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../cpu-freq/index.html">Linux CPUFreq - CPU frequency and voltage scaling code in the Linux(TM) kernel</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../ide/index.html">Integrated Drive Electronics (IDE)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../fb/index.html">Frame Buffer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../fpga/index.html">fpga</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../hid/index.html">Human Interface Devices (HID)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../i2c/index.html">I2C/SMBus Subsystem</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../iio/index.html">Industrial I/O</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../isdn/index.html">ISDN</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../infiniband/index.html">InfiniBand</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../leds/index.html">LEDs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../netlabel/index.html">NetLabel</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../networking/index.html">Linux Networking Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../pcmcia/index.html">pcmcia</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../power/index.html">Power Management</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../target/index.html">TCM Virtual Device</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../timers/index.html">timers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../spi/index.html">Serial Peripheral Interface (SPI)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../w1/index.html">1-Wire Subsystem</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../watchdog/index.html">Linux Watchdog Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../virt/index.html">Linux Virtualization Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../input/index.html">The Linux Input Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../hwmon/index.html">Linux Hardware Monitoring</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../gpu/index.html">Linux GPU Driver Developer’s Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../security/index.html">Security Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../sound/index.html">Linux Sound Subsystem Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../crypto/index.html">Linux Kernel Crypto API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../filesystems/index.html">Filesystems in the Linux kernel</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../vm/index.html">Linux Memory Management Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../bpf/index.html">BPF Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../usb/index.html">USB support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../PCI/index.html">Linux PCI Bus Subsystem</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../scsi/index.html">Linux SCSI Subsystem</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../misc-devices/index.html">Assorted Miscellaneous Devices Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../scheduler/index.html">Linux Scheduler</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../mhi/index.html">MHI</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../asm-annotations.html">Assembler Annotations</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../arm/index.html">ARM Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../arm64/index.html">ARM64 Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../ia64/index.html">IA-64 Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../m68k/index.html">m68k Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../mips/index.html">MIPS-specific Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../nios2/nios2.html">Linux on the Nios II architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../openrisc/index.html">OpenRISC Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../parisc/index.html">PA-RISC Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../powerpc/index.html">powerpc</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../riscv/index.html">RISC-V architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../s390/index.html">s390 Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../sh/index.html">SuperH Interfaces Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../sparc/index.html">Sparc Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../x86/index.html">x86-specific Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../xtensa/index.html">Xtensa Architecture</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../filesystems/ext4/index.html">ext4 Data Structures and Algorithms</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../staging/index.html">Unsorted Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../staging/index.html#atomic-types">Atomic Types</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../staging/index.html#atomic-bitops">Atomic bitops</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../staging/index.html#memory-barriers">Memory Barriers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../watch_queue.html">General notification mechanism</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../translations/index.html">Translations</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">The Linux Kernel</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../index.html">The Linux kernel user’s and administrator’s guide</a> &raquo;</li>
        
          <li><a href="index.html">Documentation for /proc/sys</a> &raquo;</li>
        
      <li>Documentation for /proc/sys/vm/</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../_sources/admin-guide/sysctl/vm.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="documentation-for-proc-sys-vm">
<h1>Documentation for /proc/sys/vm/<a class="headerlink" href="#documentation-for-proc-sys-vm" title="Permalink to this headline">¶</a></h1>
<p>kernel version 2.6.29</p>
<p>Copyright (c) 1998, 1999,  Rik van Riel &lt;<a class="reference external" href="mailto:riel&#37;&#52;&#48;nl&#46;linux&#46;org">riel<span>&#64;</span>nl<span>&#46;</span>linux<span>&#46;</span>org</a>&gt;</p>
<p>Copyright (c) 2008         Peter W. Morreale &lt;<a class="reference external" href="mailto:pmorreale&#37;&#52;&#48;novell&#46;com">pmorreale<span>&#64;</span>novell<span>&#46;</span>com</a>&gt;</p>
<p>For general info and legal blurb, please look in index.rst.</p>
<hr class="docutils" />
<p>This file contains the documentation for the sysctl files in
/proc/sys/vm and is valid for Linux kernel version 2.6.29.</p>
<p>The files in this directory can be used to tune the operation
of the virtual memory (VM) subsystem of the Linux kernel and
the writeout of dirty data to disk.</p>
<p>Default values and initialization routines for most of these
files can be found in mm/swap.c.</p>
<p>Currently, these files are in /proc/sys/vm:</p>
<ul class="simple">
<li><p>admin_reserve_kbytes</p></li>
<li><p>block_dump</p></li>
<li><p>compact_memory</p></li>
<li><p>compaction_proactiveness</p></li>
<li><p>compact_unevictable_allowed</p></li>
<li><p>dirty_background_bytes</p></li>
<li><p>dirty_background_ratio</p></li>
<li><p>dirty_bytes</p></li>
<li><p>dirty_expire_centisecs</p></li>
<li><p>dirty_ratio</p></li>
<li><p>dirtytime_expire_seconds</p></li>
<li><p>dirty_writeback_centisecs</p></li>
<li><p>drop_caches</p></li>
<li><p>extfrag_threshold</p></li>
<li><p>highmem_is_dirtyable</p></li>
<li><p>hugetlb_shm_group</p></li>
<li><p>laptop_mode</p></li>
<li><p>legacy_va_layout</p></li>
<li><p>lowmem_reserve_ratio</p></li>
<li><p>max_map_count</p></li>
<li><p>memory_failure_early_kill</p></li>
<li><p>memory_failure_recovery</p></li>
<li><p>min_free_kbytes</p></li>
<li><p>min_slab_ratio</p></li>
<li><p>min_unmapped_ratio</p></li>
<li><p>mmap_min_addr</p></li>
<li><p>mmap_rnd_bits</p></li>
<li><p>mmap_rnd_compat_bits</p></li>
<li><p>nr_hugepages</p></li>
<li><p>nr_hugepages_mempolicy</p></li>
<li><p>nr_overcommit_hugepages</p></li>
<li><p>nr_trim_pages         (only if CONFIG_MMU=n)</p></li>
<li><p>numa_zonelist_order</p></li>
<li><p>oom_dump_tasks</p></li>
<li><p>oom_kill_allocating_task</p></li>
<li><p>overcommit_kbytes</p></li>
<li><p>overcommit_memory</p></li>
<li><p>overcommit_ratio</p></li>
<li><p>page-cluster</p></li>
<li><p>panic_on_oom</p></li>
<li><p>percpu_pagelist_fraction</p></li>
<li><p>stat_interval</p></li>
<li><p>stat_refresh</p></li>
<li><p>numa_stat</p></li>
<li><p>swappiness</p></li>
<li><p>unprivileged_userfaultfd</p></li>
<li><p>user_reserve_kbytes</p></li>
<li><p>vfs_cache_pressure</p></li>
<li><p>watermark_boost_factor</p></li>
<li><p>watermark_scale_factor</p></li>
<li><p>zone_reclaim_mode</p></li>
</ul>
<div class="section" id="admin-reserve-kbytes">
<h2>admin_reserve_kbytes<a class="headerlink" href="#admin-reserve-kbytes" title="Permalink to this headline">¶</a></h2>
<p>The amount of free memory in the system that should be reserved for users
with the capability cap_sys_admin.</p>
<p>admin_reserve_kbytes defaults to min(3% of free pages, 8MB)</p>
<p>That should provide enough for the admin to log in and kill a process,
if necessary, under the default overcommit ‘guess’ mode.</p>
<p>Systems running under overcommit ‘never’ should increase this to account
for the full Virtual Memory Size of programs used to recover. Otherwise,
root may not be able to log in to recover the system.</p>
<p>How do you calculate a minimum useful reserve?</p>
<p>sshd or login + bash (or some other shell) + top (or ps, kill, etc.)</p>
<p>For overcommit ‘guess’, we can sum resident set sizes (RSS).
On x86_64 this is about 8MB.</p>
<p>For overcommit ‘never’, we can take the max of their virtual sizes (VSZ)
and add the sum of their RSS.
On x86_64 this is about 128MB.</p>
<p>Changing this takes effect whenever an application requests memory.</p>
</div>
<div class="section" id="block-dump">
<h2>block_dump<a class="headerlink" href="#block-dump" title="Permalink to this headline">¶</a></h2>
<p>block_dump enables block I/O debugging when set to a nonzero value. More
information on block I/O debugging is in <a class="reference internal" href="../laptops/laptop-mode.html"><span class="doc">How to conserve battery power using laptop-mode</span></a>.</p>
</div>
<div class="section" id="compact-memory">
<h2>compact_memory<a class="headerlink" href="#compact-memory" title="Permalink to this headline">¶</a></h2>
<p>Available only when CONFIG_COMPACTION is set. When 1 is written to the file,
all zones are compacted such that free memory is available in contiguous
blocks where possible. This can be important for example in the allocation of
huge pages although processes will also directly compact memory as required.</p>
</div>
<div class="section" id="compaction-proactiveness">
<h2>compaction_proactiveness<a class="headerlink" href="#compaction-proactiveness" title="Permalink to this headline">¶</a></h2>
<p>This tunable takes a value in the range [0, 100] with a default value of
20. This tunable determines how aggressively compaction is done in the
background. Setting it to 0 disables proactive compaction.</p>
<p>Note that compaction has a non-trivial system-wide impact as pages
belonging to different processes are moved around, which could also lead
to latency spikes in unsuspecting applications. The kernel employs
various heuristics to avoid wasting CPU cycles if it detects that
proactive compaction is not being effective.</p>
<p>Be careful when setting it to extreme values like 100, as that may
cause excessive background compaction activity.</p>
</div>
<div class="section" id="compact-unevictable-allowed">
<h2>compact_unevictable_allowed<a class="headerlink" href="#compact-unevictable-allowed" title="Permalink to this headline">¶</a></h2>
<p>Available only when CONFIG_COMPACTION is set. When set to 1, compaction is
allowed to examine the unevictable lru (mlocked pages) for pages to compact.
This should be used on systems where stalls for minor page faults are an
acceptable trade for large contiguous free memory.  Set to 0 to prevent
compaction from moving pages that are unevictable.  Default value is 1.
On CONFIG_PREEMPT_RT the default value is 0 in order to avoid a page fault, due
to compaction, which would block the task from becomming active until the fault
is resolved.</p>
</div>
<div class="section" id="dirty-background-bytes">
<h2>dirty_background_bytes<a class="headerlink" href="#dirty-background-bytes" title="Permalink to this headline">¶</a></h2>
<p>Contains the amount of dirty memory at which the background kernel
flusher threads will start writeback.</p>
<dl class="simple">
<dt>Note:</dt><dd><p>dirty_background_bytes is the counterpart of dirty_background_ratio. Only
one of them may be specified at a time. When one sysctl is written it is
immediately taken into account to evaluate the dirty memory limits and the
other appears as 0 when read.</p>
</dd>
</dl>
</div>
<div class="section" id="dirty-background-ratio">
<h2>dirty_background_ratio<a class="headerlink" href="#dirty-background-ratio" title="Permalink to this headline">¶</a></h2>
<p>Contains, as a percentage of total available memory that contains free pages
and reclaimable pages, the number of pages at which the background kernel
flusher threads will start writing out dirty data.</p>
<p>The total available memory is not equal to total system memory.</p>
</div>
<div class="section" id="dirty-bytes">
<h2>dirty_bytes<a class="headerlink" href="#dirty-bytes" title="Permalink to this headline">¶</a></h2>
<p>Contains the amount of dirty memory at which a process generating disk writes
will itself start writeback.</p>
<p>Note: dirty_bytes is the counterpart of dirty_ratio. Only one of them may be
specified at a time. When one sysctl is written it is immediately taken into
account to evaluate the dirty memory limits and the other appears as 0 when
read.</p>
<p>Note: the minimum value allowed for dirty_bytes is two pages (in bytes); any
value lower than this limit will be ignored and the old configuration will be
retained.</p>
</div>
<div class="section" id="dirty-expire-centisecs">
<h2>dirty_expire_centisecs<a class="headerlink" href="#dirty-expire-centisecs" title="Permalink to this headline">¶</a></h2>
<p>This tunable is used to define when dirty data is old enough to be eligible
for writeout by the kernel flusher threads.  It is expressed in 100’ths
of a second.  Data which has been dirty in-memory for longer than this
interval will be written out next time a flusher thread wakes up.</p>
</div>
<div class="section" id="dirty-ratio">
<h2>dirty_ratio<a class="headerlink" href="#dirty-ratio" title="Permalink to this headline">¶</a></h2>
<p>Contains, as a percentage of total available memory that contains free pages
and reclaimable pages, the number of pages at which a process which is
generating disk writes will itself start writing out dirty data.</p>
<p>The total available memory is not equal to total system memory.</p>
</div>
<div class="section" id="dirtytime-expire-seconds">
<h2>dirtytime_expire_seconds<a class="headerlink" href="#dirtytime-expire-seconds" title="Permalink to this headline">¶</a></h2>
<p>When a lazytime inode is constantly having its pages dirtied, the inode with
an updated timestamp will never get chance to be written out.  And, if the
only thing that has happened on the file system is a dirtytime inode caused
by an atime update, a worker will be scheduled to make sure that inode
eventually gets pushed out to disk.  This tunable is used to define when dirty
inode is old enough to be eligible for writeback by the kernel flusher threads.
And, it is also used as the interval to wakeup dirtytime_writeback thread.</p>
</div>
<div class="section" id="dirty-writeback-centisecs">
<h2>dirty_writeback_centisecs<a class="headerlink" href="#dirty-writeback-centisecs" title="Permalink to this headline">¶</a></h2>
<p>The kernel flusher threads will periodically wake up and write <cite>old</cite> data
out to disk.  This tunable expresses the interval between those wakeups, in
100’ths of a second.</p>
<p>Setting this to zero disables periodic writeback altogether.</p>
</div>
<div class="section" id="drop-caches">
<h2>drop_caches<a class="headerlink" href="#drop-caches" title="Permalink to this headline">¶</a></h2>
<p>Writing to this will cause the kernel to drop clean caches, as well as
reclaimable slab objects like dentries and inodes.  Once dropped, their
memory becomes free.</p>
<p>To free pagecache:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>echo 1 &gt; /proc/sys/vm/drop_caches
</pre></div>
</div>
<p>To free reclaimable slab objects (includes dentries and inodes):</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>echo 2 &gt; /proc/sys/vm/drop_caches
</pre></div>
</div>
<p>To free slab objects and pagecache:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>echo 3 &gt; /proc/sys/vm/drop_caches
</pre></div>
</div>
<p>This is a non-destructive operation and will not free any dirty objects.
To increase the number of objects freed by this operation, the user may run
<cite>sync</cite> prior to writing to /proc/sys/vm/drop_caches.  This will minimize the
number of dirty objects on the system and create more candidates to be
dropped.</p>
<p>This file is not a means to control the growth of the various kernel caches
(inodes, dentries, pagecache, etc…)  These objects are automatically
reclaimed by the kernel when memory is needed elsewhere on the system.</p>
<p>Use of this file can cause performance problems.  Since it discards cached
objects, it may cost a significant amount of I/O and CPU to recreate the
dropped objects, especially if they were under heavy use.  Because of this,
use outside of a testing or debugging environment is not recommended.</p>
<p>You may see informational messages in your kernel log when this file is
used:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>cat (1234): drop_caches: 3
</pre></div>
</div>
<p>These are informational only.  They do not mean that anything is wrong
with your system.  To disable them, echo 4 (bit 2) into drop_caches.</p>
</div>
<div class="section" id="extfrag-threshold">
<h2>extfrag_threshold<a class="headerlink" href="#extfrag-threshold" title="Permalink to this headline">¶</a></h2>
<p>This parameter affects whether the kernel will compact memory or direct
reclaim to satisfy a high-order allocation. The extfrag/extfrag_index file in
debugfs shows what the fragmentation index for each order is in each zone in
the system. Values tending towards 0 imply allocations would fail due to lack
of memory, values towards 1000 imply failures are due to fragmentation and -1
implies that the allocation will succeed as long as watermarks are met.</p>
<p>The kernel will not compact memory in a zone if the
fragmentation index is &lt;= extfrag_threshold. The default value is 500.</p>
</div>
<div class="section" id="highmem-is-dirtyable">
<h2>highmem_is_dirtyable<a class="headerlink" href="#highmem-is-dirtyable" title="Permalink to this headline">¶</a></h2>
<p>Available only for systems with CONFIG_HIGHMEM enabled (32b systems).</p>
<p>This parameter controls whether the high memory is considered for dirty
writers throttling.  This is not the case by default which means that
only the amount of memory directly visible/usable by the kernel can
be dirtied. As a result, on systems with a large amount of memory and
lowmem basically depleted writers might be throttled too early and
streaming writes can get very slow.</p>
<p>Changing the value to non zero would allow more memory to be dirtied
and thus allow writers to write more data which can be flushed to the
storage more effectively. Note this also comes with a risk of pre-mature
OOM killer because some writers (e.g. direct block device writes) can
only use the low memory and they can fill it up with dirty data without
any throttling.</p>
</div>
<div class="section" id="hugetlb-shm-group">
<h2>hugetlb_shm_group<a class="headerlink" href="#hugetlb-shm-group" title="Permalink to this headline">¶</a></h2>
<p>hugetlb_shm_group contains group id that is allowed to create SysV
shared memory segment using hugetlb page.</p>
</div>
<div class="section" id="laptop-mode">
<h2>laptop_mode<a class="headerlink" href="#laptop-mode" title="Permalink to this headline">¶</a></h2>
<p>laptop_mode is a knob that controls “laptop mode”. All the things that are
controlled by this knob are discussed in <a class="reference internal" href="../laptops/laptop-mode.html"><span class="doc">How to conserve battery power using laptop-mode</span></a>.</p>
</div>
<div class="section" id="legacy-va-layout">
<h2>legacy_va_layout<a class="headerlink" href="#legacy-va-layout" title="Permalink to this headline">¶</a></h2>
<p>If non-zero, this sysctl disables the new 32-bit mmap layout - the kernel
will use the legacy (2.4) layout for all processes.</p>
</div>
<div class="section" id="lowmem-reserve-ratio">
<h2>lowmem_reserve_ratio<a class="headerlink" href="#lowmem-reserve-ratio" title="Permalink to this headline">¶</a></h2>
<p>For some specialised workloads on highmem machines it is dangerous for
the kernel to allow process memory to be allocated from the “lowmem”
zone.  This is because that memory could then be pinned via the mlock()
system call, or by unavailability of swapspace.</p>
<p>And on large highmem machines this lack of reclaimable lowmem memory
can be fatal.</p>
<p>So the Linux page allocator has a mechanism which prevents allocations
which <em>could</em> use highmem from using too much lowmem.  This means that
a certain amount of lowmem is defended from the possibility of being
captured into pinned user memory.</p>
<p>(The same argument applies to the old 16 megabyte ISA DMA region.  This
mechanism will also defend that region from allocations which could use
highmem or lowmem).</p>
<p>The <cite>lowmem_reserve_ratio</cite> tunable determines how aggressive the kernel is
in defending these lower zones.</p>
<p>If you have a machine which uses highmem or ISA DMA and your
applications are using mlock(), or if you are running with no swap then
you probably should change the lowmem_reserve_ratio setting.</p>
<p>The lowmem_reserve_ratio is an array. You can see them by reading this file:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>% cat /proc/sys/vm/lowmem_reserve_ratio
256     256     32
</pre></div>
</div>
<p>But, these values are not used directly. The kernel calculates # of protection
pages for each zones from them. These are shown as array of protection pages
in /proc/zoneinfo like followings. (This is an example of x86-64 box).
Each zone has an array of protection pages like this:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Node 0, zone      DMA
  pages free     1355
        min      3
        low      3
        high     4
      :
      :
    numa_other   0
        protection: (0, 2004, 2004, 2004)
      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  pagesets
    cpu: 0 pcp: 0
        :
</pre></div>
</div>
<p>These protections are added to score to judge whether this zone should be used
for page allocation or should be reclaimed.</p>
<p>In this example, if normal pages (index=2) are required to this DMA zone and
watermark[WMARK_HIGH] is used for watermark, the kernel judges this zone should
not be used because pages_free(1355) is smaller than watermark + protection[2]
(4 + 2004 = 2008). If this protection value is 0, this zone would be used for
normal page requirement. If requirement is DMA zone(index=0), protection[0]
(=0) is used.</p>
<p>zone[i]’s protection[j] is calculated by following expression:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>(i &lt; j):
  zone[i]-&gt;protection[j]
  = (total sums of managed_pages from zone[i+1] to zone[j] on the node)
    / lowmem_reserve_ratio[i];
(i = j):
   (should not be protected. = 0;
(i &gt; j):
   (not necessary, but looks 0)
</pre></div>
</div>
<p>The default values of lowmem_reserve_ratio[i] are</p>
<blockquote>
<div><table class="docutils align-default">
<colgroup>
<col style="width: 8%" />
<col style="width: 92%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>256</p></td>
<td><p>(if zone[i] means DMA or DMA32 zone)</p></td>
</tr>
<tr class="row-even"><td><p>32</p></td>
<td><p>(others)</p></td>
</tr>
</tbody>
</table>
</div></blockquote>
<p>As above expression, they are reciprocal number of ratio.
256 means 1/256. # of protection pages becomes about “0.39%” of total managed
pages of higher zones on the node.</p>
<p>If you would like to protect more pages, smaller values are effective.
The minimum value is 1 (1/1 -&gt; 100%). The value less than 1 completely
disables protection of the pages.</p>
</div>
<div class="section" id="max-map-count">
<h2>max_map_count:<a class="headerlink" href="#max-map-count" title="Permalink to this headline">¶</a></h2>
<p>This file contains the maximum number of memory map areas a process
may have. Memory map areas are used as a side-effect of calling
malloc, directly by mmap, mprotect, and madvise, and also when loading
shared libraries.</p>
<p>While most applications need less than a thousand maps, certain
programs, particularly malloc debuggers, may consume lots of them,
e.g., up to one or two maps per allocation.</p>
<p>The default value is 65536.</p>
</div>
<div class="section" id="memory-failure-early-kill">
<h2>memory_failure_early_kill:<a class="headerlink" href="#memory-failure-early-kill" title="Permalink to this headline">¶</a></h2>
<p>Control how to kill processes when uncorrected memory error (typically
a 2bit error in a memory module) is detected in the background by hardware
that cannot be handled by the kernel. In some cases (like the page
still having a valid copy on disk) the kernel will handle the failure
transparently without affecting any applications. But if there is
no other uptodate copy of the data it will kill to prevent any data
corruptions from propagating.</p>
<p>1: Kill all processes that have the corrupted and not reloadable page mapped
as soon as the corruption is detected.  Note this is not supported
for a few types of pages, like kernel internally allocated data or
the swap cache, but works for the majority of user pages.</p>
<p>0: Only unmap the corrupted page from all processes and only kill a process
who tries to access it.</p>
<p>The kill is done using a catchable SIGBUS with BUS_MCEERR_AO, so processes can
handle this if they want to.</p>
<p>This is only active on architectures/platforms with advanced machine
check handling and depends on the hardware capabilities.</p>
<p>Applications can override this setting individually with the PR_MCE_KILL prctl</p>
</div>
<div class="section" id="memory-failure-recovery">
<h2>memory_failure_recovery<a class="headerlink" href="#memory-failure-recovery" title="Permalink to this headline">¶</a></h2>
<p>Enable memory failure recovery (when supported by the platform)</p>
<p>1: Attempt recovery.</p>
<p>0: Always panic on a memory failure.</p>
</div>
<div class="section" id="min-free-kbytes">
<h2>min_free_kbytes<a class="headerlink" href="#min-free-kbytes" title="Permalink to this headline">¶</a></h2>
<p>This is used to force the Linux VM to keep a minimum number
of kilobytes free.  The VM uses this number to compute a
watermark[WMARK_MIN] value for each lowmem zone in the system.
Each lowmem zone gets a number of reserved free pages based
proportionally on its size.</p>
<p>Some minimal amount of memory is needed to satisfy PF_MEMALLOC
allocations; if you set this to lower than 1024KB, your system will
become subtly broken, and prone to deadlock under high loads.</p>
<p>Setting this too high will OOM your machine instantly.</p>
</div>
<div class="section" id="min-slab-ratio">
<h2>min_slab_ratio<a class="headerlink" href="#min-slab-ratio" title="Permalink to this headline">¶</a></h2>
<p>This is available only on NUMA kernels.</p>
<p>A percentage of the total pages in each zone.  On Zone reclaim
(fallback from the local zone occurs) slabs will be reclaimed if more
than this percentage of pages in a zone are reclaimable slab pages.
This insures that the slab growth stays under control even in NUMA
systems that rarely perform global reclaim.</p>
<p>The default is 5 percent.</p>
<p>Note that slab reclaim is triggered in a per zone / node fashion.
The process of reclaiming slab memory is currently not node specific
and may not be fast.</p>
</div>
<div class="section" id="min-unmapped-ratio">
<h2>min_unmapped_ratio<a class="headerlink" href="#min-unmapped-ratio" title="Permalink to this headline">¶</a></h2>
<p>This is available only on NUMA kernels.</p>
<p>This is a percentage of the total pages in each zone. Zone reclaim will
only occur if more than this percentage of pages are in a state that
zone_reclaim_mode allows to be reclaimed.</p>
<p>If zone_reclaim_mode has the value 4 OR’d, then the percentage is compared
against all file-backed unmapped pages including swapcache pages and tmpfs
files. Otherwise, only unmapped pages backed by normal files but not tmpfs
files and similar are considered.</p>
<p>The default is 1 percent.</p>
</div>
<div class="section" id="mmap-min-addr">
<h2>mmap_min_addr<a class="headerlink" href="#mmap-min-addr" title="Permalink to this headline">¶</a></h2>
<p>This file indicates the amount of address space  which a user process will
be restricted from mmapping.  Since kernel null dereference bugs could
accidentally operate based on the information in the first couple of pages
of memory userspace processes should not be allowed to write to them.  By
default this value is set to 0 and no protections will be enforced by the
security module.  Setting this value to something like 64k will allow the
vast majority of applications to work correctly and provide defense in depth
against future potential kernel bugs.</p>
</div>
<div class="section" id="mmap-rnd-bits">
<h2>mmap_rnd_bits<a class="headerlink" href="#mmap-rnd-bits" title="Permalink to this headline">¶</a></h2>
<p>This value can be used to select the number of bits to use to
determine the random offset to the base address of vma regions
resulting from mmap allocations on architectures which support
tuning address space randomization.  This value will be bounded
by the architecture’s minimum and maximum supported values.</p>
<p>This value can be changed after boot using the
/proc/sys/vm/mmap_rnd_bits tunable</p>
</div>
<div class="section" id="mmap-rnd-compat-bits">
<h2>mmap_rnd_compat_bits<a class="headerlink" href="#mmap-rnd-compat-bits" title="Permalink to this headline">¶</a></h2>
<p>This value can be used to select the number of bits to use to
determine the random offset to the base address of vma regions
resulting from mmap allocations for applications run in
compatibility mode on architectures which support tuning address
space randomization.  This value will be bounded by the
architecture’s minimum and maximum supported values.</p>
<p>This value can be changed after boot using the
/proc/sys/vm/mmap_rnd_compat_bits tunable</p>
</div>
<div class="section" id="nr-hugepages">
<h2>nr_hugepages<a class="headerlink" href="#nr-hugepages" title="Permalink to this headline">¶</a></h2>
<p>Change the minimum size of the hugepage pool.</p>
<p>See <a class="reference internal" href="../mm/hugetlbpage.html"><span class="doc">HugeTLB Pages</span></a></p>
</div>
<div class="section" id="nr-hugepages-mempolicy">
<h2>nr_hugepages_mempolicy<a class="headerlink" href="#nr-hugepages-mempolicy" title="Permalink to this headline">¶</a></h2>
<p>Change the size of the hugepage pool at run-time on a specific
set of NUMA nodes.</p>
<p>See <a class="reference internal" href="../mm/hugetlbpage.html"><span class="doc">HugeTLB Pages</span></a></p>
</div>
<div class="section" id="nr-overcommit-hugepages">
<h2>nr_overcommit_hugepages<a class="headerlink" href="#nr-overcommit-hugepages" title="Permalink to this headline">¶</a></h2>
<p>Change the maximum size of the hugepage pool. The maximum is
nr_hugepages + nr_overcommit_hugepages.</p>
<p>See <a class="reference internal" href="../mm/hugetlbpage.html"><span class="doc">HugeTLB Pages</span></a></p>
</div>
<div class="section" id="nr-trim-pages">
<h2>nr_trim_pages<a class="headerlink" href="#nr-trim-pages" title="Permalink to this headline">¶</a></h2>
<p>This is available only on NOMMU kernels.</p>
<p>This value adjusts the excess page trimming behaviour of power-of-2 aligned
NOMMU mmap allocations.</p>
<p>A value of 0 disables trimming of allocations entirely, while a value of 1
trims excess pages aggressively. Any value &gt;= 1 acts as the watermark where
trimming of allocations is initiated.</p>
<p>The default value is 1.</p>
<p>See <a class="reference internal" href="../mm/nommu-mmap.html"><span class="doc">No-MMU memory mapping support</span></a> for more information.</p>
</div>
<div class="section" id="numa-zonelist-order">
<h2>numa_zonelist_order<a class="headerlink" href="#numa-zonelist-order" title="Permalink to this headline">¶</a></h2>
<p>This sysctl is only for NUMA and it is deprecated. Anything but
Node order will fail!</p>
<p>‘where the memory is allocated from’ is controlled by zonelists.</p>
<p>(This documentation ignores ZONE_HIGHMEM/ZONE_DMA32 for simple explanation.
you may be able to read ZONE_DMA as ZONE_DMA32…)</p>
<p>In non-NUMA case, a zonelist for GFP_KERNEL is ordered as following.
ZONE_NORMAL -&gt; ZONE_DMA
This means that a memory allocation request for GFP_KERNEL will
get memory from ZONE_DMA only when ZONE_NORMAL is not available.</p>
<p>In NUMA case, you can think of following 2 types of order.
Assume 2 node NUMA and below is zonelist of Node(0)’s GFP_KERNEL:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>(A) Node(0) ZONE_NORMAL -&gt; Node(0) ZONE_DMA -&gt; Node(1) ZONE_NORMAL
(B) Node(0) ZONE_NORMAL -&gt; Node(1) ZONE_NORMAL -&gt; Node(0) ZONE_DMA.
</pre></div>
</div>
<p>Type(A) offers the best locality for processes on Node(0), but ZONE_DMA
will be used before ZONE_NORMAL exhaustion. This increases possibility of
out-of-memory(OOM) of ZONE_DMA because ZONE_DMA is tend to be small.</p>
<p>Type(B) cannot offer the best locality but is more robust against OOM of
the DMA zone.</p>
<p>Type(A) is called as “Node” order. Type (B) is “Zone” order.</p>
<p>“Node order” orders the zonelists by node, then by zone within each node.
Specify “[Nn]ode” for node order</p>
<p>“Zone Order” orders the zonelists by zone type, then by node within each
zone.  Specify “[Zz]one” for zone order.</p>
<p>Specify “[Dd]efault” to request automatic configuration.</p>
<p>On 32-bit, the Normal zone needs to be preserved for allocations accessible
by the kernel, so “zone” order will be selected.</p>
<p>On 64-bit, devices that require DMA32/DMA are relatively rare, so “node”
order will be selected.</p>
<p>Default order is recommended unless this is causing problems for your
system/application.</p>
</div>
<div class="section" id="oom-dump-tasks">
<h2>oom_dump_tasks<a class="headerlink" href="#oom-dump-tasks" title="Permalink to this headline">¶</a></h2>
<p>Enables a system-wide task dump (excluding kernel threads) to be produced
when the kernel performs an OOM-killing and includes such information as
pid, uid, tgid, vm size, rss, pgtables_bytes, swapents, oom_score_adj
score, and name.  This is helpful to determine why the OOM killer was
invoked, to identify the rogue task that caused it, and to determine why
the OOM killer chose the task it did to kill.</p>
<p>If this is set to zero, this information is suppressed.  On very
large systems with thousands of tasks it may not be feasible to dump
the memory state information for each one.  Such systems should not
be forced to incur a performance penalty in OOM conditions when the
information may not be desired.</p>
<p>If this is set to non-zero, this information is shown whenever the
OOM killer actually kills a memory-hogging task.</p>
<p>The default value is 1 (enabled).</p>
</div>
<div class="section" id="oom-kill-allocating-task">
<h2>oom_kill_allocating_task<a class="headerlink" href="#oom-kill-allocating-task" title="Permalink to this headline">¶</a></h2>
<p>This enables or disables killing the OOM-triggering task in
out-of-memory situations.</p>
<p>If this is set to zero, the OOM killer will scan through the entire
tasklist and select a task based on heuristics to kill.  This normally
selects a rogue memory-hogging task that frees up a large amount of
memory when killed.</p>
<p>If this is set to non-zero, the OOM killer simply kills the task that
triggered the out-of-memory condition.  This avoids the expensive
tasklist scan.</p>
<p>If panic_on_oom is selected, it takes precedence over whatever value
is used in oom_kill_allocating_task.</p>
<p>The default value is 0.</p>
</div>
<div class="section" id="overcommit-kbytes">
<h2>overcommit_kbytes<a class="headerlink" href="#overcommit-kbytes" title="Permalink to this headline">¶</a></h2>
<p>When overcommit_memory is set to 2, the committed address space is not
permitted to exceed swap plus this amount of physical RAM. See below.</p>
<p>Note: overcommit_kbytes is the counterpart of overcommit_ratio. Only one
of them may be specified at a time. Setting one disables the other (which
then appears as 0 when read).</p>
</div>
<div class="section" id="overcommit-memory">
<h2>overcommit_memory<a class="headerlink" href="#overcommit-memory" title="Permalink to this headline">¶</a></h2>
<p>This value contains a flag that enables memory overcommitment.</p>
<p>When this flag is 0, the kernel attempts to estimate the amount
of free memory left when userspace requests more memory.</p>
<p>When this flag is 1, the kernel pretends there is always enough
memory until it actually runs out.</p>
<p>When this flag is 2, the kernel uses a “never overcommit”
policy that attempts to prevent any overcommit of memory.
Note that user_reserve_kbytes affects this policy.</p>
<p>This feature can be very useful because there are a lot of
programs that malloc() huge amounts of memory “just-in-case”
and don’t use much of it.</p>
<p>The default value is 0.</p>
<p>See <a class="reference internal" href="../../vm/overcommit-accounting.html"><span class="doc">Overcommit Accounting</span></a> and
mm/util.c::__vm_enough_memory() for more information.</p>
</div>
<div class="section" id="overcommit-ratio">
<h2>overcommit_ratio<a class="headerlink" href="#overcommit-ratio" title="Permalink to this headline">¶</a></h2>
<p>When overcommit_memory is set to 2, the committed address
space is not permitted to exceed swap plus this percentage
of physical RAM.  See above.</p>
</div>
<div class="section" id="page-cluster">
<h2>page-cluster<a class="headerlink" href="#page-cluster" title="Permalink to this headline">¶</a></h2>
<p>page-cluster controls the number of pages up to which consecutive pages
are read in from swap in a single attempt. This is the swap counterpart
to page cache readahead.
The mentioned consecutivity is not in terms of virtual/physical addresses,
but consecutive on swap space - that means they were swapped out together.</p>
<p>It is a logarithmic value - setting it to zero means “1 page”, setting
it to 1 means “2 pages”, setting it to 2 means “4 pages”, etc.
Zero disables swap readahead completely.</p>
<p>The default value is three (eight pages at a time).  There may be some
small benefits in tuning this to a different value if your workload is
swap-intensive.</p>
<p>Lower values mean lower latencies for initial faults, but at the same time
extra faults and I/O delays for following faults if they would have been part of
that consecutive pages readahead would have brought in.</p>
</div>
<div class="section" id="panic-on-oom">
<h2>panic_on_oom<a class="headerlink" href="#panic-on-oom" title="Permalink to this headline">¶</a></h2>
<p>This enables or disables panic on out-of-memory feature.</p>
<p>If this is set to 0, the kernel will kill some rogue process,
called oom_killer.  Usually, oom_killer can kill rogue processes and
system will survive.</p>
<p>If this is set to 1, the kernel panics when out-of-memory happens.
However, if a process limits using nodes by mempolicy/cpusets,
and those nodes become memory exhaustion status, one process
may be killed by oom-killer. No panic occurs in this case.
Because other nodes’ memory may be free. This means system total status
may be not fatal yet.</p>
<p>If this is set to 2, the kernel panics compulsorily even on the
above-mentioned. Even oom happens under memory cgroup, the whole
system panics.</p>
<p>The default value is 0.</p>
<p>1 and 2 are for failover of clustering. Please select either
according to your policy of failover.</p>
<p>panic_on_oom=2+kdump gives you very strong tool to investigate
why oom happens. You can get snapshot.</p>
</div>
<div class="section" id="percpu-pagelist-fraction">
<h2>percpu_pagelist_fraction<a class="headerlink" href="#percpu-pagelist-fraction" title="Permalink to this headline">¶</a></h2>
<p>This is the fraction of pages at most (high mark pcp-&gt;high) in each zone that
are allocated for each per cpu page list.  The min value for this is 8.  It
means that we don’t allow more than 1/8th of pages in each zone to be
allocated in any single per_cpu_pagelist.  This entry only changes the value
of hot per cpu pagelists.  User can specify a number like 100 to allocate
1/100th of each zone to each per cpu page list.</p>
<p>The batch value of each per cpu pagelist is also updated as a result.  It is
set to pcp-&gt;high/4.  The upper limit of batch is (PAGE_SHIFT * 8)</p>
<p>The initial value is zero.  Kernel does not use this value at boot time to set
the high water marks for each per cpu page list.  If the user writes ‘0’ to this
sysctl, it will revert to this default behavior.</p>
</div>
<div class="section" id="stat-interval">
<h2>stat_interval<a class="headerlink" href="#stat-interval" title="Permalink to this headline">¶</a></h2>
<p>The time interval between which vm statistics are updated.  The default
is 1 second.</p>
</div>
<div class="section" id="stat-refresh">
<h2>stat_refresh<a class="headerlink" href="#stat-refresh" title="Permalink to this headline">¶</a></h2>
<p>Any read or write (by root only) flushes all the per-cpu vm statistics
into their global totals, for more accurate reports when testing
e.g. cat /proc/sys/vm/stat_refresh /proc/meminfo</p>
<p>As a side-effect, it also checks for negative totals (elsewhere reported
as 0) and “fails” with EINVAL if any are found, with a warning in dmesg.
(At time of writing, a few stats are known sometimes to be found negative,
with no ill effects: errors and warnings on these stats are suppressed.)</p>
</div>
<div class="section" id="numa-stat">
<h2>numa_stat<a class="headerlink" href="#numa-stat" title="Permalink to this headline">¶</a></h2>
<p>This interface allows runtime configuration of numa statistics.</p>
<p>When page allocation performance becomes a bottleneck and you can tolerate
some possible tool breakage and decreased numa counter precision, you can
do:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>echo 0 &gt; /proc/sys/vm/numa_stat
</pre></div>
</div>
<p>When page allocation performance is not a bottleneck and you want all
tooling to work, you can do:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>echo 1 &gt; /proc/sys/vm/numa_stat
</pre></div>
</div>
</div>
<div class="section" id="swappiness">
<h2>swappiness<a class="headerlink" href="#swappiness" title="Permalink to this headline">¶</a></h2>
<p>This control is used to define the rough relative IO cost of swapping
and filesystem paging, as a value between 0 and 200. At 100, the VM
assumes equal IO cost and will thus apply memory pressure to the page
cache and swap-backed pages equally; lower values signify more
expensive swap IO, higher values indicates cheaper.</p>
<p>Keep in mind that filesystem IO patterns under memory pressure tend to
be more efficient than swap’s random IO. An optimal value will require
experimentation and will also be workload-dependent.</p>
<p>The default value is 60.</p>
<p>For in-memory swap, like zram or zswap, as well as hybrid setups that
have swap on faster devices than the filesystem, values beyond 100 can
be considered. For example, if the random IO against the swap device
is on average 2x faster than IO from the filesystem, swappiness should
be 133 (x + 2x = 200, 2x = 133.33).</p>
<p>At 0, the kernel will not initiate swap until the amount of free and
file-backed pages is less than the high watermark in a zone.</p>
</div>
<div class="section" id="unprivileged-userfaultfd">
<h2>unprivileged_userfaultfd<a class="headerlink" href="#unprivileged-userfaultfd" title="Permalink to this headline">¶</a></h2>
<p>This flag controls whether unprivileged users can use the userfaultfd
system calls.  Set this to 1 to allow unprivileged users to use the
userfaultfd system calls, or set this to 0 to restrict userfaultfd to only
privileged users (with SYS_CAP_PTRACE capability).</p>
<p>The default value is 1.</p>
</div>
<div class="section" id="user-reserve-kbytes">
<h2>user_reserve_kbytes<a class="headerlink" href="#user-reserve-kbytes" title="Permalink to this headline">¶</a></h2>
<p>When overcommit_memory is set to 2, “never overcommit” mode, reserve
min(3% of current process size, user_reserve_kbytes) of free memory.
This is intended to prevent a user from starting a single memory hogging
process, such that they cannot recover (kill the hog).</p>
<p>user_reserve_kbytes defaults to min(3% of the current process size, 128MB).</p>
<p>If this is reduced to zero, then the user will be allowed to allocate
all free memory with a single process, minus admin_reserve_kbytes.
Any subsequent attempts to execute a command will result in
“fork: Cannot allocate memory”.</p>
<p>Changing this takes effect whenever an application requests memory.</p>
</div>
<div class="section" id="vfs-cache-pressure">
<h2>vfs_cache_pressure<a class="headerlink" href="#vfs-cache-pressure" title="Permalink to this headline">¶</a></h2>
<p>This percentage value controls the tendency of the kernel to reclaim
the memory which is used for caching of directory and inode objects.</p>
<p>At the default value of vfs_cache_pressure=100 the kernel will attempt to
reclaim dentries and inodes at a “fair” rate with respect to pagecache and
swapcache reclaim.  Decreasing vfs_cache_pressure causes the kernel to prefer
to retain dentry and inode caches. When vfs_cache_pressure=0, the kernel will
never reclaim dentries and inodes due to memory pressure and this can easily
lead to out-of-memory conditions. Increasing vfs_cache_pressure beyond 100
causes the kernel to prefer to reclaim dentries and inodes.</p>
<p>Increasing vfs_cache_pressure significantly beyond 100 may have negative
performance impact. Reclaim code needs to take various locks to find freeable
directory and inode objects. With vfs_cache_pressure=1000, it will look for
ten times more freeable objects than there are.</p>
</div>
<div class="section" id="watermark-boost-factor">
<h2>watermark_boost_factor<a class="headerlink" href="#watermark-boost-factor" title="Permalink to this headline">¶</a></h2>
<p>This factor controls the level of reclaim when memory is being fragmented.
It defines the percentage of the high watermark of a zone that will be
reclaimed if pages of different mobility are being mixed within pageblocks.
The intent is that compaction has less work to do in the future and to
increase the success rate of future high-order allocations such as SLUB
allocations, THP and hugetlbfs pages.</p>
<p>To make it sensible with respect to the watermark_scale_factor
parameter, the unit is in fractions of 10,000. The default value of
15,000 on !DISCONTIGMEM configurations means that up to 150% of the high
watermark will be reclaimed in the event of a pageblock being mixed due
to fragmentation. The level of reclaim is determined by the number of
fragmentation events that occurred in the recent past. If this value is
smaller than a pageblock then a pageblocks worth of pages will be reclaimed
(e.g.  2MB on 64-bit x86). A boost factor of 0 will disable the feature.</p>
</div>
<div class="section" id="watermark-scale-factor">
<h2>watermark_scale_factor<a class="headerlink" href="#watermark-scale-factor" title="Permalink to this headline">¶</a></h2>
<p>This factor controls the aggressiveness of kswapd. It defines the
amount of memory left in a node/system before kswapd is woken up and
how much memory needs to be free before kswapd goes back to sleep.</p>
<p>The unit is in fractions of 10,000. The default value of 10 means the
distances between watermarks are 0.1% of the available memory in the
node/system. The maximum value is 1000, or 10% of memory.</p>
<p>A high rate of threads entering direct reclaim (allocstall) or kswapd
going to sleep prematurely (kswapd_low_wmark_hit_quickly) can indicate
that the number of free pages kswapd maintains for latency reasons is
too small for the allocation bursts occurring in the system. This knob
can then be used to tune kswapd aggressiveness accordingly.</p>
</div>
<div class="section" id="zone-reclaim-mode">
<h2>zone_reclaim_mode<a class="headerlink" href="#zone-reclaim-mode" title="Permalink to this headline">¶</a></h2>
<p>Zone_reclaim_mode allows someone to set more or less aggressive approaches to
reclaim memory when a zone runs out of memory. If it is set to zero then no
zone reclaim occurs. Allocations will be satisfied from other zones / nodes
in the system.</p>
<p>This is value OR’ed together of</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 3%" />
<col style="width: 97%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>1</p></td>
<td><p>Zone reclaim on</p></td>
</tr>
<tr class="row-even"><td><p>2</p></td>
<td><p>Zone reclaim writes dirty pages out</p></td>
</tr>
<tr class="row-odd"><td><p>4</p></td>
<td><p>Zone reclaim swaps pages</p></td>
</tr>
</tbody>
</table>
<p>zone_reclaim_mode is disabled by default.  For file servers or workloads
that benefit from having their data cached, zone_reclaim_mode should be
left disabled as the caching effect is likely to be more important than
data locality.</p>
<p>zone_reclaim may be enabled if it’s known that the workload is partitioned
such that each partition fits within a NUMA node and that accessing remote
memory would cause a measurable performance reduction.  The page allocator
will then reclaim easily reusable pages (those page cache pages that are
currently not used) before allocating off node pages.</p>
<p>Allowing zone reclaim to write out pages stops processes that are
writing large amounts of data from dirtying pages on other nodes. Zone
reclaim will write out dirty pages if a zone fills up and so effectively
throttle the process. This may decrease the performance of a single process
since it cannot use all of system memory to buffer the outgoing writes
anymore but it preserve the memory on other nodes so that the performance
of other processes running on other nodes will not be affected.</p>
<p>Allowing regular swap effectively restricts allocations to the local
node unless explicitly overridden by memory policies or cpuset
configurations.</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../abi.html" class="btn btn-neutral float-right" title="Linux ABI description" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="user.html" class="btn btn-neutral float-left" title="Documentation for /proc/sys/user/" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright The kernel development community

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>