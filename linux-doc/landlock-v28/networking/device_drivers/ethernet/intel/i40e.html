

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Linux Base Driver for the Intel(R) Ethernet Controller 700 Series &mdash; The Linux Kernel 5.11.0-rc6+ documentation</title>
  

  
  <link rel="stylesheet" href="../../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../../_static/theme_overrides.css" type="text/css" />

  
  

  
  

  

  
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../../../" src="../../../../_static/documentation_options.js"></script>
        <script src="../../../../_static/jquery.js"></script>
        <script src="../../../../_static/underscore.js"></script>
        <script src="../../../../_static/doctools.js"></script>
    
    <script type="text/javascript" src="../../../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../search.html" />
    <link rel="next" title="Linux Base Driver for Intel(R) Ethernet Adaptive Virtual Function" href="iavf.html" />
    <link rel="prev" title="Linux Base Virtual Function Driver for Intel(R) 10G Ethernet" href="ixgbevf.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../../../index.html" class="icon icon-home"> The Linux Kernel
          

          
          </a>

          
            
            
              <div class="version">
                5.11.0-rc6
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../admin-guide/index.html">The Linux kernel user’s and administrator’s guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../kbuild/index.html">Kernel Build System</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../firmware-guide/index.html">The Linux kernel firmware guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../devicetree/index.html">Open Firmware and Device Tree</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../userspace-api/index.html">The Linux kernel user-space API guide</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../process/index.html">Working with the kernel development community</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../dev-tools/index.html">Development tools for the kernel</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../doc-guide/index.html">How to write kernel documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../kernel-hacking/index.html">Kernel Hacking Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../trace/index.html">Linux Tracing Technologies</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../maintainer/index.html">Kernel Maintainer Handbook</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../fault-injection/index.html">fault-injection</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../livepatch/index.html">Kernel Livepatching</a></li>
</ul>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../../driver-api/index.html">The Linux driver implementer’s API guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../core-api/index.html">Core API Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../locking/index.html">locking</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../accounting/index.html">Accounting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../block/index.html">Block</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../cdrom/index.html">cdrom</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../cpu-freq/index.html">Linux CPUFreq - CPU frequency and voltage scaling code in the Linux(TM) kernel</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../ide/index.html">Integrated Drive Electronics (IDE)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../fb/index.html">Frame Buffer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../fpga/index.html">fpga</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../hid/index.html">Human Interface Devices (HID)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../i2c/index.html">I2C/SMBus Subsystem</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../iio/index.html">Industrial I/O</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../isdn/index.html">ISDN</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../infiniband/index.html">InfiniBand</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../leds/index.html">LEDs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../netlabel/index.html">NetLabel</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../../index.html">Linux Networking Documentation</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../../netdev-FAQ.html">netdev FAQ</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../af_xdp.html">AF_XDP</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../bareudp.html">Bare UDP Tunnelling Module Documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../batman-adv.html">batman-adv</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../can.html">SocketCAN - Controller Area Network</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../can_ucan_protocol.html">The UCAN Protocol</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../../index.html">Hardware Device Drivers</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../../appletalk/index.html">AppleTalk Device Drivers</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../atm/index.html">Asynchronous Transfer Mode (ATM) Device Drivers</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../cable/index.html">Cable Modem Device Drivers</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../cellular/index.html">Cellular Modem Device Drivers</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="../index.html">Ethernet Device Drivers</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="../3com/3c509.html">Linux and the 3Com EtherLink III Series Ethercards (driver v1.18c and higher)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../3com/vortex.html">3Com Vortex device driver</a></li>
<li class="toctree-l4"><a class="reference internal" href="../amazon/ena.html">Linux kernel driver for Elastic Network Adapter (ENA) family</a></li>
<li class="toctree-l4"><a class="reference internal" href="../altera/altera_tse.html">Altera Triple-Speed Ethernet MAC driver</a></li>
<li class="toctree-l4"><a class="reference internal" href="../aquantia/atlantic.html">Marvell(Aquantia) AQtion Driver</a></li>
<li class="toctree-l4"><a class="reference internal" href="../chelsio/cxgb.html">Chelsio N210 10Gb Ethernet Network Controller</a></li>
<li class="toctree-l4"><a class="reference internal" href="../cirrus/cs89x0.html">Cirrus Logic LAN CS8900/CS8920 Ethernet Adapters</a></li>
<li class="toctree-l4"><a class="reference internal" href="../dlink/dl2k.html">D-Link DL2000-based Gigabit Ethernet Adapter Installation</a></li>
<li class="toctree-l4"><a class="reference internal" href="../davicom/dm9000.html">DM9000 Network driver</a></li>
<li class="toctree-l4"><a class="reference internal" href="../dec/de4x5.html">DEC EtherWORKS Ethernet De4x5 cards</a></li>
<li class="toctree-l4"><a class="reference internal" href="../dec/dmfe.html">Davicom DM9102(A)/DM9132/DM9801 fast ethernet driver for Linux</a></li>
<li class="toctree-l4"><a class="reference internal" href="../freescale/dpaa.html">The QorIQ DPAA Ethernet Driver</a></li>
<li class="toctree-l4"><a class="reference internal" href="../freescale/dpaa2/index.html">DPAA2 Documentation</a></li>
<li class="toctree-l4"><a class="reference internal" href="../freescale/gianfar.html">The Gianfar Ethernet Driver</a></li>
<li class="toctree-l4"><a class="reference internal" href="../google/gve.html">Linux kernel driver for Compute Engine Virtual Ethernet (gve):</a></li>
<li class="toctree-l4"><a class="reference internal" href="../huawei/hinic.html">Linux Kernel Driver for Huawei Intelligent NIC(HiNIC) family</a></li>
<li class="toctree-l4"><a class="reference internal" href="e100.html">Linux Base Driver for the Intel(R) PRO/100 Family of Adapters</a></li>
<li class="toctree-l4"><a class="reference internal" href="e1000.html">Linux Base Driver for Intel(R) Ethernet Network Connection</a></li>
<li class="toctree-l4"><a class="reference internal" href="e1000e.html">Linux Driver for Intel(R) Ethernet Network Connection</a></li>
<li class="toctree-l4"><a class="reference internal" href="fm10k.html">Linux Base Driver for Intel(R) Ethernet Multi-host Controller</a></li>
<li class="toctree-l4"><a class="reference internal" href="igb.html">Linux Base Driver for Intel(R) Ethernet Network Connection</a></li>
<li class="toctree-l4"><a class="reference internal" href="igbvf.html">Linux Base Virtual Function Driver for Intel(R) 1G Ethernet</a></li>
<li class="toctree-l4"><a class="reference internal" href="ixgb.html">Linux Base Driver for 10 Gigabit Intel(R) Ethernet Network Connection</a></li>
<li class="toctree-l4"><a class="reference internal" href="ixgbe.html">Linux Base Driver for the Intel(R) Ethernet 10 Gigabit PCI Express Adapters</a></li>
<li class="toctree-l4"><a class="reference internal" href="ixgbevf.html">Linux Base Virtual Function Driver for Intel(R) 10G Ethernet</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">Linux Base Driver for the Intel(R) Ethernet Controller 700 Series</a></li>
<li class="toctree-l4"><a class="reference internal" href="iavf.html">Linux Base Driver for Intel(R) Ethernet Adaptive Virtual Function</a></li>
<li class="toctree-l4"><a class="reference internal" href="ice.html">Linux Base Driver for the Intel(R) Ethernet Connection E800 Series</a></li>
<li class="toctree-l4"><a class="reference internal" href="../marvell/octeontx2.html">Marvell OcteonTx2 RVU Kernel Drivers</a></li>
<li class="toctree-l4"><a class="reference internal" href="../mellanox/mlx5.html">Mellanox ConnectX(R) mlx5 core VPI Network Driver</a></li>
<li class="toctree-l4"><a class="reference internal" href="../microsoft/netvsc.html">Hyper-V network driver</a></li>
<li class="toctree-l4"><a class="reference internal" href="../neterion/s2io.html">Neterion’s (Formerly S2io) Xframe I/II PCI-X 10GbE driver</a></li>
<li class="toctree-l4"><a class="reference internal" href="../neterion/vxge.html">Neterion’s (Formerly S2io) X3100 Series 10GbE PCIe Server Adapter Linux driver</a></li>
<li class="toctree-l4"><a class="reference internal" href="../netronome/nfp.html">Netronome Flow Processor (NFP) Kernel Drivers</a></li>
<li class="toctree-l4"><a class="reference internal" href="../pensando/ionic.html">Linux Driver for the Pensando(R) Ethernet adapter family</a></li>
<li class="toctree-l4"><a class="reference internal" href="../smsc/smc9.html">SMC 9xxxx Driver</a></li>
<li class="toctree-l4"><a class="reference internal" href="../stmicro/stmmac.html">Linux Driver for the Synopsys(R) Ethernet Controllers “stmmac”</a></li>
<li class="toctree-l4"><a class="reference internal" href="../ti/cpsw.html">Texas Instruments CPSW ethernet driver</a></li>
<li class="toctree-l4"><a class="reference internal" href="../ti/cpsw_switchdev.html">Texas Instruments CPSW switchdev based ethernet driver</a></li>
<li class="toctree-l4"><a class="reference internal" href="../ti/tlan.html">TLAN driver for Linux</a></li>
<li class="toctree-l4"><a class="reference internal" href="../toshiba/spider_net.html">The Spidernet Device Driver</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../fddi/index.html">Fiber Distributed Data Interface (FDDI) Device Drivers</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../hamradio/index.html">Amateur Radio Device Drivers</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../wan/index.html">Classic WAN Device Drivers</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../wifi/index.html">Wi-Fi Device Drivers</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../dsa/index.html">Distributed Switch Architecture</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../devlink/index.html">Linux Devlink Documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../caif/index.html">CAIF</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../ethtool-netlink.html">Netlink interface for ethtool</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../ieee802154.html">IEEE 802.15.4 Developer’s Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../j1939.html">J1939 Documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../kapi.html">Linux Networking and Network Devices APIs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../msg_zerocopy.html">MSG_ZEROCOPY</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../failover.html">FAILOVER</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../net_dim.html">Net DIM - Generic Network Dynamic Interrupt Moderation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../net_failover.html">NET_FAILOVER</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../page_pool.html">Page Pool API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../phy.html">PHY Abstraction Layer</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../sfp-phylink.html">phylink</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../alias.html">IP-Aliasing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../bridge.html">Ethernet Bridging</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../snmp_counter.html">SNMP counter</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../checksum-offloads.html">Checksum Offloads</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../segmentation-offloads.html">Segmentation Offloads</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../scaling.html">Scaling in the Linux Networking Stack</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../tls.html">Kernel TLS</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../tls-offload.html">Kernel TLS offload</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../nfc.html">Linux NFC subsystem</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../6lowpan.html">Netdev private dataroom for 6lowpan interfaces</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../6pack.html">6pack Protocol</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../arcnet-hardware.html">ARCnet Hardware</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../arcnet.html">ARCnet</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../atm.html">ATM</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../ax25.html">AX.25</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../bonding.html">Linux Ethernet Bonding Driver HOWTO</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../cdc_mbim.html">cdc_mbim - Driver for CDC MBIM Mobile Broadband modems</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../dccp.html">DCCP protocol</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../dctcp.html">DCTCP (DataCenter TCP)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../decnet.html">Linux DECnet Networking Layer Information</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../dns_resolver.html">DNS Resolver Module</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../driver.html">Softnet Driver Issues</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../eql.html">EQL Driver: Serial IP Load Balancing HOWTO</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../fib_trie.html">LC-trie implementation notes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../filter.html">Linux Socket Filtering aka Berkeley Packet Filter (BPF)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../generic-hdlc.html">Generic HDLC layer</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../generic_netlink.html">Generic Netlink</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../gen_stats.html">Generic networking statistics for netlink users</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../gtp.html">The Linux kernel GTP tunneling module</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../ila.html">Identifier Locator Addressing (ILA)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../ipddp.html">AppleTalk-IP Decapsulation and AppleTalk-IP Encapsulation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../ip_dynaddr.html">IP dynamic address hack-port v0.03</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../ipsec.html">IPsec</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../ip-sysctl.html">IP Sysctl</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../ipv6.html">IPv6</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../ipvlan.html">IPVLAN Driver HOWTO</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../ipvs-sysctl.html">IPvs-sysctl</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../kcm.html">Kernel Connection Multiplexor</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../l2tp.html">L2TP</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../lapb-module.html">The Linux LAPB Module Interface</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../mac80211-injection.html">How to use packet injection with mac80211</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../mpls-sysctl.html">MPLS Sysfs variables</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../mptcp-sysctl.html">MPTCP Sysfs variables</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../multiqueue.html">HOWTO for multiqueue network device support</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../netconsole.html">Netconsole</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../netdev-features.html">Netdev features mess and how to get out from it alive</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../netdevices.html">Network Devices, the Kernel, and You!</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../netfilter-sysctl.html">Netfilter Sysfs variables</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../netif-msg.html">NETIF Msg Level</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../nf_conntrack-sysctl.html">Netfilter Conntrack Sysfs variables</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../nf_flowtable.html">Netfilter’s flowtable infrastructure</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../openvswitch.html">Open vSwitch datapath developer documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../operstates.html">Operational States</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../packet_mmap.html">Packet MMAP</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../phonet.html">Linux Phonet protocol family</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../pktgen.html">HOWTO for the linux packet generator</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../plip.html">PLIP: The Parallel Line Internet Protocol Device</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../ppp_generic.html">PPP Generic Driver and Channel Interface</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../proc_net_tcp.html">The proc/net/tcp and proc/net/tcp6 variables</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../radiotap-headers.html">How to use radiotap headers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../rds.html">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../rds.html#rds-architecture">RDS Architecture</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../rds.html#socket-interface">Socket Interface</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../rds.html#rdma-for-rds">RDMA for RDS</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../rds.html#congestion-notifications">Congestion Notifications</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../rds.html#rds-protocol">RDS Protocol</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../rds.html#rds-transport-layer">RDS Transport Layer</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../rds.html#rds-kernel-structures">RDS Kernel Structures</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../rds.html#connection-management">Connection management</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../rds.html#the-send-path">The send path</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../rds.html#the-recv-path">The recv path</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../rds.html#multipath-rds-mprds">Multipath RDS (mprds)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../regulatory.html">Linux wireless regulatory documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../rxrpc.html">RxRPC Network Protocol</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../rxrpc.html#socket-options">SOCKET OPTIONS</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../rxrpc.html#security">SECURITY</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../rxrpc.html#example-client-usage">EXAMPLE CLIENT USAGE</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../sctp.html">Linux Kernel SCTP</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../secid.html">LSM/SeLinux secid</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../seg6-sysctl.html">Seg6 Sysfs variables</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../statistics.html">Interface statistics</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../strparser.html">Stream Parser (strparser)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../switchdev.html">Ethernet switch device driver model (switchdev)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../sysfs-tagging.html">Sysfs tagging</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../tc-actions-env-rules.html">TC Actions - Environmental Rules</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../tcp-thin.html">Thin-streams and TCP</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../team.html">Team</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../timestamping.html">Timestamping</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../tipc.html">Linux Kernel TIPC</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../tproxy.html">Transparent proxy support</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../tuntap.html">Universal TUN/TAP device driver</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../udplite.html">The UDP-Lite protocol (RFC 3828)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../vrf.html">Virtual Routing and Forwarding (VRF)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../vxlan.html">Virtual eXtensible Local Area Networking documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../x25-iface.html">Packet Layer to Device Driver</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../x25-iface.html#device-driver-to-packet-layer">Device Driver to Packet Layer</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../x25.html">Linux X.25 Project</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../xfrm_device.html">XFRM device - offloading the IPsec computations</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../xfrm_proc.html">XFRM proc - /proc/net/xfrm_* files</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../xfrm_sync.html">XFRM</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../xfrm_sysctl.html">XFRM Syscall</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../pcmcia/index.html">pcmcia</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../power/index.html">Power Management</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../target/index.html">TCM Virtual Device</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../timers/index.html">timers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../spi/index.html">Serial Peripheral Interface (SPI)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../w1/index.html">1-Wire Subsystem</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../watchdog/index.html">Linux Watchdog Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../virt/index.html">Linux Virtualization Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../input/index.html">The Linux Input Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../hwmon/index.html">Linux Hardware Monitoring</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../gpu/index.html">Linux GPU Driver Developer’s Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../security/index.html">Security Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../sound/index.html">Linux Sound Subsystem Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../crypto/index.html">Linux Kernel Crypto API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../filesystems/index.html">Filesystems in the Linux kernel</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../vm/index.html">Linux Memory Management Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../bpf/index.html">BPF Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../usb/index.html">USB support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../PCI/index.html">Linux PCI Bus Subsystem</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../scsi/index.html">Linux SCSI Subsystem</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../misc-devices/index.html">Assorted Miscellaneous Devices Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../scheduler/index.html">Linux Scheduler</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../mhi/index.html">MHI</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../asm-annotations.html">Assembler Annotations</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../arm/index.html">ARM Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../arm64/index.html">ARM64 Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../ia64/index.html">IA-64 Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../m68k/index.html">m68k Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../mips/index.html">MIPS-specific Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../nios2/index.html">Nios II Specific Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../openrisc/index.html">OpenRISC Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../parisc/index.html">PA-RISC Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../powerpc/index.html">powerpc</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../riscv/index.html">RISC-V architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../s390/index.html">s390 Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../sh/index.html">SuperH Interfaces Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../sparc/index.html">Sparc Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../x86/index.html">x86-specific Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../xtensa/index.html">Xtensa Architecture</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../filesystems/ext4/index.html">ext4 Data Structures and Algorithms</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../staging/index.html">Unsorted Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../staging/index.html#atomic-types">Atomic Types</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../staging/index.html#atomic-bitops">Atomic bitops</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../staging/index.html#memory-barriers">Memory Barriers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../watch_queue.html">General notification mechanism</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../translations/index.html">Translations</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../index.html">The Linux Kernel</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../../../index.html">Linux Networking Documentation</a> &raquo;</li>
        
          <li><a href="../../index.html">Hardware Device Drivers</a> &raquo;</li>
        
          <li><a href="../index.html">Ethernet Device Drivers</a> &raquo;</li>
        
      <li>Linux Base Driver for the Intel(R) Ethernet Controller 700 Series</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../../../../_sources/networking/device_drivers/ethernet/intel/i40e.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="linux-base-driver-for-the-intel-r-ethernet-controller-700-series">
<h1>Linux Base Driver for the Intel(R) Ethernet Controller 700 Series<a class="headerlink" href="#linux-base-driver-for-the-intel-r-ethernet-controller-700-series" title="Permalink to this headline">¶</a></h1>
<p>Intel 40 Gigabit Linux driver.
Copyright(c) 1999-2018 Intel Corporation.</p>
<div class="section" id="contents">
<h2>Contents<a class="headerlink" href="#contents" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>Overview</p></li>
<li><p>Identifying Your Adapter</p></li>
<li><p>Intel(R) Ethernet Flow Director</p></li>
<li><p>Additional Configurations</p></li>
<li><p>Known Issues</p></li>
<li><p>Support</p></li>
</ul>
<p>Driver information can be obtained using ethtool, lspci, and ifconfig.
Instructions on updating ethtool can be found in the section Additional
Configurations later in this document.</p>
<p>For questions related to hardware requirements, refer to the documentation
supplied with your Intel adapter. All hardware requirements listed apply to use
with Linux.</p>
</div>
<div class="section" id="identifying-your-adapter">
<h2>Identifying Your Adapter<a class="headerlink" href="#identifying-your-adapter" title="Permalink to this headline">¶</a></h2>
<p>The driver is compatible with devices based on the following:</p>
<blockquote>
<div><ul class="simple">
<li><p>Intel(R) Ethernet Controller X710</p></li>
<li><p>Intel(R) Ethernet Controller XL710</p></li>
<li><p>Intel(R) Ethernet Network Connection X722</p></li>
<li><p>Intel(R) Ethernet Controller XXV710</p></li>
</ul>
</div></blockquote>
<p>For the best performance, make sure the latest NVM/FW is installed on your
device.</p>
<p>For information on how to identify your adapter, and for the latest NVM/FW
images and Intel network drivers, refer to the Intel Support website:
<a class="reference external" href="https://www.intel.com/support">https://www.intel.com/support</a></p>
<div class="section" id="sfp-and-qsfp-devices">
<h3>SFP+ and QSFP+ Devices<a class="headerlink" href="#sfp-and-qsfp-devices" title="Permalink to this headline">¶</a></h3>
<p>For information about supported media, refer to this document:
<a class="reference external" href="https://www.intel.com/content/dam/www/public/us/en/documents/release-notes/xl710-ethernet-controller-feature-matrix.pdf">https://www.intel.com/content/dam/www/public/us/en/documents/release-notes/xl710-ethernet-controller-feature-matrix.pdf</a></p>
<p>NOTE: Some adapters based on the Intel(R) Ethernet Controller 700 Series only
support Intel Ethernet Optics modules. On these adapters, other modules are not
supported and will not function.  In all cases Intel recommends using Intel
Ethernet Optics; other modules may function but are not validated by Intel.
Contact Intel for supported media types.</p>
<p>NOTE: For connections based on Intel(R) Ethernet Controller 700 Series, support
is dependent on your system board. Please see your vendor for details.</p>
<p>NOTE: In systems that do not have adequate airflow to cool the adapter and
optical modules, you must use high temperature optical modules.</p>
</div>
<div class="section" id="virtual-functions-vfs">
<h3>Virtual Functions (VFs)<a class="headerlink" href="#virtual-functions-vfs" title="Permalink to this headline">¶</a></h3>
<p>Use sysfs to enable VFs. For example:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>#echo $num_vf_enabled &gt; /sys/class/net/$dev/device/sriov_numvfs #enable VFs
#echo 0 &gt; /sys/class/net/$dev/device/sriov_numvfs #disable VFs
</pre></div>
</div>
<p>For example, the following instructions will configure PF eth0 and the first VF
on VLAN 10:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ ip link set dev eth0 vf 0 vlan 10
</pre></div>
</div>
</div>
<div class="section" id="vlan-tag-packet-steering">
<h3>VLAN Tag Packet Steering<a class="headerlink" href="#vlan-tag-packet-steering" title="Permalink to this headline">¶</a></h3>
<p>Allows you to send all packets with a specific VLAN tag to a particular SR-IOV
virtual function (VF). Further, this feature allows you to designate a
particular VF as trusted, and allows that trusted VF to request selective
promiscuous mode on the Physical Function (PF).</p>
<p>To set a VF as trusted or untrusted, enter the following command in the
Hypervisor:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span># ip link set dev eth0 vf 1 trust [on|off]
</pre></div>
</div>
<p>Once the VF is designated as trusted, use the following commands in the VM to
set the VF to promiscuous mode.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>For promiscuous all:
#ip link set eth2 promisc on
Where eth2 is a VF interface in the VM

For promiscuous Multicast:
#ip link set eth2 allmulticast on
Where eth2 is a VF interface in the VM
</pre></div>
</div>
<p>NOTE: By default, the ethtool priv-flag vf-true-promisc-support is set to
“off”,meaning that promiscuous mode for the VF will be limited. To set the
promiscuous mode for the VF to true promiscuous and allow the VF to see all
ingress traffic, use the following command:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>#ethtool -set-priv-flags p261p1 vf-true-promisc-support on
</pre></div>
</div>
<p>The vf-true-promisc-support priv-flag does not enable promiscuous mode; rather,
it designates which type of promiscuous mode (limited or true) you will get
when you enable promiscuous mode using the ip link commands above. Note that
this is a global setting that affects the entire device. However,the
vf-true-promisc-support priv-flag is only exposed to the first PF of the
device. The PF remains in limited promiscuous mode (unless it is in MFP mode)
regardless of the vf-true-promisc-support setting.</p>
<p>Now add a VLAN interface on the VF interface:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>#ip link add link eth2 name eth2.100 type vlan id 100
</pre></div>
</div>
<p>Note that the order in which you set the VF to promiscuous mode and add the
VLAN interface does not matter (you can do either first). The end result in
this example is that the VF will get all traffic that is tagged with VLAN 100.</p>
</div>
<div class="section" id="intel-r-ethernet-flow-director">
<h3>Intel(R) Ethernet Flow Director<a class="headerlink" href="#intel-r-ethernet-flow-director" title="Permalink to this headline">¶</a></h3>
<p>The Intel Ethernet Flow Director performs the following tasks:</p>
<ul class="simple">
<li><p>Directs receive packets according to their flows to different queues.</p></li>
<li><p>Enables tight control on routing a flow in the platform.</p></li>
<li><p>Matches flows and CPU cores for flow affinity.</p></li>
<li><p>Supports multiple parameters for flexible flow classification and load
balancing (in SFP mode only).</p></li>
</ul>
<p>NOTE: The Linux i40e driver supports the following flow types: IPv4, TCPv4, and
UDPv4. For a given flow type, it supports valid combinations of IP addresses
(source or destination) and UDP/TCP ports (source and destination). For
example, you can supply only a source IP address, a source IP address and a
destination port, or any combination of one or more of these four parameters.</p>
<p>NOTE: The Linux i40e driver allows you to filter traffic based on a
user-defined flexible two-byte pattern and offset by using the ethtool user-def
and mask fields. Only L3 and L4 flow types are supported for user-defined
flexible filters. For a given flow type, you must clear all Intel Ethernet Flow
Director filters before changing the input set (for that flow type).</p>
<p>To enable or disable the Intel Ethernet Flow Director:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span># ethtool -K ethX ntuple &lt;on|off&gt;
</pre></div>
</div>
<p>When disabling ntuple filters, all the user programmed filters are flushed from
the driver cache and hardware. All needed filters must be re-added when ntuple
is re-enabled.</p>
<p>To add a filter that directs packet to queue 2, use -U or -N switch:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span># ethtool -N ethX flow-type tcp4 src-ip 192.168.10.1 dst-ip \
192.168.10.2 src-port 2000 dst-port 2001 action 2 [loc 1]
</pre></div>
</div>
<p>To set a filter using only the source and destination IP address:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span># ethtool -N ethX flow-type tcp4 src-ip 192.168.10.1 dst-ip \
192.168.10.2 action 2 [loc 1]
</pre></div>
</div>
<p>To see the list of filters currently present:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span># ethtool &lt;-u|-n&gt; ethX
</pre></div>
</div>
</div>
<div class="section" id="application-targeted-routing-atr-perfect-filters">
<h3>Application Targeted Routing (ATR) Perfect Filters<a class="headerlink" href="#application-targeted-routing-atr-perfect-filters" title="Permalink to this headline">¶</a></h3>
<p>ATR is enabled by default when the kernel is in multiple transmit queue mode.
An ATR Intel Ethernet Flow Director filter rule is added when a TCP-IP flow
starts and is deleted when the flow ends. When a TCP-IP Intel Ethernet Flow
Director rule is added from ethtool (Sideband filter), ATR is turned off by the
driver. To re-enable ATR, the sideband can be disabled with the ethtool -K
option. For example:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>ethtool –K [adapter] ntuple [off|on]
</pre></div>
</div>
<p>If sideband is re-enabled after ATR is re-enabled, ATR remains enabled until a
TCP-IP flow is added. When all TCP-IP sideband rules are deleted, ATR is
automatically re-enabled.</p>
<p>Packets that match the ATR rules are counted in fdir_atr_match stats in
ethtool, which also can be used to verify whether ATR rules still exist.</p>
</div>
<div class="section" id="sideband-perfect-filters">
<h3>Sideband Perfect Filters<a class="headerlink" href="#sideband-perfect-filters" title="Permalink to this headline">¶</a></h3>
<p>Sideband Perfect Filters are used to direct traffic that matches specified
characteristics. They are enabled through ethtool’s ntuple interface. To add a
new filter use the following command:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>ethtool -U &lt;device&gt; flow-type &lt;type&gt; src-ip &lt;ip&gt; dst-ip &lt;ip&gt; src-port &lt;port&gt; \
dst-port &lt;port&gt; action &lt;queue&gt;
</pre></div>
</div>
<dl class="simple">
<dt>Where:</dt><dd><p>&lt;device&gt; - the ethernet device to program
&lt;type&gt; - can be ip4, tcp4, udp4, or sctp4
&lt;ip&gt; - the ip address to match on
&lt;port&gt; - the port number to match on
&lt;queue&gt; - the queue to direct traffic towards (-1 discards matching traffic)</p>
</dd>
</dl>
<p>Use the following command to display all of the active filters:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>ethtool -u &lt;device&gt;
</pre></div>
</div>
<p>Use the following command to delete a filter:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>ethtool -U &lt;device&gt; delete &lt;N&gt;
</pre></div>
</div>
<p>Where &lt;N&gt; is the filter id displayed when printing all the active filters, and
may also have been specified using “loc &lt;N&gt;” when adding the filter.</p>
<p>The following example matches TCP traffic sent from 192.168.0.1, port 5300,
directed to 192.168.0.5, port 80, and sends it to queue 7:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>ethtool -U enp130s0 flow-type tcp4 src-ip 192.168.0.1 dst-ip 192.168.0.5 \
src-port 5300 dst-port 80 action 7
</pre></div>
</div>
<p>For each flow-type, the programmed filters must all have the same matching
input set. For example, issuing the following two commands is acceptable:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>ethtool -U enp130s0 flow-type ip4 src-ip 192.168.0.1 src-port 5300 action 7
ethtool -U enp130s0 flow-type ip4 src-ip 192.168.0.5 src-port 55 action 10
</pre></div>
</div>
<p>Issuing the next two commands, however, is not acceptable, since the first
specifies src-ip and the second specifies dst-ip:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>ethtool -U enp130s0 flow-type ip4 src-ip 192.168.0.1 src-port 5300 action 7
ethtool -U enp130s0 flow-type ip4 dst-ip 192.168.0.5 src-port 55 action 10
</pre></div>
</div>
<p>The second command will fail with an error. You may program multiple filters
with the same fields, using different values, but, on one device, you may not
program two tcp4 filters with different matching fields.</p>
<p>Matching on a sub-portion of a field is not supported by the i40e driver, thus
partial mask fields are not supported.</p>
<p>The driver also supports matching user-defined data within the packet payload.
This flexible data is specified using the “user-def” field of the ethtool
command in the following way:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 52%" />
<col style="width: 48%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>31    28    24    20    16</p></td>
<td><p>15    12    8    4    0</p></td>
</tr>
<tr class="row-even"><td><p>offset into packet payload</p></td>
<td><p>2 bytes of flexible data</p></td>
</tr>
</tbody>
</table>
<p>For example,</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>... user-def 0x4FFFF ...
</pre></div>
</div>
<p>tells the filter to look 4 bytes into the payload and match that value against
0xFFFF. The offset is based on the beginning of the payload, and not the
beginning of the packet. Thus</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>flow-type tcp4 ... user-def 0x8BEAF ...
</pre></div>
</div>
<p>would match TCP/IPv4 packets which have the value 0xBEAF 8 bytes into the
TCP/IPv4 payload.</p>
<p>Note that ICMP headers are parsed as 4 bytes of header and 4 bytes of payload.
Thus to match the first byte of the payload, you must actually add 4 bytes to
the offset. Also note that ip4 filters match both ICMP frames as well as raw
(unknown) ip4 frames, where the payload will be the L3 payload of the IP4 frame.</p>
<p>The maximum offset is 64. The hardware will only read up to 64 bytes of data
from the payload. The offset must be even because the flexible data is 2 bytes
long and must be aligned to byte 0 of the packet payload.</p>
<p>The user-defined flexible offset is also considered part of the input set and
cannot be programmed separately for multiple filters of the same type. However,
the flexible data is not part of the input set and multiple filters may use the
same offset but match against different data.</p>
<p>To create filters that direct traffic to a specific Virtual Function, use the
“action” parameter. Specify the action as a 64 bit value, where the lower 32
bits represents the queue number, while the next 8 bits represent which VF.
Note that 0 is the PF, so the VF identifier is offset by 1. For example:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>... action 0x800000002 ...
</pre></div>
</div>
<p>specifies to direct traffic to Virtual Function 7 (8 minus 1) into queue 2 of
that VF.</p>
<p>Note that these filters will not break internal routing rules, and will not
route traffic that otherwise would not have been sent to the specified Virtual
Function.</p>
</div>
<div class="section" id="setting-the-link-down-on-close-private-flag">
<h3>Setting the link-down-on-close Private Flag<a class="headerlink" href="#setting-the-link-down-on-close-private-flag" title="Permalink to this headline">¶</a></h3>
<p>When the link-down-on-close private flag is set to “on”, the port’s link will
go down when the interface is brought down using the ifconfig ethX down command.</p>
<p>Use ethtool to view and set link-down-on-close, as follows:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>ethtool --show-priv-flags ethX
ethtool --set-priv-flags ethX link-down-on-close [on|off]
</pre></div>
</div>
</div>
<div class="section" id="viewing-link-messages">
<h3>Viewing Link Messages<a class="headerlink" href="#viewing-link-messages" title="Permalink to this headline">¶</a></h3>
<p>Link messages will not be displayed to the console if the distribution is
restricting system messages. In order to see network driver link messages on
your console, set dmesg to eight by entering the following:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>dmesg -n 8
</pre></div>
</div>
<p>NOTE: This setting is not saved across reboots.</p>
</div>
<div class="section" id="jumbo-frames">
<h3>Jumbo Frames<a class="headerlink" href="#jumbo-frames" title="Permalink to this headline">¶</a></h3>
<p>Jumbo Frames support is enabled by changing the Maximum Transmission Unit (MTU)
to a value larger than the default value of 1500.</p>
<p>Use the ifconfig command to increase the MTU size. For example, enter the
following where &lt;x&gt; is the interface number:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>ifconfig eth&lt;x&gt; mtu 9000 up
</pre></div>
</div>
<p>Alternatively, you can use the ip command as follows:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>ip link set mtu 9000 dev eth&lt;x&gt;
ip link set up dev eth&lt;x&gt;
</pre></div>
</div>
<p>This setting is not saved across reboots. The setting change can be made
permanent by adding ‘MTU=9000’ to the file:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>/etc/sysconfig/network-scripts/ifcfg-eth&lt;x&gt; // for RHEL
/etc/sysconfig/network/&lt;config_file&gt; // for SLES
</pre></div>
</div>
<p>NOTE: The maximum MTU setting for Jumbo Frames is 9702. This value coincides
with the maximum Jumbo Frames size of 9728 bytes.</p>
<p>NOTE: This driver will attempt to use multiple page sized buffers to receive
each jumbo packet. This should help to avoid buffer starvation issues when
allocating receive packets.</p>
</div>
<div class="section" id="ethtool">
<h3>ethtool<a class="headerlink" href="#ethtool" title="Permalink to this headline">¶</a></h3>
<p>The driver utilizes the ethtool interface for driver configuration and
diagnostics, as well as displaying statistical information. The latest ethtool
version is required for this functionality. Download it at:
<a class="reference external" href="https://www.kernel.org/pub/software/network/ethtool/">https://www.kernel.org/pub/software/network/ethtool/</a></p>
</div>
<div class="section" id="supported-ethtool-commands-and-options-for-filtering">
<h3>Supported ethtool Commands and Options for Filtering<a class="headerlink" href="#supported-ethtool-commands-and-options-for-filtering" title="Permalink to this headline">¶</a></h3>
<dl class="simple">
<dt>-n –show-nfc</dt><dd><p>Retrieves the receive network flow classification configurations.</p>
</dd>
<dt>rx-flow-hash tcp4|udp4|ah4|esp4|sctp4|tcp6|udp6|ah6|esp6|sctp6</dt><dd><p>Retrieves the hash options for the specified network traffic type.</p>
</dd>
<dt>-N –config-nfc</dt><dd><p>Configures the receive network flow classification.</p>
</dd>
<dt>rx-flow-hash tcp4|udp4|ah4|esp4|sctp4|tcp6|udp6|ah6|esp6|sctp6 m|v|t|s|d|f|n|r…</dt><dd><p>Configures the hash options for the specified network traffic type.</p>
</dd>
</dl>
<p>udp4 UDP over IPv4
udp6 UDP over IPv6</p>
<p>f Hash on bytes 0 and 1 of the Layer 4 header of the Rx packet.
n Hash on bytes 2 and 3 of the Layer 4 header of the Rx packet.</p>
</div>
<div class="section" id="speed-and-duplex-configuration">
<h3>Speed and Duplex Configuration<a class="headerlink" href="#speed-and-duplex-configuration" title="Permalink to this headline">¶</a></h3>
<p>In addressing speed and duplex configuration issues, you need to distinguish
between copper-based adapters and fiber-based adapters.</p>
<p>In the default mode, an Intel(R) Ethernet Network Adapter using copper
connections will attempt to auto-negotiate with its link partner to determine
the best setting. If the adapter cannot establish link with the link partner
using auto-negotiation, you may need to manually configure the adapter and link
partner to identical settings to establish link and pass packets. This should
only be needed when attempting to link with an older switch that does not
support auto-negotiation or one that has been forced to a specific speed or
duplex mode. Your link partner must match the setting you choose. 1 Gbps speeds
and higher cannot be forced. Use the autonegotiation advertising setting to
manually set devices for 1 Gbps and higher.</p>
<p>NOTE: You cannot set the speed for devices based on the Intel(R) Ethernet
Network Adapter XXV710 based devices.</p>
<p>Speed, duplex, and autonegotiation advertising are configured through the
ethtool utility.</p>
<p>Caution: Only experienced network administrators should force speed and duplex
or change autonegotiation advertising manually. The settings at the switch must
always match the adapter settings. Adapter performance may suffer or your
adapter may not operate if you configure the adapter differently from your
switch.</p>
<p>An Intel(R) Ethernet Network Adapter using fiber-based connections, however,
will not attempt to auto-negotiate with its link partner since those adapters
operate only in full duplex and only at their native speed.</p>
</div>
<div class="section" id="napi">
<h3>NAPI<a class="headerlink" href="#napi" title="Permalink to this headline">¶</a></h3>
<p>NAPI (Rx polling mode) is supported in the i40e driver.
For more information on NAPI, see
<a class="reference external" href="https://wiki.linuxfoundation.org/networking/napi">https://wiki.linuxfoundation.org/networking/napi</a></p>
</div>
<div class="section" id="flow-control">
<h3>Flow Control<a class="headerlink" href="#flow-control" title="Permalink to this headline">¶</a></h3>
<p>Ethernet Flow Control (IEEE 802.3x) can be configured with ethtool to enable
receiving and transmitting pause frames for i40e. When transmit is enabled,
pause frames are generated when the receive packet buffer crosses a predefined
threshold. When receive is enabled, the transmit unit will halt for the time
delay specified when a pause frame is received.</p>
<p>NOTE: You must have a flow control capable link partner.</p>
<p>Flow Control is on by default.</p>
<p>Use ethtool to change the flow control settings.</p>
<p>To enable or disable Rx or Tx Flow Control:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>ethtool -A eth? rx &lt;on|off&gt; tx &lt;on|off&gt;
</pre></div>
</div>
<p>Note: This command only enables or disables Flow Control if auto-negotiation is
disabled. If auto-negotiation is enabled, this command changes the parameters
used for auto-negotiation with the link partner.</p>
<p>To enable or disable auto-negotiation:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>ethtool -s eth? autoneg &lt;on|off&gt;
</pre></div>
</div>
<p>Note: Flow Control auto-negotiation is part of link auto-negotiation. Depending
on your device, you may not be able to change the auto-negotiation setting.</p>
</div>
<div class="section" id="rss-hash-flow">
<h3>RSS Hash Flow<a class="headerlink" href="#rss-hash-flow" title="Permalink to this headline">¶</a></h3>
<p>Allows you to set the hash bytes per flow type and any combination of one or
more options for Receive Side Scaling (RSS) hash byte configuration.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span># ethtool -N &lt;dev&gt; rx-flow-hash &lt;type&gt; &lt;option&gt;
</pre></div>
</div>
<dl class="simple">
<dt>Where &lt;type&gt; is:</dt><dd><p>tcp4  signifying TCP over IPv4
udp4  signifying UDP over IPv4
tcp6  signifying TCP over IPv6
udp6  signifying UDP over IPv6</p>
</dd>
<dt>And &lt;option&gt; is one or more of:</dt><dd><p>s     Hash on the IP source address of the Rx packet.
d     Hash on the IP destination address of the Rx packet.
f     Hash on bytes 0 and 1 of the Layer 4 header of the Rx packet.
n     Hash on bytes 2 and 3 of the Layer 4 header of the Rx packet.</p>
</dd>
</dl>
</div>
<div class="section" id="mac-and-vlan-anti-spoofing-feature">
<h3>MAC and VLAN anti-spoofing feature<a class="headerlink" href="#mac-and-vlan-anti-spoofing-feature" title="Permalink to this headline">¶</a></h3>
<p>When a malicious driver attempts to send a spoofed packet, it is dropped by the
hardware and not transmitted.
NOTE: This feature can be disabled for a specific Virtual Function (VF):</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>ip link set &lt;pf dev&gt; vf &lt;vf id&gt; spoofchk {off|on}
</pre></div>
</div>
</div>
<div class="section" id="ieee-1588-precision-time-protocol-ptp-hardware-clock-phc">
<h3>IEEE 1588 Precision Time Protocol (PTP) Hardware Clock (PHC)<a class="headerlink" href="#ieee-1588-precision-time-protocol-ptp-hardware-clock-phc" title="Permalink to this headline">¶</a></h3>
<p>Precision Time Protocol (PTP) is used to synchronize clocks in a computer
network. PTP support varies among Intel devices that support this driver. Use
“ethtool -T &lt;netdev name&gt;” to get a definitive list of PTP capabilities
supported by the device.</p>
</div>
<div class="section" id="ieee-802-1ad-qinq-support">
<h3>IEEE 802.1ad (QinQ) Support<a class="headerlink" href="#ieee-802-1ad-qinq-support" title="Permalink to this headline">¶</a></h3>
<p>The IEEE 802.1ad standard, informally known as QinQ, allows for multiple VLAN
IDs within a single Ethernet frame. VLAN IDs are sometimes referred to as
“tags,” and multiple VLAN IDs are thus referred to as a “tag stack.” Tag stacks
allow L2 tunneling and the ability to segregate traffic within a particular
VLAN ID, among other uses.</p>
<p>The following are examples of how to configure 802.1ad (QinQ):</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>ip link add link eth0 eth0.24 type vlan proto 802.1ad id 24
ip link add link eth0.24 eth0.24.371 type vlan proto 802.1Q id 371
</pre></div>
</div>
<p>Where “24” and “371” are example VLAN IDs.</p>
<dl class="simple">
<dt>NOTES:</dt><dd><p>Receive checksum offloads, cloud filters, and VLAN acceleration are not
supported for 802.1ad (QinQ) packets.</p>
</dd>
</dl>
</div>
<div class="section" id="vxlan-and-geneve-overlay-hw-offloading">
<h3>VXLAN and GENEVE Overlay HW Offloading<a class="headerlink" href="#vxlan-and-geneve-overlay-hw-offloading" title="Permalink to this headline">¶</a></h3>
<p>Virtual Extensible LAN (VXLAN) allows you to extend an L2 network over an L3
network, which may be useful in a virtualized or cloud environment. Some
Intel(R) Ethernet Network devices perform VXLAN processing, offloading it from
the operating system. This reduces CPU utilization.</p>
<p>VXLAN offloading is controlled by the Tx and Rx checksum offload options
provided by ethtool. That is, if Tx checksum offload is enabled, and the
adapter has the capability, VXLAN offloading is also enabled.</p>
<p>Support for VXLAN and GENEVE HW offloading is dependent on kernel support of
the HW offloading features.</p>
</div>
<div class="section" id="multiple-functions-per-port">
<h3>Multiple Functions per Port<a class="headerlink" href="#multiple-functions-per-port" title="Permalink to this headline">¶</a></h3>
<p>Some adapters based on the Intel Ethernet Controller X710/XL710 support
multiple functions on a single physical port. Configure these functions through
the System Setup/BIOS.</p>
<p>Minimum TX Bandwidth is the guaranteed minimum data transmission bandwidth, as
a percentage of the full physical port link speed, that the partition will
receive. The bandwidth the partition is awarded will never fall below the level
you specify.</p>
<p>The range for the minimum bandwidth values is:
1 to ((100 minus # of partitions on the physical port) plus 1)
For example, if a physical port has 4 partitions, the range would be:
1 to ((100 - 4) + 1 = 97)</p>
<p>The Maximum Bandwidth percentage represents the maximum transmit bandwidth
allocated to the partition as a percentage of the full physical port link
speed. The accepted range of values is 1-100. The value is used as a limiter,
should you chose that any one particular function not be able to consume 100%
of a port’s bandwidth (should it be available). The sum of all the values for
Maximum Bandwidth is not restricted, because no more than 100% of a port’s
bandwidth can ever be used.</p>
<p>NOTE: X710/XXV710 devices fail to enable Max VFs (64) when Multiple Functions
per Port (MFP) and SR-IOV are enabled. An error from i40e is logged that says
“add vsi failed for VF N, aq_err 16”. To workaround the issue, enable less than
64 virtual functions (VFs).</p>
</div>
<div class="section" id="data-center-bridging-dcb">
<h3>Data Center Bridging (DCB)<a class="headerlink" href="#data-center-bridging-dcb" title="Permalink to this headline">¶</a></h3>
<p>DCB is a configuration Quality of Service implementation in hardware. It uses
the VLAN priority tag (802.1p) to filter traffic. That means that there are 8
different priorities that traffic can be filtered into. It also enables
priority flow control (802.1Qbb) which can limit or eliminate the number of
dropped packets during network stress. Bandwidth can be allocated to each of
these priorities, which is enforced at the hardware level (802.1Qaz).</p>
<p>Adapter firmware implements LLDP and DCBX protocol agents as per 802.1AB and
802.1Qaz respectively. The firmware based DCBX agent runs in willing mode only
and can accept settings from a DCBX capable peer. Software configuration of
DCBX parameters via dcbtool/lldptool are not supported.</p>
<p>NOTE: Firmware LLDP can be disabled by setting the private flag disable-fw-lldp.</p>
<p>The i40e driver implements the DCB netlink interface layer to allow user-space
to communicate with the driver and query DCB configuration for the port.</p>
<p>NOTE:
The kernel assumes that TC0 is available, and will disable Priority Flow
Control (PFC) on the device if TC0 is not available. To fix this, ensure TC0 is
enabled when setting up DCB on your switch.</p>
</div>
<div class="section" id="interrupt-rate-limiting">
<h3>Interrupt Rate Limiting<a class="headerlink" href="#interrupt-rate-limiting" title="Permalink to this headline">¶</a></h3>
<dl class="field-list simple">
<dt class="field-odd">Valid Range</dt>
<dd class="field-odd"><p>0-235 (0=no limit)</p>
</dd>
</dl>
<p>The Intel(R) Ethernet Controller XL710 family supports an interrupt rate
limiting mechanism. The user can control, via ethtool, the number of
microseconds between interrupts.</p>
<p>Syntax:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span># ethtool -C ethX rx-usecs-high N
</pre></div>
</div>
<p>The range of 0-235 microseconds provides an effective range of 4,310 to 250,000
interrupts per second. The value of rx-usecs-high can be set independently of
rx-usecs and tx-usecs in the same ethtool command, and is also independent of
the adaptive interrupt moderation algorithm. The underlying hardware supports
granularity in 4-microsecond intervals, so adjacent values may result in the
same interrupt rate.</p>
<p>One possible use case is the following:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span># ethtool -C ethX adaptive-rx off adaptive-tx off rx-usecs-high 20 rx-usecs \
  5 tx-usecs 5
</pre></div>
</div>
<p>The above command would disable adaptive interrupt moderation, and allow a
maximum of 5 microseconds before indicating a receive or transmit was complete.
However, instead of resulting in as many as 200,000 interrupts per second, it
limits total interrupts per second to 50,000 via the rx-usecs-high parameter.</p>
</div>
</div>
<div class="section" id="performance-optimization">
<h2>Performance Optimization<a class="headerlink" href="#performance-optimization" title="Permalink to this headline">¶</a></h2>
<p>Driver defaults are meant to fit a wide variety of workloads, but if further
optimization is required we recommend experimenting with the following settings.</p>
<p>NOTE: For better performance when processing small (64B) frame sizes, try
enabling Hyper threading in the BIOS in order to increase the number of logical
cores in the system and subsequently increase the number of queues available to
the adapter.</p>
<div class="section" id="virtualized-environments">
<h3>Virtualized Environments<a class="headerlink" href="#virtualized-environments" title="Permalink to this headline">¶</a></h3>
<p>1. Disable XPS on both ends by using the included virt_perf_default script
or by running the following command as root:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>for file in `ls /sys/class/net/&lt;ethX&gt;/queues/tx-*/xps_cpus`;
do echo 0 &gt; $file; done
</pre></div>
</div>
<p>2. Using the appropriate mechanism (vcpupin) in the vm, pin the cpu’s to
individual lcpu’s, making sure to use a set of cpu’s included in the
device’s local_cpulist: /sys/class/net/&lt;ethX&gt;/device/local_cpulist.</p>
<p>3. Configure as many Rx/Tx queues in the VM as available. Do not rely on
the default setting of 1.</p>
</div>
<div class="section" id="non-virtualized-environments">
<h3>Non-virtualized Environments<a class="headerlink" href="#non-virtualized-environments" title="Permalink to this headline">¶</a></h3>
<p>Pin the adapter’s IRQs to specific cores by disabling the irqbalance service
and using the included set_irq_affinity script. Please see the script’s help
text for further options.</p>
<ul>
<li><p>The following settings will distribute the IRQs across all the cores evenly:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span># scripts/set_irq_affinity -x all &lt;interface1&gt; , [ &lt;interface2&gt;, ... ]
</pre></div>
</div>
</li>
<li><p>The following settings will distribute the IRQs across all the cores that are
local to the adapter (same NUMA node):</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span># scripts/set_irq_affinity -x local &lt;interface1&gt; ,[ &lt;interface2&gt;, ... ]
</pre></div>
</div>
</li>
</ul>
<p>For very CPU intensive workloads, we recommend pinning the IRQs to all cores.</p>
<p>For IP Forwarding: Disable Adaptive ITR and lower Rx and Tx interrupts per
queue using ethtool.</p>
<ul class="simple">
<li><p>Setting rx-usecs and tx-usecs to 125 will limit interrupts to about 8000
interrupts per second per queue.</p></li>
</ul>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span># ethtool -C &lt;interface&gt; adaptive-rx off adaptive-tx off rx-usecs 125 \
  tx-usecs 125
</pre></div>
</div>
<p>For lower CPU utilization: Disable Adaptive ITR and lower Rx and Tx interrupts
per queue using ethtool.</p>
<ul class="simple">
<li><p>Setting rx-usecs and tx-usecs to 250 will limit interrupts to about 4000
interrupts per second per queue.</p></li>
</ul>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span># ethtool -C &lt;interface&gt; adaptive-rx off adaptive-tx off rx-usecs 250 \
  tx-usecs 250
</pre></div>
</div>
<p>For lower latency: Disable Adaptive ITR and ITR by setting Rx and Tx to 0 using
ethtool.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span># ethtool -C &lt;interface&gt; adaptive-rx off adaptive-tx off rx-usecs 0 \
  tx-usecs 0
</pre></div>
</div>
</div>
<div class="section" id="application-device-queues-adq">
<h3>Application Device Queues (ADq)<a class="headerlink" href="#application-device-queues-adq" title="Permalink to this headline">¶</a></h3>
<p>Application Device Queues (ADq) allows you to dedicate one or more queues to a
specific application. This can reduce latency for the specified application,
and allow Tx traffic to be rate limited per application. Follow the steps below
to set ADq.</p>
<p>1. Create traffic classes (TCs). Maximum of 8 TCs can be created per interface.
The shaper bw_rlimit parameter is optional.</p>
<p>Example: Sets up two tcs, tc0 and tc1, with 16 queues each and max tx rate set
to 1Gbit for tc0 and 3Gbit for tc1.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span># tc qdisc add dev &lt;interface&gt; root mqprio num_tc 2 map 0 0 0 0 1 1 1 1
queues 16@0 16@16 hw 1 mode channel shaper bw_rlimit min_rate 1Gbit 2Gbit
max_rate 1Gbit 3Gbit
</pre></div>
</div>
<p>map: priority mapping for up to 16 priorities to tcs (e.g. map 0 0 0 0 1 1 1 1
sets priorities 0-3 to use tc0 and 4-7 to use tc1)</p>
<p>queues: for each tc, &lt;num queues&gt;&#64;&lt;offset&gt; (e.g. queues 16&#64;0 <a class="reference external" href="mailto:16&#37;&#52;&#48;16">16<span>&#64;</span>16</a> assigns
16 queues to tc0 at offset 0 and 16 queues to tc1 at offset 16. Max total
number of queues for all tcs is 64 or number of cores, whichever is lower.)</p>
<p>hw 1 mode channel: ‘channel’ with ‘hw’ set to 1 is a new new hardware
offload mode in mqprio that makes full use of the mqprio options, the
TCs, the queue configurations, and the QoS parameters.</p>
<p>shaper bw_rlimit: for each tc, sets minimum and maximum bandwidth rates.
Totals must be equal or less than port speed.</p>
<p>For example: min_rate 1Gbit 3Gbit: Verify bandwidth limit using network
monitoring tools such as ifstat or sar –n DEV [interval] [number of samples]</p>
<ol class="arabic" start="2">
<li><p>Enable HW TC offload on interface:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span># ethtool -K &lt;interface&gt; hw-tc-offload on
</pre></div>
</div>
</li>
<li><p>Apply TCs to ingress (RX) flow of interface:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span># tc qdisc add dev &lt;interface&gt; ingress
</pre></div>
</div>
</li>
</ol>
<dl class="simple">
<dt>NOTES:</dt><dd><ul class="simple">
<li><p>Run all tc commands from the iproute2 &lt;pathtoiproute2&gt;/tc/ directory.</p></li>
<li><p>ADq is not compatible with cloud filters.</p></li>
<li><p>Setting up channels via ethtool (ethtool -L) is not supported when the
TCs are configured using mqprio.</p></li>
<li><p>You must have iproute2 latest version</p></li>
<li><p>NVM version 6.01 or later is required.</p></li>
<li><p>ADq cannot be enabled when any the following features are enabled: Data
Center Bridging (DCB), Multiple Functions per Port (MFP), or Sideband
Filters.</p></li>
<li><p>If another driver (for example, DPDK) has set cloud filters, you cannot
enable ADq.</p></li>
<li><p>Tunnel filters are not supported in ADq. If encapsulated packets do
arrive in non-tunnel mode, filtering will be done on the inner headers.
For example, for VXLAN traffic in non-tunnel mode, PCTYPE is identified
as a VXLAN encapsulated packet, outer headers are ignored. Therefore,
inner headers are matched.</p></li>
<li><p>If a TC filter on a PF matches traffic over a VF (on the PF), that
traffic will be routed to the appropriate queue of the PF, and will
not be passed on the VF. Such traffic will end up getting dropped higher
up in the TCP/IP stack as it does not match PF address data.</p></li>
<li><p>If traffic matches multiple TC filters that point to different TCs,
that traffic will be duplicated and sent to all matching TC queues.
The hardware switch mirrors the packet to a VSI list when multiple
filters are matched.</p></li>
</ul>
</dd>
</dl>
</div>
</div>
<div class="section" id="known-issues-troubleshooting">
<h2>Known Issues/Troubleshooting<a class="headerlink" href="#known-issues-troubleshooting" title="Permalink to this headline">¶</a></h2>
<p>NOTE: 1 Gb devices based on the Intel(R) Ethernet Network Connection X722 do
not support the following features:</p>
<blockquote>
<div><ul class="simple">
<li><p>Data Center Bridging (DCB)</p></li>
<li><p>QOS</p></li>
<li><p>VMQ</p></li>
<li><p>SR-IOV</p></li>
<li><p>Task Encapsulation offload (VXLAN, NVGRE)</p></li>
<li><p>Energy Efficient Ethernet (EEE)</p></li>
<li><p>Auto-media detect</p></li>
</ul>
</div></blockquote>
<div class="section" id="unexpected-issues-when-the-device-driver-and-dpdk-share-a-device">
<h3>Unexpected Issues when the device driver and DPDK share a device<a class="headerlink" href="#unexpected-issues-when-the-device-driver-and-dpdk-share-a-device" title="Permalink to this headline">¶</a></h3>
<p>Unexpected issues may result when an i40e device is in multi driver mode and
the kernel driver and DPDK driver are sharing the device. This is because
access to the global NIC resources is not synchronized between multiple
drivers. Any change to the global NIC configuration (writing to a global
register, setting global configuration by AQ, or changing switch modes) will
affect all ports and drivers on the device. Loading DPDK with the
“multi-driver” module parameter may mitigate some of the issues.</p>
</div>
<div class="section" id="tc0-must-be-enabled-when-setting-up-dcb-on-a-switch">
<h3>TC0 must be enabled when setting up DCB on a switch<a class="headerlink" href="#tc0-must-be-enabled-when-setting-up-dcb-on-a-switch" title="Permalink to this headline">¶</a></h3>
<p>The kernel assumes that TC0 is available, and will disable Priority Flow
Control (PFC) on the device if TC0 is not available. To fix this, ensure TC0 is
enabled when setting up DCB on your switch.</p>
</div>
</div>
<div class="section" id="support">
<h2>Support<a class="headerlink" href="#support" title="Permalink to this headline">¶</a></h2>
<p>For general information, go to the Intel support website at:</p>
<p><a class="reference external" href="https://www.intel.com/support/">https://www.intel.com/support/</a></p>
<p>or the Intel Wired Networking project hosted by Sourceforge at:</p>
<p><a class="reference external" href="https://sourceforge.net/projects/e1000">https://sourceforge.net/projects/e1000</a></p>
<p>If an issue is identified with the released source code on a supported kernel
with a supported adapter, email the specific information related to the issue
to <a class="reference external" href="mailto:e1000-devel&#37;&#52;&#48;lists&#46;sf&#46;net">e1000-devel<span>&#64;</span>lists<span>&#46;</span>sf<span>&#46;</span>net</a>.</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="iavf.html" class="btn btn-neutral float-right" title="Linux Base Driver for Intel(R) Ethernet Adaptive Virtual Function" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="ixgbevf.html" class="btn btn-neutral float-left" title="Linux Base Virtual Function Driver for Intel(R) 10G Ethernet" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright The kernel development community.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>