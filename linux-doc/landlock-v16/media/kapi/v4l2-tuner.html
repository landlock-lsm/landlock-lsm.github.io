

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>1.24. Tuner functions and data structures &mdash; The Linux Kernel 5.7.0-rc1+ documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/theme_overrides.css" type="text/css" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="1.25. V4L2 common functions and data structures" href="v4l2-common.html" />
    <link rel="prev" title="1.23. V4L2 rect helper functions" href="v4l2-rect.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html" class="icon icon-home"> The Linux Kernel
          

          
          </a>

          
            
            
              <div class="version">
                5.7.0-rc1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../../admin-guide/index.html">The Linux kernel user’s and administrator’s guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../kbuild/index.html">Kernel Build System</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../firmware-guide/index.html">The Linux kernel firmware guide</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../userspace-api/index.html">The Linux kernel user-space API guide</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../process/index.html">Working with the kernel development community</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../dev-tools/index.html">Development tools for the kernel</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../doc-guide/index.html">How to write kernel documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../kernel-hacking/index.html">Kernel Hacking Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../trace/index.html">Linux Tracing Technologies</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../maintainer/index.html">Kernel Maintainer Handbook</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../fault-injection/index.html">fault-injection</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../livepatch/index.html">Kernel Livepatching</a></li>
</ul>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../driver-api/index.html">The Linux driver implementer’s API guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../core-api/index.html">Core API Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../locking/index.html">locking</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../accounting/index.html">Accounting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../block/index.html">Block</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../cdrom/index.html">cdrom</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../cpu-freq/index.html">Linux CPUFreq - CPU frequency and voltage scaling code in the Linux(TM) kernel</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../ide/index.html">Integrated Drive Electronics (IDE)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../fb/index.html">Frame Buffer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../fpga/index.html">fpga</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../hid/index.html">Human Interface Devices (HID)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../i2c/index.html">I2C/SMBus Subsystem</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../iio/index.html">Industrial I/O</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../isdn/index.html">ISDN</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../infiniband/index.html">InfiniBand</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../leds/index.html">LEDs</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Linux Media Subsystem Documentation</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../media_uapi.html">Linux Media Infrastructure userspace API</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../media_kapi.html">Media subsystem kernel internal API</a><ul class="current">
<li class="toctree-l3 current"><a class="reference internal" href="v4l2-core.html">1. Video4Linux devices</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="v4l2-intro.html">1.1. Introduction</a></li>
<li class="toctree-l4"><a class="reference internal" href="v4l2-intro.html#structure-of-a-v4l-driver">1.2. Structure of a V4L driver</a></li>
<li class="toctree-l4"><a class="reference internal" href="v4l2-intro.html#structure-of-the-v4l2-framework">1.3. Structure of the V4L2 framework</a></li>
<li class="toctree-l4"><a class="reference internal" href="v4l2-dev.html">1.4. Video device’ s internal representation</a></li>
<li class="toctree-l4"><a class="reference internal" href="v4l2-device.html">1.5. V4L2 device instance</a></li>
<li class="toctree-l4"><a class="reference internal" href="v4l2-fh.html">1.6. V4L2 File handlers</a></li>
<li class="toctree-l4"><a class="reference internal" href="v4l2-subdev.html">1.7. V4L2 sub-devices</a></li>
<li class="toctree-l4"><a class="reference internal" href="v4l2-subdev.html#v4l2-sub-device-userspace-api">1.8. V4L2 sub-device userspace API</a></li>
<li class="toctree-l4"><a class="reference internal" href="v4l2-subdev.html#i2c-sub-device-drivers">1.9. I2C sub-device drivers</a></li>
<li class="toctree-l4"><a class="reference internal" href="v4l2-subdev.html#v4l2-sub-device-functions-and-data-structures">1.10. V4L2 sub-device functions and data structures</a></li>
<li class="toctree-l4"><a class="reference internal" href="v4l2-event.html">1.11. V4L2 events</a></li>
<li class="toctree-l4"><a class="reference internal" href="v4l2-controls.html">1.12. V4L2 Controls</a></li>
<li class="toctree-l4"><a class="reference internal" href="v4l2-videobuf.html">1.13. Videobuf Framework</a></li>
<li class="toctree-l4"><a class="reference internal" href="v4l2-videobuf2.html">1.14. V4L2 videobuf2 functions and data structures</a></li>
<li class="toctree-l4"><a class="reference internal" href="v4l2-clocks.html">1.15. V4L2 clocks</a></li>
<li class="toctree-l4"><a class="reference internal" href="v4l2-dv-timings.html">1.16. V4L2 DV Timings functions</a></li>
<li class="toctree-l4"><a class="reference internal" href="v4l2-flash-led-class.html">1.17. V4L2 flash functions and data structures</a></li>
<li class="toctree-l4"><a class="reference internal" href="v4l2-mc.html">1.18. V4L2 Media Controller functions and data structures</a></li>
<li class="toctree-l4"><a class="reference internal" href="v4l2-mediabus.html">1.19. V4L2 Media Bus functions and data structures</a></li>
<li class="toctree-l4"><a class="reference internal" href="v4l2-mem2mem.html">1.20. V4L2 Memory to Memory functions and data structures</a></li>
<li class="toctree-l4"><a class="reference internal" href="v4l2-async.html">1.21. V4L2 async kAPI</a></li>
<li class="toctree-l4"><a class="reference internal" href="v4l2-fwnode.html">1.22. V4L2 fwnode kAPI</a></li>
<li class="toctree-l4"><a class="reference internal" href="v4l2-rect.html">1.23. V4L2 rect helper functions</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">1.24. Tuner functions and data structures</a></li>
<li class="toctree-l4"><a class="reference internal" href="v4l2-common.html">1.25. V4L2 common functions and data structures</a></li>
<li class="toctree-l4"><a class="reference internal" href="v4l2-tveeprom.html">1.26. Hauppauge TV EEPROM functions and data structures</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="dtv-core.html">2. Digital TV (DVB) devices</a></li>
<li class="toctree-l3"><a class="reference internal" href="rc-core.html">3. Remote Controller devices</a></li>
<li class="toctree-l3"><a class="reference internal" href="mc-core.html">4. Media Controller devices</a></li>
<li class="toctree-l3"><a class="reference internal" href="cec-core.html">5. CEC Kernel Support</a></li>
<li class="toctree-l3"><a class="reference internal" href="csi2.html">6. MIPI CSI-2</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../dvb-drivers/index.html">Linux Digital TV driver-specific documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../v4l-drivers/index.html">Video4Linux (V4L)  driver-specific documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cec-drivers/index.html">CEC driver-specific documentation</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../netlabel/index.html">NetLabel</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../networking/index.html">Linux Networking Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../pcmcia/index.html">pcmcia</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../power/index.html">Power Management</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../target/index.html">TCM Virtual Device</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../timers/index.html">timers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../spi/index.html">Serial Peripheral Interface (SPI)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../w1/index.html">1-Wire Subsystem</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../watchdog/index.html">Linux Watchdog Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../virt/index.html">Linux Virtualization Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../input/index.html">The Linux Input Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../hwmon/index.html">Linux Hardware Monitoring</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../gpu/index.html">Linux GPU Driver Developer’s Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../security/index.html">Security Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../sound/index.html">Linux Sound Subsystem Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../crypto/index.html">Linux Kernel Crypto API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../filesystems/index.html">Filesystems in the Linux kernel</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../vm/index.html">Linux Memory Management Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../bpf/index.html">BPF Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../usb/index.html">USB support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../PCI/index.html">Linux PCI Bus Subsystem</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../scsi/index.html">Linux SCSI Subsystem</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../misc-devices/index.html">Assorted Miscellaneous Devices Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../scheduler/index.html">Linux Scheduler</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../mhi/index.html">MHI</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../asm-annotations.html">Assembler Annotations</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../arm/index.html">ARM Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../arm64/index.html">ARM64 Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../ia64/index.html">IA-64 Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../m68k/index.html">m68k Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../mips/index.html">MIPS-specific Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../nios2/nios2.html">Linux on the Nios II architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../openrisc/index.html">OpenRISC Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../parisc/index.html">PA-RISC Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../powerpc/index.html">powerpc</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../riscv/index.html">RISC-V architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../s390/index.html">s390 Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../sh/index.html">SuperH Interfaces Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../sparc/index.html">Sparc Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../x86/index.html">x86-specific Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../xtensa/index.html">Xtensa Architecture</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../filesystems/ext4/index.html">ext4 Data Structures and Algorithms</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../translations/index.html">Translations</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">The Linux Kernel</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../index.html">Linux Media Subsystem Documentation</a> &raquo;</li>
        
          <li><a href="../media_kapi.html">Media subsystem kernel internal API</a> &raquo;</li>
        
          <li><a href="v4l2-core.html"><span class="section-number">1. </span>Video4Linux devices</a> &raquo;</li>
        
      <li><span class="section-number">1.24. </span>Tuner functions and data structures</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../_sources/media/kapi/v4l2-tuner.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="tuner-functions-and-data-structures">
<h1><span class="section-number">1.24. </span>Tuner functions and data structures<a class="headerlink" href="#tuner-functions-and-data-structures" title="Permalink to this headline">¶</a></h1>
<dl class="type">
<dt id="c.tuner_mode">
enum <code class="sig-name descname">tuner_mode</code><a class="headerlink" href="#c.tuner_mode" title="Permalink to this definition">¶</a></dt>
<dd><p>Mode of the tuner</p>
</dd></dl>

<p><strong>Constants</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">T_RADIO</span></code></dt><dd><p>Tuner core will work in radio mode</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">T_ANALOG_TV</span></code></dt><dd><p>Tuner core will work in analog TV mode</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Older boards only had a single tuner device, but some devices have a
separate tuner for radio. In any case, the tuner-core needs to know if
the tuner chip(s) will be used in radio mode or analog TV mode, as, on
radio mode, frequencies are specified on a different range than on TV
mode. This enum is used by the tuner core in order to work with the
proper tuner range and eventually use a different tuner chip while in
radio mode.</p>
<dl class="type">
<dt id="c.tuner_setup">
struct <code class="sig-name descname">tuner_setup</code><a class="headerlink" href="#c.tuner_setup" title="Permalink to this definition">¶</a></dt>
<dd><p>setup the tuner chipsets</p>
</dd></dl>

<p><strong>Definition</strong></p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>struct tuner_setup {
  unsigned short  addr;
  unsigned int    type;
  unsigned int    mode_mask;
  void *config;
  int (*tuner_callback)(void *dev, int component, int cmd, int arg);
};
</pre></div>
</div>
<p><strong>Members</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">addr</span></code></dt><dd><p>I2C address used to control the tuner device/chipset</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">type</span></code></dt><dd><p>Type of the tuner, as defined at the TUNER_* macros.
Each different tuner model should have an unique
identifier.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">mode_mask</span></code></dt><dd><p>Mask with the allowed tuner modes: V4L2_TUNER_RADIO,
V4L2_TUNER_ANALOG_TV and/or V4L2_TUNER_DIGITAL_TV,
describing if the tuner should be used to support
Radio, analog TV and/or digital TV.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">config</span></code></dt><dd><p>Used to send tuner-specific configuration for complex
tuners that require extra parameters to be set.
Only a very few tuners require it and its usage on
newer tuners should be avoided.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">tuner_callback</span></code></dt><dd><p>Some tuners require to call back the bridge driver,
in order to do some tasks like rising a GPIO at the
bridge chipset, in order to do things like resetting
the device.</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Older boards only had a single tuner device. Nowadays multiple tuner
devices may be present on a single board. Using TUNER_SET_TYPE_ADDR
to pass the tuner_setup structure it is possible to setup each tuner
device in turn.</p>
<p>Since multiple devices may be present it is no longer sufficient to
send a command to a single i2c device. Instead you should broadcast
the command to all i2c devices.</p>
<p>By setting the mode_mask correctly you can select which commands are
accepted by a specific tuner device. For example, set mode_mask to
T_RADIO if the device is a radio-only tuner. That specific tuner will
only accept commands when the tuner is in radio mode and ignore them
when the tuner is set to TV mode.</p>
<dl class="type">
<dt id="c.param_type">
enum <code class="sig-name descname">param_type</code><a class="headerlink" href="#c.param_type" title="Permalink to this definition">¶</a></dt>
<dd><p>type of the tuner pameters</p>
</dd></dl>

<p><strong>Constants</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">TUNER_PARAM_TYPE_RADIO</span></code></dt><dd><p>Tuner params are for FM and/or AM radio</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">TUNER_PARAM_TYPE_PAL</span></code></dt><dd><p>Tuner params are for PAL color TV standard</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">TUNER_PARAM_TYPE_SECAM</span></code></dt><dd><p>Tuner params are for SECAM color TV standard</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">TUNER_PARAM_TYPE_NTSC</span></code></dt><dd><p>Tuner params are for NTSC color TV standard</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">TUNER_PARAM_TYPE_DIGITAL</span></code></dt><dd><p>Tuner params are for digital TV</p>
</dd>
</dl>
<dl class="type">
<dt id="c.tuner_range">
struct <code class="sig-name descname">tuner_range</code><a class="headerlink" href="#c.tuner_range" title="Permalink to this definition">¶</a></dt>
<dd><p>define the frequencies supported by the tuner</p>
</dd></dl>

<p><strong>Definition</strong></p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>struct tuner_range {
  unsigned short limit;
  unsigned char config;
  unsigned char cb;
};
</pre></div>
</div>
<p><strong>Members</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">limit</span></code></dt><dd><p>Max frequency supported by that range, in 62.5 kHz
(TV) or 62.5 Hz (Radio), as defined by
V4L2_TUNER_CAP_LOW.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">config</span></code></dt><dd><p>Value of the band switch byte (BB) to setup this mode.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">cb</span></code></dt><dd><p>Value of the CB byte to setup this mode.</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Please notice that digital tuners like xc3028/xc4000/xc5000 don’t use
those ranges, as they’re defined inside the driver. This is used by
analog tuners that are compatible with the “Philips way” to setup the
tuners. On those devices, the tuner set is done via 4 bytes:</p>
<blockquote>
<div><ol class="arabic simple">
<li><p>divider byte1 (DB1)</p></li>
<li><p>divider byte 2 (DB2)</p></li>
<li><p>Control byte (CB)</p></li>
<li><p>band switch byte (BB)</p></li>
</ol>
</div></blockquote>
<p>Some tuners also have an additional optional Auxiliary byte (AB).</p>
<dl class="type">
<dt id="c.tuner_params">
struct <code class="sig-name descname">tuner_params</code><a class="headerlink" href="#c.tuner_params" title="Permalink to this definition">¶</a></dt>
<dd><p>Parameters to be used to setup the tuner. Those are used by drivers/media/tuners/tuner-types.c in order to specify the tuner properties. Most of the parameters are for tuners based on tda9887 IF-PLL multi-standard analog TV/Radio demodulator, with is very common on legacy analog tuners.</p>
</dd></dl>

<p><strong>Definition</strong></p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>struct tuner_params {
  enum param_type type;
  unsigned int cb_first_if_lower_freq:1;
  unsigned int has_tda9887:1;
  unsigned int port1_fm_high_sensitivity:1;
  unsigned int port2_fm_high_sensitivity:1;
  unsigned int fm_gain_normal:1;
  unsigned int intercarrier_mode:1;
  unsigned int port1_active:1;
  unsigned int port2_active:1;
  unsigned int port1_invert_for_secam_lc:1;
  unsigned int port2_invert_for_secam_lc:1;
  unsigned int port1_set_for_fm_mono:1;
  unsigned int default_pll_gating_18:1;
  unsigned int radio_if:2;
  signed int default_top_low:5;
  signed int default_top_mid:5;
  signed int default_top_high:5;
  signed int default_top_secam_low:5;
  signed int default_top_secam_mid:5;
  signed int default_top_secam_high:5;
  u16 iffreq;
  unsigned int count;
  struct tuner_range *ranges;
};
</pre></div>
</div>
<p><strong>Members</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">type</span></code></dt><dd><p>Type of the tuner parameters, as defined at
enum param_type. If the tuner supports multiple
standards, an array should be used, with one
row per different standard.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">cb_first_if_lower_freq</span></code></dt><dd><p>Many Philips-based tuners have a comment in
their datasheet like
“For channel selection involving band
switching, and to ensure smooth tuning to the
desired channel without causing unnecessary
charge pump action, it is recommended to
consider the difference between wanted channel
frequency and the current channel frequency.
Unnecessary charge pump action will result
in very low tuning voltage which may drive the
oscillator to extreme conditions”.
Set cb_first_if_lower_freq to 1, if this check
is required for this tuner. I tested this for
PAL by first setting the TV frequency to
203 MHz and then switching to 96.6 MHz FM
radio. The result was static unless the
control byte was sent first.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">has_tda9887</span></code></dt><dd><p>Set to 1 if this tuner uses a tda9887</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">port1_fm_high_sensitivity</span></code></dt><dd><p>Many Philips tuners use tda9887 PORT1 to select
the FM radio sensitivity. If this setting is 1,
then set PORT1 to 1 to get proper FM reception.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">port2_fm_high_sensitivity</span></code></dt><dd><p>Some Philips tuners use tda9887 PORT2 to select
the FM radio sensitivity. If this setting is 1,
then set PORT2 to 1 to get proper FM reception.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">fm_gain_normal</span></code></dt><dd><p>Some Philips tuners use tda9887 cGainNormal to
select the FM radio sensitivity. If this
setting is 1, e register will use cGainNormal
instead of cGainLow.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">intercarrier_mode</span></code></dt><dd><p>Most tuners with a tda9887 use QSS mode.
Some (cheaper) tuners use Intercarrier mode.
If this setting is 1, then the tuner needs to
be set to intercarrier mode.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">port1_active</span></code></dt><dd><p>This setting sets the default value for PORT1.
0 means inactive, 1 means active. Note: the
actual bit value written to the tda9887 is
inverted. So a 0 here means a 1 in the B6 bit.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">port2_active</span></code></dt><dd><p>This setting sets the default value for PORT2.
0 means inactive, 1 means active. Note: the
actual bit value written to the tda9887 is
inverted. So a 0 here means a 1 in the B7 bit.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">port1_invert_for_secam_lc</span></code></dt><dd><p>Sometimes PORT1 is inverted when the SECAM-L’
standard is selected. Set this bit to 1 if this
is needed.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">port2_invert_for_secam_lc</span></code></dt><dd><p>Sometimes PORT2 is inverted when the SECAM-L’
standard is selected. Set this bit to 1 if this
is needed.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">port1_set_for_fm_mono</span></code></dt><dd><p>Some cards require PORT1 to be 1 for mono Radio
FM and 0 for stereo.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">default_pll_gating_18</span></code></dt><dd><p>Select 18% (or according to datasheet 0%)
L standard PLL gating, vs the driver default
of 36%.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">radio_if</span></code></dt><dd><p>IF to use in radio mode.  Tuners with a
separate radio IF filter seem to use 10.7,
while those without use 33.3 for PAL/SECAM
tuners and 41.3 for NTSC tuners.
0 = 10.7, 1 = 33.3, 2 = 41.3</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">default_top_low</span></code></dt><dd><p>Default tda9887 TOP value in dB for the low
band. Default is 0. Range: -16:+15</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">default_top_mid</span></code></dt><dd><p>Default tda9887 TOP value in dB for the mid
band. Default is 0. Range: -16:+15</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">default_top_high</span></code></dt><dd><p>Default tda9887 TOP value in dB for the high
band. Default is 0. Range: -16:+15</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">default_top_secam_low</span></code></dt><dd><p>Default tda9887 TOP value in dB for SECAM-L/L’
for the low band. Default is 0. Several tuners
require a different TOP value for the
SECAM-L/L’ standards. Range: -16:+15</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">default_top_secam_mid</span></code></dt><dd><p>Default tda9887 TOP value in dB for SECAM-L/L’
for the mid band. Default is 0. Several tuners
require a different TOP value for the
SECAM-L/L’ standards. Range: -16:+15</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">default_top_secam_high</span></code></dt><dd><p>Default tda9887 TOP value in dB for SECAM-L/L’
for the high band. Default is 0. Several tuners
require a different TOP value for the
SECAM-L/L’ standards. Range: -16:+15</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">iffreq</span></code></dt><dd><p>Intermediate frequency (IF) used by the tuner
on digital mode.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">count</span></code></dt><dd><p>Size of the ranges array.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">ranges</span></code></dt><dd><p>Array with the frequency ranges supported by
the tuner.</p>
</dd>
</dl>
<dl class="type">
<dt id="c.tunertype">
struct <code class="sig-name descname">tunertype</code><a class="headerlink" href="#c.tunertype" title="Permalink to this definition">¶</a></dt>
<dd><p>describes the known tuners.</p>
</dd></dl>

<p><strong>Definition</strong></p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>struct tunertype {
  char *name;
  unsigned int count;
  struct tuner_params *params;
  u16 min;
  u16 max;
  u32 stepsize;
  u8 *initdata;
  u8 *sleepdata;
};
</pre></div>
</div>
<p><strong>Members</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">name</span></code></dt><dd><p>string with the tuner’s name.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">count</span></code></dt><dd><p>size of <a class="reference internal" href="#c.tuner_params" title="tuner_params"><code class="xref c c-type docutils literal notranslate"><span class="pre">struct</span> <span class="pre">tuner_params</span></code></a> array.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">params</span></code></dt><dd><p>pointer to <a class="reference internal" href="#c.tuner_params" title="tuner_params"><code class="xref c c-type docutils literal notranslate"><span class="pre">struct</span> <span class="pre">tuner_params</span></code></a> array.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">min</span></code></dt><dd><p>minimal tuner frequency, in 62.5 kHz step.
should be multiplied to 16 to convert to MHz.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">max</span></code></dt><dd><p>minimal tuner frequency, in 62.5 kHz step.
Should be multiplied to 16 to convert to MHz.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">stepsize</span></code></dt><dd><p>frequency step, in Hz.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">initdata</span></code></dt><dd><p>optional byte sequence to initialize the tuner.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">sleepdata</span></code></dt><dd><p>optional byte sequence to power down the tuner.</p>
</dd>
</dl>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="v4l2-common.html" class="btn btn-neutral float-right" title="1.25. V4L2 common functions and data structures" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="v4l2-rect.html" class="btn btn-neutral float-left" title="1.23. V4L2 rect helper functions" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright The kernel development community

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>