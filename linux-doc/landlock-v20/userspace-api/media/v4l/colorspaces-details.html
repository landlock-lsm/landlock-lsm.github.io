

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>2.17. Detailed Colorspace Descriptions &mdash; The Linux Kernel 5.8.0-rc4+ documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../../" src="../../../_static/documentation_options.js"></script>
        <script src="../../../_static/jquery.js"></script>
        <script src="../../../_static/underscore.js"></script>
        <script src="../../../_static/doctools.js"></script>
        <script src="../../../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/theme_overrides.css" type="text/css" />
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="3. Input/Output" href="io.html" />
    <link rel="prev" title="2.16. Defining Colorspaces in V4L2" href="colorspaces-defs.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../../index.html" class="icon icon-home"> The Linux Kernel
          

          
          </a>

          
            
            
              <div class="version">
                5.8.0-rc4
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../../../admin-guide/index.html">The Linux kernel user’s and administrator’s guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../kbuild/index.html">Kernel Build System</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../firmware-guide/index.html">The Linux kernel firmware guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../devicetree/index.html">Open Firmware and Device Tree</a></li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../../index.html">The Linux kernel user-space API guide</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../no_new_privs.html">No New Privileges Flag</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../seccomp_filter.html">Seccomp BPF (SECure COMPuting with filters)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../unshare.html">unshare system call</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../spec_ctrl.html">Speculation Control</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../accelerators/ocxl.html">OpenCAPI (Open Coherent Accelerator Processor Interface)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../ioctl/index.html">IOCTLs</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../index.html">Linux Media Infrastructure userspace API</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../intro.html">Introduction</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="v4l2.html">Part I - Video for Linux API</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="common.html">1. Common API Elements</a></li>
<li class="toctree-l4 current"><a class="reference internal" href="pixfmt.html">2. Image Formats</a></li>
<li class="toctree-l4"><a class="reference internal" href="io.html">3. Input/Output</a></li>
<li class="toctree-l4"><a class="reference internal" href="devices.html">4. Interfaces</a></li>
<li class="toctree-l4"><a class="reference internal" href="libv4l.html">5. Libv4l Userspace Library</a></li>
<li class="toctree-l4"><a class="reference internal" href="compat.html">6. Changes</a></li>
<li class="toctree-l4"><a class="reference internal" href="user-func.html">7. Function Reference</a></li>
<li class="toctree-l4"><a class="reference internal" href="common-defs.html">8. Common definitions for V4L2 and V4L2 subdev interfaces</a></li>
<li class="toctree-l4"><a class="reference internal" href="videodev.html">9. Video For Linux Two Header File</a></li>
<li class="toctree-l4"><a class="reference internal" href="capture-example.html">10. Video Capture Example</a></li>
<li class="toctree-l4"><a class="reference internal" href="v4l2grab-example.html">11. Video Grabber example using libv4l</a></li>
<li class="toctree-l4"><a class="reference internal" href="biblio.html">12. References</a></li>
<li class="toctree-l4"><a class="reference internal" href="v4l2.html#revision-and-copyright">Revision and Copyright</a></li>
<li class="toctree-l4"><a class="reference internal" href="v4l2.html#revision-history">Revision History</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../dvb/dvbapi.html">Part II - Digital TV API</a></li>
<li class="toctree-l3"><a class="reference internal" href="../rc/remote_controllers.html">Part III - Remote Controller API</a></li>
<li class="toctree-l3"><a class="reference internal" href="../mediactl/media-controller.html">Part IV - Media Controller API</a></li>
<li class="toctree-l3"><a class="reference internal" href="../cec/cec-api.html">Part V - Consumer Electronics Control API</a></li>
<li class="toctree-l3"><a class="reference internal" href="../gen-errors.html">Generic Error Codes</a></li>
<li class="toctree-l3"><a class="reference internal" href="../fdl-appendix.html">GNU Free Documentation License</a></li>
<li class="toctree-l3"><a class="reference internal" href="../drivers/index.html">Video4Linux (V4L)  driver-specific documentation</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../process/index.html">Working with the kernel development community</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../dev-tools/index.html">Development tools for the kernel</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../doc-guide/index.html">How to write kernel documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../kernel-hacking/index.html">Kernel Hacking Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../trace/index.html">Linux Tracing Technologies</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../maintainer/index.html">Kernel Maintainer Handbook</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../fault-injection/index.html">fault-injection</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../livepatch/index.html">Kernel Livepatching</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../driver-api/index.html">The Linux driver implementer’s API guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../core-api/index.html">Core API Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../locking/index.html">locking</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../accounting/index.html">Accounting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../block/index.html">Block</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../cdrom/index.html">cdrom</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../cpu-freq/index.html">Linux CPUFreq - CPU frequency and voltage scaling code in the Linux(TM) kernel</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../ide/index.html">Integrated Drive Electronics (IDE)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../fb/index.html">Frame Buffer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../fpga/index.html">fpga</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../hid/index.html">Human Interface Devices (HID)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../i2c/index.html">I2C/SMBus Subsystem</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../iio/index.html">Industrial I/O</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../isdn/index.html">ISDN</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../infiniband/index.html">InfiniBand</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../leds/index.html">LEDs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../netlabel/index.html">NetLabel</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../networking/index.html">Linux Networking Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../pcmcia/index.html">pcmcia</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../power/index.html">Power Management</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../target/index.html">TCM Virtual Device</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../timers/index.html">timers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../spi/index.html">Serial Peripheral Interface (SPI)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../w1/index.html">1-Wire Subsystem</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../watchdog/index.html">Linux Watchdog Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../virt/index.html">Linux Virtualization Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../input/index.html">The Linux Input Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../hwmon/index.html">Linux Hardware Monitoring</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../gpu/index.html">Linux GPU Driver Developer’s Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../security/index.html">Security Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../sound/index.html">Linux Sound Subsystem Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../crypto/index.html">Linux Kernel Crypto API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../filesystems/index.html">Filesystems in the Linux kernel</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../vm/index.html">Linux Memory Management Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../bpf/index.html">BPF Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../usb/index.html">USB support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../PCI/index.html">Linux PCI Bus Subsystem</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../scsi/index.html">Linux SCSI Subsystem</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../misc-devices/index.html">Assorted Miscellaneous Devices Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../scheduler/index.html">Linux Scheduler</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../mhi/index.html">MHI</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../asm-annotations.html">Assembler Annotations</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../arm/index.html">ARM Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../arm64/index.html">ARM64 Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../ia64/index.html">IA-64 Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../m68k/index.html">m68k Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../mips/index.html">MIPS-specific Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../nios2/nios2.html">Linux on the Nios II architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../openrisc/index.html">OpenRISC Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../parisc/index.html">PA-RISC Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../powerpc/index.html">powerpc</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../riscv/index.html">RISC-V architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../s390/index.html">s390 Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../sh/index.html">SuperH Interfaces Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../sparc/index.html">Sparc Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../x86/index.html">x86-specific Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../xtensa/index.html">Xtensa Architecture</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../filesystems/ext4/index.html">ext4 Data Structures and Algorithms</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../translations/index.html">Translations</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">The Linux Kernel</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../../index.html">The Linux kernel user-space API guide</a> &raquo;</li>
        
          <li><a href="../index.html">Linux Media Infrastructure userspace API</a> &raquo;</li>
        
          <li><a href="v4l2.html">Part I - Video for Linux API</a> &raquo;</li>
        
          <li><a href="pixfmt.html"><span class="section-number">2. </span>Image Formats</a> &raquo;</li>
        
      <li><span class="section-number">2.17. </span>Detailed Colorspace Descriptions</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../../_sources/userspace-api/media/v4l/colorspaces-details.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="detailed-colorspace-descriptions">
<h1><span class="section-number">2.17. </span>Detailed Colorspace Descriptions<a class="headerlink" href="#detailed-colorspace-descriptions" title="Permalink to this headline">¶</a></h1>
<div class="section" id="colorspace-smpte-170m-v4l2-colorspace-smpte170m">
<span id="col-smpte-170m"></span><h2><span class="section-number">2.17.1. </span>Colorspace SMPTE 170M (V4L2_COLORSPACE_SMPTE170M)<a class="headerlink" href="#colorspace-smpte-170m-v4l2-colorspace-smpte170m" title="Permalink to this headline">¶</a></h2>
<p>The <a class="reference internal" href="biblio.html#smpte170m"><span class="std std-ref">SMPTE 170M</span></a> standard defines the colorspace used by NTSC and
PAL and by SDTV in general. The default transfer function is
<code class="docutils literal notranslate"><span class="pre">V4L2_XFER_FUNC_709</span></code>. The default Y’CbCr encoding is
<code class="docutils literal notranslate"><span class="pre">V4L2_YCBCR_ENC_601</span></code>. The default Y’CbCr quantization is limited
range. The chromaticities of the primary colors and the white reference
are:</p>
<table class="docutils align-default" id="id1">
<caption><span class="caption-text">SMPTE 170M Chromaticities</span><a class="headerlink" href="#id1" title="Permalink to this table">¶</a></caption>
<colgroup>
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Color</p></th>
<th class="head"><p>x</p></th>
<th class="head"><p>y</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Red</p></td>
<td><p>0.630</p></td>
<td><p>0.340</p></td>
</tr>
<tr class="row-odd"><td><p>Green</p></td>
<td><p>0.310</p></td>
<td><p>0.595</p></td>
</tr>
<tr class="row-even"><td><p>Blue</p></td>
<td><p>0.155</p></td>
<td><p>0.070</p></td>
</tr>
<tr class="row-odd"><td><p>White Reference (D65)</p></td>
<td><p>0.3127</p></td>
<td><p>0.3290</p></td>
</tr>
</tbody>
</table>
<p>The red, green and blue chromaticities are also often referred to as the
SMPTE C set, so this colorspace is sometimes called SMPTE C as well.</p>
<p>The transfer function defined for SMPTE 170M is the same as the one
defined in Rec. 709.</p>
<div class="math">
<p><img src="../../../_images/math/20700f406bfc958460a8490b6965f4982cce7337.png" alt="L' = -1.099(-L)^{0.45} + 0.099 \text{, for } L \le-0.018

L' = 4.5L \text{, for } -0.018 &lt; L &lt; 0.018

L' = 1.099L^{0.45} - 0.099 \text{, for } L \ge 0.018"/></p>
</div><p>Inverse Transfer function:</p>
<div class="math">
<p><img src="../../../_images/math/d749570f774001d563b5ef43a973351b923988c6.png" alt="L = -\left( \frac{L' - 0.099}{-1.099} \right) ^{\frac{1}{0.45}} \text{, for } L' \le -0.081

L = \frac{L'}{4.5} \text{, for } -0.081 &lt; L' &lt; 0.081

L = \left(\frac{L' + 0.099}{1.099}\right)^{\frac{1}{0.45} } \text{, for } L' \ge 0.081"/></p>
</div><p>The luminance (Y’) and color difference (Cb and Cr) are obtained with
the following <code class="docutils literal notranslate"><span class="pre">V4L2_YCBCR_ENC_601</span></code> encoding:</p>
<div class="math">
<p><img src="../../../_images/math/3443fb32f8366e7cdca3cceb6ef313588bce1f8f.png" alt="Y' = 0.2990R' + 0.5870G' + 0.1140B'

Cb = -0.1687R' - 0.3313G' + 0.5B'

Cr = 0.5R' - 0.4187G' - 0.0813B'"/></p>
</div><p>Y’ is clamped to the range [0…1] and Cb and Cr are clamped to the range
[-0.5…0.5]. This conversion to Y’CbCr is identical to the one defined in
the <a class="reference internal" href="biblio.html#itu601"><span class="std std-ref">ITU BT.601</span></a> standard and this colorspace is sometimes called
BT.601 as well, even though BT.601 does not mention any color primaries.</p>
<p>The default quantization is limited range, but full range is possible
although rarely seen.</p>
</div>
<div class="section" id="colorspace-rec-709-v4l2-colorspace-rec709">
<span id="col-rec709"></span><h2><span class="section-number">2.17.2. </span>Colorspace Rec. 709 (V4L2_COLORSPACE_REC709)<a class="headerlink" href="#colorspace-rec-709-v4l2-colorspace-rec709" title="Permalink to this headline">¶</a></h2>
<p>The <a class="reference internal" href="biblio.html#itu709"><span class="std std-ref">ITU BT.709</span></a> standard defines the colorspace used by HDTV in
general. The default transfer function is <code class="docutils literal notranslate"><span class="pre">V4L2_XFER_FUNC_709</span></code>. The
default Y’CbCr encoding is <code class="docutils literal notranslate"><span class="pre">V4L2_YCBCR_ENC_709</span></code>. The default Y’CbCr
quantization is limited range. The chromaticities of the primary colors
and the white reference are:</p>
<table class="docutils align-default" id="id2">
<caption><span class="caption-text">Rec. 709 Chromaticities</span><a class="headerlink" href="#id2" title="Permalink to this table">¶</a></caption>
<colgroup>
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Color</p></th>
<th class="head"><p>x</p></th>
<th class="head"><p>y</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Red</p></td>
<td><p>0.640</p></td>
<td><p>0.330</p></td>
</tr>
<tr class="row-odd"><td><p>Green</p></td>
<td><p>0.300</p></td>
<td><p>0.600</p></td>
</tr>
<tr class="row-even"><td><p>Blue</p></td>
<td><p>0.150</p></td>
<td><p>0.060</p></td>
</tr>
<tr class="row-odd"><td><p>White Reference (D65)</p></td>
<td><p>0.3127</p></td>
<td><p>0.3290</p></td>
</tr>
</tbody>
</table>
<p>The full name of this standard is Rec. ITU-R BT.709-5.</p>
<p>Transfer function. Normally L is in the range [0…1], but for the
extended gamut xvYCC encoding values outside that range are allowed.</p>
<div class="math">
<p><img src="../../../_images/math/5a5e5e6c19b5b0c66918e8b378d8b94fb70f91c3.png" alt="L' = -1.099(-L)^{0.45} + 0.099 \text{, for } L \le -0.018

L' = 4.5L \text{, for } -0.018 &lt; L &lt; 0.018

L' = 1.099L^{0.45} - 0.099 \text{, for } L \ge 0.018"/></p>
</div><p>Inverse Transfer function:</p>
<div class="math">
<p><img src="../../../_images/math/06d2edaac965cda9ffe89dd633bab943d0c5f52f.png" alt="L = -\left( \frac{L' - 0.099}{-1.099} \right)^\frac{1}{0.45} \text{, for } L' \le -0.081

L = \frac{L'}{4.5}\text{, for } -0.081 &lt; L' &lt; 0.081

L = \left(\frac{L' + 0.099}{1.099}\right)^{\frac{1}{0.45} } \text{, for } L' \ge 0.081"/></p>
</div><p>The luminance (Y’) and color difference (Cb and Cr) are obtained with
the following <code class="docutils literal notranslate"><span class="pre">V4L2_YCBCR_ENC_709</span></code> encoding:</p>
<div class="math">
<p><img src="../../../_images/math/968187e4d5e190fec1a53cb068dba715c69ef331.png" alt="Y' = 0.2126R' + 0.7152G' + 0.0722B'

Cb = -0.1146R' - 0.3854G' + 0.5B'

Cr = 0.5R' - 0.4542G' - 0.0458B'"/></p>
</div><p>Y’ is clamped to the range [0…1] and Cb and Cr are clamped to the range
[-0.5…0.5].</p>
<p>The default quantization is limited range, but full range is possible
although rarely seen.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">V4L2_YCBCR_ENC_709</span></code> encoding described above is the default for
this colorspace, but it can be overridden with <code class="docutils literal notranslate"><span class="pre">V4L2_YCBCR_ENC_601</span></code>,
in which case the BT.601 Y’CbCr encoding is used.</p>
<p>Two additional extended gamut Y’CbCr encodings are also possible with
this colorspace:</p>
<p>The xvYCC 709 encoding (<code class="docutils literal notranslate"><span class="pre">V4L2_YCBCR_ENC_XV709</span></code>, <a class="reference internal" href="biblio.html#xvycc"><span class="std std-ref">xvYCC</span></a>) is
similar to the Rec. 709 encoding, but it allows for R’, G’ and B’ values
that are outside the range [0…1]. The resulting Y’, Cb and Cr values are
scaled and offset according to the limited range formula:</p>
<div class="math">
<p><img src="../../../_images/math/889706ac38f4ce905691f7c2f92179d6b7cd2d55.png" alt="Y' = \frac{219}{256} * (0.2126R' + 0.7152G' + 0.0722B') + \frac{16}{256}

Cb = \frac{224}{256} * (-0.1146R' - 0.3854G' + 0.5B')

Cr = \frac{224}{256} * (0.5R' - 0.4542G' - 0.0458B')"/></p>
</div><p>The xvYCC 601 encoding (<code class="docutils literal notranslate"><span class="pre">V4L2_YCBCR_ENC_XV601</span></code>, <a class="reference internal" href="biblio.html#xvycc"><span class="std std-ref">xvYCC</span></a>) is
similar to the BT.601 encoding, but it allows for R’, G’ and B’ values
that are outside the range [0…1]. The resulting Y’, Cb and Cr values are
scaled and offset according to the limited range formula:</p>
<div class="math">
<p><img src="../../../_images/math/ec83c99cbfc2190a021149b49147b9b68f5b871d.png" alt="Y' = \frac{219}{256} * (0.2990R' + 0.5870G' + 0.1140B') + \frac{16}{256}

Cb = \frac{224}{256} * (-0.1687R' - 0.3313G' + 0.5B')

Cr = \frac{224}{256} * (0.5R' - 0.4187G' - 0.0813B')"/></p>
</div><p>Y’ is clamped to the range [0…1] and Cb and Cr are clamped to the range
[-0.5…0.5] and quantized without further scaling or offsets.
The non-standard xvYCC 709 or xvYCC 601 encodings can be
used by selecting <code class="docutils literal notranslate"><span class="pre">V4L2_YCBCR_ENC_XV709</span></code> or <code class="docutils literal notranslate"><span class="pre">V4L2_YCBCR_ENC_XV601</span></code>.
As seen by the xvYCC formulas these encodings always use limited range quantization,
there is no full range variant. The whole point of these extended gamut encodings
is that values outside the limited range are still valid, although they
map to R’, G’ and B’ values outside the [0…1] range and are therefore outside
the Rec. 709 colorspace gamut.</p>
</div>
<div class="section" id="colorspace-srgb-v4l2-colorspace-srgb">
<span id="col-srgb"></span><h2><span class="section-number">2.17.3. </span>Colorspace sRGB (V4L2_COLORSPACE_SRGB)<a class="headerlink" href="#colorspace-srgb-v4l2-colorspace-srgb" title="Permalink to this headline">¶</a></h2>
<p>The <a class="reference internal" href="biblio.html#srgb"><span class="std std-ref">sRGB</span></a> standard defines the colorspace used by most webcams
and computer graphics. The default transfer function is
<code class="docutils literal notranslate"><span class="pre">V4L2_XFER_FUNC_SRGB</span></code>. The default Y’CbCr encoding is
<code class="docutils literal notranslate"><span class="pre">V4L2_YCBCR_ENC_601</span></code>. The default Y’CbCr quantization is limited range.</p>
<p>Note that the <a class="reference internal" href="biblio.html#sycc"><span class="std std-ref">sYCC</span></a> standard specifies full range quantization,
however all current capture hardware supported by the kernel convert
R’G’B’ to limited range Y’CbCr. So choosing full range as the default
would break how applications interpret the quantization range.</p>
<p>The chromaticities of the primary colors and the white reference are:</p>
<table class="docutils align-default" id="id3">
<caption><span class="caption-text">sRGB Chromaticities</span><a class="headerlink" href="#id3" title="Permalink to this table">¶</a></caption>
<colgroup>
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Color</p></th>
<th class="head"><p>x</p></th>
<th class="head"><p>y</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Red</p></td>
<td><p>0.640</p></td>
<td><p>0.330</p></td>
</tr>
<tr class="row-odd"><td><p>Green</p></td>
<td><p>0.300</p></td>
<td><p>0.600</p></td>
</tr>
<tr class="row-even"><td><p>Blue</p></td>
<td><p>0.150</p></td>
<td><p>0.060</p></td>
</tr>
<tr class="row-odd"><td><p>White Reference (D65)</p></td>
<td><p>0.3127</p></td>
<td><p>0.3290</p></td>
</tr>
</tbody>
</table>
<p>These chromaticities are identical to the Rec. 709 colorspace.</p>
<p>Transfer function. Note that negative values for L are only used by the
Y’CbCr conversion.</p>
<div class="math">
<p><img src="../../../_images/math/d4f24f42229c5db8d0a2e22adb92eda900cad334.png" alt="L' = -1.055(-L)^{\frac{1}{2.4} } + 0.055\text{, for }L &lt; -0.0031308

L' = 12.92L\text{, for }-0.0031308 \le L \le 0.0031308

L' = 1.055L ^{\frac{1}{2.4} } - 0.055\text{, for }0.0031308 &lt; L \le 1"/></p>
</div><p>Inverse Transfer function:</p>
<div class="math">
<p><img src="../../../_images/math/bde6c82cd265bc2befd9ad3867594b67ff57895e.png" alt="L = -((-L' + 0.055) / 1.055) ^{2.4}\text{, for }L' &lt; -0.04045

L = L' / 12.92\text{, for }-0.04045 \le L' \le 0.04045

L = ((L' + 0.055) / 1.055) ^{2.4}\text{, for }L' &gt; 0.04045"/></p>
</div><p>The luminance (Y’) and color difference (Cb and Cr) are obtained with
the following <code class="docutils literal notranslate"><span class="pre">V4L2_YCBCR_ENC_601</span></code> encoding as defined by <a class="reference internal" href="biblio.html#sycc"><span class="std std-ref">sYCC</span></a>:</p>
<div class="math">
<p><img src="../../../_images/math/3443fb32f8366e7cdca3cceb6ef313588bce1f8f.png" alt="Y' = 0.2990R' + 0.5870G' + 0.1140B'

Cb = -0.1687R' - 0.3313G' + 0.5B'

Cr = 0.5R' - 0.4187G' - 0.0813B'"/></p>
</div><p>Y’ is clamped to the range [0…1] and Cb and Cr are clamped to the range
[-0.5…0.5]. This transform is identical to one defined in SMPTE
170M/BT.601. The Y’CbCr quantization is limited range.</p>
</div>
<div class="section" id="colorspace-oprgb-v4l2-colorspace-oprgb">
<span id="col-oprgb"></span><h2><span class="section-number">2.17.4. </span>Colorspace opRGB (V4L2_COLORSPACE_OPRGB)<a class="headerlink" href="#colorspace-oprgb-v4l2-colorspace-oprgb" title="Permalink to this headline">¶</a></h2>
<p>The <a class="reference internal" href="biblio.html#oprgb"><span class="std std-ref">opRGB</span></a> standard defines the colorspace used by computer
graphics that use the opRGB colorspace. The default transfer function is
<code class="docutils literal notranslate"><span class="pre">V4L2_XFER_FUNC_OPRGB</span></code>. The default Y’CbCr encoding is
<code class="docutils literal notranslate"><span class="pre">V4L2_YCBCR_ENC_601</span></code>. The default Y’CbCr quantization is limited
range.</p>
<p>Note that the <a class="reference internal" href="biblio.html#oprgb"><span class="std std-ref">opRGB</span></a> standard specifies full range quantization,
however all current capture hardware supported by the kernel convert
R’G’B’ to limited range Y’CbCr. So choosing full range as the default
would break how applications interpret the quantization range.</p>
<p>The chromaticities of the primary colors and the white reference are:</p>
<table class="docutils align-default" id="id4">
<caption><span class="caption-text">opRGB Chromaticities</span><a class="headerlink" href="#id4" title="Permalink to this table">¶</a></caption>
<colgroup>
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Color</p></th>
<th class="head"><p>x</p></th>
<th class="head"><p>y</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Red</p></td>
<td><p>0.6400</p></td>
<td><p>0.3300</p></td>
</tr>
<tr class="row-odd"><td><p>Green</p></td>
<td><p>0.2100</p></td>
<td><p>0.7100</p></td>
</tr>
<tr class="row-even"><td><p>Blue</p></td>
<td><p>0.1500</p></td>
<td><p>0.0600</p></td>
</tr>
<tr class="row-odd"><td><p>White Reference (D65)</p></td>
<td><p>0.3127</p></td>
<td><p>0.3290</p></td>
</tr>
</tbody>
</table>
<p>Transfer function:</p>
<div class="math">
<p><img src="../../../_images/math/913fdb27cef6553d1abb31f1ebde3023542c1452.png" alt="L' = L ^{\frac{1}{2.19921875}}"/></p>
</div><p>Inverse Transfer function:</p>
<div class="math">
<p><img src="../../../_images/math/879383eb7f4c7984a51808bbd73f7becbde30b24.png" alt="L = L'^{(2.19921875)}"/></p>
</div><p>The luminance (Y’) and color difference (Cb and Cr) are obtained with
the following <code class="docutils literal notranslate"><span class="pre">V4L2_YCBCR_ENC_601</span></code> encoding:</p>
<div class="math">
<p><img src="../../../_images/math/3443fb32f8366e7cdca3cceb6ef313588bce1f8f.png" alt="Y' = 0.2990R' + 0.5870G' + 0.1140B'

Cb = -0.1687R' - 0.3313G' + 0.5B'

Cr = 0.5R' - 0.4187G' - 0.0813B'"/></p>
</div><p>Y’ is clamped to the range [0…1] and Cb and Cr are clamped to the range
[-0.5…0.5]. This transform is identical to one defined in SMPTE
170M/BT.601. The Y’CbCr quantization is limited range.</p>
</div>
<div class="section" id="colorspace-bt-2020-v4l2-colorspace-bt2020">
<span id="col-bt2020"></span><h2><span class="section-number">2.17.5. </span>Colorspace BT.2020 (V4L2_COLORSPACE_BT2020)<a class="headerlink" href="#colorspace-bt-2020-v4l2-colorspace-bt2020" title="Permalink to this headline">¶</a></h2>
<p>The <a class="reference internal" href="biblio.html#itu2020"><span class="std std-ref">ITU BT.2020</span></a> standard defines the colorspace used by Ultra-high
definition television (UHDTV). The default transfer function is
<code class="docutils literal notranslate"><span class="pre">V4L2_XFER_FUNC_709</span></code>. The default Y’CbCr encoding is
<code class="docutils literal notranslate"><span class="pre">V4L2_YCBCR_ENC_BT2020</span></code>. The default R’G’B’ quantization is limited
range (!), and so is the default Y’CbCr quantization. The chromaticities
of the primary colors and the white reference are:</p>
<table class="docutils align-default" id="id5">
<caption><span class="caption-text">BT.2020 Chromaticities</span><a class="headerlink" href="#id5" title="Permalink to this table">¶</a></caption>
<colgroup>
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Color</p></th>
<th class="head"><p>x</p></th>
<th class="head"><p>y</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Red</p></td>
<td><p>0.708</p></td>
<td><p>0.292</p></td>
</tr>
<tr class="row-odd"><td><p>Green</p></td>
<td><p>0.170</p></td>
<td><p>0.797</p></td>
</tr>
<tr class="row-even"><td><p>Blue</p></td>
<td><p>0.131</p></td>
<td><p>0.046</p></td>
</tr>
<tr class="row-odd"><td><p>White Reference (D65)</p></td>
<td><p>0.3127</p></td>
<td><p>0.3290</p></td>
</tr>
</tbody>
</table>
<p>Transfer function (same as Rec. 709):</p>
<div class="math">
<p><img src="../../../_images/math/1208cc94c20e1df2fcf369d4ddb909d855f4bc47.png" alt="L' = 4.5L\text{, for }0 \le L &lt; 0.018

L' = 1.099L ^{0.45} - 0.099\text{, for } 0.018 \le L \le 1"/></p>
</div><p>Inverse Transfer function:</p>
<div class="math">
<p><img src="../../../_images/math/967b2122a4171315cad26e53bb206da9ee8bc5b4.png" alt="L = L' / 4.5\text{, for } L' &lt; 0.081

L = \left( \frac{L' + 0.099}{1.099}\right) ^{\frac{1}{0.45} }\text{, for } L' \ge 0.081"/></p>
</div><p>Please note that while Rec. 709 is defined as the default transfer function
by the <a class="reference internal" href="biblio.html#itu2020"><span class="std std-ref">ITU BT.2020</span></a> standard, in practice this colorspace is often used
with the <a class="reference internal" href="#xf-smpte-2084"><span class="std std-ref">Transfer Function SMPTE 2084 (V4L2_XFER_FUNC_SMPTE2084)</span></a>. In particular Ultra HD Blu-ray discs use
this combination.</p>
<p>The luminance (Y’) and color difference (Cb and Cr) are obtained with
the following <code class="docutils literal notranslate"><span class="pre">V4L2_YCBCR_ENC_BT2020</span></code> encoding:</p>
<div class="math">
<p><img src="../../../_images/math/8407bba9ab333398b1f5469a5d213584615b016b.png" alt="Y' = 0.2627R' + 0.6780G' + 0.0593B'

Cb = -0.1396R' - 0.3604G' + 0.5B'

Cr = 0.5R' - 0.4598G' - 0.0402B'"/></p>
</div><p>Y’ is clamped to the range [0…1] and Cb and Cr are clamped to the range
[-0.5…0.5]. The Y’CbCr quantization is limited range.</p>
<p>There is also an alternate constant luminance R’G’B’ to Yc’CbcCrc
(<code class="docutils literal notranslate"><span class="pre">V4L2_YCBCR_ENC_BT2020_CONST_LUM</span></code>) encoding:</p>
<p>Luma:</p>
<div class="math">
<p><img src="../../../_images/math/e41516f70e743569b02c20a0e70616e07f09a273.png" alt="\begin{align*}
Yc' = (0.2627R + 0.6780G + 0.0593B)'&amp; \\
B' - Yc' \le 0:&amp; \\
    &amp;Cbc = (B' - Yc') / 1.9404 \\
B' - Yc' &gt; 0: &amp; \\
    &amp;Cbc = (B' - Yc') / 1.5816 \\
R' - Yc' \le 0:&amp; \\
    &amp;Crc = (R' - Y') / 1.7184 \\
R' - Yc' &gt; 0:&amp; \\
    &amp;Crc = (R' - Y') / 0.9936
\end{align*}"/></p>
</div><p>Yc’ is clamped to the range [0…1] and Cbc and Crc are clamped to the
range [-0.5…0.5]. The Yc’CbcCrc quantization is limited range.</p>
</div>
<div class="section" id="colorspace-dci-p3-v4l2-colorspace-dci-p3">
<span id="col-dcip3"></span><h2><span class="section-number">2.17.6. </span>Colorspace DCI-P3 (V4L2_COLORSPACE_DCI_P3)<a class="headerlink" href="#colorspace-dci-p3-v4l2-colorspace-dci-p3" title="Permalink to this headline">¶</a></h2>
<p>The <a class="reference internal" href="biblio.html#smpte431"><span class="std std-ref">SMPTE RP 431-2</span></a> standard defines the colorspace used by cinema
projectors that use the DCI-P3 colorspace. The default transfer function
is <code class="docutils literal notranslate"><span class="pre">V4L2_XFER_FUNC_DCI_P3</span></code>. The default Y’CbCr encoding is
<code class="docutils literal notranslate"><span class="pre">V4L2_YCBCR_ENC_709</span></code>. The default Y’CbCr quantization is limited range.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Note that this colorspace standard does not specify a
Y’CbCr encoding since it is not meant to be encoded to Y’CbCr. So this
default Y’CbCr encoding was picked because it is the HDTV encoding.</p>
</div>
<p>The chromaticities of the primary colors and the white reference are:</p>
<table class="docutils align-default" id="id6">
<caption><span class="caption-text">DCI-P3 Chromaticities</span><a class="headerlink" href="#id6" title="Permalink to this table">¶</a></caption>
<colgroup>
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Color</p></th>
<th class="head"><p>x</p></th>
<th class="head"><p>y</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Red</p></td>
<td><p>0.6800</p></td>
<td><p>0.3200</p></td>
</tr>
<tr class="row-odd"><td><p>Green</p></td>
<td><p>0.2650</p></td>
<td><p>0.6900</p></td>
</tr>
<tr class="row-even"><td><p>Blue</p></td>
<td><p>0.1500</p></td>
<td><p>0.0600</p></td>
</tr>
<tr class="row-odd"><td><p>White Reference</p></td>
<td><p>0.3140</p></td>
<td><p>0.3510</p></td>
</tr>
</tbody>
</table>
<p>Transfer function:</p>
<div class="math">
<p><img src="../../../_images/math/78c97f179aa052a24acf88ad64acdbccfcd90ba8.png" alt="L' = L^{\frac{1}{2.6}}"/></p>
</div><p>Inverse Transfer function:</p>
<div class="math">
<p><img src="../../../_images/math/d494c1c9416623f5035f5612f9b311d583bcbf5b.png" alt="L = L'^{(2.6)}"/></p>
</div><p>Y’CbCr encoding is not specified. V4L2 defaults to Rec. 709.</p>
</div>
<div class="section" id="colorspace-smpte-240m-v4l2-colorspace-smpte240m">
<span id="col-smpte-240m"></span><h2><span class="section-number">2.17.7. </span>Colorspace SMPTE 240M (V4L2_COLORSPACE_SMPTE240M)<a class="headerlink" href="#colorspace-smpte-240m-v4l2-colorspace-smpte240m" title="Permalink to this headline">¶</a></h2>
<p>The <a class="reference internal" href="biblio.html#smpte240m"><span class="std std-ref">SMPTE 240M</span></a> standard was an interim standard used during the
early days of HDTV (1988-1998). It has been superseded by Rec. 709. The
default transfer function is <code class="docutils literal notranslate"><span class="pre">V4L2_XFER_FUNC_SMPTE240M</span></code>. The default
Y’CbCr encoding is <code class="docutils literal notranslate"><span class="pre">V4L2_YCBCR_ENC_SMPTE240M</span></code>. The default Y’CbCr
quantization is limited range. The chromaticities of the primary colors
and the white reference are:</p>
<table class="docutils align-default" id="id7">
<caption><span class="caption-text">SMPTE 240M Chromaticities</span><a class="headerlink" href="#id7" title="Permalink to this table">¶</a></caption>
<colgroup>
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Color</p></th>
<th class="head"><p>x</p></th>
<th class="head"><p>y</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Red</p></td>
<td><p>0.630</p></td>
<td><p>0.340</p></td>
</tr>
<tr class="row-odd"><td><p>Green</p></td>
<td><p>0.310</p></td>
<td><p>0.595</p></td>
</tr>
<tr class="row-even"><td><p>Blue</p></td>
<td><p>0.155</p></td>
<td><p>0.070</p></td>
</tr>
<tr class="row-odd"><td><p>White Reference (D65)</p></td>
<td><p>0.3127</p></td>
<td><p>0.3290</p></td>
</tr>
</tbody>
</table>
<p>These chromaticities are identical to the SMPTE 170M colorspace.</p>
<p>Transfer function:</p>
<div class="math">
<p><img src="../../../_images/math/dfa503031e027ccdc45658848c15187db8acff69.png" alt="L' = 4L\text{, for } 0 \le L &lt; 0.0228

L' = 1.1115L ^{0.45} - 0.1115\text{, for } 0.0228 \le L \le 1"/></p>
</div><p>Inverse Transfer function:</p>
<div class="math">
<p><img src="../../../_images/math/96bd0668efd142a81aca9695b45bfc617a7e7251.png" alt="L = \frac{L'}{4}\text{, for } 0 \le L' &lt; 0.0913

L = \left( \frac{L' + 0.1115}{1.1115}\right) ^{\frac{1}{0.45} }\text{, for } L' \ge 0.0913"/></p>
</div><p>The luminance (Y’) and color difference (Cb and Cr) are obtained with
the following <code class="docutils literal notranslate"><span class="pre">V4L2_YCBCR_ENC_SMPTE240M</span></code> encoding:</p>
<div class="math">
<p><img src="../../../_images/math/453a6a0fa1f6be9aec4ec5eed18afc71b58087b1.png" alt="Y' = 0.2122R' + 0.7013G' + 0.0865B'

Cb = -0.1161R' - 0.3839G' + 0.5B'

Cr = 0.5R' - 0.4451G' - 0.0549B'"/></p>
</div><p>Y’ is clamped to the range [0…1] and Cb and Cr are clamped to the
range [-0.5…0.5]. The Y’CbCr quantization is limited range.</p>
</div>
<div class="section" id="colorspace-ntsc-1953-v4l2-colorspace-470-system-m">
<span id="col-sysm"></span><h2><span class="section-number">2.17.8. </span>Colorspace NTSC 1953 (V4L2_COLORSPACE_470_SYSTEM_M)<a class="headerlink" href="#colorspace-ntsc-1953-v4l2-colorspace-470-system-m" title="Permalink to this headline">¶</a></h2>
<p>This standard defines the colorspace used by NTSC in 1953. In practice
this colorspace is obsolete and SMPTE 170M should be used instead. The
default transfer function is <code class="docutils literal notranslate"><span class="pre">V4L2_XFER_FUNC_709</span></code>. The default Y’CbCr
encoding is <code class="docutils literal notranslate"><span class="pre">V4L2_YCBCR_ENC_601</span></code>. The default Y’CbCr quantization is
limited range. The chromaticities of the primary colors and the white
reference are:</p>
<table class="docutils align-default" id="id8">
<caption><span class="caption-text">NTSC 1953 Chromaticities</span><a class="headerlink" href="#id8" title="Permalink to this table">¶</a></caption>
<colgroup>
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Color</p></th>
<th class="head"><p>x</p></th>
<th class="head"><p>y</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Red</p></td>
<td><p>0.67</p></td>
<td><p>0.33</p></td>
</tr>
<tr class="row-odd"><td><p>Green</p></td>
<td><p>0.21</p></td>
<td><p>0.71</p></td>
</tr>
<tr class="row-even"><td><p>Blue</p></td>
<td><p>0.14</p></td>
<td><p>0.08</p></td>
</tr>
<tr class="row-odd"><td><p>White Reference (C)</p></td>
<td><p>0.310</p></td>
<td><p>0.316</p></td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This colorspace uses Illuminant C instead of D65 as the white
reference. To correctly convert an image in this colorspace to another
that uses D65 you need to apply a chromatic adaptation algorithm such as
the Bradford method.</p>
</div>
<p>The transfer function was never properly defined for NTSC 1953. The Rec.
709 transfer function is recommended in the literature:</p>
<div class="math">
<p><img src="../../../_images/math/e933fdddd93febbe34ced91922f16fb19bbbc3eb.png" alt="L' = 4.5L\text{, for } 0 \le L &lt; 0.018

L' = 1.099L ^{0.45} - 0.099\text{, for } 0.018 \le L \le 1"/></p>
</div><p>Inverse Transfer function:</p>
<div class="math">
<p><img src="../../../_images/math/b3b39fa95b4a78001cf15ee45ef53ce8e4552368.png" alt="L = \frac{L'}{4.5} \text{, for } L' &lt; 0.081

L = \left( \frac{L' + 0.099}{1.099}\right) ^{\frac{1}{0.45} }\text{, for } L' \ge 0.081"/></p>
</div><p>The luminance (Y’) and color difference (Cb and Cr) are obtained with
the following <code class="docutils literal notranslate"><span class="pre">V4L2_YCBCR_ENC_601</span></code> encoding:</p>
<div class="math">
<p><img src="../../../_images/math/3443fb32f8366e7cdca3cceb6ef313588bce1f8f.png" alt="Y' = 0.2990R' + 0.5870G' + 0.1140B'

Cb = -0.1687R' - 0.3313G' + 0.5B'

Cr = 0.5R' - 0.4187G' - 0.0813B'"/></p>
</div><p>Y’ is clamped to the range [0…1] and Cb and Cr are clamped to the range
[-0.5…0.5]. The Y’CbCr quantization is limited range. This transform is
identical to one defined in SMPTE 170M/BT.601.</p>
</div>
<div class="section" id="colorspace-ebu-tech-3213-v4l2-colorspace-470-system-bg">
<span id="col-sysbg"></span><h2><span class="section-number">2.17.9. </span>Colorspace EBU Tech. 3213 (V4L2_COLORSPACE_470_SYSTEM_BG)<a class="headerlink" href="#colorspace-ebu-tech-3213-v4l2-colorspace-470-system-bg" title="Permalink to this headline">¶</a></h2>
<p>The <a class="reference internal" href="biblio.html#tech3213"><span class="std std-ref">EBU Tech 3213</span></a> standard defines the colorspace used by PAL/SECAM
in 1975. In practice this colorspace is obsolete and SMPTE 170M should
be used instead. The default transfer function is
<code class="docutils literal notranslate"><span class="pre">V4L2_XFER_FUNC_709</span></code>. The default Y’CbCr encoding is
<code class="docutils literal notranslate"><span class="pre">V4L2_YCBCR_ENC_601</span></code>. The default Y’CbCr quantization is limited
range. The chromaticities of the primary colors and the white reference
are:</p>
<table class="docutils align-default" id="id9">
<caption><span class="caption-text">EBU Tech. 3213 Chromaticities</span><a class="headerlink" href="#id9" title="Permalink to this table">¶</a></caption>
<colgroup>
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Color</p></th>
<th class="head"><p>x</p></th>
<th class="head"><p>y</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Red</p></td>
<td><p>0.64</p></td>
<td><p>0.33</p></td>
</tr>
<tr class="row-odd"><td><p>Green</p></td>
<td><p>0.29</p></td>
<td><p>0.60</p></td>
</tr>
<tr class="row-even"><td><p>Blue</p></td>
<td><p>0.15</p></td>
<td><p>0.06</p></td>
</tr>
<tr class="row-odd"><td><p>White Reference (D65)</p></td>
<td><p>0.3127</p></td>
<td><p>0.3290</p></td>
</tr>
</tbody>
</table>
<p>The transfer function was never properly defined for this colorspace.
The Rec. 709 transfer function is recommended in the literature:</p>
<div class="math">
<p><img src="../../../_images/math/e933fdddd93febbe34ced91922f16fb19bbbc3eb.png" alt="L' = 4.5L\text{, for } 0 \le L &lt; 0.018

L' = 1.099L ^{0.45} - 0.099\text{, for } 0.018 \le L \le 1"/></p>
</div><p>Inverse Transfer function:</p>
<div class="math">
<p><img src="../../../_images/math/c207d9c2e6e40564e78ec538a91098328a6be76e.png" alt="L = \frac{L'}{4.5} \text{, for } L' &lt; 0.081

L = \left(\frac{L' + 0.099}{1.099} \right) ^{\frac{1}{0.45} }\text{, for } L' \ge 0.081"/></p>
</div><p>The luminance (Y’) and color difference (Cb and Cr) are obtained with
the following <code class="docutils literal notranslate"><span class="pre">V4L2_YCBCR_ENC_601</span></code> encoding:</p>
<div class="math">
<p><img src="../../../_images/math/3443fb32f8366e7cdca3cceb6ef313588bce1f8f.png" alt="Y' = 0.2990R' + 0.5870G' + 0.1140B'

Cb = -0.1687R' - 0.3313G' + 0.5B'

Cr = 0.5R' - 0.4187G' - 0.0813B'"/></p>
</div><p>Y’ is clamped to the range [0…1] and Cb and Cr are clamped to the range
[-0.5…0.5]. The Y’CbCr quantization is limited range. This transform is
identical to one defined in SMPTE 170M/BT.601.</p>
</div>
<div class="section" id="colorspace-jpeg-v4l2-colorspace-jpeg">
<span id="col-jpeg"></span><h2><span class="section-number">2.17.10. </span>Colorspace JPEG (V4L2_COLORSPACE_JPEG)<a class="headerlink" href="#colorspace-jpeg-v4l2-colorspace-jpeg" title="Permalink to this headline">¶</a></h2>
<p>This colorspace defines the colorspace used by most (Motion-)JPEG
formats. The chromaticities of the primary colors and the white
reference are identical to sRGB. The transfer function use is
<code class="docutils literal notranslate"><span class="pre">V4L2_XFER_FUNC_SRGB</span></code>. The Y’CbCr encoding is <code class="docutils literal notranslate"><span class="pre">V4L2_YCBCR_ENC_601</span></code>
with full range quantization where Y’ is scaled to [0…255] and Cb/Cr are
scaled to [-128…128] and then clipped to [-128…127].</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The JPEG standard does not actually store colorspace
information. So if something other than sRGB is used, then the driver
will have to set that information explicitly. Effectively
<code class="docutils literal notranslate"><span class="pre">V4L2_COLORSPACE_JPEG</span></code> can be considered to be an abbreviation for
<code class="docutils literal notranslate"><span class="pre">V4L2_COLORSPACE_SRGB</span></code>, <code class="docutils literal notranslate"><span class="pre">V4L2_YCBCR_ENC_601</span></code> and
<code class="docutils literal notranslate"><span class="pre">V4L2_QUANTIZATION_FULL_RANGE</span></code>.</p>
</div>
</div>
</div>
<div class="section" id="detailed-transfer-function-descriptions">
<h1><span class="section-number">2.18. </span>Detailed Transfer Function Descriptions<a class="headerlink" href="#detailed-transfer-function-descriptions" title="Permalink to this headline">¶</a></h1>
<div class="section" id="transfer-function-smpte-2084-v4l2-xfer-func-smpte2084">
<span id="xf-smpte-2084"></span><h2><span class="section-number">2.18.1. </span>Transfer Function SMPTE 2084 (V4L2_XFER_FUNC_SMPTE2084)<a class="headerlink" href="#transfer-function-smpte-2084-v4l2-xfer-func-smpte2084" title="Permalink to this headline">¶</a></h2>
<p>The <a class="reference internal" href="biblio.html#smpte2084"><span class="std std-ref">SMPTE ST 2084</span></a> standard defines the transfer function used by
High Dynamic Range content.</p>
<dl>
<dt>Constants:</dt><dd><p>m1 = (2610 / 4096) / 4</p>
<p>m2 = (2523 / 4096) * 128</p>
<p>c1 = 3424 / 4096</p>
<p>c2 = (2413 / 4096) * 32</p>
<p>c3 = (2392 / 4096) * 32</p>
</dd>
<dt>Transfer function:</dt><dd><p>L’ = ((c1 + c2 * L<sup>m1</sup>) / (1 + c3 * L<sup>m1</sup>))<sup>m2</sup></p>
</dd>
<dt>Inverse Transfer function:</dt><dd><p>L = (max(L’<sup>1/m2</sup> - c1, 0) / (c2 - c3 *
L’<sup>1/m2</sup>))<sup>1/m1</sup></p>
</dd>
</dl>
<p>Take care when converting between this transfer function and non-HDR transfer
functions: the linear RGB values [0…1] of HDR content map to a luminance range
of 0 to 10000 cd/m<sup>2</sup> whereas the linear RGB values of non-HDR (aka
Standard Dynamic Range or SDR) map to a luminance range of 0 to 100 cd/m<sup>2</sup>.</p>
<p>To go from SDR to HDR you will have to divide L by 100 first. To go in the other
direction you will have to multiply L by 100. Of course, this clamps all
luminance values over 100 cd/m<sup>2</sup> to 100 cd/m<sup>2</sup>.</p>
<p>There are better methods, see e.g. <a class="reference internal" href="biblio.html#colimg"><span class="std std-ref">colimg</span></a> for more in-depth information
about this.</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="io.html" class="btn btn-neutral float-right" title="3. Input/Output" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="colorspaces-defs.html" class="btn btn-neutral float-left" title="2.16. Defining Colorspaces in V4L2" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright The kernel development community

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>