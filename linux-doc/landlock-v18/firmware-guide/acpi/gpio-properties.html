

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>_DSD Device Properties Related to GPIO &mdash; The Linux Kernel 5.7.0-rc7+ documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/theme_overrides.css" type="text/css" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="ACPI I2C Muxes" href="i2c-muxes.html" />
    <link rel="prev" title="APEI Error INJection" href="apei/einj.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html" class="icon icon-home"> The Linux Kernel
          

          
          </a>

          
            
            
              <div class="version">
                5.7.0-rc7
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../../admin-guide/index.html">The Linux kernel user’s and administrator’s guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../kbuild/index.html">Kernel Build System</a></li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">The Linux kernel firmware guide</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="index.html">ACPI Support</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="namespace.html">ACPI Device Tree - Representation of ACPI Namespace</a></li>
<li class="toctree-l3"><a class="reference internal" href="dsd/graph.html">Graphs</a></li>
<li class="toctree-l3"><a class="reference internal" href="dsd/data-node-references.html">Referencing hierarchical data nodes</a></li>
<li class="toctree-l3"><a class="reference internal" href="dsd/leds.html">Describing and referring to LEDs in ACPI</a></li>
<li class="toctree-l3"><a class="reference internal" href="enumeration.html">ACPI Based Device Enumeration</a></li>
<li class="toctree-l3"><a class="reference internal" href="osi.html">ACPI _OSI and _REV methods</a></li>
<li class="toctree-l3"><a class="reference internal" href="method-customizing.html">Linux ACPI Custom Control Method How To</a></li>
<li class="toctree-l3"><a class="reference internal" href="method-tracing.html">ACPICA Trace Facility</a></li>
<li class="toctree-l3"><a class="reference internal" href="DSD-properties-rules.html">_DSD Device Properties Usage Rules</a></li>
<li class="toctree-l3"><a class="reference internal" href="debug.html">ACPI Debug Output</a></li>
<li class="toctree-l3"><a class="reference internal" href="aml-debugger.html">The AML Debugger</a></li>
<li class="toctree-l3"><a class="reference internal" href="apei/output_format.html">APEI output format</a></li>
<li class="toctree-l3"><a class="reference internal" href="apei/einj.html">APEI Error INJection</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">_DSD Device Properties Related to GPIO</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#other-supported-properties">Other supported properties</a></li>
<li class="toctree-l4"><a class="reference internal" href="#acpi-gpio-mappings-provided-by-drivers">ACPI GPIO Mappings Provided by Drivers</a></li>
<li class="toctree-l4"><a class="reference internal" href="#using-the-crs-fallback">Using the _CRS fallback</a></li>
<li class="toctree-l4"><a class="reference internal" href="#getting-gpio-descriptor">Getting GPIO descriptor</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="i2c-muxes.html">ACPI I2C Muxes</a></li>
<li class="toctree-l3"><a class="reference internal" href="acpi-lid.html">Special Usage Model of the ACPI Control Method Lid Device</a></li>
<li class="toctree-l3"><a class="reference internal" href="lpit.html">Low Power Idle Table (LPIT)</a></li>
<li class="toctree-l3"><a class="reference internal" href="video_extension.html">ACPI video extensions</a></li>
<li class="toctree-l3"><a class="reference internal" href="extcon-intel-int3496.html">Intel INT3496 ACPI device extcon driver documentation</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../userspace-api/index.html">The Linux kernel user-space API guide</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../process/index.html">Working with the kernel development community</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../dev-tools/index.html">Development tools for the kernel</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../doc-guide/index.html">How to write kernel documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../kernel-hacking/index.html">Kernel Hacking Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../trace/index.html">Linux Tracing Technologies</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../maintainer/index.html">Kernel Maintainer Handbook</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../fault-injection/index.html">fault-injection</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../livepatch/index.html">Kernel Livepatching</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../driver-api/index.html">The Linux driver implementer’s API guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../core-api/index.html">Core API Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../locking/index.html">locking</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../accounting/index.html">Accounting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../block/index.html">Block</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../cdrom/index.html">cdrom</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../cpu-freq/index.html">Linux CPUFreq - CPU frequency and voltage scaling code in the Linux(TM) kernel</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../ide/index.html">Integrated Drive Electronics (IDE)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../fb/index.html">Frame Buffer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../fpga/index.html">fpga</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../hid/index.html">Human Interface Devices (HID)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../i2c/index.html">I2C/SMBus Subsystem</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../iio/index.html">Industrial I/O</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../isdn/index.html">ISDN</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../infiniband/index.html">InfiniBand</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../leds/index.html">LEDs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../media/index.html">Linux Media Subsystem Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../netlabel/index.html">NetLabel</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../networking/index.html">Linux Networking Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../pcmcia/index.html">pcmcia</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../power/index.html">Power Management</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../target/index.html">TCM Virtual Device</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../timers/index.html">timers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../spi/index.html">Serial Peripheral Interface (SPI)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../w1/index.html">1-Wire Subsystem</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../watchdog/index.html">Linux Watchdog Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../virt/index.html">Linux Virtualization Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../input/index.html">The Linux Input Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../hwmon/index.html">Linux Hardware Monitoring</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../gpu/index.html">Linux GPU Driver Developer’s Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../security/index.html">Security Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../sound/index.html">Linux Sound Subsystem Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../crypto/index.html">Linux Kernel Crypto API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../filesystems/index.html">Filesystems in the Linux kernel</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../vm/index.html">Linux Memory Management Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../bpf/index.html">BPF Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../usb/index.html">USB support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../PCI/index.html">Linux PCI Bus Subsystem</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../scsi/index.html">Linux SCSI Subsystem</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../misc-devices/index.html">Assorted Miscellaneous Devices Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../scheduler/index.html">Linux Scheduler</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../mhi/index.html">MHI</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../asm-annotations.html">Assembler Annotations</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../arm/index.html">ARM Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../arm64/index.html">ARM64 Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../ia64/index.html">IA-64 Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../m68k/index.html">m68k Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../mips/index.html">MIPS-specific Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../nios2/nios2.html">Linux on the Nios II architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../openrisc/index.html">OpenRISC Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../parisc/index.html">PA-RISC Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../powerpc/index.html">powerpc</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../riscv/index.html">RISC-V architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../s390/index.html">s390 Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../sh/index.html">SuperH Interfaces Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../sparc/index.html">Sparc Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../x86/index.html">x86-specific Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../xtensa/index.html">Xtensa Architecture</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../filesystems/ext4/index.html">ext4 Data Structures and Algorithms</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../translations/index.html">Translations</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">The Linux Kernel</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../index.html">The Linux kernel firmware guide</a> &raquo;</li>
        
          <li><a href="index.html">ACPI Support</a> &raquo;</li>
        
      <li>_DSD Device Properties Related to GPIO</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../_sources/firmware-guide/acpi/gpio-properties.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="dsd-device-properties-related-to-gpio">
<h1>_DSD Device Properties Related to GPIO<a class="headerlink" href="#dsd-device-properties-related-to-gpio" title="Permalink to this headline">¶</a></h1>
<p>With the release of ACPI 5.1, the _DSD configuration object finally
allows names to be given to GPIOs (and other things as well) returned
by _CRS.  Previously, we were only able to use an integer index to find
the corresponding GPIO, which is pretty error prone (it depends on
the _CRS output ordering, for example).</p>
<p>With _DSD we can now query GPIOs using a name instead of an integer
index, like the ASL example below shows:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>// Bluetooth device with reset and shutdown GPIOs
Device (BTH)
{
    Name (_HID, ...)

    Name (_CRS, ResourceTemplate ()
    {
        GpioIo (Exclusive, PullUp, 0, 0, IoRestrictionInputOnly,
                &quot;\\_SB.GPO0&quot;, 0, ResourceConsumer) {15}
        GpioIo (Exclusive, PullUp, 0, 0, IoRestrictionInputOnly,
                &quot;\\_SB.GPO0&quot;, 0, ResourceConsumer) {27, 31}
    })

    Name (_DSD, Package ()
    {
        ToUUID(&quot;daffd814-6eba-4d8c-8a91-bc9bbf4aa301&quot;),
        Package ()
        {
            Package () {&quot;reset-gpios&quot;, Package() {^BTH, 1, 1, 0 }},
            Package () {&quot;shutdown-gpios&quot;, Package() {^BTH, 0, 0, 0 }},
        }
    })
}
</pre></div>
</div>
<p>The format of the supported GPIO property is:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Package () { &quot;name&quot;, Package () { ref, index, pin, active_low }}
</pre></div>
</div>
<dl class="simple">
<dt>ref</dt><dd><p>The device that has _CRS containing GpioIo()/GpioInt() resources,
typically this is the device itself (BTH in our case).</p>
</dd>
<dt>index</dt><dd><p>Index of the GpioIo()/GpioInt() resource in _CRS starting from zero.</p>
</dd>
<dt>pin</dt><dd><p>Pin in the GpioIo()/GpioInt() resource. Typically this is zero.</p>
</dd>
<dt>active_low</dt><dd><p>If 1 the GPIO is marked as active_low.</p>
</dd>
</dl>
<p>Since ACPI GpioIo() resource does not have a field saying whether it is
active low or high, the “active_low” argument can be used here.  Setting
it to 1 marks the GPIO as active low.</p>
<p>In our Bluetooth example the “reset-gpios” refers to the second GpioIo()
resource, second pin in that resource with the GPIO number of 31.</p>
<p>It is possible to leave holes in the array of GPIOs. This is useful in
cases like with SPI host controllers where some chip selects may be
implemented as GPIOs and some as native signals. For example a SPI host
controller can have chip selects 0 and 2 implemented as GPIOs and 1 as
native:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Package () {
    &quot;cs-gpios&quot;,
    Package () {
        ^GPIO, 19, 0, 0, // chip select 0: GPIO
        0,               // chip select 1: native signal
        ^GPIO, 20, 0, 0, // chip select 2: GPIO
    }
}
</pre></div>
</div>
<div class="section" id="other-supported-properties">
<h2>Other supported properties<a class="headerlink" href="#other-supported-properties" title="Permalink to this headline">¶</a></h2>
<p>Following Device Tree compatible device properties are also supported by
_DSD device properties for GPIO controllers:</p>
<ul class="simple">
<li><p>gpio-hog</p></li>
<li><p>output-high</p></li>
<li><p>output-low</p></li>
<li><p>input</p></li>
<li><p>line-name</p></li>
</ul>
<p>Example:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Name (_DSD, Package () {
    // _DSD Hierarchical Properties Extension UUID
    ToUUID(&quot;dbb8e3e6-5886-4ba6-8795-1319f52a966b&quot;),
    Package () {
        Package () {&quot;hog-gpio8&quot;, &quot;G8PU&quot;}
    }
})

Name (G8PU, Package () {
    ToUUID(&quot;daffd814-6eba-4d8c-8a91-bc9bbf4aa301&quot;),
    Package () {
        Package () {&quot;gpio-hog&quot;, 1},
        Package () {&quot;gpios&quot;, Package () {8, 0}},
        Package () {&quot;output-high&quot;, 1},
        Package () {&quot;line-name&quot;, &quot;gpio8-pullup&quot;},
    }
})
</pre></div>
</div>
<ul class="simple">
<li><p>gpio-line-names</p></li>
</ul>
<p>Example:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Package () {
    &quot;gpio-line-names&quot;,
    Package () {
        &quot;SPI0_CS_N&quot;, &quot;EXP2_INT&quot;, &quot;MUX6_IO&quot;, &quot;UART0_RXD&quot;, &quot;MUX7_IO&quot;,
        &quot;LVL_C_A1&quot;, &quot;MUX0_IO&quot;, &quot;SPI1_MISO&quot;
    }
}
</pre></div>
</div>
<p>See Documentation/devicetree/bindings/gpio/gpio.txt for more information
about these properties.</p>
</div>
<div class="section" id="acpi-gpio-mappings-provided-by-drivers">
<h2>ACPI GPIO Mappings Provided by Drivers<a class="headerlink" href="#acpi-gpio-mappings-provided-by-drivers" title="Permalink to this headline">¶</a></h2>
<p>There are systems in which the ACPI tables do not contain _DSD but provide _CRS
with GpioIo()/GpioInt() resources and device drivers still need to work with
them.</p>
<p>In those cases ACPI device identification objects, _HID, _CID, _CLS, _SUB, _HRV,
available to the driver can be used to identify the device and that is supposed
to be sufficient to determine the meaning and purpose of all of the GPIO lines
listed by the GpioIo()/GpioInt() resources returned by _CRS.  In other words,
the driver is supposed to know what to use the GpioIo()/GpioInt() resources for
once it has identified the device.  Having done that, it can simply assign names
to the GPIO lines it is going to use and provide the GPIO subsystem with a
mapping between those names and the ACPI GPIO resources corresponding to them.</p>
<p>To do that, the driver needs to define a mapping table as a NULL-terminated
array of struct acpi_gpio_mapping objects that each contain a name, a pointer
to an array of line data (struct acpi_gpio_params) objects and the size of that
array.  Each struct acpi_gpio_params object consists of three fields,
crs_entry_index, line_index, active_low, representing the index of the target
GpioIo()/GpioInt() resource in _CRS starting from zero, the index of the target
line in that resource starting from zero, and the active-low flag for that line,
respectively, in analogy with the _DSD GPIO property format specified above.</p>
<p>For the example Bluetooth device discussed previously the data structures in
question would look like this:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>static const struct acpi_gpio_params reset_gpio = { 1, 1, false };
static const struct acpi_gpio_params shutdown_gpio = { 0, 0, false };

static const struct acpi_gpio_mapping bluetooth_acpi_gpios[] = {
  { &quot;reset-gpios&quot;, &amp;reset_gpio, 1 },
  { &quot;shutdown-gpios&quot;, &amp;shutdown_gpio, 1 },
  { },
};
</pre></div>
</div>
<p>Next, the mapping table needs to be passed as the second argument to
acpi_dev_add_driver_gpios() that will register it with the ACPI device object
pointed to by its first argument.  That should be done in the driver’s .probe()
routine.  On removal, the driver should unregister its GPIO mapping table by
calling acpi_dev_remove_driver_gpios() on the ACPI device object where that
table was previously registered.</p>
</div>
<div class="section" id="using-the-crs-fallback">
<h2>Using the _CRS fallback<a class="headerlink" href="#using-the-crs-fallback" title="Permalink to this headline">¶</a></h2>
<p>If a device does not have _DSD or the driver does not create ACPI GPIO
mapping, the Linux GPIO framework refuses to return any GPIOs. This is
because the driver does not know what it actually gets. For example if we
have a device like below:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Device (BTH)
{
    Name (_HID, ...)

    Name (_CRS, ResourceTemplate () {
        GpioIo (Exclusive, PullNone, 0, 0, IoRestrictionNone,
                &quot;\\_SB.GPO0&quot;, 0, ResourceConsumer) {15}
        GpioIo (Exclusive, PullNone, 0, 0, IoRestrictionNone,
                &quot;\\_SB.GPO0&quot;, 0, ResourceConsumer) {27}
    })
}
</pre></div>
</div>
<p>The driver might expect to get the right GPIO when it does:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>desc = gpiod_get(dev, &quot;reset&quot;, GPIOD_OUT_LOW);
</pre></div>
</div>
<p>but since there is no way to know the mapping between “reset” and
the GpioIo() in _CRS desc will hold ERR_PTR(-ENOENT).</p>
<p>The driver author can solve this by passing the mapping explictly
(the recommended way and documented in the above chapter).</p>
<p>The ACPI GPIO mapping tables should not contaminate drivers that are not
knowing about which exact device they are servicing on. It implies that
the ACPI GPIO mapping tables are hardly linked to ACPI ID and certain
objects, as listed in the above chapter, of the device in question.</p>
</div>
<div class="section" id="getting-gpio-descriptor">
<h2>Getting GPIO descriptor<a class="headerlink" href="#getting-gpio-descriptor" title="Permalink to this headline">¶</a></h2>
<p>There are two main approaches to get GPIO resource from ACPI:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>desc = gpiod_get(dev, connection_id, flags);
desc = gpiod_get_index(dev, connection_id, index, flags);
</pre></div>
</div>
<p>We may consider two different cases here, i.e. when connection ID is
provided and otherwise.</p>
<p>Case 1:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>desc = gpiod_get(dev, &quot;non-null-connection-id&quot;, flags);
desc = gpiod_get_index(dev, &quot;non-null-connection-id&quot;, index, flags);
</pre></div>
</div>
<p>Case 2:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>desc = gpiod_get(dev, NULL, flags);
desc = gpiod_get_index(dev, NULL, index, flags);
</pre></div>
</div>
<p>Case 1 assumes that corresponding ACPI device description must have
defined device properties and will prevent to getting any GPIO resources
otherwise.</p>
<p>Case 2 explicitly tells GPIO core to look for resources in _CRS.</p>
<p>Be aware that <a class="reference internal" href="../../driver-api/gpio/index.html#c.gpiod_get_index" title="gpiod_get_index"><code class="xref c c-func docutils literal notranslate"><span class="pre">gpiod_get_index()</span></code></a> in cases 1 and 2, assuming that there
are two versions of ACPI device description provided and no mapping is
present in the driver, will return different resources. That’s why a
certain driver has to handle them carefully as explained in previous
chapter.</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="i2c-muxes.html" class="btn btn-neutral float-right" title="ACPI I2C Muxes" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="apei/einj.html" class="btn btn-neutral float-left" title="APEI Error INJection" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright The kernel development community

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>