

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>15. Sentelic Touchpad &mdash; The Linux Kernel 5.10.0-rc6+ documentation</title>
  

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/theme_overrides.css" type="text/css" />

  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="16. Walkera WK-0701 transmitter" href="walkera0701.html" />
    <link rel="prev" title="14. rotary-encoder - a generic driver for GPIO connected devices" href="rotary-encoder.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html" class="icon icon-home" alt="Documentation Home"> The Linux Kernel
          

          
          </a>

          
            
            
              <div class="version">
                5.10.0-rc6
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../../admin-guide/index.html">The Linux kernel user’s and administrator’s guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../kbuild/index.html">Kernel Build System</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../firmware-guide/index.html">The Linux kernel firmware guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../devicetree/index.html">Open Firmware and Device Tree</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../userspace-api/index.html">The Linux kernel user-space API guide</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../process/index.html">Working with the kernel development community</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../dev-tools/index.html">Development tools for the kernel</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../doc-guide/index.html">How to write kernel documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../kernel-hacking/index.html">Kernel Hacking Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../trace/index.html">Linux Tracing Technologies</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../maintainer/index.html">Kernel Maintainer Handbook</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../fault-injection/index.html">fault-injection</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../livepatch/index.html">Kernel Livepatching</a></li>
</ul>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../driver-api/index.html">The Linux driver implementer’s API guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../core-api/index.html">Core API Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../locking/index.html">locking</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../accounting/index.html">Accounting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../block/index.html">Block</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../cdrom/index.html">cdrom</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../cpu-freq/index.html">Linux CPUFreq - CPU frequency and voltage scaling code in the Linux(TM) kernel</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../ide/index.html">Integrated Drive Electronics (IDE)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../fb/index.html">Frame Buffer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../fpga/index.html">fpga</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../hid/index.html">Human Interface Devices (HID)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../i2c/index.html">I2C/SMBus Subsystem</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../iio/index.html">Industrial I/O</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../isdn/index.html">ISDN</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../infiniband/index.html">InfiniBand</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../leds/index.html">LEDs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../netlabel/index.html">NetLabel</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../networking/index.html">Linux Networking Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../pcmcia/index.html">pcmcia</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../power/index.html">Power Management</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../target/index.html">TCM Virtual Device</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../timers/index.html">timers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../spi/index.html">Serial Peripheral Interface (SPI)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../w1/index.html">1-Wire Subsystem</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../watchdog/index.html">Linux Watchdog Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../virt/index.html">Linux Virtualization Support</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">The Linux Input Documentation</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../input_uapi.html">Linux Input Subsystem userspace API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../input_kapi.html">Linux Input Subsystem kernel API</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">Driver-specific documentation</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="alps.html">1. ALPS Touchpad Protocol</a></li>
<li class="toctree-l3"><a class="reference internal" href="amijoy.html">2. Amiga joystick extensions</a></li>
<li class="toctree-l3"><a class="reference internal" href="appletouch.html">3. Apple Touchpad Driver (appletouch)</a></li>
<li class="toctree-l3"><a class="reference internal" href="atarikbd.html">4. Intelligent Keyboard (ikbd) Protocol</a></li>
<li class="toctree-l3"><a class="reference internal" href="bcm5974.html">5. BCM5974 Driver (bcm5974)</a></li>
<li class="toctree-l3"><a class="reference internal" href="cma3000_d0x.html">6. CMA3000-D0x Accelerometer</a></li>
<li class="toctree-l3"><a class="reference internal" href="cs461x.html">7. Crystal SoundFusion CS4610/CS4612/CS461 joystick</a></li>
<li class="toctree-l3"><a class="reference internal" href="edt-ft5x06.html">8. EDT ft5x06 based Polytouch devices</a></li>
<li class="toctree-l3"><a class="reference internal" href="elantech.html">9. Elantech Touchpad Driver</a></li>
<li class="toctree-l3"><a class="reference internal" href="iforce-protocol.html">10. Iforce Protocol</a></li>
<li class="toctree-l3"><a class="reference internal" href="joystick-parport.html">11. Parallel Port Joystick Drivers</a></li>
<li class="toctree-l3"><a class="reference internal" href="ntrig.html">12. N-Trig touchscreen Driver</a></li>
<li class="toctree-l3"><a class="reference internal" href="pxrc.html">13. pxrc - PhoenixRC Flight Controller Adapter</a></li>
<li class="toctree-l3"><a class="reference internal" href="rotary-encoder.html">14. rotary-encoder - a generic driver for GPIO connected devices</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">15. Sentelic Touchpad</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#finger-sensing-pad-intellimouse-mode-scrolling-wheel-4th-and-5th-buttons">15.1. Finger Sensing Pad Intellimouse Mode (scrolling wheel, 4th and 5th buttons)</a></li>
<li class="toctree-l4"><a class="reference internal" href="#absolute-position-for-stl3886-g0">15.2. Absolute position for STL3886-G0</a></li>
<li class="toctree-l4"><a class="reference internal" href="#absolute-position-for-stl3888-ax">15.3. Absolute position for STL3888-Ax</a></li>
<li class="toctree-l4"><a class="reference internal" href="#absolute-position-for-stl3888-b0">15.4. Absolute position for STL3888-B0</a></li>
<li class="toctree-l4"><a class="reference internal" href="#absolute-position-for-stl3888-cx-and-stl3888-dx">15.5. Absolute position for STL3888-Cx and STL3888-Dx</a></li>
<li class="toctree-l4"><a class="reference internal" href="#fsp-enable-disable-packet">15.6. FSP Enable/Disable packet</a></li>
<li class="toctree-l4"><a class="reference internal" href="#ps-2-command-set">15.7. PS/2 Command Set</a></li>
<li class="toctree-l4"><a class="reference internal" href="#programming-sequence-for-determining-packet-parsing-flow">15.8. Programming Sequence for Determining Packet Parsing Flow</a></li>
<li class="toctree-l4"><a class="reference internal" href="#programming-sequence-for-register-reading-writing">15.9. Programming Sequence for Register Reading/Writing</a></li>
<li class="toctree-l4"><a class="reference internal" href="#programming-sequence-for-page-register-reading-writing">15.10. Programming Sequence for Page Register Reading/Writing</a></li>
<li class="toctree-l4"><a class="reference internal" href="#gesture-id">15.11. Gesture ID</a></li>
<li class="toctree-l4"><a class="reference internal" href="#register-listing">15.12. Register Listing</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="walkera0701.html">16. Walkera WK-0701 transmitter</a></li>
<li class="toctree-l3"><a class="reference internal" href="xpad.html">17. xpad - Linux USB driver for Xbox compatible controllers</a></li>
<li class="toctree-l3"><a class="reference internal" href="yealink.html">18. Driver documentation for yealink usb-p1k phones</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../hwmon/index.html">Linux Hardware Monitoring</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../gpu/index.html">Linux GPU Driver Developer’s Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../security/index.html">Security Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../sound/index.html">Linux Sound Subsystem Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../crypto/index.html">Linux Kernel Crypto API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../filesystems/index.html">Filesystems in the Linux kernel</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../vm/index.html">Linux Memory Management Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../bpf/index.html">BPF Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../usb/index.html">USB support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../PCI/index.html">Linux PCI Bus Subsystem</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../scsi/index.html">Linux SCSI Subsystem</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../misc-devices/index.html">Assorted Miscellaneous Devices Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../scheduler/index.html">Linux Scheduler</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../mhi/index.html">MHI</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../asm-annotations.html">Assembler Annotations</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../arm/index.html">ARM Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../arm64/index.html">ARM64 Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../ia64/index.html">IA-64 Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../m68k/index.html">m68k Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../mips/index.html">MIPS-specific Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../nios2/nios2.html">Linux on the Nios II architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../openrisc/index.html">OpenRISC Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../parisc/index.html">PA-RISC Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../powerpc/index.html">powerpc</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../riscv/index.html">RISC-V architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../s390/index.html">s390 Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../sh/index.html">SuperH Interfaces Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../sparc/index.html">Sparc Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../x86/index.html">x86-specific Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../xtensa/index.html">Xtensa Architecture</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../filesystems/ext4/index.html">ext4 Data Structures and Algorithms</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../staging/index.html">Unsorted Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../staging/index.html#atomic-types">Atomic Types</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../staging/index.html#atomic-bitops">Atomic bitops</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../staging/index.html#memory-barriers">Memory Barriers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../watch_queue.html">General notification mechanism</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../translations/index.html">Translations</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">The Linux Kernel</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../index.html">The Linux Input Documentation</a> &raquo;</li>
        
          <li><a href="index.html">Driver-specific documentation</a> &raquo;</li>
        
      <li><span class="section-number">15. </span>Sentelic Touchpad</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../_sources/input/devices/sentelic.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="sentelic-touchpad">
<h1><span class="section-number">15. </span>Sentelic Touchpad<a class="headerlink" href="#sentelic-touchpad" title="Permalink to this headline">¶</a></h1>
<dl class="field-list simple">
<dt class="field-odd">Copyright</dt>
<dd class="field-odd"><p>© 2002-2011 Sentelic Corporation.</p>
</dd>
<dt class="field-even">Last update</dt>
<dd class="field-even"><p>Dec-07-2011</p>
</dd>
</dl>
<div class="section" id="finger-sensing-pad-intellimouse-mode-scrolling-wheel-4th-and-5th-buttons">
<h2><span class="section-number">15.1. </span>Finger Sensing Pad Intellimouse Mode (scrolling wheel, 4th and 5th buttons)<a class="headerlink" href="#finger-sensing-pad-intellimouse-mode-scrolling-wheel-4th-and-5th-buttons" title="Permalink to this headline">¶</a></h2>
<ol class="upperalpha simple">
<li><p>MSID 4: Scrolling wheel mode plus Forward page(4th button) and Backward
page (5th button)</p></li>
</ol>
<ol class="arabic simple">
<li><p>Set sample rate to 200;</p></li>
<li><p>Set sample rate to 200;</p></li>
<li><p>Set sample rate to 80;</p></li>
<li><p>Issuing the “Get device ID” command (0xF2) and waits for the response;</p></li>
<li><p>FSP will respond 0x04.</p></li>
</ol>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Packet 1
Bit 7 6 5 4 3 2 1 0       7 6 5 4 3 2 1 0      7 6 5 4 3 2 1 0      7 6 5 4 3 2 1 0
BYTE  |---------------|BYTE |---------------|BYTE|---------------|BYTE|---------------|
  1   |Y|X|y|x|1|M|R|L|  2  |X|X|X|X|X|X|X|X|  3 |Y|Y|Y|Y|Y|Y|Y|Y|  4 | | |B|F|W|W|W|W|
      |---------------|     |---------------|    |---------------|    |---------------|

Byte 1: Bit7 =&gt; Y overflow
        Bit6 =&gt; X overflow
        Bit5 =&gt; Y sign bit
        Bit4 =&gt; X sign bit
        Bit3 =&gt; 1
        Bit2 =&gt; Middle Button, 1 is pressed, 0 is not pressed.
        Bit1 =&gt; Right Button, 1 is pressed, 0 is not pressed.
        Bit0 =&gt; Left Button, 1 is pressed, 0 is not pressed.
Byte 2: X Movement(9-bit 2&#39;s complement integers)
Byte 3: Y Movement(9-bit 2&#39;s complement integers)
Byte 4: Bit3~Bit0 =&gt; the scrolling wheel&#39;s movement since the last data report.
                    valid values, -8 ~ +7
        Bit4 =&gt; 1 = 4th mouse button is pressed, Forward one page.
                0 = 4th mouse button is not pressed.
        Bit5 =&gt; 1 = 5th mouse button is pressed, Backward one page.
                0 = 5th mouse button is not pressed.
</pre></div>
</div>
<ol class="upperalpha simple" start="2">
<li><p>MSID 6: Horizontal and Vertical scrolling</p></li>
</ol>
<ul class="simple">
<li><p>Set bit 1 in register 0x40 to 1</p></li>
</ul>
<p>FSP replaces scrolling wheel’s movement as 4 bits to show horizontal and
vertical scrolling.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Packet 1
Bit 7 6 5 4 3 2 1 0       7 6 5 4 3 2 1 0      7 6 5 4 3 2 1 0      7 6 5 4 3 2 1 0
BYTE  |---------------|BYTE |---------------|BYTE|---------------|BYTE|---------------|
  1   |Y|X|y|x|1|M|R|L|  2  |X|X|X|X|X|X|X|X|  3 |Y|Y|Y|Y|Y|Y|Y|Y|  4 | | |B|F|r|l|u|d|
      |---------------|     |---------------|    |---------------|    |---------------|

Byte 1: Bit7 =&gt; Y overflow
        Bit6 =&gt; X overflow
        Bit5 =&gt; Y sign bit
        Bit4 =&gt; X sign bit
        Bit3 =&gt; 1
        Bit2 =&gt; Middle Button, 1 is pressed, 0 is not pressed.
        Bit1 =&gt; Right Button, 1 is pressed, 0 is not pressed.
        Bit0 =&gt; Left Button, 1 is pressed, 0 is not pressed.
Byte 2: X Movement(9-bit 2&#39;s complement integers)
Byte 3: Y Movement(9-bit 2&#39;s complement integers)
Byte 4: Bit0 =&gt; the Vertical scrolling movement downward.
        Bit1 =&gt; the Vertical scrolling movement upward.
        Bit2 =&gt; the Horizontal scrolling movement leftward.
        Bit3 =&gt; the Horizontal scrolling movement rightward.
        Bit4 =&gt; 1 = 4th mouse button is pressed, Forward one page.
                0 = 4th mouse button is not pressed.
        Bit5 =&gt; 1 = 5th mouse button is pressed, Backward one page.
                0 = 5th mouse button is not pressed.
</pre></div>
</div>
<ol class="upperalpha simple" start="3">
<li><p>MSID 7</p></li>
</ol>
<p>FSP uses 2 packets (8 Bytes) to represent Absolute Position.
so we have PACKET NUMBER to identify packets.</p>
<blockquote>
<div><p>If PACKET NUMBER is 0, the packet is Packet 1.
If PACKET NUMBER is 1, the packet is Packet 2.
Please count this number in program.</p>
</div></blockquote>
<p>MSID6 special packet will be enable at the same time when enable MSID 7.</p>
</div>
<div class="section" id="absolute-position-for-stl3886-g0">
<h2><span class="section-number">15.2. </span>Absolute position for STL3886-G0<a class="headerlink" href="#absolute-position-for-stl3886-g0" title="Permalink to this headline">¶</a></h2>
<ol class="arabic simple">
<li><p>Set bit 2 or 3 in register 0x40 to 1</p></li>
<li><p>Set bit 6 in register 0x40 to 1</p></li>
</ol>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Packet 1 (ABSOLUTE POSITION)
Bit 7 6 5 4 3 2 1 0       7 6 5 4 3 2 1 0      7 6 5 4 3 2 1 0      7 6 5 4 3 2 1 0
BYTE  |---------------|BYTE |---------------|BYTE|---------------|BYTE|---------------|
  1   |0|1|V|1|1|M|R|L|  2  |X|X|X|X|X|X|X|X|  3 |Y|Y|Y|Y|Y|Y|Y|Y|  4 |r|l|d|u|X|X|Y|Y|
      |---------------|     |---------------|    |---------------|    |---------------|

Byte 1: Bit7~Bit6 =&gt; 00, Normal data packet
                =&gt; 01, Absolute coordination packet
                =&gt; 10, Notify packet
        Bit5 =&gt; valid bit
        Bit4 =&gt; 1
        Bit3 =&gt; 1
        Bit2 =&gt; Middle Button, 1 is pressed, 0 is not pressed.
        Bit1 =&gt; Right Button, 1 is pressed, 0 is not pressed.
        Bit0 =&gt; Left Button, 1 is pressed, 0 is not pressed.
Byte 2: X coordinate (xpos[9:2])
Byte 3: Y coordinate (ypos[9:2])
Byte 4: Bit1~Bit0 =&gt; Y coordinate (xpos[1:0])
        Bit3~Bit2 =&gt; X coordinate (ypos[1:0])
        Bit4 =&gt; scroll up
        Bit5 =&gt; scroll down
        Bit6 =&gt; scroll left
        Bit7 =&gt; scroll right

Notify Packet for G0
Bit 7 6 5 4 3 2 1 0       7 6 5 4 3 2 1 0      7 6 5 4 3 2 1 0      7 6 5 4 3 2 1 0
BYTE  |---------------|BYTE |---------------|BYTE|---------------|BYTE|---------------|
  1   |1|0|0|1|1|M|R|L|  2  |C|C|C|C|C|C|C|C|  3 |M|M|M|M|M|M|M|M|  4 |0|0|0|0|0|0|0|0|
      |---------------|     |---------------|    |---------------|    |---------------|

Byte 1: Bit7~Bit6 =&gt; 00, Normal data packet
                =&gt; 01, Absolute coordination packet
                =&gt; 10, Notify packet
        Bit5 =&gt; 0
        Bit4 =&gt; 1
        Bit3 =&gt; 1
        Bit2 =&gt; Middle Button, 1 is pressed, 0 is not pressed.
        Bit1 =&gt; Right Button, 1 is pressed, 0 is not pressed.
        Bit0 =&gt; Left Button, 1 is pressed, 0 is not pressed.
Byte 2: Message Type =&gt; 0x5A (Enable/Disable status packet)
        Mode Type =&gt; 0xA5 (Normal/Icon mode status)
Byte 3: Message Type =&gt; 0x00 (Disabled)
                    =&gt; 0x01 (Enabled)
        Mode Type    =&gt; 0x00 (Normal)
                    =&gt; 0x01 (Icon)
Byte 4: Bit7~Bit0 =&gt; Don&#39;t Care
</pre></div>
</div>
</div>
<div class="section" id="absolute-position-for-stl3888-ax">
<h2><span class="section-number">15.3. </span>Absolute position for STL3888-Ax<a class="headerlink" href="#absolute-position-for-stl3888-ax" title="Permalink to this headline">¶</a></h2>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Packet 1 (ABSOLUTE POSITION)
Bit 7 6 5 4 3 2 1 0       7 6 5 4 3 2 1 0      7 6 5 4 3 2 1 0      7 6 5 4 3 2 1 0
BYTE  |---------------|BYTE |---------------|BYTE|---------------|BYTE|---------------|
  1   |0|1|V|A|1|L|0|1|  2  |X|X|X|X|X|X|X|X|  3 |Y|Y|Y|Y|Y|Y|Y|Y|  4 |x|x|y|y|X|X|Y|Y|
      |---------------|     |---------------|    |---------------|    |---------------|

Byte 1: Bit7~Bit6 =&gt; 00, Normal data packet
                =&gt; 01, Absolute coordination packet
                =&gt; 10, Notify packet
                =&gt; 11, Normal data packet with on-pad click
        Bit5 =&gt; Valid bit, 0 means that the coordinate is invalid or finger up.
                When both fingers are up, the last two reports have zero valid
                bit.
        Bit4 =&gt; arc
        Bit3 =&gt; 1
        Bit2 =&gt; Left Button, 1 is pressed, 0 is released.
        Bit1 =&gt; 0
        Bit0 =&gt; 1
Byte 2: X coordinate (xpos[9:2])
Byte 3: Y coordinate (ypos[9:2])
Byte 4: Bit1~Bit0 =&gt; Y coordinate (xpos[1:0])
        Bit3~Bit2 =&gt; X coordinate (ypos[1:0])
        Bit5~Bit4 =&gt; y1_g
        Bit7~Bit6 =&gt; x1_g

Packet 2 (ABSOLUTE POSITION)
Bit 7 6 5 4 3 2 1 0       7 6 5 4 3 2 1 0      7 6 5 4 3 2 1 0      7 6 5 4 3 2 1 0
BYTE  |---------------|BYTE |---------------|BYTE|---------------|BYTE|---------------|
  1   |0|1|V|A|1|R|1|0|  2  |X|X|X|X|X|X|X|X|  3 |Y|Y|Y|Y|Y|Y|Y|Y|  4 |x|x|y|y|X|X|Y|Y|
      |---------------|     |---------------|    |---------------|    |---------------|

Byte 1: Bit7~Bit6 =&gt; 00, Normal data packet
                =&gt; 01, Absolute coordinates packet
                =&gt; 10, Notify packet
                =&gt; 11, Normal data packet with on-pad click
        Bit5 =&gt; Valid bit, 0 means that the coordinate is invalid or finger up.
                When both fingers are up, the last two reports have zero valid
                bit.
        Bit4 =&gt; arc
        Bit3 =&gt; 1
        Bit2 =&gt; Right Button, 1 is pressed, 0 is released.
        Bit1 =&gt; 1
        Bit0 =&gt; 0
Byte 2: X coordinate (xpos[9:2])
Byte 3: Y coordinate (ypos[9:2])
Byte 4: Bit1~Bit0 =&gt; Y coordinate (xpos[1:0])
        Bit3~Bit2 =&gt; X coordinate (ypos[1:0])
        Bit5~Bit4 =&gt; y2_g
        Bit7~Bit6 =&gt; x2_g

Notify Packet for STL3888-Ax
Bit 7 6 5 4 3 2 1 0       7 6 5 4 3 2 1 0      7 6 5 4 3 2 1 0      7 6 5 4 3 2 1 0
BYTE  |---------------|BYTE |---------------|BYTE|---------------|BYTE|---------------|
  1   |1|0|1|P|1|M|R|L|  2  |C|C|C|C|C|C|C|C|  3 |0|0|F|F|0|0|0|i|  4 |r|l|d|u|0|0|0|0|
      |---------------|     |---------------|    |---------------|    |---------------|

Byte 1: Bit7~Bit6 =&gt; 00, Normal data packet
                =&gt; 01, Absolute coordinates packet
                =&gt; 10, Notify packet
                =&gt; 11, Normal data packet with on-pad click
        Bit5 =&gt; 1
        Bit4 =&gt; when in absolute coordinates mode (valid when EN_PKT_GO is 1):
                0: left button is generated by the on-pad command
                1: left button is generated by the external button
        Bit3 =&gt; 1
        Bit2 =&gt; Middle Button, 1 is pressed, 0 is not pressed.
        Bit1 =&gt; Right Button, 1 is pressed, 0 is not pressed.
        Bit0 =&gt; Left Button, 1 is pressed, 0 is not pressed.
Byte 2: Message Type =&gt; 0xB7 (Multi Finger, Multi Coordinate mode)
Byte 3: Bit7~Bit6 =&gt; Don&#39;t care
        Bit5~Bit4 =&gt; Number of fingers
        Bit3~Bit1 =&gt; Reserved
        Bit0 =&gt; 1: enter gesture mode; 0: leaving gesture mode
Byte 4: Bit7 =&gt; scroll right button
        Bit6 =&gt; scroll left button
        Bit5 =&gt; scroll down button
        Bit4 =&gt; scroll up button
            * Note that if gesture and additional button (Bit4~Bit7)
            happen at the same time, the button information will not
            be sent.
        Bit3~Bit0 =&gt; Reserved
</pre></div>
</div>
<p>Sample sequence of Multi-finger, Multi-coordinate mode:</p>
<blockquote>
<div><p>notify packet (valid bit == 1), abs pkt 1, abs pkt 2, abs pkt 1,
abs pkt 2, …, notify packet (valid bit == 0)</p>
</div></blockquote>
</div>
<div class="section" id="absolute-position-for-stl3888-b0">
<h2><span class="section-number">15.4. </span>Absolute position for STL3888-B0<a class="headerlink" href="#absolute-position-for-stl3888-b0" title="Permalink to this headline">¶</a></h2>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Packet 1(ABSOLUTE POSITION)
Bit 7 6 5 4 3 2 1 0       7 6 5 4 3 2 1 0      7 6 5 4 3 2 1 0      7 6 5 4 3 2 1 0
BYTE  |---------------|BYTE |---------------|BYTE|---------------|BYTE|---------------|
  1   |0|1|V|F|1|0|R|L|  2  |X|X|X|X|X|X|X|X|  3 |Y|Y|Y|Y|Y|Y|Y|Y|  4 |r|l|u|d|X|X|Y|Y|
      |---------------|     |---------------|    |---------------|    |---------------|

Byte 1: Bit7~Bit6 =&gt; 00, Normal data packet
                =&gt; 01, Absolute coordinates packet
                =&gt; 10, Notify packet
                =&gt; 11, Normal data packet with on-pad click
        Bit5 =&gt; Valid bit, 0 means that the coordinate is invalid or finger up.
                When both fingers are up, the last two reports have zero valid
                bit.
        Bit4 =&gt; finger up/down information. 1: finger down, 0: finger up.
        Bit3 =&gt; 1
        Bit2 =&gt; finger index, 0 is the first finger, 1 is the second finger.
        Bit1 =&gt; Right Button, 1 is pressed, 0 is not pressed.
        Bit0 =&gt; Left Button, 1 is pressed, 0 is not pressed.
Byte 2: X coordinate (xpos[9:2])
Byte 3: Y coordinate (ypos[9:2])
Byte 4: Bit1~Bit0 =&gt; Y coordinate (xpos[1:0])
        Bit3~Bit2 =&gt; X coordinate (ypos[1:0])
        Bit4 =&gt; scroll down button
        Bit5 =&gt; scroll up button
        Bit6 =&gt; scroll left button
        Bit7 =&gt; scroll right button

Packet 2 (ABSOLUTE POSITION)
Bit 7 6 5 4 3 2 1 0       7 6 5 4 3 2 1 0      7 6 5 4 3 2 1 0      7 6 5 4 3 2 1 0
BYTE  |---------------|BYTE |---------------|BYTE|---------------|BYTE|---------------|
  1   |0|1|V|F|1|1|R|L|  2  |X|X|X|X|X|X|X|X|  3 |Y|Y|Y|Y|Y|Y|Y|Y|  4 |r|l|u|d|X|X|Y|Y|
      |---------------|     |---------------|    |---------------|    |---------------|

Byte 1: Bit7~Bit6 =&gt; 00, Normal data packet
                =&gt; 01, Absolute coordination packet
                =&gt; 10, Notify packet
                =&gt; 11, Normal data packet with on-pad click
        Bit5 =&gt; Valid bit, 0 means that the coordinate is invalid or finger up.
                When both fingers are up, the last two reports have zero valid
                bit.
        Bit4 =&gt; finger up/down information. 1: finger down, 0: finger up.
        Bit3 =&gt; 1
        Bit2 =&gt; finger index, 0 is the first finger, 1 is the second finger.
        Bit1 =&gt; Right Button, 1 is pressed, 0 is not pressed.
        Bit0 =&gt; Left Button, 1 is pressed, 0 is not pressed.
Byte 2: X coordinate (xpos[9:2])
Byte 3: Y coordinate (ypos[9:2])
Byte 4: Bit1~Bit0 =&gt; Y coordinate (xpos[1:0])
        Bit3~Bit2 =&gt; X coordinate (ypos[1:0])
        Bit4 =&gt; scroll down button
        Bit5 =&gt; scroll up button
        Bit6 =&gt; scroll left button
        Bit7 =&gt; scroll right button
</pre></div>
</div>
<p>Notify Packet for STL3888-B0:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Bit 7 6 5 4 3 2 1 0       7 6 5 4 3 2 1 0      7 6 5 4 3 2 1 0      7 6 5 4 3 2 1 0
BYTE  |---------------|BYTE |---------------|BYTE|---------------|BYTE|---------------|
  1   |1|0|1|P|1|M|R|L|  2  |C|C|C|C|C|C|C|C|  3 |0|0|F|F|0|0|0|i|  4 |r|l|u|d|0|0|0|0|
      |---------------|     |---------------|    |---------------|    |---------------|

Byte 1: Bit7~Bit6 =&gt; 00, Normal data packet
                =&gt; 01, Absolute coordination packet
                =&gt; 10, Notify packet
                =&gt; 11, Normal data packet with on-pad click
        Bit5 =&gt; 1
        Bit4 =&gt; when in absolute coordinates mode (valid when EN_PKT_GO is 1):
                0: left button is generated by the on-pad command
                1: left button is generated by the external button
        Bit3 =&gt; 1
        Bit2 =&gt; Middle Button, 1 is pressed, 0 is not pressed.
        Bit1 =&gt; Right Button, 1 is pressed, 0 is not pressed.
        Bit0 =&gt; Left Button, 1 is pressed, 0 is not pressed.
Byte 2: Message Type =&gt; 0xB7 (Multi Finger, Multi Coordinate mode)
Byte 3: Bit7~Bit6 =&gt; Don&#39;t care
        Bit5~Bit4 =&gt; Number of fingers
        Bit3~Bit1 =&gt; Reserved
        Bit0 =&gt; 1: enter gesture mode; 0: leaving gesture mode
Byte 4: Bit7 =&gt; scroll right button
        Bit6 =&gt; scroll left button
        Bit5 =&gt; scroll up button
        Bit4 =&gt; scroll down button
            * Note that if gesture and additional button(Bit4~Bit7)
            happen at the same time, the button information will not
            be sent.
        Bit3~Bit0 =&gt; Reserved
</pre></div>
</div>
<p>Sample sequence of Multi-finger, Multi-coordinate mode:</p>
<blockquote>
<div><p>notify packet (valid bit == 1), abs pkt 1, abs pkt 2, abs pkt 1,
abs pkt 2, …, notify packet (valid bit == 0)</p>
</div></blockquote>
</div>
<div class="section" id="absolute-position-for-stl3888-cx-and-stl3888-dx">
<h2><span class="section-number">15.5. </span>Absolute position for STL3888-Cx and STL3888-Dx<a class="headerlink" href="#absolute-position-for-stl3888-cx-and-stl3888-dx" title="Permalink to this headline">¶</a></h2>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Single Finger, Absolute Coordinate Mode (SFAC)
Bit 7 6 5 4 3 2 1 0       7 6 5 4 3 2 1 0      7 6 5 4 3 2 1 0      7 6 5 4 3 2 1 0
BYTE  |---------------|BYTE |---------------|BYTE|---------------|BYTE|---------------|
  1   |0|1|0|P|1|M|R|L|  2  |X|X|X|X|X|X|X|X|  3 |Y|Y|Y|Y|Y|Y|Y|Y|  4 |r|l|B|F|X|X|Y|Y|
      |---------------|     |---------------|    |---------------|    |---------------|

Byte 1: Bit7~Bit6 =&gt; 00, Normal data packet
                =&gt; 01, Absolute coordinates packet
                =&gt; 10, Notify packet
        Bit5 =&gt; Coordinate mode(always 0 in SFAC mode):
                0: single-finger absolute coordinates (SFAC) mode
                1: multi-finger, multiple coordinates (MFMC) mode
        Bit4 =&gt; 0: The LEFT button is generated by on-pad command (OPC)
                1: The LEFT button is generated by external button
                Default is 1 even if the LEFT button is not pressed.
        Bit3 =&gt; Always 1, as specified by PS/2 protocol.
        Bit2 =&gt; Middle Button, 1 is pressed, 0 is not pressed.
        Bit1 =&gt; Right Button, 1 is pressed, 0 is not pressed.
        Bit0 =&gt; Left Button, 1 is pressed, 0 is not pressed.
Byte 2: X coordinate (xpos[9:2])
Byte 3: Y coordinate (ypos[9:2])
Byte 4: Bit1~Bit0 =&gt; Y coordinate (xpos[1:0])
        Bit3~Bit2 =&gt; X coordinate (ypos[1:0])
        Bit4 =&gt; 4th mouse button(forward one page)
        Bit5 =&gt; 5th mouse button(backward one page)
        Bit6 =&gt; scroll left button
        Bit7 =&gt; scroll right button

Multi Finger, Multiple Coordinates Mode (MFMC):
Bit 7 6 5 4 3 2 1 0       7 6 5 4 3 2 1 0      7 6 5 4 3 2 1 0      7 6 5 4 3 2 1 0
BYTE  |---------------|BYTE |---------------|BYTE|---------------|BYTE|---------------|
  1   |0|1|1|P|1|F|R|L|  2  |X|X|X|X|X|X|X|X|  3 |Y|Y|Y|Y|Y|Y|Y|Y|  4 |r|l|B|F|X|X|Y|Y|
      |---------------|     |---------------|    |---------------|    |---------------|

Byte 1: Bit7~Bit6 =&gt; 00, Normal data packet
                =&gt; 01, Absolute coordination packet
                =&gt; 10, Notify packet
        Bit5 =&gt; Coordinate mode (always 1 in MFMC mode):
                0: single-finger absolute coordinates (SFAC) mode
                1: multi-finger, multiple coordinates (MFMC) mode
        Bit4 =&gt; 0: The LEFT button is generated by on-pad command (OPC)
                1: The LEFT button is generated by external button
                Default is 1 even if the LEFT button is not pressed.
        Bit3 =&gt; Always 1, as specified by PS/2 protocol.
        Bit2 =&gt; Finger index, 0 is the first finger, 1 is the second finger.
                If bit 1 and 0 are all 1 and bit 4 is 0, the middle external
                button is pressed.
        Bit1 =&gt; Right Button, 1 is pressed, 0 is not pressed.
        Bit0 =&gt; Left Button, 1 is pressed, 0 is not pressed.
Byte 2: X coordinate (xpos[9:2])
Byte 3: Y coordinate (ypos[9:2])
Byte 4: Bit1~Bit0 =&gt; Y coordinate (xpos[1:0])
        Bit3~Bit2 =&gt; X coordinate (ypos[1:0])
        Bit4 =&gt; 4th mouse button(forward one page)
        Bit5 =&gt; 5th mouse button(backward one page)
        Bit6 =&gt; scroll left button
        Bit7 =&gt; scroll right button
</pre></div>
</div>
<p>When one of the two fingers is up, the device will output four consecutive
MFMC#0 report packets with zero X and Y to represent 1st finger is up or
four consecutive MFMC#1 report packets with zero X and Y to represent that
the 2nd finger is up.  On the other hand, if both fingers are up, the device
will output four consecutive single-finger, absolute coordinate(SFAC) packets
with zero X and Y.</p>
<p>Notify Packet for STL3888-Cx/Dx:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Bit 7 6 5 4 3 2 1 0       7 6 5 4 3 2 1 0      7 6 5 4 3 2 1 0      7 6 5 4 3 2 1 0
BYTE  |---------------|BYTE |---------------|BYTE|---------------|BYTE|---------------|
  1   |1|0|0|P|1|M|R|L|  2  |C|C|C|C|C|C|C|C|  3 |0|0|F|F|0|0|0|i|  4 |r|l|u|d|0|0|0|0|
      |---------------|     |---------------|    |---------------|    |---------------|

Byte 1: Bit7~Bit6 =&gt; 00, Normal data packet
                =&gt; 01, Absolute coordinates packet
                =&gt; 10, Notify packet
        Bit5 =&gt; Always 0
        Bit4 =&gt; 0: The LEFT button is generated by on-pad command(OPC)
                1: The LEFT button is generated by external button
                Default is 1 even if the LEFT button is not pressed.
        Bit3 =&gt; 1
        Bit2 =&gt; Middle Button, 1 is pressed, 0 is not pressed.
        Bit1 =&gt; Right Button, 1 is pressed, 0 is not pressed.
        Bit0 =&gt; Left Button, 1 is pressed, 0 is not pressed.
Byte 2: Message type:
        0xba =&gt; gesture information
        0xc0 =&gt; one finger hold-rotating gesture
Byte 3: The first parameter for the received message:
        0xba =&gt; gesture ID (refer to the &#39;Gesture ID&#39; section)
        0xc0 =&gt; region ID
Byte 4: The second parameter for the received message:
        0xba =&gt; N/A
        0xc0 =&gt; finger up/down information
</pre></div>
</div>
<p>Sample sequence of Multi-finger, Multi-coordinates mode:</p>
<blockquote>
<div><p>notify packet (valid bit == 1), MFMC packet 1 (byte 1, bit 2 == 0),
MFMC packet 2 (byte 1, bit 2 == 1), MFMC packet 1, MFMC packet 2,
…, notify packet (valid bit == 0)</p>
<p>That is, when the device is in MFMC mode, the host will receive
interleaved absolute coordinate packets for each finger.</p>
</div></blockquote>
</div>
<div class="section" id="fsp-enable-disable-packet">
<h2><span class="section-number">15.6. </span>FSP Enable/Disable packet<a class="headerlink" href="#fsp-enable-disable-packet" title="Permalink to this headline">¶</a></h2>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Bit 7 6 5 4 3 2 1 0       7 6 5 4 3 2 1 0      7 6 5 4 3 2 1 0      7 6 5 4 3 2 1 0
BYTE  |---------------|BYTE |---------------|BYTE|---------------|BYTE|---------------|
  1   |Y|X|0|0|1|M|R|L|  2  |0|1|0|1|1|0|1|E|  3 | | | | | | | | |  4 | | | | | | | | |
      |---------------|     |---------------|    |---------------|    |---------------|

FSP will send out enable/disable packet when FSP receive PS/2 enable/disable
command. Host will receive the packet which Middle, Right, Left button will
be set. The packet only use byte 0 and byte 1 as a pattern of original packet.
Ignore the other bytes of the packet.

Byte 1: Bit7 =&gt; 0, Y overflow
        Bit6 =&gt; 0, X overflow
        Bit5 =&gt; 0, Y sign bit
        Bit4 =&gt; 0, X sign bit
        Bit3 =&gt; 1
        Bit2 =&gt; 1, Middle Button
        Bit1 =&gt; 1, Right Button
        Bit0 =&gt; 1, Left Button
Byte 2: Bit7~1 =&gt; (0101101b)
        Bit0 =&gt; 1 = Enable
                0 = Disable
Byte 3: Don&#39;t care
Byte 4: Don&#39;t care (MOUSE ID 3, 4)
Byte 5~8: Don&#39;t care (Absolute packet)
</pre></div>
</div>
</div>
<div class="section" id="ps-2-command-set">
<h2><span class="section-number">15.7. </span>PS/2 Command Set<a class="headerlink" href="#ps-2-command-set" title="Permalink to this headline">¶</a></h2>
<p>FSP supports basic PS/2 commanding set and modes, refer to following URL for
details about PS/2 commands:</p>
<p><a class="reference external" href="http://www.computer-engineering.org/ps2mouse/">http://www.computer-engineering.org/ps2mouse/</a></p>
</div>
<div class="section" id="programming-sequence-for-determining-packet-parsing-flow">
<h2><span class="section-number">15.8. </span>Programming Sequence for Determining Packet Parsing Flow<a class="headerlink" href="#programming-sequence-for-determining-packet-parsing-flow" title="Permalink to this headline">¶</a></h2>
<ol class="arabic">
<li><p>Identify FSP by reading device ID(0x00) and version(0x01) register</p></li>
<li><p>For FSP version &lt; STL3888 Cx, determine number of buttons by reading
the ‘test mode status’ (0x20) register:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>buttons = reg[0x20] &amp; 0x30

if buttons == 0x30 or buttons == 0x20:
        # two/four buttons
        Refer to &#39;Finger Sensing Pad PS/2 Mouse Intellimouse&#39;
        section A for packet parsing detail(ignore byte 4, bit ~ 7)
elif buttons == 0x10:
        # 6 buttons
        Refer to &#39;Finger Sensing Pad PS/2 Mouse Intellimouse&#39;
        section B for packet parsing detail
elif buttons == 0x00:
        # 6 buttons
        Refer to &#39;Finger Sensing Pad PS/2 Mouse Intellimouse&#39;
        section A for packet parsing detail
</pre></div>
</div>
</li>
<li><dl class="simple">
<dt>For FSP version &gt;= STL3888 Cx:</dt><dd><p>Refer to ‘Finger Sensing Pad PS/2 Mouse Intellimouse’
section A for packet parsing detail (ignore byte 4, bit ~ 7)</p>
</dd>
</dl>
</li>
</ol>
</div>
<div class="section" id="programming-sequence-for-register-reading-writing">
<h2><span class="section-number">15.9. </span>Programming Sequence for Register Reading/Writing<a class="headerlink" href="#programming-sequence-for-register-reading-writing" title="Permalink to this headline">¶</a></h2>
<p>Register inversion requirement:</p>
<p>Following values needed to be inverted(the ‘~’ operator in C) before being
sent to FSP:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>0xe8, 0xe9, 0xee, 0xf2, 0xf3 and 0xff.
</pre></div>
</div>
<p>Register swapping requirement:</p>
<p>Following values needed to have their higher 4 bits and lower 4 bits being
swapped before being sent to FSP:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>10, 20, 40, 60, 80, 100 and 200.
</pre></div>
</div>
<p>Register reading sequence:</p>
<blockquote>
<div><ol class="arabic simple">
<li><p>send 0xf3 PS/2 command to FSP;</p></li>
<li><p>send 0x66 PS/2 command to FSP;</p></li>
<li><p>send 0x88 PS/2 command to FSP;</p></li>
<li><p>send 0xf3 PS/2 command to FSP;</p></li>
</ol>
<p>5. if the register address being to read is not required to be
inverted(refer to the ‘Register inversion requirement’ section),
goto step 6</p>
<blockquote>
<div><ol class="loweralpha simple">
<li><p>send 0x68 PS/2 command to FSP;</p></li>
<li><p>send the inverted register address to FSP and goto step 8;</p></li>
</ol>
</div></blockquote>
<p>6. if the register address being to read is not required to be
swapped(refer to the ‘Register swapping requirement’ section),
goto step 7</p>
<blockquote>
<div><ol class="loweralpha simple">
<li><p>send 0xcc PS/2 command to FSP;</p></li>
<li><p>send the swapped register address to FSP and goto step 8;</p></li>
</ol>
</div></blockquote>
<ol class="arabic simple" start="7">
<li><p>send 0x66 PS/2 command to FSP;</p></li>
</ol>
<blockquote>
<div><ol class="loweralpha simple">
<li><p>send the original register address to FSP and goto step 8;</p></li>
</ol>
</div></blockquote>
<ol class="arabic simple" start="8">
<li><p>send 0xe9(status request) PS/2 command to FSP;</p></li>
</ol>
<p>9. the 4th byte of the response read from FSP should be the
requested register value(?? indicates don’t care byte):</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>host: 0xe9
3888: 0xfa (??) (??) (val)
</pre></div>
</div>
<ul>
<li><p>Note that since the Cx release, the hardware will return 1’s
complement of the register value at the 3rd byte of status request
result:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>host: 0xe9
3888: 0xfa (??) (~val) (val)
</pre></div>
</div>
</li>
</ul>
</div></blockquote>
<p>Register writing sequence:</p>
<blockquote>
<div><ol class="arabic simple">
<li><p>send 0xf3 PS/2 command to FSP;</p></li>
</ol>
<p>2. if the register address being to write is not required to be
inverted(refer to the ‘Register inversion requirement’ section),
goto step 3</p>
<blockquote>
<div><ol class="loweralpha simple">
<li><p>send 0x74 PS/2 command to FSP;</p></li>
<li><p>send the inverted register address to FSP and goto step 5;</p></li>
</ol>
</div></blockquote>
<p>3. if the register address being to write is not required to be
swapped(refer to the ‘Register swapping requirement’ section),
goto step 4</p>
<blockquote>
<div><ol class="loweralpha simple">
<li><p>send 0x77 PS/2 command to FSP;</p></li>
<li><p>send the swapped register address to FSP and goto step 5;</p></li>
</ol>
</div></blockquote>
<ol class="arabic simple" start="4">
<li><p>send 0x55 PS/2 command to FSP;</p></li>
</ol>
<blockquote>
<div><ol class="loweralpha simple">
<li><p>send the register address to FSP and goto step 5;</p></li>
</ol>
</div></blockquote>
<ol class="arabic simple" start="5">
<li><p>send 0xf3 PS/2 command to FSP;</p></li>
</ol>
<p>6. if the register value being to write is not required to be
inverted(refer to the ‘Register inversion requirement’ section),
goto step 7</p>
<blockquote>
<div><ol class="loweralpha simple">
<li><p>send 0x47 PS/2 command to FSP;</p></li>
<li><p>send the inverted register value to FSP and goto step 9;</p></li>
</ol>
</div></blockquote>
<p>7. if the register value being to write is not required to be
swapped(refer to the ‘Register swapping requirement’ section),
goto step 8</p>
<blockquote>
<div><ol class="loweralpha simple">
<li><p>send 0x44 PS/2 command to FSP;</p></li>
<li><p>send the swapped register value to FSP and goto step 9;</p></li>
</ol>
</div></blockquote>
<ol class="arabic simple" start="8">
<li><p>send 0x33 PS/2 command to FSP;</p></li>
</ol>
<blockquote>
<div><ol class="loweralpha simple">
<li><p>send the register value to FSP;</p></li>
</ol>
</div></blockquote>
<ol class="arabic simple" start="9">
<li><p>the register writing sequence is completed.</p></li>
</ol>
<ul>
<li><p>Since the Cx release, the hardware will return 1’s
complement of the register value at the 3rd byte of status request
result. Host can optionally send another 0xe9 (status request) PS/2
command to FSP at the end of register writing to verify that the
register writing operation is successful (?? indicates don’t care
byte):</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>host: 0xe9
3888: 0xfa (??) (~val) (val)
</pre></div>
</div>
</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="programming-sequence-for-page-register-reading-writing">
<h2><span class="section-number">15.10. </span>Programming Sequence for Page Register Reading/Writing<a class="headerlink" href="#programming-sequence-for-page-register-reading-writing" title="Permalink to this headline">¶</a></h2>
<p>In order to overcome the limitation of maximum number of registers
supported, the hardware separates register into different groups called
‘pages.’ Each page is able to include up to 255 registers.</p>
<p>The default page after power up is 0x82; therefore, if one has to get
access to register 0x8301, one has to use following sequence to switch
to page 0x83, then start reading/writing from/to offset 0x01 by using
the register read/write sequence described in previous section.</p>
<p>Page register reading sequence:</p>
<blockquote>
<div><ol class="arabic simple">
<li><p>send 0xf3 PS/2 command to FSP;</p></li>
<li><p>send 0x66 PS/2 command to FSP;</p></li>
<li><p>send 0x88 PS/2 command to FSP;</p></li>
<li><p>send 0xf3 PS/2 command to FSP;</p></li>
<li><p>send 0x83 PS/2 command to FSP;</p></li>
<li><p>send 0x88 PS/2 command to FSP;</p></li>
<li><p>send 0xe9(status request) PS/2 command to FSP;</p></li>
<li><p>the response read from FSP should be the requested page value.</p></li>
</ol>
</div></blockquote>
<p>Page register writing sequence:</p>
<blockquote>
<div><ol class="arabic simple">
<li><p>send 0xf3 PS/2 command to FSP;</p></li>
<li><p>send 0x38 PS/2 command to FSP;</p></li>
<li><p>send 0x88 PS/2 command to FSP;</p></li>
<li><p>send 0xf3 PS/2 command to FSP;</p></li>
</ol>
<p>5. if the page address being written is not required to be
inverted(refer to the ‘Register inversion requirement’ section),
goto step 6</p>
<blockquote>
<div><ol class="loweralpha simple">
<li><p>send 0x47 PS/2 command to FSP;</p></li>
<li><p>send the inverted page address to FSP and goto step 9;</p></li>
</ol>
</div></blockquote>
<p>6. if the page address being written is not required to be
swapped(refer to the ‘Register swapping requirement’ section),
goto step 7</p>
<blockquote>
<div><ol class="loweralpha simple">
<li><p>send 0x44 PS/2 command to FSP;</p></li>
<li><p>send the swapped page address to FSP and goto step 9;</p></li>
</ol>
</div></blockquote>
<ol class="arabic simple" start="7">
<li><p>send 0x33 PS/2 command to FSP;</p></li>
<li><p>send the page address to FSP;</p></li>
<li><p>the page register writing sequence is completed.</p></li>
</ol>
</div></blockquote>
</div>
<div class="section" id="gesture-id">
<h2><span class="section-number">15.11. </span>Gesture ID<a class="headerlink" href="#gesture-id" title="Permalink to this headline">¶</a></h2>
<p>Unlike other devices which sends multiple fingers’ coordinates to host,
FSP processes multiple fingers’ coordinates internally and convert them
into a 8 bits integer, namely ‘Gesture ID.’  Following is a list of
supported gesture IDs:</p>
<blockquote>
<div><table class="docutils align-default">
<colgroup>
<col style="width: 17%" />
<col style="width: 83%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>ID</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>0x86</p></td>
<td><p>2 finger straight up</p></td>
</tr>
<tr class="row-odd"><td><p>0x82</p></td>
<td><p>2 finger straight down</p></td>
</tr>
<tr class="row-even"><td><p>0x80</p></td>
<td><p>2 finger straight right</p></td>
</tr>
<tr class="row-odd"><td><p>0x84</p></td>
<td><p>2 finger straight left</p></td>
</tr>
<tr class="row-even"><td><p>0x8f</p></td>
<td><p>2 finger zoom in</p></td>
</tr>
<tr class="row-odd"><td><p>0x8b</p></td>
<td><p>2 finger zoom out</p></td>
</tr>
<tr class="row-even"><td><p>0xc0</p></td>
<td><p>2 finger curve, counter clockwise</p></td>
</tr>
<tr class="row-odd"><td><p>0xc4</p></td>
<td><p>2 finger curve, clockwise</p></td>
</tr>
<tr class="row-even"><td><p>0x2e</p></td>
<td><p>3 finger straight up</p></td>
</tr>
<tr class="row-odd"><td><p>0x2a</p></td>
<td><p>3 finger straight down</p></td>
</tr>
<tr class="row-even"><td><p>0x28</p></td>
<td><p>3 finger straight right</p></td>
</tr>
<tr class="row-odd"><td><p>0x2c</p></td>
<td><p>3 finger straight left</p></td>
</tr>
<tr class="row-even"><td><p>0x38</p></td>
<td><p>palm</p></td>
</tr>
</tbody>
</table>
</div></blockquote>
</div>
<div class="section" id="register-listing">
<h2><span class="section-number">15.12. </span>Register Listing<a class="headerlink" href="#register-listing" title="Permalink to this headline">¶</a></h2>
<p>Registers are represented in 16 bits values. The higher 8 bits represent
the page address and the lower 8 bits represent the relative offset within
that particular page.  Refer to the ‘Programming Sequence for Page Register
Reading/Writing’ section for instructions on how to change current page
address:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>offset width           default r/w     name
0x8200 bit7~bit0       0x01    RO      device ID

0x8201 bit7~bit0               RW      version ID
                                       0xc1: STL3888 Ax
                                       0xd0 ~ 0xd2: STL3888 Bx
                                       0xe0 ~ 0xe1: STL3888 Cx
                                       0xe2 ~ 0xe3: STL3888 Dx

0x8202 bit7~bit0       0x01    RO      vendor ID

0x8203 bit7~bit0       0x01    RO      product ID

0x8204 bit3~bit0       0x01    RW      revision ID

0x820b                                 test mode status 1
       bit3            1       RO      0: rotate 180 degree
                                       1: no rotation
                                       *only supported by H/W prior to Cx

0x820f                                 register file page control
       bit2            0       RW      1: rotate 180 degree
                                       0: no rotation
                                       *supported since Cx

       bit0            0       RW      1 to enable page 1 register files
                                       *only supported by H/W prior to Cx

0x8210                         RW      system control 1
       bit0            1       RW      Reserved, must be 1
       bit1            0       RW      Reserved, must be 0
       bit4            0       RW      Reserved, must be 0
       bit5            1       RW      register clock gating enable
                                       0: read only, 1: read/write enable
       (Note that following registers does not require clock gating being
       enabled prior to write: 05 06 07 08 09 0c 0f 10 11 12 16 17 18 23 2e
       40 41 42 43.  In addition to that, this bit must be 1 when gesture
       mode is enabled)

0x8220                                 test mode status
       bit5~bit4               RO      number of buttons
                                       11 =&gt; 2, lbtn/rbtn
                                       10 =&gt; 4, lbtn/rbtn/scru/scrd
                                       01 =&gt; 6, lbtn/rbtn/scru/scrd/scrl/scrr
                                       00 =&gt; 6, lbtn/rbtn/scru/scrd/fbtn/bbtn
                                       *only supported by H/W prior to Cx

0x8231                         RW      on-pad command detection
       bit7            0       RW      on-pad command left button down tag
                                       enable
                                       0: disable, 1: enable
                                       *only supported by H/W prior to Cx

0x8234                         RW      on-pad command control 5
       bit4~bit0       0x05    RW      XLO in 0s/4/1, so 03h = 0010.1b = 2.5
       (Note that position unit is in 0.5 scanline)
                                       *only supported by H/W prior to Cx

       bit7            0       RW      on-pad tap zone enable
                                       0: disable, 1: enable
                                       *only supported by H/W prior to Cx

0x8235                         RW      on-pad command control 6
       bit4~bit0       0x1d    RW      XHI in 0s/4/1, so 19h = 1100.1b = 12.5
       (Note that position unit is in 0.5 scanline)
                                       *only supported by H/W prior to Cx

0x8236                         RW      on-pad command control 7
       bit4~bit0       0x04    RW      YLO in 0s/4/1, so 03h = 0010.1b = 2.5
       (Note that position unit is in 0.5 scanline)
                                       *only supported by H/W prior to Cx

0x8237                         RW      on-pad command control 8
       bit4~bit0       0x13    RW      YHI in 0s/4/1, so 11h = 1000.1b = 8.5
       (Note that position unit is in 0.5 scanline)
                                       *only supported by H/W prior to Cx

0x8240                         RW      system control 5
       bit1            0       RW      FSP Intellimouse mode enable
                                       0: disable, 1: enable
                                       *only supported by H/W prior to Cx

       bit2            0       RW      movement + abs. coordinate mode enable
                                       0: disable, 1: enable
       (Note that this function has the functionality of bit 1 even when
       bit 1 is not set. However, the format is different from that of bit 1.
       In addition, when bit 1 and bit 2 are set at the same time, bit 2 will
       override bit 1.)
                                       *only supported by H/W prior to Cx

       bit3            0       RW      abs. coordinate only mode enable
                                       0: disable, 1: enable
       (Note that this function has the functionality of bit 1 even when
       bit 1 is not set. However, the format is different from that of bit 1.
       In addition, when bit 1, bit 2 and bit 3 are set at the same time,
       bit 3 will override bit 1 and 2.)
                                       *only supported by H/W prior to Cx

       bit5            0       RW      auto switch enable
                                       0: disable, 1: enable
                                       *only supported by H/W prior to Cx

       bit6            0       RW      G0 abs. + notify packet format enable
                                       0: disable, 1: enable
       (Note that the absolute/relative coordinate output still depends on
       bit 2 and 3.  That is, if any of those bit is 1, host will receive
       absolute coordinates; otherwise, host only receives packets with
       relative coordinate.)
                                       *only supported by H/W prior to Cx

       bit7            0       RW      EN_PS2_F2: PS/2 gesture mode 2nd
                                       finger packet enable
                                       0: disable, 1: enable
                                       *only supported by H/W prior to Cx

0x8243                         RW      on-pad control
       bit0            0       RW      on-pad control enable
                                       0: disable, 1: enable
       (Note that if this bit is cleared, bit 3/5 will be ineffective)
                                       *only supported by H/W prior to Cx

       bit3            0       RW      on-pad fix vertical scrolling enable
                                       0: disable, 1: enable
                                       *only supported by H/W prior to Cx

       bit5            0       RW      on-pad fix horizontal scrolling enable
                                       0: disable, 1: enable
                                       *only supported by H/W prior to Cx

0x8290                         RW      software control register 1
       bit0            0       RW      absolute coordination mode
                                       0: disable, 1: enable
                                       *supported since Cx

       bit1            0       RW      gesture ID output
                                       0: disable, 1: enable
                                       *supported since Cx

       bit2            0       RW      two fingers&#39; coordinates output
                                       0: disable, 1: enable
                                       *supported since Cx

       bit3            0       RW      finger up one packet output
                                       0: disable, 1: enable
                                       *supported since Cx

       bit4            0       RW      absolute coordination continuous mode
                                       0: disable, 1: enable
                                       *supported since Cx

       bit6~bit5       00      RW      gesture group selection
                                       00: basic
                                       01: suite
                                       10: suite pro
                                       11: advanced
                                       *supported since Cx

       bit7            0       RW      Bx packet output compatible mode
                                       0: disable, 1: enable
                                       *supported since Cx
                                       *supported since Cx


0x833d                         RW      on-pad command control 1
       bit7            1       RW      on-pad command detection enable
                                       0: disable, 1: enable
                                       *supported since Cx

0x833e                         RW      on-pad command detection
       bit7            0       RW      on-pad command left button down tag
                                       enable. Works only in H/W based PS/2
                                       data packet mode.
                                       0: disable, 1: enable
                                       *supported since Cx
</pre></div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="walkera0701.html" class="btn btn-neutral float-right" title="16. Walkera WK-0701 transmitter" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="rotary-encoder.html" class="btn btn-neutral float-left" title="14. rotary-encoder - a generic driver for GPIO connected devices" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright The kernel development community

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>