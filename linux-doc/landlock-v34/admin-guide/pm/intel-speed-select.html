

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Intel(R) Speed Select Technology User Guide &mdash; The Linux Kernel 5.12.0-rc3+ documentation</title>
  

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/theme_overrides.css" type="text/css" />

  
  

  
  

  

  
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Linux Plug and Play Documentation" href="../pnp.html" />
    <link rel="prev" title="Intel Performance and Energy Bias Hint" href="intel_epb.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html" class="icon icon-home"> The Linux Kernel
          

          
          </a>

          
            
            
              <div class="version">
                5.12.0-rc3
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">The Linux kernel user’s and administrator’s guide</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../README.html">Linux kernel release 5.x &lt;http://kernel.org/&gt;</a></li>
<li class="toctree-l2"><a class="reference internal" href="../kernel-parameters.html">The kernel’s command-line parameters</a></li>
<li class="toctree-l2"><a class="reference internal" href="../devices.html">Linux allocated devices (4.x+ version)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sysctl/index.html">Documentation for /proc/sys</a></li>
<li class="toctree-l2"><a class="reference internal" href="../abi.html">Linux ABI description</a></li>
<li class="toctree-l2"><a class="reference internal" href="../features.html">Feature status on all architectures</a></li>
<li class="toctree-l2"><a class="reference internal" href="../hw-vuln/index.html">Hardware vulnerabilities</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reporting-issues.html">Reporting issues</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reporting-bugs.html">Reporting bugs (obsolete)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../security-bugs.html">Security bugs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../bug-hunting.html">Bug hunting</a></li>
<li class="toctree-l2"><a class="reference internal" href="../bug-bisect.html">Bisecting a bug</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tainted-kernels.html">Tainted kernels</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ramoops.html">Ramoops oops/panic logger</a></li>
<li class="toctree-l2"><a class="reference internal" href="../dynamic-debug-howto.html">Dynamic debug</a></li>
<li class="toctree-l2"><a class="reference internal" href="../init.html">Explaining the “No working init found.” boot hang message</a></li>
<li class="toctree-l2"><a class="reference internal" href="../kdump/index.html">Documentation for Kdump - The kexec-based Crash Dumping Solution</a></li>
<li class="toctree-l2"><a class="reference internal" href="../perf/index.html">Performance monitor support</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pstore-blk.html">pstore block oops/panic logger</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sysfs-rules.html">Rules on how to access information in sysfs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../acpi/index.html">ACPI Support</a></li>
<li class="toctree-l2"><a class="reference internal" href="../aoe/index.html">ATA over Ethernet (AoE)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../auxdisplay/index.html">Auxiliary Display Support</a></li>
<li class="toctree-l2"><a class="reference internal" href="../bcache.html">A block layer cache (bcache)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../binderfs.html">The Android binderfs Filesystem</a></li>
<li class="toctree-l2"><a class="reference internal" href="../binfmt-misc.html">Kernel Support for miscellaneous Binary Formats (binfmt_misc)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../blockdev/index.html">The Linux RapidIO Subsystem</a></li>
<li class="toctree-l2"><a class="reference internal" href="../bootconfig.html">Boot Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../braille-console.html">Linux Braille Console</a></li>
<li class="toctree-l2"><a class="reference internal" href="../btmrvl.html">btmrvl driver</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cgroup-v1/index.html">Control Groups version 1</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cgroup-v2.html">Control Group v2</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cifs/index.html">CIFS</a></li>
<li class="toctree-l2"><a class="reference internal" href="../clearing-warn-once.html">Clearing WARN_ONCE</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cpu-load.html">CPU load</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cputopology.html">How CPU topology info is exported via sysfs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../dell_rbu.html">Dell Remote BIOS Update driver (dell_rbu)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../device-mapper/index.html">Device Mapper</a></li>
<li class="toctree-l2"><a class="reference internal" href="../edid.html">EDID</a></li>
<li class="toctree-l2"><a class="reference internal" href="../efi-stub.html">The EFI Boot Stub</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ext4.html">ext4 General Information</a></li>
<li class="toctree-l2"><a class="reference internal" href="../nfs/index.html">NFS</a></li>
<li class="toctree-l2"><a class="reference internal" href="../gpio/index.html">gpio</a></li>
<li class="toctree-l2"><a class="reference internal" href="../highuid.html">Notes on the change from 16-bit UIDs to 32-bit UIDs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../hw_random.html">Linux support for random number generator in i8xx chipsets</a></li>
<li class="toctree-l2"><a class="reference internal" href="../initrd.html">Using the initial RAM disk (initrd)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iostats.html">I/O statistics fields</a></li>
<li class="toctree-l2"><a class="reference internal" href="../java.html">Java(tm) Binary Kernel Support for Linux v1.03</a></li>
<li class="toctree-l2"><a class="reference internal" href="../jfs.html">IBM’s Journaled File System (JFS) for Linux</a></li>
<li class="toctree-l2"><a class="reference internal" href="../kernel-per-CPU-kthreads.html">Reducing OS jitter due to per-cpu kthreads</a></li>
<li class="toctree-l2"><a class="reference internal" href="../laptops/index.html">Laptop Drivers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../lcd-panel-cgram.html">Parallel port LCD/Keypad Panel support</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ldm.html">LDM - Logical Disk Manager (Dynamic Disks)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../lockup-watchdogs.html">Softlockup detector and hardlockup detector (aka nmi_watchdog)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../LSM/index.html">Linux Security Module Usage</a></li>
<li class="toctree-l2"><a class="reference internal" href="../md.html">RAID arrays</a></li>
<li class="toctree-l2"><a class="reference internal" href="../media/index.html">Media subsystem admin and user guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="../mm/index.html">Memory Management</a></li>
<li class="toctree-l2"><a class="reference internal" href="../module-signing.html">Kernel module signing facility</a></li>
<li class="toctree-l2"><a class="reference internal" href="../mono.html">Mono(tm) Binary Kernel Support for Linux</a></li>
<li class="toctree-l2"><a class="reference internal" href="../namespaces/index.html">Namespaces</a></li>
<li class="toctree-l2"><a class="reference internal" href="../numastat.html">Numa policy hit/miss statistics</a></li>
<li class="toctree-l2"><a class="reference internal" href="../parport.html">Parport</a></li>
<li class="toctree-l2"><a class="reference internal" href="../perf-security.html">Perf events and tool security</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">Power Management</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="strategies.html">Power Management Strategies</a></li>
<li class="toctree-l3"><a class="reference internal" href="system-wide.html">System-Wide Power Management</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="working-state.html">Working-State Power Management</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="cpuidle.html">CPU Idle Time Management</a></li>
<li class="toctree-l4"><a class="reference internal" href="intel_idle.html"><code class="docutils literal notranslate"><span class="pre">intel_idle</span></code> CPU Idle Time Management Driver</a></li>
<li class="toctree-l4"><a class="reference internal" href="cpufreq.html">CPU Performance Scaling</a></li>
<li class="toctree-l4"><a class="reference internal" href="intel_pstate.html"><code class="docutils literal notranslate"><span class="pre">intel_pstate</span></code> CPU Performance Scaling Driver</a></li>
<li class="toctree-l4"><a class="reference internal" href="cpufreq_drivers.html">Legacy Documentation of CPU Performance Scaling Drivers</a></li>
<li class="toctree-l4"><a class="reference internal" href="intel_epb.html">Intel Performance and Energy Bias Hint</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">Intel(R) Speed Select Technology User Guide</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../pnp.html">Linux Plug and Play Documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../rapidio.html">RapidIO Subsystem Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ras.html">Reliability, Availability and Serviceability</a></li>
<li class="toctree-l2"><a class="reference internal" href="../rtc.html">Real Time Clock (RTC) Drivers for Linux</a></li>
<li class="toctree-l2"><a class="reference internal" href="../serial-console.html">Linux Serial Console</a></li>
<li class="toctree-l2"><a class="reference internal" href="../svga.html">Video Mode Selection Support 2.13</a></li>
<li class="toctree-l2"><a class="reference internal" href="../syscall-user-dispatch.html">Syscall User Dispatch</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sysrq.html">Linux Magic System Request Key Hacks</a></li>
<li class="toctree-l2"><a class="reference internal" href="../thunderbolt.html">USB4 and Thunderbolt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ufs.html">Using UFS</a></li>
<li class="toctree-l2"><a class="reference internal" href="../unicode.html">Unicode support</a></li>
<li class="toctree-l2"><a class="reference internal" href="../vga-softcursor.html">Software cursor for VGA</a></li>
<li class="toctree-l2"><a class="reference internal" href="../video-output.html">Video Output Switcher Control</a></li>
<li class="toctree-l2"><a class="reference internal" href="../xfs.html">The SGI XFS Filesystem</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../kbuild/index.html">Kernel Build System</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../firmware-guide/index.html">The Linux kernel firmware guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../devicetree/index.html">Open Firmware and Device Tree</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../userspace-api/index.html">The Linux kernel user-space API guide</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../process/index.html">Working with the kernel development community</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../dev-tools/index.html">Development tools for the kernel</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../doc-guide/index.html">How to write kernel documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../kernel-hacking/index.html">Kernel Hacking Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../trace/index.html">Linux Tracing Technologies</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../maintainer/index.html">Kernel Maintainer Handbook</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../fault-injection/index.html">fault-injection</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../livepatch/index.html">Kernel Livepatching</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../driver-api/index.html">The Linux driver implementer’s API guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../core-api/index.html">Core API Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../locking/index.html">locking</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../accounting/index.html">Accounting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../block/index.html">Block</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../cdrom/index.html">cdrom</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../cpu-freq/index.html">Linux CPUFreq - CPU frequency and voltage scaling code in the Linux(TM) kernel</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../ide/index.html">Integrated Drive Electronics (IDE)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../fb/index.html">Frame Buffer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../fpga/index.html">fpga</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../hid/index.html">Human Interface Devices (HID)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../i2c/index.html">I2C/SMBus Subsystem</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../iio/index.html">Industrial I/O</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../isdn/index.html">ISDN</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../infiniband/index.html">InfiniBand</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../leds/index.html">LEDs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../netlabel/index.html">NetLabel</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../networking/index.html">Linux Networking Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../pcmcia/index.html">pcmcia</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../power/index.html">Power Management</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../target/index.html">TCM Virtual Device</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../timers/index.html">timers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../spi/index.html">Serial Peripheral Interface (SPI)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../w1/index.html">1-Wire Subsystem</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../watchdog/index.html">Linux Watchdog Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../virt/index.html">Linux Virtualization Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../input/index.html">The Linux Input Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../hwmon/index.html">Linux Hardware Monitoring</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../gpu/index.html">Linux GPU Driver Developer’s Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../security/index.html">Security Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../sound/index.html">Linux Sound Subsystem Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../crypto/index.html">Linux Kernel Crypto API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../filesystems/index.html">Filesystems in the Linux kernel</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../vm/index.html">Linux Memory Management Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../bpf/index.html">BPF Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../usb/index.html">USB support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../PCI/index.html">Linux PCI Bus Subsystem</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../scsi/index.html">Linux SCSI Subsystem</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../misc-devices/index.html">Assorted Miscellaneous Devices Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../scheduler/index.html">Linux Scheduler</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../mhi/index.html">MHI</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../asm-annotations.html">Assembler Annotations</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../arm/index.html">ARM Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../arm64/index.html">ARM64 Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../ia64/index.html">IA-64 Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../m68k/index.html">m68k Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../mips/index.html">MIPS-specific Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../nios2/index.html">Nios II Specific Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../openrisc/index.html">OpenRISC Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../parisc/index.html">PA-RISC Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../powerpc/index.html">powerpc</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../riscv/index.html">RISC-V architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../s390/index.html">s390 Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../sh/index.html">SuperH Interfaces Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../sparc/index.html">Sparc Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../x86/index.html">x86-specific Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../xtensa/index.html">Xtensa Architecture</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../staging/index.html">Unsorted Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../staging/index.html#atomic-types">Atomic Types</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../staging/index.html#atomic-bitops">Atomic bitops</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../staging/index.html#memory-barriers">Memory Barriers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../watch_queue.html">General notification mechanism</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../translations/index.html">Translations</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">The Linux Kernel</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../index.html">The Linux kernel user’s and administrator’s guide</a> &raquo;</li>
        
          <li><a href="index.html">Power Management</a> &raquo;</li>
        
          <li><a href="working-state.html">Working-State Power Management</a> &raquo;</li>
        
      <li>Intel(R) Speed Select Technology User Guide</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../../_sources/admin-guide/pm/intel-speed-select.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="intel-r-speed-select-technology-user-guide">
<h1>Intel(R) Speed Select Technology User Guide<a class="headerlink" href="#intel-r-speed-select-technology-user-guide" title="Permalink to this headline">¶</a></h1>
<p>The Intel(R) Speed Select Technology (Intel(R) SST) provides a powerful new
collection of features that give more granular control over CPU performance.
With Intel(R) SST, one server can be configured for power and performance for a
variety of diverse workload requirements.</p>
<p>Refer to the links below for an overview of the technology:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://www.intel.com/content/www/us/en/architecture-and-technology/speed-select-technology-article.html">https://www.intel.com/content/www/us/en/architecture-and-technology/speed-select-technology-article.html</a></p></li>
<li><p><a class="reference external" href="https://builders.intel.com/docs/networkbuilders/intel-speed-select-technology-base-frequency-enhancing-performance.pdf">https://builders.intel.com/docs/networkbuilders/intel-speed-select-technology-base-frequency-enhancing-performance.pdf</a></p></li>
</ul>
<p>These capabilities are further enhanced in some of the newer generations of
server platforms where these features can be enumerated and controlled
dynamically without pre-configuring via BIOS setup options. This dynamic
configuration is done via mailbox commands to the hardware. One way to enumerate
and configure these features is by using the Intel Speed Select utility.</p>
<p>This document explains how to use the Intel Speed Select tool to enumerate and
control Intel(R) SST features. This document gives example commands and explains
how these commands change the power and performance profile of the system under
test. Using this tool as an example, customers can replicate the messaging
implemented in the tool in their production software.</p>
<div class="section" id="intel-speed-select-configuration-tool">
<h2>intel-speed-select configuration tool<a class="headerlink" href="#intel-speed-select-configuration-tool" title="Permalink to this headline">¶</a></h2>
<p>Most Linux distribution packages may include the “intel-speed-select” tool. If not,
it can be built by downloading the Linux kernel tree from kernel.org. Once
downloaded, the tool can be built without building the full kernel.</p>
<p>From the kernel tree, run the following commands:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span># cd tools/power/x86/intel-speed-select/
# make
# make install
</pre></div>
</div>
<div class="section" id="getting-help">
<h3>Getting Help<a class="headerlink" href="#getting-help" title="Permalink to this headline">¶</a></h3>
<p>To get help with the tool, execute the command below:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span># intel-speed-select --help
</pre></div>
</div>
<p>The top-level help describes arguments and features. Notice that there is a
multi-level help structure in the tool. For example, to get help for the feature “perf-profile”:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span># intel-speed-select perf-profile --help
</pre></div>
</div>
<p>To get help on a command, another level of help is provided. For example for the command info “info”:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span># intel-speed-select perf-profile info --help
</pre></div>
</div>
</div>
<div class="section" id="summary-of-platform-capability">
<h3>Summary of platform capability<a class="headerlink" href="#summary-of-platform-capability" title="Permalink to this headline">¶</a></h3>
<p>To check the current platform and driver capabilities, execute:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>#intel-speed-select --info
</pre></div>
</div>
<p>For example on a test system:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span># intel-speed-select --info
Intel(R) Speed Select Technology
Executing on CPU model: X
Platform: API version : 1
Platform: Driver version : 1
Platform: mbox supported : 1
Platform: mmio supported : 1
Intel(R) SST-PP (feature perf-profile) is supported
TDP level change control is unlocked, max level: 4
Intel(R) SST-TF (feature turbo-freq) is supported
Intel(R) SST-BF (feature base-freq) is not supported
Intel(R) SST-CP (feature core-power) is supported
</pre></div>
</div>
</div>
<div class="section" id="intel-r-speed-select-technology-performance-profile-intel-r-sst-pp">
<h3>Intel(R) Speed Select Technology - Performance Profile (Intel(R) SST-PP)<a class="headerlink" href="#intel-r-speed-select-technology-performance-profile-intel-r-sst-pp" title="Permalink to this headline">¶</a></h3>
<p>This feature allows configuration of a server dynamically based on workload
performance requirements. This helps users during deployment as they do not have
to choose a specific server configuration statically.  This Intel(R) Speed Select
Technology - Performance Profile (Intel(R) SST-PP) feature introduces a mechanism
that allows multiple optimized performance profiles per system. Each profile
defines a set of CPUs that need to be online and rest offline to sustain a
guaranteed base frequency. Once the user issues a command to use a specific
performance profile and meet CPU online/offline requirement, the user can expect
a change in the base frequency dynamically. This feature is called
“perf-profile” when using the Intel Speed Select tool.</p>
<div class="section" id="number-or-performance-levels">
<h4>Number or performance levels<a class="headerlink" href="#number-or-performance-levels" title="Permalink to this headline">¶</a></h4>
<p>There can be multiple performance profiles on a system. To get the number of
profiles, execute the command below:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span># intel-speed-select perf-profile get-config-levels
Intel(R) Speed Select Technology
Executing on CPU model: X
package-0
 die-0
   cpu-0
       get-config-levels:4
package-1
 die-0
   cpu-14
       get-config-levels:4
</pre></div>
</div>
<p>On this system under test, there are 4 performance profiles in addition to the
base performance profile (which is performance level 0).</p>
</div>
<div class="section" id="lock-unlock-status">
<h4>Lock/Unlock status<a class="headerlink" href="#lock-unlock-status" title="Permalink to this headline">¶</a></h4>
<p>Even if there are multiple performance profiles, it is possible that they
are locked. If they are locked, users cannot issue a command to change the
performance state. It is possible that there is a BIOS setup to unlock or check
with your system vendor.</p>
<p>To check if the system is locked, execute the following command:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span># intel-speed-select perf-profile get-lock-status
Intel(R) Speed Select Technology
Executing on CPU model: X
package-0
 die-0
   cpu-0
       get-lock-status:0
package-1
 die-0
   cpu-14
       get-lock-status:0
</pre></div>
</div>
<p>In this case, lock status is 0, which means that the system is unlocked.</p>
</div>
<div class="section" id="properties-of-a-performance-level">
<h4>Properties of a performance level<a class="headerlink" href="#properties-of-a-performance-level" title="Permalink to this headline">¶</a></h4>
<p>To get properties of a specific performance level (For example for the level 0, below), execute the command below:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span># intel-speed-select perf-profile info -l 0
Intel(R) Speed Select Technology
Executing on CPU model: X
package-0
 die-0
   cpu-0
     perf-profile-level-0
       cpu-count:28
       enable-cpu-mask:000003ff,f0003fff
       enable-cpu-list:0,1,2,3,4,5,6,7,8,9,10,11,12,13,28,29,30,31,32,33,34,35,36,37,38,39,40,41
       thermal-design-power-ratio:26
       base-frequency(MHz):2600
       speed-select-turbo-freq:disabled
       speed-select-base-freq:disabled
       ...
       ...
</pre></div>
</div>
<p>Here -l option is used to specify a performance level.</p>
<p>If the option -l is omitted, then this command will print information about all
the performance levels. The above command is printing properties of the
performance level 0.</p>
<p>For this performance profile, the list of CPUs displayed by the
“enable-cpu-mask/enable-cpu-list” at the max can be “online.” When that
condition is met, then base frequency of 2600 MHz can be maintained. To
understand more, execute “intel-speed-select perf-profile info” for performance
level 4:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span># intel-speed-select perf-profile info -l 4
Intel(R) Speed Select Technology
Executing on CPU model: X
package-0
 die-0
   cpu-0
     perf-profile-level-4
       cpu-count:28
       enable-cpu-mask:000000fa,f0000faf
       enable-cpu-list:0,1,2,3,5,7,8,9,10,11,28,29,30,31,33,35,36,37,38,39
       thermal-design-power-ratio:28
       base-frequency(MHz):2800
       speed-select-turbo-freq:disabled
       speed-select-base-freq:unsupported
       ...
       ...
</pre></div>
</div>
<p>There are fewer CPUs in the “enable-cpu-mask/enable-cpu-list”. Consequently, if
the user only keeps these CPUs online and the rest “offline,” then the base
frequency is increased to 2.8 GHz compared to 2.6 GHz at performance level 0.</p>
</div>
<div class="section" id="get-current-performance-level">
<h4>Get current performance level<a class="headerlink" href="#get-current-performance-level" title="Permalink to this headline">¶</a></h4>
<p>To get the current performance level, execute:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span># intel-speed-select perf-profile get-config-current-level
Intel(R) Speed Select Technology
Executing on CPU model: X
package-0
 die-0
   cpu-0
       get-config-current_level:0
</pre></div>
</div>
<p>First verify that the base_frequency displayed by the cpufreq sysfs is correct:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span># cat /sys/devices/system/cpu/cpu0/cpufreq/base_frequency
2600000
</pre></div>
</div>
<p>This matches the base-frequency (MHz) field value displayed from the
“perf-profile info” command for performance level 0(cpufreq frequency is in
KHz).</p>
<p>To check if the average frequency is equal to the base frequency for a 100% busy
workload, disable turbo:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span># echo 1 &gt; /sys/devices/system/cpu/intel_pstate/no_turbo
</pre></div>
</div>
<p>Then runs a busy workload on all CPUs, for example:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>#stress -c 64
</pre></div>
</div>
<p>To verify the base frequency, run turbostat:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>#turbostat -c 0-13 --show Package,Core,CPU,Bzy_MHz -i 1

 Package       Core    CPU     Bzy_MHz
               -       -       2600
 0             0       0       2600
 0             1       1       2600
 0             2       2       2600
 0             3       3       2600
 0             4       4       2600
 .             .       .       .
</pre></div>
</div>
</div>
<div class="section" id="changing-performance-level">
<h4>Changing performance level<a class="headerlink" href="#changing-performance-level" title="Permalink to this headline">¶</a></h4>
<p>To the change the performance level to 4, execute:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span># intel-speed-select -d perf-profile set-config-level -l 4 -o
Intel(R) Speed Select Technology
Executing on CPU model: X
package-0
 die-0
   cpu-0
     perf-profile
       set_tdp_level:success
</pre></div>
</div>
<p>In the command above, “-o” is optional. If it is specified, then it will also
offline CPUs which are not present in the enable_cpu_mask for this performance
level.</p>
<p>Now if the base_frequency is checked:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>#cat /sys/devices/system/cpu/cpu0/cpufreq/base_frequency
2800000
</pre></div>
</div>
<p>Which shows that the base frequency now increased from 2600 MHz at performance
level 0 to 2800 MHz at performance level 4. As a result, any workload, which can
use fewer CPUs, can see a boost of 200 MHz compared to performance level 0.</p>
</div>
</div>
<div class="section" id="check-presence-of-other-intel-r-sst-features">
<h3>Check presence of other Intel(R) SST features<a class="headerlink" href="#check-presence-of-other-intel-r-sst-features" title="Permalink to this headline">¶</a></h3>
<p>Each of the performance profiles also specifies weather there is support of
other two Intel(R) SST features (Intel(R) Speed Select Technology - Base Frequency
(Intel(R) SST-BF) and Intel(R) Speed Select Technology - Turbo Frequency (Intel
SST-TF)).</p>
<p>For example, from the output of “perf-profile info” above, for level 0 and level
4:</p>
<dl class="simple">
<dt>For level 0::</dt><dd><p>speed-select-turbo-freq:disabled
speed-select-base-freq:disabled</p>
</dd>
<dt>For level 4::</dt><dd><p>speed-select-turbo-freq:disabled
speed-select-base-freq:unsupported</p>
</dd>
</dl>
<p>Given these results, the “speed-select-base-freq” (Intel(R) SST-BF) in level 4
changed from “disabled” to “unsupported” compared to performance level 0.</p>
<p>This means that at performance level 4, the “speed-select-base-freq” feature is
not supported. However, at performance level 0, this feature is “supported”, but
currently “disabled”, meaning the user has not activated this feature. Whereas
“speed-select-turbo-freq” (Intel(R) SST-TF) is supported at both performance
levels, but currently not activated by the user.</p>
<p>The Intel(R) SST-BF and the Intel(R) SST-TF features are built on a foundation
technology called Intel(R) Speed Select Technology - Core Power (Intel(R) SST-CP).
The platform firmware enables this feature when Intel(R) SST-BF or Intel(R) SST-TF
is supported on a platform.</p>
</div>
<div class="section" id="intel-r-speed-select-technology-core-power-intel-r-sst-cp">
<h3>Intel(R) Speed Select Technology Core Power (Intel(R) SST-CP)<a class="headerlink" href="#intel-r-speed-select-technology-core-power-intel-r-sst-cp" title="Permalink to this headline">¶</a></h3>
<p>Intel(R) Speed Select Technology Core Power (Intel(R) SST-CP) is an interface that
allows users to define per core priority. This defines a mechanism to distribute
power among cores when there is a power constrained scenario. This defines a
class of service (CLOS) configuration.</p>
<p>The user can configure up to 4 class of service configurations. Each CLOS group
configuration allows definitions of parameters, which affects how the frequency
can be limited and power is distributed. Each CPU core can be tied to a class of
service and hence an associated priority. The granularity is at core level not
at per CPU level.</p>
<div class="section" id="enable-clos-based-prioritization">
<h4>Enable CLOS based prioritization<a class="headerlink" href="#enable-clos-based-prioritization" title="Permalink to this headline">¶</a></h4>
<p>To use CLOS based prioritization feature, firmware must be informed to enable
and use a priority type. There is a default per platform priority type, which
can be changed with optional command line parameter.</p>
<p>To enable and check the options, execute:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span># intel-speed-select core-power enable --help
Intel(R) Speed Select Technology
Executing on CPU model: X
Enable core-power for a package/die
       Clos Enable: Specify priority type with [--priority|-p]
                0: Proportional, 1: Ordered
</pre></div>
</div>
<p>There are two types of priority types:</p>
<ul class="simple">
<li><p>Ordered</p></li>
</ul>
<p>Priority for ordered throttling is defined based on the index of the assigned
CLOS group. Where CLOS0 gets highest priority (throttled last).</p>
<p>Priority order is:
CLOS0 &gt; CLOS1 &gt; CLOS2 &gt; CLOS3.</p>
<ul class="simple">
<li><p>Proportional</p></li>
</ul>
<p>When proportional priority is used, there is an additional parameter called
frequency_weight, which can be specified per CLOS group. The goal of
proportional priority is to provide each core with the requested min., then
distribute all remaining (excess/deficit) budgets in proportion to a defined
weight. This proportional priority can be configured using “core-power config”
command.</p>
<p>To enable with the platform default priority type, execute:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span># intel-speed-select core-power enable
Intel(R) Speed Select Technology
Executing on CPU model: X
package-0
 die-0
   cpu-0
     core-power
       enable:success
package-1
 die-0
   cpu-6
     core-power
       enable:success
</pre></div>
</div>
<p>The scope of this enable is per package or die scoped when a package contains
multiple dies. To check if CLOS is enabled and get priority type, “core-power
info” command can be used. For example to check the status of core-power feature
on CPU 0, execute:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span># intel-speed-select -c 0 core-power info
Intel(R) Speed Select Technology
Executing on CPU model: X
package-0
 die-0
   cpu-0
     core-power
       support-status:supported
       enable-status:enabled
       clos-enable-status:enabled
       priority-type:proportional
package-1
 die-0
   cpu-24
     core-power
       support-status:supported
       enable-status:enabled
       clos-enable-status:enabled
       priority-type:proportional
</pre></div>
</div>
</div>
<div class="section" id="configuring-clos-groups">
<h4>Configuring CLOS groups<a class="headerlink" href="#configuring-clos-groups" title="Permalink to this headline">¶</a></h4>
<p>Each CLOS group has its own attributes including min, max, freq_weight and
desired. These parameters can be configured with “core-power config” command.
Defaults will be used if user skips setting a parameter except clos id, which is
mandatory. To check core-power config options, execute:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span># intel-speed-select core-power config --help
Intel(R) Speed Select Technology
Executing on CPU model: X
Set core-power configuration for one of the four clos ids
       Specify targeted clos id with [--clos|-c]
       Specify clos Proportional Priority [--weight|-w]
       Specify clos min in MHz with [--min|-n]
       Specify clos max in MHz with [--max|-m]
</pre></div>
</div>
<p>For example:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span># intel-speed-select core-power config -c 0
Intel(R) Speed Select Technology
Executing on CPU model: X
clos epp is not specified, default: 0
clos frequency weight is not specified, default: 0
clos min is not specified, default: 0 MHz
clos max is not specified, default: 25500 MHz
clos desired is not specified, default: 0
package-0
 die-0
   cpu-0
     core-power
       config:success
package-1
 die-0
   cpu-6
     core-power
       config:success
</pre></div>
</div>
<p>The user has the option to change defaults. For example, the user can change the
“min” and set the base frequency to always get guaranteed base frequency.</p>
</div>
<div class="section" id="get-the-current-clos-configuration">
<h4>Get the current CLOS configuration<a class="headerlink" href="#get-the-current-clos-configuration" title="Permalink to this headline">¶</a></h4>
<p>To check the current configuration, “core-power get-config” can be used. For
example, to get the configuration of CLOS 0:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span># intel-speed-select core-power get-config -c 0
Intel(R) Speed Select Technology
Executing on CPU model: X
package-0
 die-0
   cpu-0
     core-power
       clos:0
       epp:0
       clos-proportional-priority:0
       clos-min:0 MHz
       clos-max:Max Turbo frequency
       clos-desired:0 MHz
package-1
 die-0
   cpu-24
     core-power
       clos:0
       epp:0
       clos-proportional-priority:0
       clos-min:0 MHz
       clos-max:Max Turbo frequency
       clos-desired:0 MHz
</pre></div>
</div>
</div>
<div class="section" id="associating-a-cpu-with-a-clos-group">
<h4>Associating a CPU with a CLOS group<a class="headerlink" href="#associating-a-cpu-with-a-clos-group" title="Permalink to this headline">¶</a></h4>
<p>To associate a CPU to a CLOS group “core-power assoc” command can be used:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span># intel-speed-select core-power assoc --help
Intel(R) Speed Select Technology
Executing on CPU model: X
Associate a clos id to a CPU
       Specify targeted clos id with [--clos|-c]
</pre></div>
</div>
<p>For example to associate CPU 10 to CLOS group 3, execute:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span># intel-speed-select -c 10 core-power assoc -c 3
Intel(R) Speed Select Technology
Executing on CPU model: X
package-0
 die-0
   cpu-10
     core-power
       assoc:success
</pre></div>
</div>
<p>Once a CPU is associated, its sibling CPUs are also associated to a CLOS group.
Once associated, avoid changing Linux “cpufreq” subsystem scaling frequency
limits.</p>
<p>To check the existing association for a CPU, “core-power get-assoc” command can
be used. For example, to get association of CPU 10, execute:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span># intel-speed-select -c 10 core-power get-assoc
Intel(R) Speed Select Technology
Executing on CPU model: X
package-1
 die-0
   cpu-10
     get-assoc
       clos:3
</pre></div>
</div>
<p>This shows that CPU 10 is part of a CLOS group 3.</p>
</div>
<div class="section" id="disable-clos-based-prioritization">
<h4>Disable CLOS based prioritization<a class="headerlink" href="#disable-clos-based-prioritization" title="Permalink to this headline">¶</a></h4>
<p>To disable, execute:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span># intel-speed-select core-power disable
</pre></div>
</div>
<p>Some features like Intel(R) SST-TF can only be enabled when CLOS based prioritization
is enabled. For this reason, disabling while Intel(R) SST-TF is enabled can cause
Intel(R) SST-TF to fail. This will cause the “disable” command to display an error
if Intel(R) SST-TF is already enabled. In turn, to disable, the Intel(R) SST-TF
feature must be disabled first.</p>
</div>
</div>
<div class="section" id="intel-r-speed-select-technology-base-frequency-intel-r-sst-bf">
<h3>Intel(R) Speed Select Technology - Base Frequency (Intel(R) SST-BF)<a class="headerlink" href="#intel-r-speed-select-technology-base-frequency-intel-r-sst-bf" title="Permalink to this headline">¶</a></h3>
<p>The Intel(R) Speed Select Technology - Base Frequency (Intel(R) SST-BF) feature lets
the user control base frequency. If some critical workload threads demand
constant high guaranteed performance, then this feature can be used to execute
the thread at higher base frequency on specific sets of CPUs (high priority
CPUs) at the cost of lower base frequency (low priority CPUs) on other CPUs.
This feature does not require offline of the low priority CPUs.</p>
<p>The support of Intel(R) SST-BF depends on the Intel(R) Speed Select Technology -
Performance Profile (Intel(R) SST-PP) performance level configuration. It is
possible that only certain performance levels support Intel(R) SST-BF. It is also
possible that only base performance level (level = 0) has support of Intel
SST-BF. Consequently, first select the desired performance level to enable this
feature.</p>
<p>In the system under test here, Intel(R) SST-BF is supported at the base
performance level 0, but currently disabled. For example for the level 0:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span># intel-speed-select -c 0 perf-profile info -l 0
Intel(R) Speed Select Technology
Executing on CPU model: X
package-0
 die-0
   cpu-0
     perf-profile-level-0
       ...

       speed-select-base-freq:disabled
       ...
</pre></div>
</div>
<p>Before enabling Intel(R) SST-BF and measuring its impact on a workload
performance, execute some workload and measure performance and get a baseline
performance to compare against.</p>
<p>Here the user wants more guaranteed performance. For this reason, it is likely
that turbo is disabled. To disable turbo, execute:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>#echo 1 &gt; /sys/devices/system/cpu/intel_pstate/no_turbo
</pre></div>
</div>
<p>Based on the output of the “intel-speed-select perf-profile info -l 0” base
frequency of guaranteed frequency 2600 MHz.</p>
<div class="section" id="measure-baseline-performance-for-comparison">
<h4>Measure baseline performance for comparison<a class="headerlink" href="#measure-baseline-performance-for-comparison" title="Permalink to this headline">¶</a></h4>
<p>To compare, pick a multi-threaded workload where each thread can be scheduled on
separate CPUs. “Hackbench pipe” test is a good example on how to improve
performance using Intel(R) SST-BF.</p>
<p>Below, the workload is measuring average scheduler wakeup latency, so a lower
number means better performance:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span># taskset -c 3,4 perf bench -r 100 sched pipe
# Running &#39;sched/pipe&#39; benchmark:
# Executed 1000000 pipe operations between two processes
    Total time: 6.102 [sec]
      6.102445 usecs/op
        163868 ops/sec
</pre></div>
</div>
<p>While running the above test, if we take turbostat output, it will show us that
2 of the CPUs are busy and reaching max. frequency (which would be the base
frequency as the turbo is disabled). The turbostat output:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>#turbostat -c 0-13 --show Package,Core,CPU,Bzy_MHz -i 1
Package        Core    CPU     Bzy_MHz
0              0       0       1000
0              1       1       1005
0              2       2       1000
0              3       3       2600
0              4       4       2600
0              5       5       1000
0              6       6       1000
0              7       7       1005
0              8       8       1005
0              9       9       1000
0              10      10      1000
0              11      11      995
0              12      12      1000
0              13      13      1000
</pre></div>
</div>
<p>From the above turbostat output, both CPU 3 and 4 are very busy and reaching
full guaranteed frequency of 2600 MHz.</p>
</div>
<div class="section" id="intel-r-sst-bf-capabilities">
<h4>Intel(R) SST-BF Capabilities<a class="headerlink" href="#intel-r-sst-bf-capabilities" title="Permalink to this headline">¶</a></h4>
<p>To get capabilities of Intel(R) SST-BF for the current performance level 0,
execute:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span># intel-speed-select base-freq info -l 0
Intel(R) Speed Select Technology
Executing on CPU model: X
package-0
 die-0
   cpu-0
     speed-select-base-freq
       high-priority-base-frequency(MHz):3000
       high-priority-cpu-mask:00000216,00002160
       high-priority-cpu-list:5,6,8,13,33,34,36,41
       low-priority-base-frequency(MHz):2400
       tjunction-temperature(C):125
       thermal-design-power(W):205
</pre></div>
</div>
<p>The above capabilities show that there are some CPUs on this system that can
offer base frequency of 3000 MHz compared to the standard base frequency at this
performance levels. Nevertheless, these CPUs are fixed, and they are presented
via high-priority-cpu-list/high-priority-cpu-mask. But if this Intel(R) SST-BF
feature is selected, the low priorities CPUs (which are not in
high-priority-cpu-list) can only offer up to 2400 MHz. As a result, if this
clipping of low priority CPUs is acceptable, then the user can enable Intel
SST-BF feature particularly for the above “sched pipe” workload since only two
CPUs are used, they can be scheduled on high priority CPUs and can get boost of
400 MHz.</p>
</div>
<div class="section" id="enable-intel-r-sst-bf">
<h4>Enable Intel(R) SST-BF<a class="headerlink" href="#enable-intel-r-sst-bf" title="Permalink to this headline">¶</a></h4>
<p>To enable Intel(R) SST-BF feature, execute:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span># intel-speed-select base-freq enable -a
Intel(R) Speed Select Technology
Executing on CPU model: X
package-0
 die-0
   cpu-0
     base-freq
       enable:success
package-1
 die-0
   cpu-14
     base-freq
       enable:success
</pre></div>
</div>
<p>In this case, -a option is optional. This not only enables Intel(R) SST-BF, but it
also adjusts the priority of cores using Intel(R) Speed Select Technology Core
Power (Intel(R) SST-CP) features. This option sets the minimum performance of each
Intel(R) Speed Select Technology - Performance Profile (Intel(R) SST-PP) class to
maximum performance so that the hardware will give maximum performance possible
for each CPU.</p>
<p>If -a option is not used, then the following steps are required before enabling
Intel(R) SST-BF:</p>
<ul class="simple">
<li><p>Discover Intel(R) SST-BF and note low and high priority base frequency</p></li>
<li><p>Note the high priority CPU list</p></li>
<li><p>Enable CLOS using core-power feature set</p></li>
<li><p>Configure CLOS parameters. Use CLOS.min to set to minimum performance</p></li>
<li><p>Subscribe desired CPUs to CLOS groups</p></li>
</ul>
<p>With this configuration, if the same workload is executed by pinning the
workload to high priority CPUs (CPU 5 and 6 in this case):</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>#taskset -c 5,6 perf bench -r 100 sched pipe
# Running &#39;sched/pipe&#39; benchmark:
# Executed 1000000 pipe operations between two processes
    Total time: 5.627 [sec]
      5.627922 usecs/op
        177685 ops/sec
</pre></div>
</div>
<p>This way, by enabling Intel(R) SST-BF, the performance of this benchmark is
improved (latency reduced) by 7.79%. From the turbostat output, it can be
observed that the high priority CPUs reached 3000 MHz compared to 2600 MHz.
The turbostat output:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>#turbostat -c 0-13 --show Package,Core,CPU,Bzy_MHz -i 1
Package        Core    CPU     Bzy_MHz
0              0       0       2151
0              1       1       2166
0              2       2       2175
0              3       3       2175
0              4       4       2175
0              5       5       3000
0              6       6       3000
0              7       7       2180
0              8       8       2662
0              9       9       2176
0              10      10      2175
0              11      11      2176
0              12      12      2176
0              13      13      2661
</pre></div>
</div>
</div>
<div class="section" id="disable-intel-r-sst-bf">
<h4>Disable Intel(R) SST-BF<a class="headerlink" href="#disable-intel-r-sst-bf" title="Permalink to this headline">¶</a></h4>
<p>To disable the Intel(R) SST-BF feature, execute:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span># intel-speed-select base-freq disable -a
</pre></div>
</div>
</div>
</div>
<div class="section" id="intel-r-speed-select-technology-turbo-frequency-intel-r-sst-tf">
<h3>Intel(R) Speed Select Technology - Turbo Frequency (Intel(R) SST-TF)<a class="headerlink" href="#intel-r-speed-select-technology-turbo-frequency-intel-r-sst-tf" title="Permalink to this headline">¶</a></h3>
<p>This feature enables the ability to set different “All core turbo ratio limits”
to cores based on the priority. By using this feature, some cores can be
configured to get higher turbo frequency by designating them as high priority at
the cost of lower or no turbo frequency on the low priority cores.</p>
<p>For this reason, this feature is only useful when system is busy utilizing all
CPUs, but the user wants some configurable option to get high performance on
some CPUs.</p>
<p>The support of Intel(R) Speed Select Technology - Turbo Frequency (Intel(R) SST-TF)
depends on the Intel(R) Speed Select Technology - Performance Profile (Intel
SST-PP) performance level configuration. It is possible that only a certain
performance level supports Intel(R) SST-TF. It is also possible that only the base
performance level (level = 0) has the support of Intel(R) SST-TF. Hence, first
select the desired performance level to enable this feature.</p>
<p>In the system under test here, Intel(R) SST-TF is supported at the base
performance level 0, but currently disabled:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span># intel-speed-select -c 0 perf-profile info -l 0
Intel(R) Speed Select Technology
package-0
 die-0
   cpu-0
     perf-profile-level-0
       ...
       ...
       speed-select-turbo-freq:disabled
       ...
       ...
</pre></div>
</div>
<p>To check if performance can be improved using Intel(R) SST-TF feature, get the turbo
frequency properties with Intel(R) SST-TF enabled and compare to the base turbo
capability of this system.</p>
<div class="section" id="get-base-turbo-capability">
<h4>Get Base turbo capability<a class="headerlink" href="#get-base-turbo-capability" title="Permalink to this headline">¶</a></h4>
<p>To get the base turbo capability of performance level 0, execute:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span># intel-speed-select perf-profile info -l 0
Intel(R) Speed Select Technology
Executing on CPU model: X
package-0
 die-0
   cpu-0
     perf-profile-level-0
       ...
       ...
       turbo-ratio-limits-sse
         bucket-0
           core-count:2
           max-turbo-frequency(MHz):3200
         bucket-1
           core-count:4
           max-turbo-frequency(MHz):3100
         bucket-2
           core-count:6
           max-turbo-frequency(MHz):3100
         bucket-3
           core-count:8
           max-turbo-frequency(MHz):3100
         bucket-4
           core-count:10
           max-turbo-frequency(MHz):3100
         bucket-5
           core-count:12
           max-turbo-frequency(MHz):3100
         bucket-6
           core-count:14
           max-turbo-frequency(MHz):3100
         bucket-7
           core-count:16
           max-turbo-frequency(MHz):3100
</pre></div>
</div>
<p>Based on the data above, when all the CPUS are busy, the max. frequency of 3100
MHz can be achieved. If there is some busy workload on cpu 0 - 11 (e.g. stress)
and on CPU 12 and 13, execute “hackbench pipe” workload:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span># taskset -c 12,13 perf bench -r 100 sched pipe
# Running &#39;sched/pipe&#39; benchmark:
# Executed 1000000 pipe operations between two processes
    Total time: 5.705 [sec]
      5.705488 usecs/op
        175269 ops/sec
</pre></div>
</div>
<p>The turbostat output:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>#turbostat -c 0-13 --show Package,Core,CPU,Bzy_MHz -i 1
Package        Core    CPU     Bzy_MHz
0              0       0       3000
0              1       1       3000
0              2       2       3000
0              3       3       3000
0              4       4       3000
0              5       5       3100
0              6       6       3100
0              7       7       3000
0              8       8       3100
0              9       9       3000
0              10      10      3000
0              11      11      3000
0              12      12      3100
0              13      13      3100
</pre></div>
</div>
<p>Based on turbostat output, the performance is limited by frequency cap of 3100
MHz. To check if the hackbench performance can be improved for CPU 12 and CPU
13, first check the capability of the Intel(R) SST-TF feature for this performance
level.</p>
</div>
<div class="section" id="get-intel-r-sst-tf-capability">
<h4>Get Intel(R) SST-TF Capability<a class="headerlink" href="#get-intel-r-sst-tf-capability" title="Permalink to this headline">¶</a></h4>
<p>To get the capability, the “turbo-freq info” command can be used:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span># intel-speed-select turbo-freq info -l 0
Intel(R) Speed Select Technology
Executing on CPU model: X
package-0
 die-0
   cpu-0
     speed-select-turbo-freq
         bucket-0
           high-priority-cores-count:2
           high-priority-max-frequency(MHz):3200
           high-priority-max-avx2-frequency(MHz):3200
           high-priority-max-avx512-frequency(MHz):3100
         bucket-1
           high-priority-cores-count:4
           high-priority-max-frequency(MHz):3100
           high-priority-max-avx2-frequency(MHz):3000
           high-priority-max-avx512-frequency(MHz):2900
         bucket-2
           high-priority-cores-count:6
           high-priority-max-frequency(MHz):3100
           high-priority-max-avx2-frequency(MHz):3000
           high-priority-max-avx512-frequency(MHz):2900
         speed-select-turbo-freq-clip-frequencies
           low-priority-max-frequency(MHz):2600
           low-priority-max-avx2-frequency(MHz):2400
           low-priority-max-avx512-frequency(MHz):2100
</pre></div>
</div>
<p>Based on the output above, there is an Intel(R) SST-TF bucket for which there are
two high priority cores. If only two high priority cores are set, then max.
turbo frequency on those cores can be increased to 3200 MHz. This is 100 MHz
more than the base turbo capability for all cores.</p>
<p>In turn, for the hackbench workload, two CPUs can be set as high priority and
rest as low priority. One side effect is that once enabled, the low priority
cores will be clipped to a lower frequency of 2600 MHz.</p>
</div>
<div class="section" id="enable-intel-r-sst-tf">
<h4>Enable Intel(R) SST-TF<a class="headerlink" href="#enable-intel-r-sst-tf" title="Permalink to this headline">¶</a></h4>
<p>To enable Intel(R) SST-TF, execute:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span># intel-speed-select -c 12,13 turbo-freq enable -a
Intel(R) Speed Select Technology
Executing on CPU model: X
package-0
 die-0
   cpu-12
     turbo-freq
       enable:success
package-0
 die-0
   cpu-13
     turbo-freq
       enable:success
package--1
 die-0
   cpu-63
     turbo-freq --auto
       enable:success
</pre></div>
</div>
<p>In this case, the option “-a” is optional. If set, it enables Intel(R) SST-TF
feature and also sets the CPUs to high and low priority using Intel Speed
Select Technology Core Power (Intel(R) SST-CP) features. The CPU numbers passed
with “-c” arguments are marked as high priority, including its siblings.</p>
<p>If -a option is not used, then the following steps are required before enabling
Intel(R) SST-TF:</p>
<ul class="simple">
<li><p>Discover Intel(R) SST-TF and note buckets of high priority cores and maximum frequency</p></li>
<li><p>Enable CLOS using core-power feature set - Configure CLOS parameters</p></li>
<li><p>Subscribe desired CPUs to CLOS groups making sure that high priority cores are set to the maximum frequency</p></li>
</ul>
<p>If the same hackbench workload is executed, schedule hackbench threads on high
priority CPUs:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>#taskset -c 12,13 perf bench -r 100 sched pipe
# Running &#39;sched/pipe&#39; benchmark:
# Executed 1000000 pipe operations between two processes
    Total time: 5.510 [sec]
      5.510165 usecs/op
        180826 ops/sec
</pre></div>
</div>
<p>This improved performance by around 3.3% improvement on a busy system. Here the
turbostat output will show that the CPU 12 and CPU 13 are getting 100 MHz boost.
The turbostat output:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>#turbostat -c 0-13 --show Package,Core,CPU,Bzy_MHz -i 1
Package        Core    CPU     Bzy_MHz
...
0              12      12      3200
0              13      13      3200
</pre></div>
</div>
</div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="../pnp.html" class="btn btn-neutral float-right" title="Linux Plug and Play Documentation" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="intel_epb.html" class="btn btn-neutral float-left" title="Intel Performance and Energy Bias Hint" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright The kernel development community.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>