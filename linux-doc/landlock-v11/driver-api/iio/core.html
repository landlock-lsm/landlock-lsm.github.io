

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Core elements &mdash; The Linux Kernel 5.2.0+ documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../_static/doctools.js"></script>
        <script type="text/javascript" src="../../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/theme_overrides.css" type="text/css" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Buffers" href="buffers.html" />
    <link rel="prev" title="Introduction" href="intro.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html" class="icon icon-home"> The Linux Kernel
          

          
          </a>

          
            
            
              <div class="version">
                5.4.0-rc3
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../../admin-guide/index.html">The Linux kernel user’s and administrator’s guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../kbuild/index.html">Kernel Build System</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../firmware-guide/index.html">The Linux kernel firmware guide</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../userspace-api/index.html">The Linux kernel user-space API guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../ioctl/index.html">IOCTLs</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../process/index.html">Working with the kernel development community</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../dev-tools/index.html">Development tools for the kernel</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../doc-guide/index.html">How to write kernel documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../kernel-hacking/index.html">Kernel Hacking Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../trace/index.html">Linux Tracing Technologies</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../maintainer/index.html">Kernel Maintainer Handbook</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../fault-injection/index.html">fault-injection</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../livepatch/index.html">Kernel Livepatching</a></li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">The Linux driver implementer’s API guide</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../driver-model/index.html">Driver Model</a></li>
<li class="toctree-l2"><a class="reference internal" href="../basics.html">Driver Basics</a></li>
<li class="toctree-l2"><a class="reference internal" href="../infrastructure.html">Device drivers infrastructure</a></li>
<li class="toctree-l2"><a class="reference internal" href="../early-userspace/index.html">Early Userspace</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pm/index.html">CPU and Device Power Management</a></li>
<li class="toctree-l2"><a class="reference internal" href="../clk.html">The Common Clk Framework</a></li>
<li class="toctree-l2"><a class="reference internal" href="../device-io.html">Bus-Independent Device Accesses</a></li>
<li class="toctree-l2"><a class="reference internal" href="../device_connection.html">Device connections</a></li>
<li class="toctree-l2"><a class="reference internal" href="../dma-buf.html">Buffer Sharing and Synchronization</a></li>
<li class="toctree-l2"><a class="reference internal" href="../device_link.html">Device links</a></li>
<li class="toctree-l2"><a class="reference internal" href="../component.html">Component Helper for Aggregate Drivers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../message-based.html">Message-based devices</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sound.html">Sound Devices</a></li>
<li class="toctree-l2"><a class="reference internal" href="../frame-buffer.html">Frame Buffer Library</a></li>
<li class="toctree-l2"><a class="reference internal" href="../regulator.html">Voltage and current regulator API</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">Industrial I/O</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="intro.html">Introduction</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Core elements</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#industrial-i-o-devices">Industrial I/O Devices</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="buffers.html">Buffers</a></li>
<li class="toctree-l3"><a class="reference internal" href="triggers.html">Triggers</a></li>
<li class="toctree-l3"><a class="reference internal" href="triggered-buffers.html">Triggered Buffers</a></li>
<li class="toctree-l3"><a class="reference internal" href="hw-consumer.html">HW consumer</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../input.html">Input Subsystem</a></li>
<li class="toctree-l2"><a class="reference internal" href="../usb/index.html">Linux USB API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../firewire.html">Firewire (IEEE 1394) driver Interface Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pci/index.html">The Linux PCI driver implementer’s API guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="../spi.html">Serial Peripheral Interface (SPI)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../i2c.html">I<sup>2</sup>C and SMBus Subsystem</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ipmb.html">IPMB Driver for a Satellite MC</a></li>
<li class="toctree-l2"><a class="reference internal" href="../i3c/index.html">I3C subsystem</a></li>
<li class="toctree-l2"><a class="reference internal" href="../interconnect.html">GENERIC SYSTEM INTERCONNECT SUBSYSTEM</a></li>
<li class="toctree-l2"><a class="reference internal" href="../hsi.html">High Speed Synchronous Serial Interface (HSI)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../edac.html">Error Detection And Correction (EDAC) Devices</a></li>
<li class="toctree-l2"><a class="reference internal" href="../scsi.html">SCSI Interfaces Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="../libata.html">libATA Developer’s Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="../target.html">target and iSCSI Interfaces Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="../mtdnand.html">MTD NAND Driver Programming Interface</a></li>
<li class="toctree-l2"><a class="reference internal" href="../miscellaneous.html">Parallel Port Devices</a></li>
<li class="toctree-l2"><a class="reference internal" href="../miscellaneous.html#x50-uart-driver">16x50 UART Driver</a></li>
<li class="toctree-l2"><a class="reference internal" href="../miscellaneous.html#pulse-width-modulation-pwm">Pulse-Width Modulation (PWM)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../mei/index.html">Intel(R) Management Engine Interface (Intel(R) MEI)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../mtd/index.html">Memory Technology Device (MTD)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../mmc/index.html">MMC/SD/SDIO card support</a></li>
<li class="toctree-l2"><a class="reference internal" href="../nvdimm/index.html">Non-Volatile Memory Device (NVDIMM)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../w1.html">W1: Dallas’ 1-wire bus</a></li>
<li class="toctree-l2"><a class="reference internal" href="../rapidio/index.html">The Linux RapidIO Subsystem</a></li>
<li class="toctree-l2"><a class="reference internal" href="../s390-drivers.html">Writing s390 channel device drivers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../vme.html">VME Device Drivers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../80211/index.html">Linux 802.11 Driver Developer’s Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="../uio-howto.html">The Userspace I/O HOWTO</a></li>
<li class="toctree-l2"><a class="reference internal" href="../firmware/index.html">Linux Firmware API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pinctl.html">PINCTRL (PIN CONTROL) subsystem</a></li>
<li class="toctree-l2"><a class="reference internal" href="../gpio/index.html">General Purpose Input/Output (GPIO)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../md/index.html">RAID</a></li>
<li class="toctree-l2"><a class="reference internal" href="../misc_devices.html">Miscellaneous Devices</a></li>
<li class="toctree-l2"><a class="reference internal" href="../nfc/index.html">Near Field Communication</a></li>
<li class="toctree-l2"><a class="reference internal" href="../dmaengine/index.html">DMAEngine documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../slimbus.html">Linux kernel SLIMbus support</a></li>
<li class="toctree-l2"><a class="reference internal" href="../soundwire/index.html">SoundWire Documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../thermal/index.html">Thermal</a></li>
<li class="toctree-l2"><a class="reference internal" href="../fpga/index.html">FPGA Subsystem</a></li>
<li class="toctree-l2"><a class="reference internal" href="../acpi/index.html">ACPI Support</a></li>
<li class="toctree-l2"><a class="reference internal" href="../backlight/lp855x-driver.html">Kernel driver lp855x</a></li>
<li class="toctree-l2"><a class="reference internal" href="../bt8xxgpio.html">A driver for a selfmade cheap BT8xx based PCI GPIO-card (bt8xxgpio)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../connector.html">Kernel Connector</a></li>
<li class="toctree-l2"><a class="reference internal" href="../console.html">Console Drivers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../dcdbas.html">Dell Systems Management Base Driver</a></li>
<li class="toctree-l2"><a class="reference internal" href="../dell_rbu.html">Usage of the new open sourced rbu (Remote BIOS Update) driver</a></li>
<li class="toctree-l2"><a class="reference internal" href="../edid.html">EDID</a></li>
<li class="toctree-l2"><a class="reference internal" href="../eisa.html">EISA bus support</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ipmb.html">IPMB Driver for a Satellite MC</a></li>
<li class="toctree-l2"><a class="reference internal" href="../isa.html">ISA Drivers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../isapnp.html">ISA Plug &amp; Play support by Jaroslav Kysela &lt;perex&#64;suse.cz&gt;</a></li>
<li class="toctree-l2"><a class="reference internal" href="../generic-counter.html">Generic Counter Interface</a></li>
<li class="toctree-l2"><a class="reference internal" href="../lightnvm-pblk.html">pblk: Physical Block Device Target</a></li>
<li class="toctree-l2"><a class="reference internal" href="../memory-devices/index.html">Memory Controller drivers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../men-chameleon-bus.html">MEN Chameleon Bus</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ntb.html">NTB Drivers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../nvmem.html">NVMEM Subsystem</a></li>
<li class="toctree-l2"><a class="reference internal" href="../parport-lowlevel.html">PARPORT interface documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pps.html">PPS - Pulse Per Second</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ptp.html">PTP hardware clock infrastructure for Linux</a></li>
<li class="toctree-l2"><a class="reference internal" href="../phy/index.html">Generic PHY Framework</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pti_intel_mid.html">Intel MID PTI</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pwm.html">Pulse Width Modulation (PWM) interface</a></li>
<li class="toctree-l2"><a class="reference internal" href="../rfkill.html">rfkill - RF kill switch support</a></li>
<li class="toctree-l2"><a class="reference internal" href="../serial/index.html">Support for Serial devices</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sm501.html">SM501 Driver</a></li>
<li class="toctree-l2"><a class="reference internal" href="../smsc_ece1099.html">Msc Keyboard Scan Expansion/GPIO Expansion device</a></li>
<li class="toctree-l2"><a class="reference internal" href="../switchtec.html">Linux Switchtec Support</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sync_file.html">Sync File API Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="../vfio-mediated-device.html">VFIO Mediated devices</a></li>
<li class="toctree-l2"><a class="reference internal" href="../vfio.html">VFIO - “Virtual Function I/O” </a></li>
<li class="toctree-l2"><a class="reference internal" href="../xilinx/index.html">Xilinx FPGA</a></li>
<li class="toctree-l2"><a class="reference internal" href="../xillybus.html">Xillybus driver for generic FPGA interface</a></li>
<li class="toctree-l2"><a class="reference internal" href="../zorro.html">Writing Device Drivers for Zorro Devices</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../core-api/index.html">Core API Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../locking/index.html">locking</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../accounting/index.html">Accounting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../block/index.html">Block</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../cdrom/index.html">cdrom</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../ide/index.html">Integrated Drive Electronics (IDE)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../fb/index.html">Frame Buffer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../fpga/index.html">fpga</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../hid/index.html">Human Interface Devices (HID)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../i2c/index.html">I2C/SMBus Subsystem</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../iio/index.html">Industrial I/O</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../isdn/index.html">ISDN</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../infiniband/index.html">InfiniBand</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../leds/index.html">LEDs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../media/index.html">Linux Media Subsystem Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../netlabel/index.html">NetLabel</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../networking/index.html">Linux Networking Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../pcmcia/index.html">pcmcia</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../power/index.html">Power Management</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../target/index.html">TCM Virtual Device</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../timers/index.html">timers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../spi/index.html">Serial Peripheral Interface (SPI)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../w1/index.html">1-Wire Subsystem</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../watchdog/index.html">Linux Watchdog Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../virt/index.html">Linux Virtualization Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../input/index.html">The Linux Input Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../hwmon/index.html">Linux Hardware Monitoring</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../gpu/index.html">Linux GPU Driver Developer’s Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../security/index.html">Security Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../sound/index.html">Linux Sound Subsystem Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../crypto/index.html">Linux Kernel Crypto API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../filesystems/index.html">Filesystems in the Linux kernel</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../vm/index.html">Linux Memory Management Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../bpf/index.html">BPF Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../usb/index.html">USB support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../PCI/index.html">Linux PCI Bus Subsystem</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../misc-devices/index.html">Assorted Miscellaneous Devices Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../mic/index.html">Intel Many Integrated Core (MIC) architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../scheduler/index.html">Linux Scheduler</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../arm/index.html">ARM Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../arm64/index.html">ARM64 Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../ia64/index.html">IA-64 Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../m68k/index.html">m68k Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../mips/index.html">MIPS-specific Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../nios2/nios2.html">Linux on the Nios II architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../openrisc/index.html">OpenRISC Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../parisc/index.html">PA-RISC Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../powerpc/index.html">powerpc</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../riscv/index.html">RISC-V architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../s390/index.html">s390 Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../sh/index.html">SuperH Interfaces Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../sparc/index.html">Sparc Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../x86/index.html">x86-specific Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../xtensa/index.html">Xtensa Architecture</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../filesystems/ext4/index.html">ext4 Data Structures and Algorithms</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../translations/index.html">Translations</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">The Linux Kernel</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../index.html">The Linux driver implementer’s API guide</a> &raquo;</li>
        
          <li><a href="index.html">Industrial I/O</a> &raquo;</li>
        
      <li>Core elements</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../_sources/driver-api/iio/core.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="core-elements">
<h1>Core elements<a class="headerlink" href="#core-elements" title="Permalink to this headline">¶</a></h1>
<p>The Industrial I/O core offers both a unified framework for writing drivers for
many different types of embedded sensors and a standard interface to user space
applications manipulating sensors. The implementation can be found under
<code class="file docutils literal notranslate"><span class="pre">drivers/iio/industrialio-*</span></code></p>
<div class="section" id="industrial-i-o-devices">
<h2>Industrial I/O Devices<a class="headerlink" href="#industrial-i-o-devices" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>struct <a class="reference internal" href="#c.iio_dev" title="iio_dev"><code class="xref c c-type docutils literal notranslate"><span class="pre">iio_dev</span></code></a> - industrial I/O device</li>
<li><a class="reference internal" href="#c.iio_device_alloc" title="iio_device_alloc"><code class="xref c c-func docutils literal notranslate"><span class="pre">iio_device_alloc()</span></code></a> - allocate an <a class="reference internal" href="#c.iio_dev" title="iio_dev"><code class="xref c c-type docutils literal notranslate"><span class="pre">iio_dev</span></code></a> from a driver</li>
<li><a class="reference internal" href="#c.iio_device_free" title="iio_device_free"><code class="xref c c-func docutils literal notranslate"><span class="pre">iio_device_free()</span></code></a> - free an <a class="reference internal" href="#c.iio_dev" title="iio_dev"><code class="xref c c-type docutils literal notranslate"><span class="pre">iio_dev</span></code></a> from a driver</li>
<li><a class="reference internal" href="#c.iio_device_register" title="iio_device_register"><code class="xref c c-func docutils literal notranslate"><span class="pre">iio_device_register()</span></code></a> - register a device with the IIO subsystem</li>
<li><a class="reference internal" href="#c.iio_device_unregister" title="iio_device_unregister"><code class="xref c c-func docutils literal notranslate"><span class="pre">iio_device_unregister()</span></code></a> - unregister a device from the IIO
subsystem</li>
</ul>
<p>An IIO device usually corresponds to a single hardware sensor and it
provides all the information needed by a driver handling a device.
Let’s first have a look at the functionality embedded in an IIO device
then we will show how a device driver makes use of an IIO device.</p>
<p>There are two ways for a user space application to interact with an IIO driver.</p>
<ol class="arabic simple">
<li><code class="file docutils literal notranslate"><span class="pre">/sys/bus/iio/iio:device</span><em><span class="pre">X</span></em><span class="pre">/</span></code>, this represents a hardware sensor
and groups together the data channels of the same chip.</li>
<li><code class="file docutils literal notranslate"><span class="pre">/dev/iio:device</span><em><span class="pre">X</span></em></code>, character device node interface used for
buffered data transfer and for events information retrieval.</li>
</ol>
<p>A typical IIO driver will register itself as an <a class="reference internal" href="../i2c.html"><span class="doc">I2C</span></a> or
<a class="reference internal" href="../spi.html"><span class="doc">SPI</span></a> driver and will create two routines, probe and remove.</p>
<p>At probe:</p>
<ol class="arabic simple">
<li>Call <a class="reference internal" href="#c.iio_device_alloc" title="iio_device_alloc"><code class="xref c c-func docutils literal notranslate"><span class="pre">iio_device_alloc()</span></code></a>, which allocates memory for an IIO device.</li>
<li>Initialize IIO device fields with driver specific information (e.g.
device name, device channels).</li>
<li>Call <a class="reference internal" href="#c.iio_device_register" title="iio_device_register"><code class="xref c c-func docutils literal notranslate"><span class="pre">iio_device_register()</span></code></a>, this registers the device with the
IIO core. After this call the device is ready to accept requests from user
space applications.</li>
</ol>
<p>At remove, we free the resources allocated in probe in reverse order:</p>
<ol class="arabic simple">
<li><a class="reference internal" href="#c.iio_device_unregister" title="iio_device_unregister"><code class="xref c c-func docutils literal notranslate"><span class="pre">iio_device_unregister()</span></code></a>, unregister the device from the IIO core.</li>
<li><a class="reference internal" href="#c.iio_device_free" title="iio_device_free"><code class="xref c c-func docutils literal notranslate"><span class="pre">iio_device_free()</span></code></a>, free the memory allocated for the IIO device.</li>
</ol>
<div class="section" id="iio-device-sysfs-interface">
<h3>IIO device sysfs interface<a class="headerlink" href="#iio-device-sysfs-interface" title="Permalink to this headline">¶</a></h3>
<p>Attributes are sysfs files used to expose chip info and also allowing
applications to set various configuration parameters. For device with
index X, attributes can be found under /sys/bus/iio/iio:deviceX/ directory.
Common attributes are:</p>
<ul class="simple">
<li><code class="file docutils literal notranslate"><span class="pre">name</span></code>, description of the physical chip.</li>
<li><code class="file docutils literal notranslate"><span class="pre">dev</span></code>, shows the major:minor pair associated with
<code class="file docutils literal notranslate"><span class="pre">/dev/iio:deviceX</span></code> node.</li>
<li><code class="file docutils literal notranslate"><span class="pre">sampling_frequency_available</span></code>, available discrete set of sampling
frequency values for device.</li>
<li>Available standard attributes for IIO devices are described in the
<code class="file docutils literal notranslate"><span class="pre">Documentation/ABI/testing/sysfs-bus-iio</span></code> file in the Linux kernel
sources.</li>
</ul>
</div>
<div class="section" id="iio-device-channels">
<h3>IIO device channels<a class="headerlink" href="#iio-device-channels" title="Permalink to this headline">¶</a></h3>
<p>struct <a class="reference internal" href="#c.iio_chan_spec" title="iio_chan_spec"><code class="xref c c-type docutils literal notranslate"><span class="pre">iio_chan_spec</span></code></a> - specification of a single channel</p>
<p>An IIO device channel is a representation of a data channel. An IIO device can
have one or multiple channels. For example:</p>
<ul class="simple">
<li>a thermometer sensor has one channel representing the temperature measurement.</li>
<li>a light sensor with two channels indicating the measurements in the visible
and infrared spectrum.</li>
<li>an accelerometer can have up to 3 channels representing acceleration on X, Y
and Z axes.</li>
</ul>
<p>An IIO channel is described by the struct <a class="reference internal" href="#c.iio_chan_spec" title="iio_chan_spec"><code class="xref c c-type docutils literal notranslate"><span class="pre">iio_chan_spec</span></code></a>.
A thermometer driver for the temperature sensor in the example above would
have to describe its channel as follows:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>static const struct iio_chan_spec temp_channel[] = {
     {
         .type = IIO_TEMP,
         .info_mask_separate = BIT(IIO_CHAN_INFO_PROCESSED),
     },
};
</pre></div>
</div>
<p>Channel sysfs attributes exposed to userspace are specified in the form of
bitmasks. Depending on their shared info, attributes can be set in one of the
following masks:</p>
<ul class="simple">
<li><strong>info_mask_separate</strong>, attributes will be specific to
this channel</li>
<li><strong>info_mask_shared_by_type</strong>, attributes are shared by all channels of the
same type</li>
<li><strong>info_mask_shared_by_dir</strong>, attributes are shared by all channels of the same
direction</li>
<li><strong>info_mask_shared_by_all</strong>, attributes are shared by all channels</li>
</ul>
<p>When there are multiple data channels per channel type we have two ways to
distinguish between them:</p>
<ul class="simple">
<li>set <strong>.modified</strong> field of <a class="reference internal" href="#c.iio_chan_spec" title="iio_chan_spec"><code class="xref c c-type docutils literal notranslate"><span class="pre">iio_chan_spec</span></code></a> to 1. Modifiers are
specified using <strong>.channel2</strong> field of the same <a class="reference internal" href="#c.iio_chan_spec" title="iio_chan_spec"><code class="xref c c-type docutils literal notranslate"><span class="pre">iio_chan_spec</span></code></a>
structure and are used to indicate a physically unique characteristic of the
channel such as its direction or spectral response. For example, a light
sensor can have two channels, one for infrared light and one for both
infrared and visible light.</li>
<li>set <strong>.indexed</strong> field of <a class="reference internal" href="#c.iio_chan_spec" title="iio_chan_spec"><code class="xref c c-type docutils literal notranslate"><span class="pre">iio_chan_spec</span></code></a> to 1. In this case the
channel is simply another instance with an index specified by the <strong>.channel</strong>
field.</li>
</ul>
<p>Here is how we can make use of the channel’s modifiers:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>static const struct iio_chan_spec light_channels[] = {
        {
                .type = IIO_INTENSITY,
                .modified = 1,
                .channel2 = IIO_MOD_LIGHT_IR,
                .info_mask_separate = BIT(IIO_CHAN_INFO_RAW),
                .info_mask_shared = BIT(IIO_CHAN_INFO_SAMP_FREQ),
        },
        {
                .type = IIO_INTENSITY,
                .modified = 1,
                .channel2 = IIO_MOD_LIGHT_BOTH,
                .info_mask_separate = BIT(IIO_CHAN_INFO_RAW),
                .info_mask_shared = BIT(IIO_CHAN_INFO_SAMP_FREQ),
        },
        {
                .type = IIO_LIGHT,
                .info_mask_separate = BIT(IIO_CHAN_INFO_PROCESSED),
                .info_mask_shared = BIT(IIO_CHAN_INFO_SAMP_FREQ),
        },
   }
</pre></div>
</div>
<p>This channel’s definition will generate two separate sysfs files for raw data
retrieval:</p>
<ul class="simple">
<li><code class="file docutils literal notranslate"><span class="pre">/sys/bus/iio/iio:device</span><em><span class="pre">X</span></em><span class="pre">/in_intensity_ir_raw</span></code></li>
<li><code class="file docutils literal notranslate"><span class="pre">/sys/bus/iio/iio:device</span><em><span class="pre">X</span></em><span class="pre">/in_intensity_both_raw</span></code></li>
</ul>
<p>one file for processed data:</p>
<ul class="simple">
<li><code class="file docutils literal notranslate"><span class="pre">/sys/bus/iio/iio:device</span><em><span class="pre">X</span></em><span class="pre">/in_illuminance_input</span></code></li>
</ul>
<p>and one shared sysfs file for sampling frequency:</p>
<ul class="simple">
<li><code class="file docutils literal notranslate"><span class="pre">/sys/bus/iio/iio:device</span><em><span class="pre">X</span></em><span class="pre">/sampling_frequency</span></code>.</li>
</ul>
<p>Here is how we can make use of the channel’s indexing:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>static const struct iio_chan_spec light_channels[] = {
        {
                .type = IIO_VOLTAGE,
                .indexed = 1,
                .channel = 0,
                .info_mask_separate = BIT(IIO_CHAN_INFO_RAW),
        },
        {
                .type = IIO_VOLTAGE,
                .indexed = 1,
                .channel = 1,
                .info_mask_separate = BIT(IIO_CHAN_INFO_RAW),
        },
}
</pre></div>
</div>
<p>This will generate two separate attributes files for raw data retrieval:</p>
<ul class="simple">
<li><code class="file docutils literal notranslate"><span class="pre">/sys/bus/iio/devices/iio:device</span><em><span class="pre">X</span></em><span class="pre">/in_voltage0_raw</span></code>, representing
voltage measurement for channel 0.</li>
<li><code class="file docutils literal notranslate"><span class="pre">/sys/bus/iio/devices/iio:device</span><em><span class="pre">X</span></em><span class="pre">/in_voltage1_raw</span></code>, representing
voltage measurement for channel 1.</li>
</ul>
</div>
<div class="section" id="more-details">
<h3>More details<a class="headerlink" href="#more-details" title="Permalink to this headline">¶</a></h3>
<dl class="type">
<dt id="c.iio_chan_spec_ext_info">
struct <code class="descname">iio_chan_spec_ext_info</code><a class="headerlink" href="#c.iio_chan_spec_ext_info" title="Permalink to this definition">¶</a></dt>
<dd><p>Extended channel info attribute</p>
</dd></dl>

<p><strong>Definition</strong></p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>struct iio_chan_spec_ext_info {
  const char *name;
  enum iio_shared_by shared;
  ssize_t (*read)(struct iio_dev *, uintptr_t private, struct iio_chan_spec const *, char *buf);
  ssize_t (*write)(struct iio_dev *, uintptr_t private,struct iio_chan_spec const *, const char *buf, size_t len);
  uintptr_t private;
};
</pre></div>
</div>
<p><strong>Members</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">name</span></code></dt>
<dd>Info attribute name</dd>
<dt><code class="docutils literal notranslate"><span class="pre">shared</span></code></dt>
<dd>Whether this attribute is shared between all channels.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">read</span></code></dt>
<dd>Read callback for this info attribute, may be NULL.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">write</span></code></dt>
<dd>Write callback for this info attribute, may be NULL.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">private</span></code></dt>
<dd>Data private to the driver.</dd>
</dl>
<dl class="type">
<dt id="c.iio_enum">
struct <code class="descname">iio_enum</code><a class="headerlink" href="#c.iio_enum" title="Permalink to this definition">¶</a></dt>
<dd><p>Enum channel info attribute</p>
</dd></dl>

<p><strong>Definition</strong></p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>struct iio_enum {
  const char * const *items;
  unsigned int num_items;
  int (*set)(struct iio_dev *, const struct iio_chan_spec *, unsigned int);
  int (*get)(struct iio_dev *, const struct iio_chan_spec *);
};
</pre></div>
</div>
<p><strong>Members</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">items</span></code></dt>
<dd>An array of strings.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">num_items</span></code></dt>
<dd>Length of the item array.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">set</span></code></dt>
<dd>Set callback function, may be NULL.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">get</span></code></dt>
<dd>Get callback function, may be NULL.</dd>
</dl>
<p><strong>Description</strong></p>
<p>The iio_enum struct can be used to implement enum style channel attributes.
Enum style attributes are those which have a set of strings which map to
unsigned integer values. The IIO enum helper code takes care of mapping
between value and string as well as generating a “_available” file which
contains a list of all available items. The set callback will be called when
the attribute is updated. The last parameter is the index to the newly
activated item. The get callback will be used to query the currently active
item and is supposed to return the index for it.</p>
<dl class="function">
<dt id="c.IIO_ENUM">
<code class="descname">IIO_ENUM</code><span class="sig-paren">(</span><em>_name</em>, <em>_shared</em>, <em>_e</em><span class="sig-paren">)</span><a class="headerlink" href="#c.IIO_ENUM" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize enum extended channel attribute</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">_name</span></code></dt>
<dd>Attribute name</dd>
<dt><code class="docutils literal notranslate"><span class="pre">_shared</span></code></dt>
<dd>Whether the attribute is shared between all channels</dd>
<dt><code class="docutils literal notranslate"><span class="pre">_e</span></code></dt>
<dd>Pointer to an iio_enum struct</dd>
</dl>
<p><strong>Description</strong></p>
<p>This should usually be used together with <a class="reference internal" href="#c.IIO_ENUM_AVAILABLE" title="IIO_ENUM_AVAILABLE"><code class="xref c c-func docutils literal notranslate"><span class="pre">IIO_ENUM_AVAILABLE()</span></code></a></p>
<dl class="function">
<dt id="c.IIO_ENUM_AVAILABLE">
<code class="descname">IIO_ENUM_AVAILABLE</code><span class="sig-paren">(</span><em>_name</em>, <em>_e</em><span class="sig-paren">)</span><a class="headerlink" href="#c.IIO_ENUM_AVAILABLE" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize enum available extended channel attribute</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">_name</span></code></dt>
<dd>Attribute name (“_available” will be appended to the name)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">_e</span></code></dt>
<dd>Pointer to an iio_enum struct</dd>
</dl>
<p><strong>Description</strong></p>
<p>Creates a read only attribute which lists all the available enum items in a
space separated list. This should usually be used together with <a class="reference internal" href="#c.IIO_ENUM" title="IIO_ENUM"><code class="xref c c-func docutils literal notranslate"><span class="pre">IIO_ENUM()</span></code></a></p>
<dl class="type">
<dt id="c.iio_mount_matrix">
struct <code class="descname">iio_mount_matrix</code><a class="headerlink" href="#c.iio_mount_matrix" title="Permalink to this definition">¶</a></dt>
<dd><p>iio mounting matrix</p>
</dd></dl>

<p><strong>Definition</strong></p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>struct iio_mount_matrix {
  const char *rotation[9];
};
</pre></div>
</div>
<p><strong>Members</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">rotation</span></code></dt>
<dd>3 dimensional space rotation matrix defining sensor alignment with
main hardware</dd>
</dl>
<dl class="function">
<dt id="c.IIO_MOUNT_MATRIX">
<code class="descname">IIO_MOUNT_MATRIX</code><span class="sig-paren">(</span><em>_shared</em>, <em>_get</em><span class="sig-paren">)</span><a class="headerlink" href="#c.IIO_MOUNT_MATRIX" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize mount matrix extended channel attribute</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">_shared</span></code></dt>
<dd>Whether the attribute is shared between all channels</dd>
<dt><code class="docutils literal notranslate"><span class="pre">_get</span></code></dt>
<dd>Pointer to an iio_get_mount_matrix_t accessor</dd>
</dl>
<dl class="type">
<dt id="c.iio_event_spec">
struct <code class="descname">iio_event_spec</code><a class="headerlink" href="#c.iio_event_spec" title="Permalink to this definition">¶</a></dt>
<dd><p>specification for a channel event</p>
</dd></dl>

<p><strong>Definition</strong></p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>struct iio_event_spec {
  enum iio_event_type type;
  enum iio_event_direction dir;
  unsigned long mask_separate;
  unsigned long mask_shared_by_type;
  unsigned long mask_shared_by_dir;
  unsigned long mask_shared_by_all;
};
</pre></div>
</div>
<p><strong>Members</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">type</span></code></dt>
<dd>Type of the event</dd>
<dt><code class="docutils literal notranslate"><span class="pre">dir</span></code></dt>
<dd>Direction of the event</dd>
<dt><code class="docutils literal notranslate"><span class="pre">mask_separate</span></code></dt>
<dd>Bit mask of enum iio_event_info values. Attributes
set in this mask will be registered per channel.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">mask_shared_by_type</span></code></dt>
<dd>Bit mask of enum iio_event_info values. Attributes
set in this mask will be shared by channel type.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">mask_shared_by_dir</span></code></dt>
<dd>Bit mask of enum iio_event_info values. Attributes
set in this mask will be shared by channel type and
direction.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">mask_shared_by_all</span></code></dt>
<dd>Bit mask of enum iio_event_info values. Attributes
set in this mask will be shared by all channels.</dd>
</dl>
<dl class="type">
<dt id="c.iio_chan_spec">
struct <code class="descname">iio_chan_spec</code><a class="headerlink" href="#c.iio_chan_spec" title="Permalink to this definition">¶</a></dt>
<dd><p>specification of a single channel</p>
</dd></dl>

<p><strong>Definition</strong></p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>struct iio_chan_spec {
  enum iio_chan_type      type;
  int channel;
  int channel2;
  unsigned long           address;
  int scan_index;
  struct {
    char sign;
    u8 realbits;
    u8 storagebits;
    u8 shift;
    u8 repeat;
    enum iio_endian endianness;
  } scan_type;
  long info_mask_separate;
  long info_mask_separate_available;
  long info_mask_shared_by_type;
  long info_mask_shared_by_type_available;
  long info_mask_shared_by_dir;
  long info_mask_shared_by_dir_available;
  long info_mask_shared_by_all;
  long info_mask_shared_by_all_available;
  const struct iio_event_spec *event_spec;
  unsigned int            num_event_specs;
  const struct iio_chan_spec_ext_info *ext_info;
  const char              *extend_name;
  const char              *datasheet_name;
  unsigned modified:1;
  unsigned indexed:1;
  unsigned output:1;
  unsigned differential:1;
};
</pre></div>
</div>
<p><strong>Members</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">type</span></code></dt>
<dd>What type of measurement is the channel making.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">channel</span></code></dt>
<dd>What number do we wish to assign the channel.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">channel2</span></code></dt>
<dd>If there is a second number for a differential
channel then this is it. If modified is set then the
value here specifies the modifier.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">address</span></code></dt>
<dd>Driver specific identifier.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">scan_index</span></code></dt>
<dd>Monotonic index to give ordering in scans when read
from a buffer.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">scan_type</span></code></dt>
<dd>struct describing the scan type</dd>
<dt><code class="docutils literal notranslate"><span class="pre">scan_type.sign</span></code></dt>
<dd>‘s’ or ‘u’ to specify signed or unsigned</dd>
<dt><code class="docutils literal notranslate"><span class="pre">scan_type.realbits</span></code></dt>
<dd>Number of valid bits of data</dd>
<dt><code class="docutils literal notranslate"><span class="pre">scan_type.storagebits</span></code></dt>
<dd>Realbits + padding</dd>
<dt><code class="docutils literal notranslate"><span class="pre">scan_type.shift</span></code></dt>
<dd>Shift right by this before masking out
realbits.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">scan_type.repeat</span></code></dt>
<dd>Number of times real/storage bits repeats.
When the repeat element is more than 1, then
the type element in sysfs will show a repeat
value. Otherwise, the number of repetitions
is omitted.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">scan_type.endianness</span></code></dt>
<dd>little or big endian</dd>
<dt><code class="docutils literal notranslate"><span class="pre">info_mask_separate</span></code></dt>
<dd>What information is to be exported that is specific to
this channel.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">info_mask_separate_available</span></code></dt>
<dd>What availability information is to be
exported that is specific to this channel.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">info_mask_shared_by_type</span></code></dt>
<dd>What information is to be exported that is shared
by all channels of the same type.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">info_mask_shared_by_type_available</span></code></dt>
<dd>What availability information is to be
exported that is shared by all channels of the same
type.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">info_mask_shared_by_dir</span></code></dt>
<dd>What information is to be exported that is shared
by all channels of the same direction.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">info_mask_shared_by_dir_available</span></code></dt>
<dd>What availability information is to be
exported that is shared by all channels of the same
direction.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">info_mask_shared_by_all</span></code></dt>
<dd>What information is to be exported that is shared
by all channels.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">info_mask_shared_by_all_available</span></code></dt>
<dd>What availability information is to be
exported that is shared by all channels.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">event_spec</span></code></dt>
<dd>Array of events which should be registered for this
channel.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">num_event_specs</span></code></dt>
<dd>Size of the event_spec array.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">ext_info</span></code></dt>
<dd>Array of extended info attributes for this channel.
The array is NULL terminated, the last element should
have its name field set to NULL.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">extend_name</span></code></dt>
<dd>Allows labeling of channel attributes with an
informative name. Note this has no effect codes etc,
unlike modifiers.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">datasheet_name</span></code></dt>
<dd>A name used in in-kernel mapping of channels. It should
correspond to the first name that the channel is referred
to by in the datasheet (e.g. IND), or the nearest
possible compound name (e.g. IND-INC).</dd>
<dt><code class="docutils literal notranslate"><span class="pre">modified</span></code></dt>
<dd>Does a modifier apply to this channel. What these are
depends on the channel type.  Modifier is set in
channel2. Examples are IIO_MOD_X for axial sensors about
the ‘x’ axis.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">indexed</span></code></dt>
<dd>Specify the channel has a numerical index. If not,
the channel index number will be suppressed for sysfs
attributes but not for event codes.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">output</span></code></dt>
<dd>Channel is output.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">differential</span></code></dt>
<dd>Channel is differential.</dd>
</dl>
<dl class="function">
<dt id="c.iio_channel_has_info">
bool <code class="descname">iio_channel_has_info</code><span class="sig-paren">(</span>const struct <a class="reference internal" href="#c.iio_chan_spec" title="iio_chan_spec">iio_chan_spec</a> *<em>&nbsp;chan</em>, enum iio_chan_info_enum<em>&nbsp;type</em><span class="sig-paren">)</span><a class="headerlink" href="#c.iio_channel_has_info" title="Permalink to this definition">¶</a></dt>
<dd><p>Checks whether a channel supports a info attribute</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">const</span> <span class="pre">struct</span> <span class="pre">iio_chan_spec</span> <span class="pre">*</span> <span class="pre">chan</span></code></dt>
<dd>The channel to be queried</dd>
<dt><code class="docutils literal notranslate"><span class="pre">enum</span> <span class="pre">iio_chan_info_enum</span> <span class="pre">type</span></code></dt>
<dd>Type of the info attribute to be checked</dd>
</dl>
<p><strong>Description</strong></p>
<p>Returns true if the channels supports reporting values for the given info
attribute type, false otherwise.</p>
<dl class="function">
<dt id="c.iio_channel_has_available">
bool <code class="descname">iio_channel_has_available</code><span class="sig-paren">(</span>const struct <a class="reference internal" href="#c.iio_chan_spec" title="iio_chan_spec">iio_chan_spec</a> *<em>&nbsp;chan</em>, enum iio_chan_info_enum<em>&nbsp;type</em><span class="sig-paren">)</span><a class="headerlink" href="#c.iio_channel_has_available" title="Permalink to this definition">¶</a></dt>
<dd><p>Checks if a channel has an available attribute</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">const</span> <span class="pre">struct</span> <span class="pre">iio_chan_spec</span> <span class="pre">*</span> <span class="pre">chan</span></code></dt>
<dd>The channel to be queried</dd>
<dt><code class="docutils literal notranslate"><span class="pre">enum</span> <span class="pre">iio_chan_info_enum</span> <span class="pre">type</span></code></dt>
<dd>Type of the available attribute to be checked</dd>
</dl>
<p><strong>Description</strong></p>
<p>Returns true if the channel supports reporting available values for the
given attribute type, false otherwise.</p>
<dl class="type">
<dt id="c.iio_info">
struct <code class="descname">iio_info</code><a class="headerlink" href="#c.iio_info" title="Permalink to this definition">¶</a></dt>
<dd><p>constant information about device</p>
</dd></dl>

<p><strong>Definition</strong></p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>struct iio_info {
  const struct attribute_group    *event_attrs;
  const struct attribute_group    *attrs;
  int (*read_raw)(struct iio_dev *indio_dev,struct iio_chan_spec const *chan,int *val,int *val2, long mask);
  int (*read_raw_multi)(struct iio_dev *indio_dev,struct iio_chan_spec const *chan,int max_len,int *vals,int *val_len, long mask);
  int (*read_avail)(struct iio_dev *indio_dev,struct iio_chan_spec const *chan,const int **vals,int *type,int *length, long mask);
  int (*write_raw)(struct iio_dev *indio_dev,struct iio_chan_spec const *chan,int val,int val2, long mask);
  int (*write_raw_get_fmt)(struct iio_dev *indio_dev,struct iio_chan_spec const *chan, long mask);
  int (*read_event_config)(struct iio_dev *indio_dev,const struct iio_chan_spec *chan,enum iio_event_type type, enum iio_event_direction dir);
  int (*write_event_config)(struct iio_dev *indio_dev,const struct iio_chan_spec *chan,enum iio_event_type type,enum iio_event_direction dir, int state);
  int (*read_event_value)(struct iio_dev *indio_dev,const struct iio_chan_spec *chan,enum iio_event_type type,enum iio_event_direction dir, enum iio_event_info info, int *val, int *val2);
  int (*write_event_value)(struct iio_dev *indio_dev,const struct iio_chan_spec *chan,enum iio_event_type type,enum iio_event_direction dir, enum iio_event_info info, int val, int val2);
  int (*validate_trigger)(struct iio_dev *indio_dev, struct iio_trigger *trig);
  int (*update_scan_mode)(struct iio_dev *indio_dev, const unsigned long *scan_mask);
  int (*debugfs_reg_access)(struct iio_dev *indio_dev,unsigned reg, unsigned writeval, unsigned *readval);
  int (*of_xlate)(struct iio_dev *indio_dev, const struct of_phandle_args *iiospec);
  int (*hwfifo_set_watermark)(struct iio_dev *indio_dev, unsigned val);
  int (*hwfifo_flush_to_buffer)(struct iio_dev *indio_dev, unsigned count);
};
</pre></div>
</div>
<p><strong>Members</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">event_attrs</span></code></dt>
<dd>event control attributes</dd>
<dt><code class="docutils literal notranslate"><span class="pre">attrs</span></code></dt>
<dd>general purpose device attributes</dd>
<dt><code class="docutils literal notranslate"><span class="pre">read_raw</span></code></dt>
<dd>function to request a value from the device.
mask specifies which value. Note 0 means a reading of
the channel in question.  Return value will specify the
type of value returned by the device. val and val2 will
contain the elements making up the returned value.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">read_raw_multi</span></code></dt>
<dd>function to return values from the device.
mask specifies which value. Note 0 means a reading of
the channel in question.  Return value will specify the
type of value returned by the device. vals pointer
contain the elements making up the returned value.
max_len specifies maximum number of elements
vals pointer can contain. val_len is used to return
length of valid elements in vals.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">read_avail</span></code></dt>
<dd>function to return the available values from the device.
mask specifies which value. Note 0 means the available
values for the channel in question.  Return value
specifies if a IIO_AVAIL_LIST or a IIO_AVAIL_RANGE is
returned in vals. The type of the vals are returned in
type and the number of vals is returned in length. For
ranges, there are always three vals returned; min, step
and max. For lists, all possible values are enumerated.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">write_raw</span></code></dt>
<dd>function to write a value to the device.
Parameters are the same as for read_raw.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">write_raw_get_fmt</span></code></dt>
<dd>callback function to query the expected
format/precision. If not set by the driver, write_raw
returns IIO_VAL_INT_PLUS_MICRO.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">read_event_config</span></code></dt>
<dd>find out if the event is enabled.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">write_event_config</span></code></dt>
<dd>set if the event is enabled.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">read_event_value</span></code></dt>
<dd>read a configuration value associated with the event.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">write_event_value</span></code></dt>
<dd>write a configuration value for the event.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">validate_trigger</span></code></dt>
<dd>function to validate the trigger when the
current trigger gets changed.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">update_scan_mode</span></code></dt>
<dd>function to configure device and scan buffer when
channels have changed</dd>
<dt><code class="docutils literal notranslate"><span class="pre">debugfs_reg_access</span></code></dt>
<dd>function to read or write register value of device</dd>
<dt><code class="docutils literal notranslate"><span class="pre">of_xlate</span></code></dt>
<dd>function pointer to obtain channel specifier index.
When #iio-cells is greater than ‘0’, the driver could
provide a custom of_xlate function that reads the
<em>args</em> and returns the appropriate index in registered
IIO channels array.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">hwfifo_set_watermark</span></code></dt>
<dd>function pointer to set the current hardware
fifo watermark level; see hwfifo_* entries in
Documentation/ABI/testing/sysfs-bus-iio for details on
how the hardware fifo operates</dd>
<dt><code class="docutils literal notranslate"><span class="pre">hwfifo_flush_to_buffer</span></code></dt>
<dd>function pointer to flush the samples stored
in the hardware fifo to the device buffer. The driver
should not flush more than count samples. The function
must return the number of samples flushed, 0 if no
samples were flushed or a negative integer if no samples
were flushed and there was an error.</dd>
</dl>
<dl class="type">
<dt id="c.iio_buffer_setup_ops">
struct <code class="descname">iio_buffer_setup_ops</code><a class="headerlink" href="#c.iio_buffer_setup_ops" title="Permalink to this definition">¶</a></dt>
<dd><p>buffer setup related callbacks</p>
</dd></dl>

<p><strong>Definition</strong></p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>struct iio_buffer_setup_ops {
  int (*preenable)(struct iio_dev *);
  int (*postenable)(struct iio_dev *);
  int (*predisable)(struct iio_dev *);
  int (*postdisable)(struct iio_dev *);
  bool (*validate_scan_mask)(struct iio_dev *indio_dev, const unsigned long *scan_mask);
};
</pre></div>
</div>
<p><strong>Members</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">preenable</span></code></dt>
<dd>[DRIVER] function to run prior to marking buffer enabled</dd>
<dt><code class="docutils literal notranslate"><span class="pre">postenable</span></code></dt>
<dd>[DRIVER] function to run after marking buffer enabled</dd>
<dt><code class="docutils literal notranslate"><span class="pre">predisable</span></code></dt>
<dd>[DRIVER] function to run prior to marking buffer
disabled</dd>
<dt><code class="docutils literal notranslate"><span class="pre">postdisable</span></code></dt>
<dd>[DRIVER] function to run after marking buffer disabled</dd>
<dt><code class="docutils literal notranslate"><span class="pre">validate_scan_mask</span></code></dt>
<dd>[DRIVER] function callback to check whether a given
scan mask is valid for the device.</dd>
</dl>
<dl class="type">
<dt id="c.iio_dev">
struct <code class="descname">iio_dev</code><a class="headerlink" href="#c.iio_dev" title="Permalink to this definition">¶</a></dt>
<dd><p>industrial I/O device</p>
</dd></dl>

<p><strong>Definition</strong></p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>struct iio_dev {
  int id;
  struct module                   *driver_module;
  int modes;
  int currentmode;
  struct device                   dev;
  struct iio_event_interface      *event_interface;
  struct iio_buffer               *buffer;
  struct list_head                buffer_list;
  int scan_bytes;
  struct mutex                    mlock;
  const unsigned long             *available_scan_masks;
  unsigned masklength;
  const unsigned long             *active_scan_mask;
  bool scan_timestamp;
  unsigned scan_index_timestamp;
  struct iio_trigger              *trig;
  bool trig_readonly;
  struct iio_poll_func            *pollfunc;
  struct iio_poll_func            *pollfunc_event;
  struct iio_chan_spec const      *channels;
  int num_channels;
  struct list_head                channel_attr_list;
  struct attribute_group          chan_attr_group;
  const char                      *name;
  const struct iio_info           *info;
  clockid_t clock_id;
  struct mutex                    info_exist_lock;
  const struct iio_buffer_setup_ops       *setup_ops;
  struct cdev                     chrdev;
#define IIO_MAX_GROUPS 6;
  const struct attribute_group    *groups[IIO_MAX_GROUPS + 1];
  int groupcounter;
  unsigned long                   flags;
#if defined(CONFIG_DEBUG_FS);
  struct dentry                   *debugfs_dentry;
  unsigned cached_reg_addr;
#endif;
};
</pre></div>
</div>
<p><strong>Members</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">id</span></code></dt>
<dd>[INTERN] used to identify device internally</dd>
<dt><code class="docutils literal notranslate"><span class="pre">driver_module</span></code></dt>
<dd>[INTERN] used to make it harder to undercut users</dd>
<dt><code class="docutils literal notranslate"><span class="pre">modes</span></code></dt>
<dd>[DRIVER] operating modes supported by device</dd>
<dt><code class="docutils literal notranslate"><span class="pre">currentmode</span></code></dt>
<dd>[DRIVER] current operating mode</dd>
<dt><code class="docutils literal notranslate"><span class="pre">dev</span></code></dt>
<dd>[DRIVER] device structure, should be assigned a parent
and owner</dd>
<dt><code class="docutils literal notranslate"><span class="pre">event_interface</span></code></dt>
<dd>[INTERN] event chrdevs associated with interrupt lines</dd>
<dt><code class="docutils literal notranslate"><span class="pre">buffer</span></code></dt>
<dd>[DRIVER] any buffer present</dd>
<dt><code class="docutils literal notranslate"><span class="pre">buffer_list</span></code></dt>
<dd>[INTERN] list of all buffers currently attached</dd>
<dt><code class="docutils literal notranslate"><span class="pre">scan_bytes</span></code></dt>
<dd>[INTERN] num bytes captured to be fed to buffer demux</dd>
<dt><code class="docutils literal notranslate"><span class="pre">mlock</span></code></dt>
<dd>[DRIVER] lock used to prevent simultaneous device state
changes</dd>
<dt><code class="docutils literal notranslate"><span class="pre">available_scan_masks</span></code></dt>
<dd>[DRIVER] optional array of allowed bitmasks</dd>
<dt><code class="docutils literal notranslate"><span class="pre">masklength</span></code></dt>
<dd>[INTERN] the length of the mask established from
channels</dd>
<dt><code class="docutils literal notranslate"><span class="pre">active_scan_mask</span></code></dt>
<dd>[INTERN] union of all scan masks requested by buffers</dd>
<dt><code class="docutils literal notranslate"><span class="pre">scan_timestamp</span></code></dt>
<dd>[INTERN] set if any buffers have requested timestamp</dd>
<dt><code class="docutils literal notranslate"><span class="pre">scan_index_timestamp</span></code></dt>
<dd>[INTERN] cache of the index to the timestamp</dd>
<dt><code class="docutils literal notranslate"><span class="pre">trig</span></code></dt>
<dd>[INTERN] current device trigger (buffer modes)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">trig_readonly</span></code></dt>
<dd>[INTERN] mark the current trigger immutable</dd>
<dt><code class="docutils literal notranslate"><span class="pre">pollfunc</span></code></dt>
<dd>[DRIVER] function run on trigger being received</dd>
<dt><code class="docutils literal notranslate"><span class="pre">pollfunc_event</span></code></dt>
<dd>[DRIVER] function run on events trigger being received</dd>
<dt><code class="docutils literal notranslate"><span class="pre">channels</span></code></dt>
<dd>[DRIVER] channel specification structure table</dd>
<dt><code class="docutils literal notranslate"><span class="pre">num_channels</span></code></dt>
<dd>[DRIVER] number of channels specified in <strong>channels</strong>.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">channel_attr_list</span></code></dt>
<dd>[INTERN] keep track of automatically created channel
attributes</dd>
<dt><code class="docutils literal notranslate"><span class="pre">chan_attr_group</span></code></dt>
<dd>[INTERN] group for all attrs in base directory</dd>
<dt><code class="docutils literal notranslate"><span class="pre">name</span></code></dt>
<dd>[DRIVER] name of the device.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">info</span></code></dt>
<dd>[DRIVER] callbacks and constant info from driver</dd>
<dt><code class="docutils literal notranslate"><span class="pre">clock_id</span></code></dt>
<dd>[INTERN] timestamping clock posix identifier</dd>
<dt><code class="docutils literal notranslate"><span class="pre">info_exist_lock</span></code></dt>
<dd>[INTERN] lock to prevent use during removal</dd>
<dt><code class="docutils literal notranslate"><span class="pre">setup_ops</span></code></dt>
<dd>[DRIVER] callbacks to call before and after buffer
enable/disable</dd>
<dt><code class="docutils literal notranslate"><span class="pre">chrdev</span></code></dt>
<dd>[INTERN] associated character device</dd>
<dt><code class="docutils literal notranslate"><span class="pre">groups</span></code></dt>
<dd>[INTERN] attribute groups</dd>
<dt><code class="docutils literal notranslate"><span class="pre">groupcounter</span></code></dt>
<dd>[INTERN] index of next attribute group</dd>
<dt><code class="docutils literal notranslate"><span class="pre">flags</span></code></dt>
<dd>[INTERN] file ops related flags including busy flag.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">debugfs_dentry</span></code></dt>
<dd>[INTERN] device specific debugfs dentry.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">cached_reg_addr</span></code></dt>
<dd>[INTERN] cached register address for debugfs reads.</dd>
</dl>
<dl class="function">
<dt id="c.iio_device_register">
<code class="descname">iio_device_register</code><span class="sig-paren">(</span><em>indio_dev</em><span class="sig-paren">)</span><a class="headerlink" href="#c.iio_device_register" title="Permalink to this definition">¶</a></dt>
<dd><p>register a device with the IIO subsystem</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">indio_dev</span></code></dt>
<dd>Device structure filled by the device driver</dd>
</dl>
<dl class="function">
<dt id="c.devm_iio_device_register">
<code class="descname">devm_iio_device_register</code><span class="sig-paren">(</span><em>dev</em>, <em>indio_dev</em><span class="sig-paren">)</span><a class="headerlink" href="#c.devm_iio_device_register" title="Permalink to this definition">¶</a></dt>
<dd><p>Resource-managed <a class="reference internal" href="#c.iio_device_register" title="iio_device_register"><code class="xref c c-func docutils literal notranslate"><span class="pre">iio_device_register()</span></code></a></p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">dev</span></code></dt>
<dd>Device to allocate iio_dev for</dd>
<dt><code class="docutils literal notranslate"><span class="pre">indio_dev</span></code></dt>
<dd>Device structure filled by the device driver</dd>
</dl>
<p><strong>Description</strong></p>
<p>Managed iio_device_register.  The IIO device registered with this
function is automatically unregistered on driver detach. This function
calls <a class="reference internal" href="#c.iio_device_register" title="iio_device_register"><code class="xref c c-func docutils literal notranslate"><span class="pre">iio_device_register()</span></code></a> internally. Refer to that function for more
information.</p>
<p>If an iio_dev registered with this function needs to be unregistered
separately, <a class="reference internal" href="#c.devm_iio_device_unregister" title="devm_iio_device_unregister"><code class="xref c c-func docutils literal notranslate"><span class="pre">devm_iio_device_unregister()</span></code></a> must be used.</p>
<p><strong>Return</strong></p>
<p>0 on success, negative error number on failure.</p>
<dl class="function">
<dt id="c.iio_device_put">
void <code class="descname">iio_device_put</code><span class="sig-paren">(</span>struct <a class="reference internal" href="#c.iio_dev" title="iio_dev">iio_dev</a> *<em>&nbsp;indio_dev</em><span class="sig-paren">)</span><a class="headerlink" href="#c.iio_device_put" title="Permalink to this definition">¶</a></dt>
<dd><p>reference counted deallocation of struct device</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">iio_dev</span> <span class="pre">*</span> <span class="pre">indio_dev</span></code></dt>
<dd>IIO device structure containing the device</dd>
</dl>
<dl class="function">
<dt id="c.iio_device_get_clock">
clockid_t <code class="descname">iio_device_get_clock</code><span class="sig-paren">(</span>const struct <a class="reference internal" href="#c.iio_dev" title="iio_dev">iio_dev</a> *<em>&nbsp;indio_dev</em><span class="sig-paren">)</span><a class="headerlink" href="#c.iio_device_get_clock" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve current timestamping clock for the device</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">const</span> <span class="pre">struct</span> <span class="pre">iio_dev</span> <span class="pre">*</span> <span class="pre">indio_dev</span></code></dt>
<dd>IIO device structure containing the device</dd>
</dl>
<dl class="function">
<dt id="c.dev_to_iio_dev">
struct <a class="reference internal" href="#c.iio_dev" title="iio_dev">iio_dev</a> * <code class="descname">dev_to_iio_dev</code><span class="sig-paren">(</span>struct <a class="reference internal" href="../infrastructure.html#c.device" title="device">device</a> *<em>&nbsp;dev</em><span class="sig-paren">)</span><a class="headerlink" href="#c.dev_to_iio_dev" title="Permalink to this definition">¶</a></dt>
<dd><p>Get IIO device struct from a device struct</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">device</span> <span class="pre">*</span> <span class="pre">dev</span></code></dt>
<dd>The device embedded in the IIO device</dd>
</dl>
<p><strong>Note</strong></p>
<p>The device must be a IIO device, otherwise the result is undefined.</p>
<dl class="function">
<dt id="c.iio_device_get">
struct <a class="reference internal" href="#c.iio_dev" title="iio_dev">iio_dev</a> * <code class="descname">iio_device_get</code><span class="sig-paren">(</span>struct <a class="reference internal" href="#c.iio_dev" title="iio_dev">iio_dev</a> *<em>&nbsp;indio_dev</em><span class="sig-paren">)</span><a class="headerlink" href="#c.iio_device_get" title="Permalink to this definition">¶</a></dt>
<dd><p>increment reference count for the device</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">iio_dev</span> <span class="pre">*</span> <span class="pre">indio_dev</span></code></dt>
<dd>IIO device structure</dd>
</dl>
<p><strong>Return</strong></p>
<p>The passed IIO device</p>
<dl class="function">
<dt id="c.iio_device_set_drvdata">
void <code class="descname">iio_device_set_drvdata</code><span class="sig-paren">(</span>struct <a class="reference internal" href="#c.iio_dev" title="iio_dev">iio_dev</a> *<em>&nbsp;indio_dev</em>, void *<em>&nbsp;data</em><span class="sig-paren">)</span><a class="headerlink" href="#c.iio_device_set_drvdata" title="Permalink to this definition">¶</a></dt>
<dd><p>Set device driver data</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">iio_dev</span> <span class="pre">*</span> <span class="pre">indio_dev</span></code></dt>
<dd>IIO device structure</dd>
<dt><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">*</span> <span class="pre">data</span></code></dt>
<dd>Driver specific data</dd>
</dl>
<p><strong>Description</strong></p>
<p>Allows to attach an arbitrary pointer to an IIO device, which can later be
retrieved by <a class="reference internal" href="#c.iio_device_get_drvdata" title="iio_device_get_drvdata"><code class="xref c c-func docutils literal notranslate"><span class="pre">iio_device_get_drvdata()</span></code></a>.</p>
<dl class="function">
<dt id="c.iio_device_get_drvdata">
void * <code class="descname">iio_device_get_drvdata</code><span class="sig-paren">(</span>struct <a class="reference internal" href="#c.iio_dev" title="iio_dev">iio_dev</a> *<em>&nbsp;indio_dev</em><span class="sig-paren">)</span><a class="headerlink" href="#c.iio_device_get_drvdata" title="Permalink to this definition">¶</a></dt>
<dd><p>Get device driver data</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">iio_dev</span> <span class="pre">*</span> <span class="pre">indio_dev</span></code></dt>
<dd>IIO device structure</dd>
</dl>
<p><strong>Description</strong></p>
<p>Returns the data previously set with <a class="reference internal" href="#c.iio_device_set_drvdata" title="iio_device_set_drvdata"><code class="xref c c-func docutils literal notranslate"><span class="pre">iio_device_set_drvdata()</span></code></a></p>
<dl class="function">
<dt id="c.iio_buffer_enabled">
bool <code class="descname">iio_buffer_enabled</code><span class="sig-paren">(</span>struct <a class="reference internal" href="#c.iio_dev" title="iio_dev">iio_dev</a> *<em>&nbsp;indio_dev</em><span class="sig-paren">)</span><a class="headerlink" href="#c.iio_buffer_enabled" title="Permalink to this definition">¶</a></dt>
<dd><p>helper function to test if the buffer is enabled</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">iio_dev</span> <span class="pre">*</span> <span class="pre">indio_dev</span></code></dt>
<dd>IIO device structure for device</dd>
</dl>
<dl class="function">
<dt id="c.iio_get_debugfs_dentry">
struct dentry * <code class="descname">iio_get_debugfs_dentry</code><span class="sig-paren">(</span>struct <a class="reference internal" href="#c.iio_dev" title="iio_dev">iio_dev</a> *<em>&nbsp;indio_dev</em><span class="sig-paren">)</span><a class="headerlink" href="#c.iio_get_debugfs_dentry" title="Permalink to this definition">¶</a></dt>
<dd><p>helper function to get the debugfs_dentry</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">iio_dev</span> <span class="pre">*</span> <span class="pre">indio_dev</span></code></dt>
<dd>IIO device structure for device</dd>
</dl>
<dl class="function">
<dt id="c.IIO_DEGREE_TO_RAD">
<code class="descname">IIO_DEGREE_TO_RAD</code><span class="sig-paren">(</span><em>deg</em><span class="sig-paren">)</span><a class="headerlink" href="#c.IIO_DEGREE_TO_RAD" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert degree to rad</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">deg</span></code></dt>
<dd>A value in degree</dd>
</dl>
<p><strong>Description</strong></p>
<p>Returns the given value converted from degree to rad</p>
<dl class="function">
<dt id="c.IIO_RAD_TO_DEGREE">
<code class="descname">IIO_RAD_TO_DEGREE</code><span class="sig-paren">(</span><em>rad</em><span class="sig-paren">)</span><a class="headerlink" href="#c.IIO_RAD_TO_DEGREE" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert rad to degree</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">rad</span></code></dt>
<dd>A value in rad</dd>
</dl>
<p><strong>Description</strong></p>
<p>Returns the given value converted from rad to degree</p>
<dl class="function">
<dt id="c.IIO_G_TO_M_S_2">
<code class="descname">IIO_G_TO_M_S_2</code><span class="sig-paren">(</span><em>g</em><span class="sig-paren">)</span><a class="headerlink" href="#c.IIO_G_TO_M_S_2" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert g to meter / second**2</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">g</span></code></dt>
<dd>A value in g</dd>
</dl>
<p><strong>Description</strong></p>
<p>Returns the given value converted from g to meter / second**2</p>
<dl class="function">
<dt id="c.IIO_M_S_2_TO_G">
<code class="descname">IIO_M_S_2_TO_G</code><span class="sig-paren">(</span><em>ms2</em><span class="sig-paren">)</span><a class="headerlink" href="#c.IIO_M_S_2_TO_G" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert meter / second**2 to g</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">ms2</span></code></dt>
<dd>A value in meter / second**2</dd>
</dl>
<p><strong>Description</strong></p>
<p>Returns the given value converted from meter / second**2 to g</p>
<dl class="function">
<dt id="c.iio_get_time_ns">
s64 <code class="descname">iio_get_time_ns</code><span class="sig-paren">(</span>const struct <a class="reference internal" href="#c.iio_dev" title="iio_dev">iio_dev</a> *<em>&nbsp;indio_dev</em><span class="sig-paren">)</span><a class="headerlink" href="#c.iio_get_time_ns" title="Permalink to this definition">¶</a></dt>
<dd><p>utility function to get a time stamp for events etc</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">const</span> <span class="pre">struct</span> <span class="pre">iio_dev</span> <span class="pre">*</span> <span class="pre">indio_dev</span></code></dt>
<dd>device</dd>
</dl>
<dl class="function">
<dt id="c.iio_get_time_res">
unsigned int <code class="descname">iio_get_time_res</code><span class="sig-paren">(</span>const struct <a class="reference internal" href="#c.iio_dev" title="iio_dev">iio_dev</a> *<em>&nbsp;indio_dev</em><span class="sig-paren">)</span><a class="headerlink" href="#c.iio_get_time_res" title="Permalink to this definition">¶</a></dt>
<dd><p>utility function to get time stamp clock resolution in nano seconds.</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">const</span> <span class="pre">struct</span> <span class="pre">iio_dev</span> <span class="pre">*</span> <span class="pre">indio_dev</span></code></dt>
<dd>device</dd>
</dl>
<dl class="function">
<dt id="c.iio_read_mount_matrix">
int <code class="descname">iio_read_mount_matrix</code><span class="sig-paren">(</span>struct <a class="reference internal" href="../infrastructure.html#c.device" title="device">device</a> *<em>&nbsp;dev</em>, const char *<em>&nbsp;propname</em>, struct <a class="reference internal" href="#c.iio_mount_matrix" title="iio_mount_matrix">iio_mount_matrix</a> *<em>&nbsp;matrix</em><span class="sig-paren">)</span><a class="headerlink" href="#c.iio_read_mount_matrix" title="Permalink to this definition">¶</a></dt>
<dd><p>retrieve iio device mounting matrix from device “mount-matrix” property</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">device</span> <span class="pre">*</span> <span class="pre">dev</span></code></dt>
<dd>device the mounting matrix property is assigned to</dd>
<dt><code class="docutils literal notranslate"><span class="pre">const</span> <span class="pre">char</span> <span class="pre">*</span> <span class="pre">propname</span></code></dt>
<dd>device specific mounting matrix property name</dd>
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">iio_mount_matrix</span> <span class="pre">*</span> <span class="pre">matrix</span></code></dt>
<dd>where to store retrieved matrix</dd>
</dl>
<p><strong>Description</strong></p>
<p>If device is assigned no mounting matrix property, a default 3x3 identity
matrix will be filled in.</p>
<p><strong>Return</strong></p>
<p>0 if success, or a negative error code on failure.</p>
<dl class="function">
<dt id="c.iio_format_value">
ssize_t <code class="descname">iio_format_value</code><span class="sig-paren">(</span>char *<em>&nbsp;buf</em>, unsigned int<em>&nbsp;type</em>, int<em>&nbsp;size</em>, int *<em>&nbsp;vals</em><span class="sig-paren">)</span><a class="headerlink" href="#c.iio_format_value" title="Permalink to this definition">¶</a></dt>
<dd><p>Formats a IIO value into its string representation</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">char</span> <span class="pre">*</span> <span class="pre">buf</span></code></dt>
<dd>The buffer to which the formatted value gets written
which is assumed to be big enough (i.e. PAGE_SIZE).</dd>
<dt><code class="docutils literal notranslate"><span class="pre">unsigned</span> <span class="pre">int</span> <span class="pre">type</span></code></dt>
<dd>One of the IIO_VAL_* constants. This decides how the val
and val2 parameters are formatted.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">size</span></code></dt>
<dd>Number of IIO value entries contained in vals</dd>
<dt><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">*</span> <span class="pre">vals</span></code></dt>
<dd>Pointer to the values, exact meaning depends on the
type parameter.</dd>
</dl>
<p><strong>Return</strong></p>
<dl class="docutils">
<dt>0 by default, a negative number on failure or the</dt>
<dd>total number of characters written for a type that belongs
to the IIO_VAL_* constant.</dd>
</dl>
<dl class="function">
<dt id="c.iio_str_to_fixpoint">
int <code class="descname">iio_str_to_fixpoint</code><span class="sig-paren">(</span>const char *<em>&nbsp;str</em>, int<em>&nbsp;fract_mult</em>, int *<em>&nbsp;integer</em>, int *<em>&nbsp;fract</em><span class="sig-paren">)</span><a class="headerlink" href="#c.iio_str_to_fixpoint" title="Permalink to this definition">¶</a></dt>
<dd><p>Parse a fixed-point number from a string</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">const</span> <span class="pre">char</span> <span class="pre">*</span> <span class="pre">str</span></code></dt>
<dd>The string to parse</dd>
<dt><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">fract_mult</span></code></dt>
<dd>Multiplier for the first decimal place, should be a power of 10</dd>
<dt><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">*</span> <span class="pre">integer</span></code></dt>
<dd>The integer part of the number</dd>
<dt><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">*</span> <span class="pre">fract</span></code></dt>
<dd>The fractional part of the number</dd>
</dl>
<p><strong>Description</strong></p>
<p>Returns 0 on success, or a negative error code if the string could not be
parsed.</p>
<dl class="function">
<dt id="c.iio_device_alloc">
struct <a class="reference internal" href="#c.iio_dev" title="iio_dev">iio_dev</a> * <code class="descname">iio_device_alloc</code><span class="sig-paren">(</span>int<em>&nbsp;sizeof_priv</em><span class="sig-paren">)</span><a class="headerlink" href="#c.iio_device_alloc" title="Permalink to this definition">¶</a></dt>
<dd><p>allocate an iio_dev from a driver</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">sizeof_priv</span></code></dt>
<dd>Space to allocate for private structure.</dd>
</dl>
<dl class="function">
<dt id="c.iio_device_free">
void <code class="descname">iio_device_free</code><span class="sig-paren">(</span>struct <a class="reference internal" href="#c.iio_dev" title="iio_dev">iio_dev</a> *<em>&nbsp;dev</em><span class="sig-paren">)</span><a class="headerlink" href="#c.iio_device_free" title="Permalink to this definition">¶</a></dt>
<dd><p>free an iio_dev from a driver</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">iio_dev</span> <span class="pre">*</span> <span class="pre">dev</span></code></dt>
<dd>the iio_dev associated with the device</dd>
</dl>
<dl class="function">
<dt id="c.devm_iio_device_alloc">
struct <a class="reference internal" href="#c.iio_dev" title="iio_dev">iio_dev</a> * <code class="descname">devm_iio_device_alloc</code><span class="sig-paren">(</span>struct <a class="reference internal" href="../infrastructure.html#c.device" title="device">device</a> *<em>&nbsp;dev</em>, int<em>&nbsp;sizeof_priv</em><span class="sig-paren">)</span><a class="headerlink" href="#c.devm_iio_device_alloc" title="Permalink to this definition">¶</a></dt>
<dd><p>Resource-managed <a class="reference internal" href="#c.iio_device_alloc" title="iio_device_alloc"><code class="xref c c-func docutils literal notranslate"><span class="pre">iio_device_alloc()</span></code></a></p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">device</span> <span class="pre">*</span> <span class="pre">dev</span></code></dt>
<dd>Device to allocate iio_dev for</dd>
<dt><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">sizeof_priv</span></code></dt>
<dd>Space to allocate for private structure.</dd>
</dl>
<p><strong>Description</strong></p>
<p>Managed iio_device_alloc. iio_dev allocated with this function is
automatically freed on driver detach.</p>
<p>If an iio_dev allocated with this function needs to be freed separately,
<a class="reference internal" href="#c.devm_iio_device_free" title="devm_iio_device_free"><code class="xref c c-func docutils literal notranslate"><span class="pre">devm_iio_device_free()</span></code></a> must be used.</p>
<p><strong>Return</strong></p>
<p>Pointer to allocated iio_dev on success, NULL on failure.</p>
<dl class="function">
<dt id="c.devm_iio_device_free">
void <code class="descname">devm_iio_device_free</code><span class="sig-paren">(</span>struct <a class="reference internal" href="../infrastructure.html#c.device" title="device">device</a> *<em>&nbsp;dev</em>, struct <a class="reference internal" href="#c.iio_dev" title="iio_dev">iio_dev</a> *<em>&nbsp;iio_dev</em><span class="sig-paren">)</span><a class="headerlink" href="#c.devm_iio_device_free" title="Permalink to this definition">¶</a></dt>
<dd><p>Resource-managed <a class="reference internal" href="#c.iio_device_free" title="iio_device_free"><code class="xref c c-func docutils literal notranslate"><span class="pre">iio_device_free()</span></code></a></p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">device</span> <span class="pre">*</span> <span class="pre">dev</span></code></dt>
<dd>Device this iio_dev belongs to</dd>
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">iio_dev</span> <span class="pre">*</span> <span class="pre">iio_dev</span></code></dt>
<dd>the iio_dev associated with the device</dd>
</dl>
<p><strong>Description</strong></p>
<p>Free iio_dev allocated with <a class="reference internal" href="#c.devm_iio_device_alloc" title="devm_iio_device_alloc"><code class="xref c c-func docutils literal notranslate"><span class="pre">devm_iio_device_alloc()</span></code></a>.</p>
<dl class="function">
<dt id="c.iio_device_unregister">
void <code class="descname">iio_device_unregister</code><span class="sig-paren">(</span>struct <a class="reference internal" href="#c.iio_dev" title="iio_dev">iio_dev</a> *<em>&nbsp;indio_dev</em><span class="sig-paren">)</span><a class="headerlink" href="#c.iio_device_unregister" title="Permalink to this definition">¶</a></dt>
<dd><p>unregister a device from the IIO subsystem</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">iio_dev</span> <span class="pre">*</span> <span class="pre">indio_dev</span></code></dt>
<dd>Device structure representing the device.</dd>
</dl>
<dl class="function">
<dt id="c.devm_iio_device_unregister">
void <code class="descname">devm_iio_device_unregister</code><span class="sig-paren">(</span>struct <a class="reference internal" href="../infrastructure.html#c.device" title="device">device</a> *<em>&nbsp;dev</em>, struct <a class="reference internal" href="#c.iio_dev" title="iio_dev">iio_dev</a> *<em>&nbsp;indio_dev</em><span class="sig-paren">)</span><a class="headerlink" href="#c.devm_iio_device_unregister" title="Permalink to this definition">¶</a></dt>
<dd><p>Resource-managed <a class="reference internal" href="#c.iio_device_unregister" title="iio_device_unregister"><code class="xref c c-func docutils literal notranslate"><span class="pre">iio_device_unregister()</span></code></a></p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">device</span> <span class="pre">*</span> <span class="pre">dev</span></code></dt>
<dd>Device this iio_dev belongs to</dd>
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">iio_dev</span> <span class="pre">*</span> <span class="pre">indio_dev</span></code></dt>
<dd>the iio_dev associated with the device</dd>
</dl>
<p><strong>Description</strong></p>
<p>Unregister iio_dev registered with <a class="reference internal" href="#c.devm_iio_device_register" title="devm_iio_device_register"><code class="xref c c-func docutils literal notranslate"><span class="pre">devm_iio_device_register()</span></code></a>.</p>
<dl class="function">
<dt id="c.iio_device_claim_direct_mode">
int <code class="descname">iio_device_claim_direct_mode</code><span class="sig-paren">(</span>struct <a class="reference internal" href="#c.iio_dev" title="iio_dev">iio_dev</a> *<em>&nbsp;indio_dev</em><span class="sig-paren">)</span><a class="headerlink" href="#c.iio_device_claim_direct_mode" title="Permalink to this definition">¶</a></dt>
<dd><p>Keep device in direct mode</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">iio_dev</span> <span class="pre">*</span> <span class="pre">indio_dev</span></code></dt>
<dd>the iio_dev associated with the device</dd>
</dl>
<p><strong>Description</strong></p>
<p>If the device is in direct mode it is guaranteed to stay
that way until <a class="reference internal" href="#c.iio_device_release_direct_mode" title="iio_device_release_direct_mode"><code class="xref c c-func docutils literal notranslate"><span class="pre">iio_device_release_direct_mode()</span></code></a> is called.</p>
<p>Use with <a class="reference internal" href="#c.iio_device_release_direct_mode" title="iio_device_release_direct_mode"><code class="xref c c-func docutils literal notranslate"><span class="pre">iio_device_release_direct_mode()</span></code></a></p>
<p><strong>Return</strong></p>
<p>0 on success, -EBUSY on failure</p>
<dl class="function">
<dt id="c.iio_device_release_direct_mode">
void <code class="descname">iio_device_release_direct_mode</code><span class="sig-paren">(</span>struct <a class="reference internal" href="#c.iio_dev" title="iio_dev">iio_dev</a> *<em>&nbsp;indio_dev</em><span class="sig-paren">)</span><a class="headerlink" href="#c.iio_device_release_direct_mode" title="Permalink to this definition">¶</a></dt>
<dd><p>releases claim on direct mode</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">iio_dev</span> <span class="pre">*</span> <span class="pre">indio_dev</span></code></dt>
<dd>the iio_dev associated with the device</dd>
</dl>
<p><strong>Description</strong></p>
<p>Release the claim. Device is no longer guaranteed to stay
in direct mode.</p>
<p>Use with <a class="reference internal" href="#c.iio_device_claim_direct_mode" title="iio_device_claim_direct_mode"><code class="xref c c-func docutils literal notranslate"><span class="pre">iio_device_claim_direct_mode()</span></code></a></p>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="buffers.html" class="btn btn-neutral float-right" title="Buffers" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="intro.html" class="btn btn-neutral float-left" title="Introduction" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright The kernel development community

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>