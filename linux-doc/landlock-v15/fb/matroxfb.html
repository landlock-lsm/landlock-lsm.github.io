

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>What is matroxfb? &mdash; The Linux Kernel 5.6.0-rc7+ documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/theme_overrides.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Metronomefb" href="metronomefb.html" />
    <link rel="prev" title="What is lxfb?" href="lxfb.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> The Linux Kernel
          

          
          </a>

          
            
            
              <div class="version">
                5.6.0-rc7
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../admin-guide/index.html">The Linux kernel user’s and administrator’s guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../kbuild/index.html">Kernel Build System</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../firmware-guide/index.html">The Linux kernel firmware guide</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../userspace-api/index.html">The Linux kernel user-space API guide</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../process/index.html">Working with the kernel development community</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dev-tools/index.html">Development tools for the kernel</a></li>
<li class="toctree-l1"><a class="reference internal" href="../doc-guide/index.html">How to write kernel documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../kernel-hacking/index.html">Kernel Hacking Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../trace/index.html">Linux Tracing Technologies</a></li>
<li class="toctree-l1"><a class="reference internal" href="../maintainer/index.html">Kernel Maintainer Handbook</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fault-injection/index.html">fault-injection</a></li>
<li class="toctree-l1"><a class="reference internal" href="../livepatch/index.html">Kernel Livepatching</a></li>
</ul>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../driver-api/index.html">The Linux driver implementer’s API guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../core-api/index.html">Core API Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../locking/index.html">locking</a></li>
<li class="toctree-l1"><a class="reference internal" href="../accounting/index.html">Accounting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../block/index.html">Block</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cdrom/index.html">cdrom</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ide/index.html">Integrated Drive Electronics (IDE)</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Frame Buffer</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="api.html">The Frame Buffer Device API</a></li>
<li class="toctree-l2"><a class="reference internal" href="arkfb.html">arkfb - fbdev driver for ARK Logic chips</a></li>
<li class="toctree-l2"><a class="reference internal" href="aty128fb.html">What is aty128fb?</a></li>
<li class="toctree-l2"><a class="reference internal" href="cirrusfb.html">Framebuffer driver for Cirrus Logic chipsets</a></li>
<li class="toctree-l2"><a class="reference internal" href="cmap_xfbdev.html">Understanding fbdev’s cmap</a></li>
<li class="toctree-l2"><a class="reference internal" href="deferred_io.html">Deferred IO</a></li>
<li class="toctree-l2"><a class="reference internal" href="efifb.html">What is efifb?</a></li>
<li class="toctree-l2"><a class="reference internal" href="ep93xx-fb.html">Driver for EP93xx LCD controller</a></li>
<li class="toctree-l2"><a class="reference internal" href="ep93xx-fb.html#video-attribute-flags">Video Attribute Flags</a></li>
<li class="toctree-l2"><a class="reference internal" href="ep93xx-fb.html#platform-callbacks">Platform callbacks</a></li>
<li class="toctree-l2"><a class="reference internal" href="ep93xx-fb.html#setting-the-video-mode">Setting the video mode</a></li>
<li class="toctree-l2"><a class="reference internal" href="ep93xx-fb.html#screenpage-bug">Screenpage bug</a></li>
<li class="toctree-l2"><a class="reference internal" href="fbcon.html">The Framebuffer Console</a></li>
<li class="toctree-l2"><a class="reference internal" href="framebuffer.html">The Frame Buffer Device</a></li>
<li class="toctree-l2"><a class="reference internal" href="gxfb.html">What is gxfb?</a></li>
<li class="toctree-l2"><a class="reference internal" href="intel810.html">Intel 810/815 Framebuffer driver</a></li>
<li class="toctree-l2"><a class="reference internal" href="intelfb.html">Intel 830M/845G/852GM/855GM/865G/915G/945G Framebuffer driver</a></li>
<li class="toctree-l2"><a class="reference internal" href="internals.html">Frame Buffer device internals</a></li>
<li class="toctree-l2"><a class="reference internal" href="lxfb.html">What is lxfb?</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">What is matroxfb?</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#how-to-use-it">How to use it?</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#graphic-modes">Graphic modes</a></li>
<li class="toctree-l4"><a class="reference internal" href="#graphic-modes-continued">Graphic modes (continued)</a></li>
<li class="toctree-l4"><a class="reference internal" href="#text-modes">Text modes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#x11">X11</a></li>
<li class="toctree-l3"><a class="reference internal" href="#svgalib">SVGALib</a></li>
<li class="toctree-l3"><a class="reference internal" href="#configuration">Configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="#limitations">Limitations</a></li>
<li class="toctree-l3"><a class="reference internal" href="#benchmarks">Benchmarks</a></li>
<li class="toctree-l3"><a class="reference internal" href="#dualhead-g400">Dualhead G400</a></li>
<li class="toctree-l3"><a class="reference internal" href="#dualhead-g450">Dualhead G450</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="metronomefb.html">Metronomefb</a></li>
<li class="toctree-l2"><a class="reference internal" href="modedb.html">modedb default video mode support</a></li>
<li class="toctree-l2"><a class="reference internal" href="pvr2fb.html">What is pvr2fb?</a></li>
<li class="toctree-l2"><a class="reference internal" href="pxafb.html">Driver for PXA25x LCD controller</a></li>
<li class="toctree-l2"><a class="reference internal" href="s3fb.html">s3fb - fbdev driver for S3 Trio/Virge chips</a></li>
<li class="toctree-l2"><a class="reference internal" href="sa1100fb.html">What is sa1100fb?</a></li>
<li class="toctree-l2"><a class="reference internal" href="sh7760fb.html">SH7760/SH7763 integrated LCDC Framebuffer driver</a></li>
<li class="toctree-l2"><a class="reference internal" href="sisfb.html">What is sisfb?</a></li>
<li class="toctree-l2"><a class="reference internal" href="sm501.html">sm501fb</a></li>
<li class="toctree-l2"><a class="reference internal" href="sm712fb.html">What is sm712fb?</a></li>
<li class="toctree-l2"><a class="reference internal" href="sstfb.html">sstfb</a></li>
<li class="toctree-l2"><a class="reference internal" href="tgafb.html">What is tgafb?</a></li>
<li class="toctree-l2"><a class="reference internal" href="tridentfb.html">Tridentfb</a></li>
<li class="toctree-l2"><a class="reference internal" href="udlfb.html">What is udlfb?</a></li>
<li class="toctree-l2"><a class="reference internal" href="uvesafb.html">uvesafb - A Generic Driver for VBE2+ compliant video cards</a></li>
<li class="toctree-l2"><a class="reference internal" href="vesafb.html">What is vesafb?</a></li>
<li class="toctree-l2"><a class="reference internal" href="viafb.html">VIA Integration Graphic Chip Console Framebuffer Driver</a></li>
<li class="toctree-l2"><a class="reference internal" href="vt8623fb.html">vt8623fb - fbdev driver for graphics core in VIA VT8623 chipset</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../fpga/index.html">fpga</a></li>
<li class="toctree-l1"><a class="reference internal" href="../hid/index.html">Human Interface Devices (HID)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../i2c/index.html">I2C/SMBus Subsystem</a></li>
<li class="toctree-l1"><a class="reference internal" href="../iio/index.html">Industrial I/O</a></li>
<li class="toctree-l1"><a class="reference internal" href="../isdn/index.html">ISDN</a></li>
<li class="toctree-l1"><a class="reference internal" href="../infiniband/index.html">InfiniBand</a></li>
<li class="toctree-l1"><a class="reference internal" href="../leds/index.html">LEDs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../media/index.html">Linux Media Subsystem Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../netlabel/index.html">NetLabel</a></li>
<li class="toctree-l1"><a class="reference internal" href="../networking/index.html">Linux Networking Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pcmcia/index.html">pcmcia</a></li>
<li class="toctree-l1"><a class="reference internal" href="../power/index.html">Power Management</a></li>
<li class="toctree-l1"><a class="reference internal" href="../target/index.html">TCM Virtual Device</a></li>
<li class="toctree-l1"><a class="reference internal" href="../timers/index.html">timers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../spi/index.html">Serial Peripheral Interface (SPI)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../w1/index.html">1-Wire Subsystem</a></li>
<li class="toctree-l1"><a class="reference internal" href="../watchdog/index.html">Linux Watchdog Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../virt/index.html">Linux Virtualization Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../input/index.html">The Linux Input Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../hwmon/index.html">Linux Hardware Monitoring</a></li>
<li class="toctree-l1"><a class="reference internal" href="../gpu/index.html">Linux GPU Driver Developer’s Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../security/index.html">Security Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../sound/index.html">Linux Sound Subsystem Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../crypto/index.html">Linux Kernel Crypto API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../filesystems/index.html">Filesystems in the Linux kernel</a></li>
<li class="toctree-l1"><a class="reference internal" href="../vm/index.html">Linux Memory Management Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../bpf/index.html">BPF Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../usb/index.html">USB support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../PCI/index.html">Linux PCI Bus Subsystem</a></li>
<li class="toctree-l1"><a class="reference internal" href="../misc-devices/index.html">Assorted Miscellaneous Devices Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mic/index.html">Intel Many Integrated Core (MIC) architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../scheduler/index.html">Linux Scheduler</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../asm-annotations.html">Assembler Annotations</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../arm/index.html">ARM Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../arm64/index.html">ARM64 Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ia64/index.html">IA-64 Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../m68k/index.html">m68k Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mips/index.html">MIPS-specific Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../nios2/nios2.html">Linux on the Nios II architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../openrisc/index.html">OpenRISC Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../parisc/index.html">PA-RISC Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../powerpc/index.html">powerpc</a></li>
<li class="toctree-l1"><a class="reference internal" href="../riscv/index.html">RISC-V architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../s390/index.html">s390 Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../sh/index.html">SuperH Interfaces Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../sparc/index.html">Sparc Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../x86/index.html">x86-specific Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../xtensa/index.html">Xtensa Architecture</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../filesystems/ext4/index.html">ext4 Data Structures and Algorithms</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../translations/index.html">Translations</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">The Linux Kernel</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="index.html">Frame Buffer</a> &raquo;</li>
        
      <li>What is matroxfb?</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/fb/matroxfb.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="what-is-matroxfb">
<h1>What is matroxfb?<a class="headerlink" href="#what-is-matroxfb" title="Permalink to this headline">¶</a></h1>
<p>This is a driver for a graphic framebuffer for Matrox devices on
Alpha, Intel and PPC boxes.</p>
<p>Advantages:</p>
<blockquote>
<div><ul class="simple">
<li>It provides a nice large console (128 cols + 48 lines with 1024x768)
without using tiny, unreadable fonts.</li>
<li>You can run XF{68,86}_FBDev or XFree86 fbdev driver on top of /dev/fb0</li>
<li>Most important: boot logo :-)</li>
</ul>
</div></blockquote>
<p>Disadvantages:</p>
<blockquote>
<div><ul class="simple">
<li>graphic mode is slower than text mode… but you should not notice
if you use same resolution as you used in textmode.</li>
</ul>
</div></blockquote>
<div class="section" id="how-to-use-it">
<h2>How to use it?<a class="headerlink" href="#how-to-use-it" title="Permalink to this headline">¶</a></h2>
<p>Switching modes is done using the video=matroxfb:vesa:… boot parameter
or using <cite>fbset</cite> program.</p>
<p>If you want, for example, enable a resolution of 1280x1024x24bpp you should
pass to the kernel this command line: “video=matroxfb:vesa:0x1BB”.</p>
<p>You should compile in both vgacon (to boot if you remove you Matrox from
box) and matroxfb (for graphics mode). You should not compile-in vesafb
unless you have primary display on non-Matrox VBE2.0 device (see
Documentation/fb/vesafb.rst for details).</p>
<p>Currently supported video modes are (through vesa:… interface, PowerMac
has [as addon] compatibility code):</p>
<div class="section" id="graphic-modes">
<h3>Graphic modes<a class="headerlink" href="#graphic-modes" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="8%" />
<col width="18%" />
<col width="18%" />
<col width="18%" />
<col width="18%" />
<col width="18%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">bpp</th>
<th class="head">640x400</th>
<th class="head">640x480</th>
<th class="head">768x576</th>
<th class="head">800x600</th>
<th class="head">960x720</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>4</td>
<td>&#160;</td>
<td>0x12</td>
<td>&#160;</td>
<td>0x102</td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>8</td>
<td>0x100</td>
<td>0x101</td>
<td>0x180</td>
<td>0x103</td>
<td>0x188</td>
</tr>
<tr class="row-even"><td>15</td>
<td>&#160;</td>
<td>0x110</td>
<td>0x181</td>
<td>0x113</td>
<td>0x189</td>
</tr>
<tr class="row-odd"><td>16</td>
<td>&#160;</td>
<td>0x111</td>
<td>0x182</td>
<td>0x114</td>
<td>0x18A</td>
</tr>
<tr class="row-even"><td>24</td>
<td>&#160;</td>
<td>0x1B2</td>
<td>0x184</td>
<td>0x1B5</td>
<td>0x18C</td>
</tr>
<tr class="row-odd"><td>32</td>
<td>&#160;</td>
<td>0x112</td>
<td>0x183</td>
<td>0x115</td>
<td>0x18B</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="graphic-modes-continued">
<h3>Graphic modes (continued)<a class="headerlink" href="#graphic-modes-continued" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="7%" />
<col width="17%" />
<col width="17%" />
<col width="20%" />
<col width="20%" />
<col width="20%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">bpp</th>
<th class="head">1024x768</th>
<th class="head">1152x864</th>
<th class="head">1280x1024</th>
<th class="head">1408x1056</th>
<th class="head">1600x1200</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>4</td>
<td>0x104</td>
<td>&#160;</td>
<td>0x106</td>
<td>&#160;</td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>8</td>
<td>0x105</td>
<td>0x190</td>
<td>0x107</td>
<td>0x198</td>
<td>0x11C</td>
</tr>
<tr class="row-even"><td>15</td>
<td>0x116</td>
<td>0x191</td>
<td>0x119</td>
<td>0x199</td>
<td>0x11D</td>
</tr>
<tr class="row-odd"><td>16</td>
<td>0x117</td>
<td>0x192</td>
<td>0x11A</td>
<td>0x19A</td>
<td>0x11E</td>
</tr>
<tr class="row-even"><td>24</td>
<td>0x1B8</td>
<td>0x194</td>
<td>0x1BB</td>
<td>0x19C</td>
<td>0x1BF</td>
</tr>
<tr class="row-odd"><td>32</td>
<td>0x118</td>
<td>0x193</td>
<td>0x11B</td>
<td>0x19B</td>
<td>&#160;</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="text-modes">
<h3>Text modes<a class="headerlink" href="#text-modes" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="10%" />
<col width="17%" />
<col width="17%" />
<col width="19%" />
<col width="19%" />
<col width="19%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">text</th>
<th class="head">640x400</th>
<th class="head">640x480</th>
<th class="head">1056x344</th>
<th class="head">1056x400</th>
<th class="head">1056x480</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>8x8</td>
<td>0x1C0</td>
<td>0x108</td>
<td>0x10A</td>
<td>0x10B</td>
<td>0x10C</td>
</tr>
<tr class="row-odd"><td>8x16</td>
<td>2, 3, 7</td>
<td>&#160;</td>
<td>&#160;</td>
<td>0x109</td>
<td>&#160;</td>
</tr>
</tbody>
</table>
<p>You can enter these number either hexadecimal (leading <cite>0x</cite>) or decimal
(0x100 = 256). You can also use value + 512 to achieve compatibility
with your old number passed to vesafb.</p>
<p>Non-listed number can be achieved by more complicated command-line, for
example 1600x1200x32bpp can be specified by <cite>video=matroxfb:vesa:0x11C,depth:32</cite>.</p>
</div>
</div>
<div class="section" id="x11">
<h2>X11<a class="headerlink" href="#x11" title="Permalink to this headline">¶</a></h2>
<p>XF{68,86}_FBDev should work just fine, but it is non-accelerated. On non-intel
architectures there are some glitches for 24bpp videomodes. 8, 16 and 32bpp
works fine.</p>
<p>Running another (accelerated) X-Server like XF86_SVGA works too. But (at least)
XFree servers have big troubles in multihead configurations (even on first
head, not even talking about second). Running XFree86 4.x accelerated mga
driver is possible, but you must not enable DRI - if you do, resolution and
color depth of your X desktop must match resolution and color depths of your
virtual consoles, otherwise X will corrupt accelerator settings.</p>
</div>
<div class="section" id="svgalib">
<h2>SVGALib<a class="headerlink" href="#svgalib" title="Permalink to this headline">¶</a></h2>
<p>Driver contains SVGALib compatibility code. It is turned on by choosing textual
mode for console. You can do it at boot time by using videomode
2,3,7,0x108-0x10C or 0x1C0. At runtime, <cite>fbset -depth 0</cite> does this work.
Unfortunately, after SVGALib application exits, screen contents is corrupted.
Switching to another console and back fixes it. I hope that it is SVGALib’s
problem and not mine, but I’m not sure.</p>
</div>
<div class="section" id="configuration">
<h2>Configuration<a class="headerlink" href="#configuration" title="Permalink to this headline">¶</a></h2>
<p>You can pass kernel command line options to matroxfb with
<cite>video=matroxfb:option1,option2:value2,option3</cite> (multiple options should be
separated by comma, values are separated from options by <cite>:</cite>).
Accepted options:</p>
<table border="1" class="docutils">
<colgroup>
<col width="15%" />
<col width="85%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>mem:X</td>
<td>size of memory (X can be in megabytes, kilobytes or bytes)
You can only decrease value determined by driver because of
it always probe for memory. Default is to use whole detected
memory usable for on-screen display (i.e. max. 8 MB).</td>
</tr>
<tr class="row-even"><td>disabled</td>
<td>do not load driver; you can use also <cite>off</cite>, but <cite>disabled</cite>
is here too.</td>
</tr>
<tr class="row-odd"><td>enabled</td>
<td>load driver, if you have <cite>video=matroxfb:disabled</cite> in LILO
configuration, you can override it by this (you cannot override
<cite>off</cite>). It is default.</td>
</tr>
<tr class="row-even"><td>noaccel</td>
<td>do not use acceleration engine. It does not work on Alphas.</td>
</tr>
<tr class="row-odd"><td>accel</td>
<td>use acceleration engine. It is default.</td>
</tr>
<tr class="row-even"><td>nopan</td>
<td>create initial consoles with vyres = yres, thus disabling virtual
scrolling.</td>
</tr>
<tr class="row-odd"><td>pan</td>
<td>create initial consoles as tall as possible (vyres = memory/vxres).
It is default.</td>
</tr>
<tr class="row-even"><td>nopciretry</td>
<td>disable PCI retries. It is needed for some broken chipsets,
it is autodetected for intel’s 82437. In this case device does
not comply to PCI 2.1 specs (it will not guarantee that every
transaction terminate with success or retry in 32 PCLK).</td>
</tr>
<tr class="row-odd"><td>pciretry</td>
<td>enable PCI retries. It is default, except for intel’s 82437.</td>
</tr>
<tr class="row-even"><td>novga</td>
<td>disables VGA I/O ports. It is default if BIOS did not enable
device. You should not use this option, some boards then do not
restart without power off.</td>
</tr>
<tr class="row-odd"><td>vga</td>
<td>preserve state of VGA I/O ports. It is default. Driver does not
enable VGA I/O if BIOS did not it (it is not safe to enable it in
most cases).</td>
</tr>
<tr class="row-even"><td>nobios</td>
<td>disables BIOS ROM. It is default if BIOS did not enable BIOS
itself. You should not use this option, some boards then do not
restart without power off.</td>
</tr>
<tr class="row-odd"><td>bios</td>
<td>preserve state of BIOS ROM. It is default. Driver does not enable
BIOS if BIOS was not enabled before.</td>
</tr>
<tr class="row-even"><td>noinit</td>
<td>tells driver, that devices were already initialized. You should use
it if you have G100 and/or if driver cannot detect memory, you see
strange pattern on screen and so on. Devices not enabled by BIOS
are still initialized. It is default.</td>
</tr>
<tr class="row-odd"><td>init</td>
<td>driver initializes every device it knows about.</td>
</tr>
<tr class="row-even"><td>memtype</td>
<td><p class="first">specifies memory type, implies ‘init’. This is valid only for G200
and G400 and has following meaning:</p>
<blockquote>
<div><dl class="docutils">
<dt>G200:</dt>
<dd><ul class="first last simple">
<li>0 -&gt; 2x128Kx32 chips, 2MB onboard, probably sgram</li>
<li>1 -&gt; 2x128Kx32 chips, 4MB onboard, probably sgram</li>
<li>2 -&gt; 2x256Kx32 chips, 4MB onboard, probably sgram</li>
<li>3 -&gt; 2x256Kx32 chips, 8MB onboard, probably sgram</li>
<li>4 -&gt; 2x512Kx16 chips, 8/16MB onboard, probably sdram only</li>
<li>5 -&gt; same as above</li>
<li>6 -&gt; 4x128Kx32 chips, 4MB onboard, probably sgram</li>
<li>7 -&gt; 4x128Kx32 chips, 8MB onboard, probably sgram</li>
</ul>
</dd>
<dt>G400:</dt>
<dd><ul class="first last simple">
<li>0 -&gt; 2x512Kx16 SDRAM, 16/32MB</li>
<li>2x512Kx32 SGRAM, 16/32MB</li>
<li>1 -&gt; 2x256Kx32 SGRAM, 8/16MB</li>
<li>2 -&gt; 4x128Kx32 SGRAM, 8/16MB</li>
<li>3 -&gt; 4x512Kx32 SDRAM, 32MB</li>
<li>4 -&gt; 4x256Kx32 SGRAM, 16/32MB</li>
<li>5 -&gt; 2x1Mx32 SDRAM, 32MB</li>
<li>6 -&gt; reserved</li>
<li>7 -&gt; reserved</li>
</ul>
</dd>
</dl>
</div></blockquote>
<p class="last">You should use sdram or sgram parameter in addition to memtype
parameter.</p>
</td>
</tr>
<tr class="row-odd"><td>nomtrr</td>
<td>disables write combining on frame buffer. This slows down driver
but there is reported minor incompatibility between GUS DMA and
XFree under high loads if write combining is enabled (sound
dropouts).</td>
</tr>
<tr class="row-even"><td>mtrr</td>
<td>enables write combining on frame buffer. It speeds up video
accesses much. It is default. You must have MTRR support enabled
in kernel and your CPU must have MTRR (f.e. Pentium II have them).</td>
</tr>
<tr class="row-odd"><td>sgram</td>
<td>tells to driver that you have Gxx0 with SGRAM memory. It has no
effect without <cite>init</cite>.</td>
</tr>
<tr class="row-even"><td>sdram</td>
<td>tells to driver that you have Gxx0 with SDRAM memory.
It is a default.</td>
</tr>
<tr class="row-odd"><td>inv24</td>
<td>change timings parameters for 24bpp modes on Millennium and
Millennium II. Specify this if you see strange color shadows
around  characters.</td>
</tr>
<tr class="row-even"><td>noinv24</td>
<td>use standard timings. It is the default.</td>
</tr>
<tr class="row-odd"><td>inverse</td>
<td>invert colors on screen (for LCD displays)</td>
</tr>
<tr class="row-even"><td>noinverse</td>
<td>show true colors on screen. It is default.</td>
</tr>
<tr class="row-odd"><td>dev:X</td>
<td>bind driver to device X. Driver numbers device from 0 up to N,
where device 0 is first <cite>known</cite> device found, 1 second and so on.
lspci lists devices in this order.
Default is <cite>every</cite> known device.</td>
</tr>
<tr class="row-even"><td>nohwcursor</td>
<td>disables hardware cursor (use software cursor instead).</td>
</tr>
<tr class="row-odd"><td>hwcursor</td>
<td>enables hardware cursor. It is default. If you are using
non-accelerated mode (<cite>noaccel</cite> or <cite>fbset -accel false</cite>), software
cursor is used (except for text mode).</td>
</tr>
<tr class="row-even"><td>noblink</td>
<td>disables cursor blinking. Cursor in text mode always blinks (hw
limitation).</td>
</tr>
<tr class="row-odd"><td>blink</td>
<td>enables cursor blinking. It is default.</td>
</tr>
<tr class="row-even"><td>nofastfont</td>
<td>disables fastfont feature. It is default.</td>
</tr>
<tr class="row-odd"><td>fastfont:X</td>
<td>enables fastfont feature. X specifies size of memory reserved for
font data, it must be &gt;= (fontwidth*fontheight*chars_in_font)/8.
It is faster on Gx00 series, but slower on older cards.</td>
</tr>
<tr class="row-even"><td>grayscale</td>
<td>enable grayscale summing. It works in PSEUDOCOLOR modes (text,
4bpp, 8bpp). In DIRECTCOLOR modes it is limited to characters
displayed through putc/putcs. Direct accesses to framebuffer
can paint colors.</td>
</tr>
<tr class="row-odd"><td>nograyscale</td>
<td>disable grayscale summing. It is default.</td>
</tr>
<tr class="row-even"><td>cross4MB</td>
<td>enables that pixel line can cross 4MB boundary. It is default for
non-Millennium.</td>
</tr>
<tr class="row-odd"><td>nocross4MB</td>
<td>pixel line must not cross 4MB boundary. It is default for
Millennium I or II, because of these devices have hardware
limitations which do not allow this. But this option is
incompatible with some (if not all yet released) versions of
XF86_FBDev.</td>
</tr>
<tr class="row-even"><td>dfp</td>
<td>enables digital flat panel interface. This option is incompatible
with secondary (TV) output - if DFP is active, TV output must be
inactive and vice versa. DFP always uses same timing as primary
(monitor) output.</td>
</tr>
<tr class="row-odd"><td>dfp:X</td>
<td>use settings X for digital flat panel interface. X is number from
0 to 0xFF, and meaning of each individual bit is described in
G400 manual, in description of DAC register 0x1F. For normal
operation you should set all bits to zero, except lowest bit. This
lowest bit selects who is source of display clocks, whether G400,
or panel. Default value is now read back from hardware - so you
should specify this value only if you are also using <cite>init</cite>
parameter.</td>
</tr>
<tr class="row-even"><td>outputs:XYZ</td>
<td>set mapping between CRTC and outputs. Each letter can have value
of 0 (for no CRTC), 1 (CRTC1) or 2 (CRTC2), and first letter
corresponds to primary analog output, second letter to the
secondary analog output and third letter to the DVI output.
Default setting is 100 for cards below G400 or G400 without DFP,
101 for G400 with DFP, and 111 for G450 and G550. You can set
mapping only on first card, use matroxset for setting up other
devices.</td>
</tr>
<tr class="row-odd"><td>vesa:X</td>
<td>selects startup videomode. X is number from 0 to 0x1FF, see table
above for detailed explanation. Default is 640x480x8bpp if driver
has 8bpp support. Otherwise first available of 640x350x4bpp,
640x480x15bpp, 640x480x24bpp, 640x480x32bpp or 80x25 text
(80x25 text is always available).</td>
</tr>
</tbody>
</table>
<p>If you are not satisfied with videomode selected by <cite>vesa</cite> option, you
can modify it with these options:</p>
<table border="1" class="docutils">
<colgroup>
<col width="15%" />
<col width="85%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>xres:X</td>
<td>horizontal resolution, in pixels. Default is derived from <cite>vesa</cite>
option.</td>
</tr>
<tr class="row-even"><td>yres:X</td>
<td>vertical resolution, in pixel lines. Default is derived from <cite>vesa</cite>
option.</td>
</tr>
<tr class="row-odd"><td>upper:X</td>
<td>top boundary: lines between end of VSYNC pulse and start of first
pixel line of picture. Default is derived from <cite>vesa</cite> option.</td>
</tr>
<tr class="row-even"><td>lower:X</td>
<td>bottom boundary: lines between end of picture and start of VSYNC
pulse. Default is derived from <cite>vesa</cite> option.</td>
</tr>
<tr class="row-odd"><td>vslen:X</td>
<td>length of VSYNC pulse, in lines. Default is derived from <cite>vesa</cite>
option.</td>
</tr>
<tr class="row-even"><td>left:X</td>
<td>left boundary: pixels between end of HSYNC pulse and first pixel.
Default is derived from <cite>vesa</cite> option.</td>
</tr>
<tr class="row-odd"><td>right:X</td>
<td>right boundary: pixels between end of picture and start of HSYNC
pulse. Default is derived from <cite>vesa</cite> option.</td>
</tr>
<tr class="row-even"><td>hslen:X</td>
<td>length of HSYNC pulse, in pixels. Default is derived from <cite>vesa</cite>
option.</td>
</tr>
<tr class="row-odd"><td>pixclock:X</td>
<td>dotclocks, in ps (picoseconds). Default is derived from <cite>vesa</cite>
option and from <cite>fh</cite> and <cite>fv</cite> options.</td>
</tr>
<tr class="row-even"><td>sync:X</td>
<td>sync. pulse - bit 0 inverts HSYNC polarity, bit 1 VSYNC polarity.
If bit 3 (value 0x08) is set, composite sync instead of HSYNC is
generated. If bit 5 (value 0x20) is set, sync on green is turned
on. Do not forget that if you want sync on green, you also probably
want composite sync.
Default depends on <cite>vesa</cite>.</td>
</tr>
<tr class="row-odd"><td>depth:X</td>
<td>Bits per pixel: 0=text, 4,8,15,16,24 or 32. Default depends on
<cite>vesa</cite>.</td>
</tr>
</tbody>
</table>
<p>If you know capabilities of your monitor, you can specify some (or all) of
<cite>maxclk</cite>, <cite>fh</cite> and <cite>fv</cite>. In this case, <cite>pixclock</cite> is computed so that
pixclock &lt;= maxclk, real_fh &lt;= fh and real_fv &lt;= fv.</p>
<table border="1" class="docutils">
<colgroup>
<col width="15%" />
<col width="85%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>maxclk:X</td>
<td>maximum dotclock. X can be specified in MHz, kHz or Hz. Default is
<cite>don`t care</cite>.</td>
</tr>
<tr class="row-even"><td>fh:X</td>
<td>maximum horizontal synchronization frequency. X can be specified
in kHz or Hz. Default is <cite>don’t care</cite>.</td>
</tr>
<tr class="row-odd"><td>fv:X</td>
<td>maximum vertical frequency. X must be specified in Hz. Default is
70 for modes derived from <cite>vesa</cite> with yres &lt;= 400, 60Hz for
yres &gt; 400.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="limitations">
<h2>Limitations<a class="headerlink" href="#limitations" title="Permalink to this headline">¶</a></h2>
<p>There are known and unknown bugs, features and misfeatures.
Currently there are following known bugs:</p>
<blockquote>
<div><ul class="simple">
<li>SVGALib does not restore screen on exit</li>
<li>generic fbcon-cfbX procedures do not work on Alphas. Due to this,
<cite>noaccel</cite> (and cfb4 accel) driver does not work on Alpha. So everyone
with access to <cite>/dev/fb*</cite> on Alpha can hang machine (you should restrict
access to <cite>/dev/fb*</cite> - everyone with access to this device can destroy
your monitor, believe me…).</li>
<li>24bpp does not support correctly XF-FBDev on big-endian architectures.</li>
<li>interlaced text mode is not supported; it looks like hardware limitation,
but I’m not sure.</li>
<li>Gxx0 SGRAM/SDRAM is not autodetected.</li>
<li>If you are using more than one framebuffer device, you must boot kernel
with ‘video=scrollback:0’.</li>
<li>maybe more…</li>
</ul>
</div></blockquote>
<p>And following misfeatures:</p>
<blockquote>
<div><ul>
<li><p class="first">SVGALib does not restore screen on exit.</p>
</li>
<li><p class="first">pixclock for text modes is limited by hardware to</p>
<blockquote>
<div><ul class="simple">
<li>83 MHz on G200</li>
<li>66 MHz on Millennium I</li>
<li>60 MHz on Millennium II</li>
</ul>
</div></blockquote>
<p>Because I have no access to other devices, I do not know specific
frequencies for them. So driver does not check this and allows you to
set frequency higher that this. It causes sparks, black holes and other
pretty effects on screen. Device was not destroyed during tests. :-)</p>
</li>
<li><p class="first">my Millennium G200 oscillator has frequency range from 35 MHz to 380 MHz
(and it works with 8bpp on about 320 MHz dotclocks (and changed mclk)).
But Matrox says on product sheet that VCO limit is 50-250 MHz, so I believe
them (maybe that chip overheats, but it has a very big cooler (G100 has
none), so it should work).</p>
</li>
<li><p class="first">special mixed video/graphics videomodes of Mystique and Gx00 - 2G8V16 and
G16V16 are not supported</p>
</li>
<li><p class="first">color keying is not supported</p>
</li>
<li><p class="first">feature connector of Mystique and Gx00 is set to VGA mode (it is disabled
by BIOS)</p>
</li>
<li><p class="first">DDC (monitor detection) is supported through dualhead driver</p>
</li>
<li><p class="first">some check for input values are not so strict how it should be (you can
specify vslen=4000 and so on).</p>
</li>
<li><p class="first">maybe more…</p>
</li>
</ul>
</div></blockquote>
<p>And following features:</p>
<blockquote>
<div><ul class="simple">
<li>4bpp is available only on Millennium I and Millennium II. It is hardware
limitation.</li>
<li>selection between 1:5:5:5 and 5:6:5 16bpp videomode is done by -rgba
option of fbset: “fbset -depth 16 -rgba 5,5,5” selects 1:5:5:5, anything
else selects 5:6:5 mode.</li>
<li>text mode uses 6 bit VGA palette instead of 8 bit (one of 262144 colors
instead of one of 16M colors). It is due to hardware limitation of
Millennium I/II and SVGALib compatibility.</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="benchmarks">
<h2>Benchmarks<a class="headerlink" href="#benchmarks" title="Permalink to this headline">¶</a></h2>
<p>It is time to redraw whole screen 1000 times in 1024x768, 60Hz. It is
time for draw 6144000 characters on screen through /dev/vcsa
(for 32bpp it is about 3GB of data (exactly 3000 MB); for 8x16 font in
16 seconds, i.e. 187 MBps).
Times were obtained from one older version of driver, now they are about 3%
faster, it is kernel-space only time on P-II/350 MHz, Millennium I in 33 MHz
PCI slot, G200 in AGP 2x slot. I did not test vgacon:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>NOACCEL
      8x16                 12x22
      Millennium I  G200   Millennium I  G200
8bpp    16.42         9.54   12.33         9.13
16bpp   21.00        15.70   19.11        15.02
24bpp   36.66        36.66   35.00        35.00
32bpp   35.00        30.00   33.85        28.66

ACCEL, nofastfont
      8x16                 12x22                6x11
      Millennium I  G200   Millennium I  G200   Millennium I  G200
8bpp     7.79         7.24   13.55         7.78   30.00        21.01
16bpp    9.13         7.78   16.16         7.78   30.00        21.01
24bpp   14.17        10.72   18.69        10.24   34.99        21.01
32bpp   16.15      16.16   18.73        13.09   34.99        21.01

ACCEL, fastfont
      8x16                 12x22                6x11
      Millennium I  G200   Millennium I  G200   Millennium I  G200
8bpp     8.41         6.01    6.54         4.37   16.00        10.51
16bpp    9.54         9.12    8.76         6.17   17.52        14.01
24bpp   15.00        12.36   11.67        10.00   22.01        18.32
32bpp   16.18        18.29*  12.71        12.74   24.44        21.00

TEXT
      8x16
      Millennium I  G200
TEXT     3.29         1.50

* Yes, it is slower than Millennium I.
</pre></div>
</div>
</div>
<div class="section" id="dualhead-g400">
<h2>Dualhead G400<a class="headerlink" href="#dualhead-g400" title="Permalink to this headline">¶</a></h2>
<dl class="docutils">
<dt>Driver supports dualhead G400 with some limitations:</dt>
<dd><ul class="first last simple">
<li>secondary head shares videomemory with primary head. It is not problem
if you have 32MB of videoram, but if you have only 16MB, you may have
to think twice before choosing videomode (for example twice 1880x1440x32bpp
is not possible).</li>
<li>due to hardware limitation, secondary head can use only 16 and 32bpp
videomodes.</li>
<li>secondary head is not accelerated. There were bad problems with accelerated
XFree when secondary head used to use acceleration.</li>
<li>secondary head always powerups in <a class="reference external" href="mailto:640x480&#37;&#52;&#48;60-32">640x480<span>&#64;</span>60-32</a> videomode. You have to use
fbset to change this mode.</li>
<li>secondary head always powerups in monitor mode. You have to use fbmatroxset
to change it to TV mode. Also, you must select at least 525 lines for
NTSC output and 625 lines for PAL output.</li>
<li>kernel is not fully multihead ready. So some things are impossible to do.</li>
<li>if you compiled it as module, you must insert i2c-matroxfb, matroxfb_maven
and matroxfb_crtc2 into kernel.</li>
</ul>
</dd>
</dl>
</div>
<div class="section" id="dualhead-g450">
<h2>Dualhead G450<a class="headerlink" href="#dualhead-g450" title="Permalink to this headline">¶</a></h2>
<dl class="docutils">
<dt>Driver supports dualhead G450 with some limitations:</dt>
<dd><ul class="first last simple">
<li>secondary head shares videomemory with primary head. It is not problem
if you have 32MB of videoram, but if you have only 16MB, you may have
to think twice before choosing videomode.</li>
<li>due to hardware limitation, secondary head can use only 16 and 32bpp
videomodes.</li>
<li>secondary head is not accelerated.</li>
<li>secondary head always powerups in <a class="reference external" href="mailto:640x480&#37;&#52;&#48;60-32">640x480<span>&#64;</span>60-32</a> videomode. You have to use
fbset to change this mode.</li>
<li>TV output is not supported</li>
<li>kernel is not fully multihead ready, so some things are impossible to do.</li>
<li>if you compiled it as module, you must insert matroxfb_g450 and matroxfb_crtc2
into kernel.</li>
</ul>
</dd>
</dl>
<p>Petr Vandrovec &lt;<a class="reference external" href="mailto:vandrove&#37;&#52;&#48;vc&#46;cvut&#46;cz">vandrove<span>&#64;</span>vc<span>&#46;</span>cvut<span>&#46;</span>cz</a>&gt;</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="metronomefb.html" class="btn btn-neutral float-right" title="Metronomefb" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="lxfb.html" class="btn btn-neutral float-left" title="What is lxfb?" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright The kernel development community

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>