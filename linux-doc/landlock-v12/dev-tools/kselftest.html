

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Linux Kernel Selftests &mdash; The Linux Kernel 5.2.0+ documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/theme_overrides.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="How to write kernel documentation" href="../doc-guide/index.html" />
    <link rel="prev" title="Using kgdb, kdb and the kernel debugger internals" href="kgdb.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> The Linux Kernel
          

          
          </a>

          
            
            
              <div class="version">
                5.4.0-rc3
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../admin-guide/index.html">The Linux kernel user’s and administrator’s guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../kbuild/index.html">Kernel Build System</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../firmware-guide/index.html">The Linux kernel firmware guide</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../userspace-api/index.html">The Linux kernel user-space API guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ioctl/index.html">IOCTLs</a></li>
</ul>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../process/index.html">Working with the kernel development community</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Development tools for the kernel</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="coccinelle.html">Coccinelle</a></li>
<li class="toctree-l2"><a class="reference internal" href="sparse.html">Sparse</a></li>
<li class="toctree-l2"><a class="reference internal" href="kcov.html">kcov: code coverage for fuzzing</a></li>
<li class="toctree-l2"><a class="reference internal" href="gcov.html">Using gcov with the Linux kernel</a></li>
<li class="toctree-l2"><a class="reference internal" href="kasan.html">The Kernel Address Sanitizer (KASAN)</a></li>
<li class="toctree-l2"><a class="reference internal" href="ubsan.html">The Undefined Behavior Sanitizer - UBSAN</a></li>
<li class="toctree-l2"><a class="reference internal" href="kmemleak.html">Kernel Memory Leak Detector</a></li>
<li class="toctree-l2"><a class="reference internal" href="gdb-kernel-debugging.html">Debugging kernel and modules via gdb</a></li>
<li class="toctree-l2"><a class="reference internal" href="kgdb.html">Using kgdb, kdb and the kernel debugger internals</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Linux Kernel Selftests</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#running-the-selftests-hotplug-tests-are-run-in-limited-mode">Running the selftests (hotplug tests are run in limited mode)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#running-a-subset-of-selftests">Running a subset of selftests</a></li>
<li class="toctree-l3"><a class="reference internal" href="#running-the-full-range-hotplug-selftests">Running the full range hotplug selftests</a></li>
<li class="toctree-l3"><a class="reference internal" href="#install-selftests">Install selftests</a></li>
<li class="toctree-l3"><a class="reference internal" href="#running-installed-selftests">Running installed selftests</a></li>
<li class="toctree-l3"><a class="reference internal" href="#contributing-new-tests">Contributing new tests</a></li>
<li class="toctree-l3"><a class="reference internal" href="#contributing-new-tests-details">Contributing new tests (details)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#test-module">Test Module</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#how-to-use">How to use</a></li>
<li class="toctree-l4"><a class="reference internal" href="#example-module">Example Module</a></li>
<li class="toctree-l4"><a class="reference internal" href="#example-test-script">Example test script</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#test-harness">Test Harness</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#example">Example</a></li>
<li class="toctree-l4"><a class="reference internal" href="#helpers">Helpers</a></li>
<li class="toctree-l4"><a class="reference internal" href="#operators">Operators</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../doc-guide/index.html">How to write kernel documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../kernel-hacking/index.html">Kernel Hacking Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../trace/index.html">Linux Tracing Technologies</a></li>
<li class="toctree-l1"><a class="reference internal" href="../maintainer/index.html">Kernel Maintainer Handbook</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fault-injection/index.html">fault-injection</a></li>
<li class="toctree-l1"><a class="reference internal" href="../livepatch/index.html">Kernel Livepatching</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../driver-api/index.html">The Linux driver implementer’s API guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../core-api/index.html">Core API Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../locking/index.html">locking</a></li>
<li class="toctree-l1"><a class="reference internal" href="../accounting/index.html">Accounting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../block/index.html">Block</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cdrom/index.html">cdrom</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ide/index.html">Integrated Drive Electronics (IDE)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fb/index.html">Frame Buffer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fpga/index.html">fpga</a></li>
<li class="toctree-l1"><a class="reference internal" href="../hid/index.html">Human Interface Devices (HID)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../i2c/index.html">I2C/SMBus Subsystem</a></li>
<li class="toctree-l1"><a class="reference internal" href="../iio/index.html">Industrial I/O</a></li>
<li class="toctree-l1"><a class="reference internal" href="../isdn/index.html">ISDN</a></li>
<li class="toctree-l1"><a class="reference internal" href="../infiniband/index.html">InfiniBand</a></li>
<li class="toctree-l1"><a class="reference internal" href="../leds/index.html">LEDs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../media/index.html">Linux Media Subsystem Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../netlabel/index.html">NetLabel</a></li>
<li class="toctree-l1"><a class="reference internal" href="../networking/index.html">Linux Networking Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pcmcia/index.html">pcmcia</a></li>
<li class="toctree-l1"><a class="reference internal" href="../power/index.html">Power Management</a></li>
<li class="toctree-l1"><a class="reference internal" href="../target/index.html">TCM Virtual Device</a></li>
<li class="toctree-l1"><a class="reference internal" href="../timers/index.html">timers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../spi/index.html">Serial Peripheral Interface (SPI)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../w1/index.html">1-Wire Subsystem</a></li>
<li class="toctree-l1"><a class="reference internal" href="../watchdog/index.html">Linux Watchdog Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../virt/index.html">Linux Virtualization Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../input/index.html">The Linux Input Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../hwmon/index.html">Linux Hardware Monitoring</a></li>
<li class="toctree-l1"><a class="reference internal" href="../gpu/index.html">Linux GPU Driver Developer’s Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../security/index.html">Security Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../sound/index.html">Linux Sound Subsystem Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../crypto/index.html">Linux Kernel Crypto API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../filesystems/index.html">Filesystems in the Linux kernel</a></li>
<li class="toctree-l1"><a class="reference internal" href="../vm/index.html">Linux Memory Management Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../bpf/index.html">BPF Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../usb/index.html">USB support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../PCI/index.html">Linux PCI Bus Subsystem</a></li>
<li class="toctree-l1"><a class="reference internal" href="../misc-devices/index.html">Assorted Miscellaneous Devices Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mic/index.html">Intel Many Integrated Core (MIC) architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../scheduler/index.html">Linux Scheduler</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../arm/index.html">ARM Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../arm64/index.html">ARM64 Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ia64/index.html">IA-64 Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../m68k/index.html">m68k Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mips/index.html">MIPS-specific Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../nios2/nios2.html">Linux on the Nios II architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../openrisc/index.html">OpenRISC Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../parisc/index.html">PA-RISC Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../powerpc/index.html">powerpc</a></li>
<li class="toctree-l1"><a class="reference internal" href="../riscv/index.html">RISC-V architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../s390/index.html">s390 Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../sh/index.html">SuperH Interfaces Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../sparc/index.html">Sparc Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../x86/index.html">x86-specific Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../xtensa/index.html">Xtensa Architecture</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../filesystems/ext4/index.html">ext4 Data Structures and Algorithms</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../translations/index.html">Translations</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">The Linux Kernel</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="index.html">Development tools for the kernel</a> &raquo;</li>
        
      <li>Linux Kernel Selftests</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/dev-tools/kselftest.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="linux-kernel-selftests">
<h1>Linux Kernel Selftests<a class="headerlink" href="#linux-kernel-selftests" title="Permalink to this headline">¶</a></h1>
<p>The kernel contains a set of “self tests” under the tools/testing/selftests/
directory. These are intended to be small tests to exercise individual code
paths in the kernel. Tests are intended to be run after building, installing
and booting a kernel.</p>
<p>You can find additional information on Kselftest framework, how to
write new tests using the framework on Kselftest wiki:</p>
<p><a class="reference external" href="https://kselftest.wiki.kernel.org/">https://kselftest.wiki.kernel.org/</a></p>
<p>On some systems, hot-plug tests could hang forever waiting for cpu and
memory to be ready to be offlined. A special hot-plug target is created
to run the full range of hot-plug tests. In default mode, hot-plug tests run
in safe mode with a limited scope. In limited mode, cpu-hotplug test is
run on a single cpu as opposed to all hotplug capable cpus, and memory
hotplug test is run on 2% of hotplug capable memory instead of 10%.</p>
<p>kselftest runs as a userspace process.  Tests that can be written/run in
userspace may wish to use the <a class="reference internal" href="#test-harness">Test Harness</a>.  Tests that need to be
run in kernel space may wish to use a <a class="reference internal" href="#test-module">Test Module</a>.</p>
<div class="section" id="running-the-selftests-hotplug-tests-are-run-in-limited-mode">
<h2>Running the selftests (hotplug tests are run in limited mode)<a class="headerlink" href="#running-the-selftests-hotplug-tests-are-run-in-limited-mode" title="Permalink to this headline">¶</a></h2>
<p>To build the tests:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ make -C tools/testing/selftests
</pre></div>
</div>
<p>To run the tests:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ make -C tools/testing/selftests run_tests
</pre></div>
</div>
<p>To build and run the tests with a single command, use:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ make kselftest
</pre></div>
</div>
<p>Note that some tests will require root privileges.</p>
<p>Kselftest supports saving output files in a separate directory and then
running tests. To locate output files in a separate directory two syntaxes
are supported. In both cases the working directory must be the root of the
kernel src. This is applicable to “Running a subset of selftests” section
below.</p>
<p>To build, save output files in a separate directory with O=</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ make O=/tmp/kselftest kselftest
</pre></div>
</div>
<p>To build, save output files in a separate directory with KBUILD_OUTPUT</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ export KBUILD_OUTPUT=/tmp/kselftest; make kselftest
</pre></div>
</div>
<p>The O= assignment takes precedence over the KBUILD_OUTPUT environment
variable.</p>
<p>The above commands by default run the tests and print full pass/fail report.
Kselftest supports “summary” option to make it easier to understand the test
results. Please find the detailed individual test results for each test in
/tmp/testname file(s) when summary option is specified. This is applicable
to “Running a subset of selftests” section below.</p>
<p>To run kselftest with summary option enabled</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ make summary=1 kselftest
</pre></div>
</div>
</div>
<div class="section" id="running-a-subset-of-selftests">
<h2>Running a subset of selftests<a class="headerlink" href="#running-a-subset-of-selftests" title="Permalink to this headline">¶</a></h2>
<p>You can use the “TARGETS” variable on the make command line to specify
single test to run, or a list of tests to run.</p>
<p>To run only tests targeted for a single subsystem:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ make -C tools/testing/selftests TARGETS=ptrace run_tests
</pre></div>
</div>
<p>You can specify multiple tests to build and run:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$  make TARGETS=&quot;size timers&quot; kselftest
</pre></div>
</div>
<p>To build, save output files in a separate directory with O=</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ make O=/tmp/kselftest TARGETS=&quot;size timers&quot; kselftest
</pre></div>
</div>
<p>To build, save output files in a separate directory with KBUILD_OUTPUT</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ export KBUILD_OUTPUT=/tmp/kselftest; make TARGETS=&quot;size timers&quot; kselftest
</pre></div>
</div>
<p>Additionally you can use the “SKIP_TARGETS” variable on the make command
line to specify one or more targets to exclude from the TARGETS list.</p>
<p>To run all tests but a single subsystem:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ make -C tools/testing/selftests SKIP_TARGETS=ptrace run_tests
</pre></div>
</div>
<p>You can specify multiple tests to skip:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$  make SKIP_TARGETS=&quot;size timers&quot; kselftest
</pre></div>
</div>
<p>You can also specify a restricted list of tests to run together with a
dedicated skiplist:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$  make TARGETS=&quot;bpf breakpoints size timers&quot; SKIP_TARGETS=bpf kselftest
</pre></div>
</div>
<p>See the top-level tools/testing/selftests/Makefile for the list of all
possible targets.</p>
</div>
<div class="section" id="running-the-full-range-hotplug-selftests">
<h2>Running the full range hotplug selftests<a class="headerlink" href="#running-the-full-range-hotplug-selftests" title="Permalink to this headline">¶</a></h2>
<p>To build the hotplug tests:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ make -C tools/testing/selftests hotplug
</pre></div>
</div>
<p>To run the hotplug tests:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ make -C tools/testing/selftests run_hotplug
</pre></div>
</div>
<p>Note that some tests will require root privileges.</p>
</div>
<div class="section" id="install-selftests">
<h2>Install selftests<a class="headerlink" href="#install-selftests" title="Permalink to this headline">¶</a></h2>
<p>You can use the kselftest_install.sh tool to install selftests in the
default location, which is tools/testing/selftests/kselftest, or in a
user specified location.</p>
<p>To install selftests in default location:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ cd tools/testing/selftests
$ ./kselftest_install.sh
</pre></div>
</div>
<p>To install selftests in a user specified location:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ cd tools/testing/selftests
$ ./kselftest_install.sh install_dir
</pre></div>
</div>
</div>
<div class="section" id="running-installed-selftests">
<h2>Running installed selftests<a class="headerlink" href="#running-installed-selftests" title="Permalink to this headline">¶</a></h2>
<p>Kselftest install as well as the Kselftest tarball provide a script
named “run_kselftest.sh” to run the tests.</p>
<p>You can simply do the following to run the installed Kselftests. Please
note some tests will require root privileges:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ cd kselftest
$ ./run_kselftest.sh
</pre></div>
</div>
</div>
<div class="section" id="contributing-new-tests">
<h2>Contributing new tests<a class="headerlink" href="#contributing-new-tests" title="Permalink to this headline">¶</a></h2>
<p>In general, the rules for selftests are</p>
<blockquote>
<div><ul class="simple">
<li>Do as much as you can if you’re not root;</li>
<li>Don’t take too long;</li>
<li>Don’t break the build on any architecture, and</li>
<li>Don’t cause the top-level “make run_tests” to fail if your feature is
unconfigured.</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="contributing-new-tests-details">
<h2>Contributing new tests (details)<a class="headerlink" href="#contributing-new-tests-details" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><ul>
<li><p class="first">Use TEST_GEN_XXX if such binaries or files are generated during
compiling.</p>
<p>TEST_PROGS, TEST_GEN_PROGS mean it is the executable tested by
default.</p>
<p>TEST_CUSTOM_PROGS should be used by tests that require custom build
rules and prevent common build rule use.</p>
<p>TEST_PROGS are for test shell scripts. Please ensure shell script has
its exec bit set. Otherwise, lib.mk run_tests will generate a warning.</p>
<p>TEST_CUSTOM_PROGS and TEST_PROGS will be run by common run_tests.</p>
<p>TEST_PROGS_EXTENDED, TEST_GEN_PROGS_EXTENDED mean it is the
executable which is not tested by default.
TEST_FILES, TEST_GEN_FILES mean it is the file which is used by
test.</p>
</li>
<li><p class="first">First use the headers inside the kernel source and/or git repo, and then the
system headers.  Headers for the kernel release as opposed to headers
installed by the distro on the system should be the primary focus to be able
to find regressions.</p>
</li>
<li><p class="first">If a test needs specific kernel config options enabled, add a config file in
the test directory to enable them.</p>
<p>e.g: tools/testing/selftests/android/config</p>
</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="test-module">
<h2>Test Module<a class="headerlink" href="#test-module" title="Permalink to this headline">¶</a></h2>
<p>Kselftest tests the kernel from userspace.  Sometimes things need
testing from within the kernel, one method of doing this is to create a
test module.  We can tie the module into the kselftest framework by
using a shell script test runner.  <code class="docutils literal notranslate"><span class="pre">kselftest_module.sh</span></code> is designed
to facilitate this process.  There is also a header file provided to
assist writing kernel modules that are for use with kselftest:</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">tools/testing/kselftest/kselftest_module.h</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">tools/testing/kselftest/kselftest_module.sh</span></code></li>
</ul>
<div class="section" id="how-to-use">
<h3>How to use<a class="headerlink" href="#how-to-use" title="Permalink to this headline">¶</a></h3>
<p>Here we show the typical steps to create a test module and tie it into
kselftest.  We use kselftests for lib/ as an example.</p>
<ol class="arabic simple">
<li>Create the test module</li>
<li>Create the test script that will run (load/unload) the module
e.g. <code class="docutils literal notranslate"><span class="pre">tools/testing/selftests/lib/printf.sh</span></code></li>
<li>Add line to config file e.g. <code class="docutils literal notranslate"><span class="pre">tools/testing/selftests/lib/config</span></code></li>
<li>Add test script to makefile  e.g. <code class="docutils literal notranslate"><span class="pre">tools/testing/selftests/lib/Makefile</span></code></li>
<li>Verify it works:</li>
</ol>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span><span class="c1"># Assumes you have booted a fresh build of this kernel tree</span>
<span class="nb">cd</span> /path/to/linux/tree
make kselftest-merge
make modules
sudo make modules_install
make <span class="nv">TARGETS</span><span class="o">=</span>lib kselftest
</pre></div>
</div>
</div>
<div class="section" id="example-module">
<h3>Example Module<a class="headerlink" href="#example-module" title="Permalink to this headline">¶</a></h3>
<p>A bare bones test module might look like this:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="c1">// SPDX-License-Identifier: GPL-2.0+</span>

<span class="cp">#define pr_fmt(fmt) KBUILD_MODNAME &quot;: &quot; fmt</span>

<span class="cp">#include</span> <span class="cpf">&quot;../tools/testing/selftests/kselftest_module.h&quot;</span><span class="cp"></span>

<span class="n">KSTM_MODULE_GLOBALS</span><span class="p">();</span>

<span class="cm">/*</span>
<span class="cm"> * Kernel module for testing the foobinator</span>
<span class="cm"> */</span>

<span class="k">static</span> <span class="kt">int</span> <span class="n">__init</span> <span class="nf">test_function</span><span class="p">()</span>
<span class="p">{</span>
        <span class="p">...</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">void</span> <span class="n">__init</span> <span class="nf">selftest</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
        <span class="n">KSTM_CHECK_ZERO</span><span class="p">(</span><span class="n">do_test_case</span><span class="p">(</span><span class="s">&quot;&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">));</span>
<span class="p">}</span>

<span class="n">KSTM_MODULE_LOADERS</span><span class="p">(</span><span class="n">test_foo</span><span class="p">);</span>
<span class="n">MODULE_AUTHOR</span><span class="p">(</span><span class="s">&quot;John Developer &lt;jd@fooman.org&gt;&quot;</span><span class="p">);</span>
<span class="n">MODULE_LICENSE</span><span class="p">(</span><span class="s">&quot;GPL&quot;</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="example-test-script">
<h3>Example test script<a class="headerlink" href="#example-test-script" title="Permalink to this headline">¶</a></h3>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/bin/bash</span>
<span class="c1"># SPDX-License-Identifier: GPL-2.0+</span>
<span class="k">$(</span>dirname <span class="nv">$0</span><span class="k">)</span>/../kselftest_module.sh <span class="s2">&quot;foo&quot;</span> test_foo
</pre></div>
</div>
</div>
</div>
<div class="section" id="test-harness">
<h2>Test Harness<a class="headerlink" href="#test-harness" title="Permalink to this headline">¶</a></h2>
<p>The kselftest_harness.h file contains useful helpers to build tests.  The
test harness is for userspace testing, for kernel space testing see <a class="reference internal" href="#test-module">Test
Module</a> above.</p>
<p>The tests from tools/testing/selftests/seccomp/seccomp_bpf.c can be used as
example.</p>
<div class="section" id="example">
<h3>Example<a class="headerlink" href="#example" title="Permalink to this headline">¶</a></h3>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span> <span class="cpf">&quot;../kselftest_harness.h&quot;</span><span class="cp"></span>

<span class="n">TEST</span><span class="p">(</span><span class="n">standalone_test</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">do_some_stuff</span><span class="p">;</span>
  <span class="n">EXPECT_GT</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="n">stuff</span><span class="p">)</span> <span class="p">{</span>
     <span class="n">stuff_state_t</span> <span class="n">state</span><span class="p">;</span>
     <span class="n">enumerate_stuff_state</span><span class="p">(</span><span class="o">&amp;</span><span class="n">state</span><span class="p">);</span>
     <span class="n">TH_LOG</span><span class="p">(</span><span class="s">&quot;expectation failed with state: %s&quot;</span><span class="p">,</span> <span class="n">state</span><span class="p">.</span><span class="n">msg</span><span class="p">);</span>
  <span class="p">}</span>
  <span class="n">more_stuff</span><span class="p">;</span>
  <span class="n">ASSERT_NE</span><span class="p">(</span><span class="n">some_stuff</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">)</span> <span class="n">TH_LOG</span><span class="p">(</span><span class="s">&quot;how did it happen?!&quot;</span><span class="p">);</span>
  <span class="n">last_stuff</span><span class="p">;</span>
  <span class="n">EXPECT_EQ</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">last_stuff</span><span class="p">);</span>
<span class="p">}</span>

<span class="n">FIXTURE</span><span class="p">(</span><span class="n">my_fixture</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">mytype_t</span> <span class="o">*</span><span class="n">data</span><span class="p">;</span>
  <span class="kt">int</span> <span class="n">awesomeness_level</span><span class="p">;</span>
<span class="p">};</span>
<span class="n">FIXTURE_SETUP</span><span class="p">(</span><span class="n">my_fixture</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">self</span><span class="o">-&gt;</span><span class="n">data</span> <span class="o">=</span> <span class="n">mytype_new</span><span class="p">();</span>
  <span class="n">ASSERT_NE</span><span class="p">(</span><span class="nb">NULL</span><span class="p">,</span> <span class="n">self</span><span class="o">-&gt;</span><span class="n">data</span><span class="p">);</span>
<span class="p">}</span>
<span class="n">FIXTURE_TEARDOWN</span><span class="p">(</span><span class="n">my_fixture</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">mytype_free</span><span class="p">(</span><span class="n">self</span><span class="o">-&gt;</span><span class="n">data</span><span class="p">);</span>
<span class="p">}</span>
<span class="n">TEST_F</span><span class="p">(</span><span class="n">my_fixture</span><span class="p">,</span> <span class="n">data_is_good</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">EXPECT_EQ</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">is_my_data_good</span><span class="p">(</span><span class="n">self</span><span class="o">-&gt;</span><span class="n">data</span><span class="p">));</span>
<span class="p">}</span>

<span class="n">TEST_HARNESS_MAIN</span>
</pre></div>
</div>
</div>
<div class="section" id="helpers">
<h3>Helpers<a class="headerlink" href="#helpers" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="c.TH_LOG">
<code class="descname">TH_LOG</code><span class="sig-paren">(</span><em>fmt</em>, <em>…</em><span class="sig-paren">)</span><a class="headerlink" href="#c.TH_LOG" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">fmt</span></code></dt>
<dd>format string</dd>
<dt><code class="docutils literal notranslate"><span class="pre">...</span></code></dt>
<dd>optional arguments</dd>
</dl>
<p><strong>Description</strong></p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">TH_LOG</span><span class="p">(</span><span class="n">format</span><span class="p">,</span> <span class="p">...)</span>
</pre></div>
</div>
<p>Optional debug logging function available for use in tests.
Logging may be enabled or disabled by defining TH_LOG_ENABLED.
E.g., #define TH_LOG_ENABLED 1</p>
<p>If no definition is provided, logging is enabled by default.</p>
<p>If there is no way to print an error message for the process running the
test (e.g. not allowed to write to stderr), it is still possible to get the
ASSERT_* number for which the test failed.  This behavior can be enabled by
writing <cite>_metadata-&gt;no_print = true;</cite> before the check sequence that is
unable to print.  When an error occur, instead of printing an error message
and calling <cite>abort(3)</cite>, the test process call <cite>_exit(2)</cite> with the assert
number as argument, which is then printed by the parent process.</p>
<dl class="function">
<dt id="c.TEST">
<code class="descname">TEST</code><span class="sig-paren">(</span><em>test_name</em><span class="sig-paren">)</span><a class="headerlink" href="#c.TEST" title="Permalink to this definition">¶</a></dt>
<dd><p>Defines the test function and creates the registration stub</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">test_name</span></code></dt>
<dd>test name</dd>
</dl>
<p><strong>Description</strong></p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">TEST</span><span class="p">(</span><span class="n">name</span><span class="p">)</span> <span class="p">{</span> <span class="n">implementation</span> <span class="p">}</span>
</pre></div>
</div>
<p>Defines a test by name.
Names must be unique and tests must not be run in parallel.  The
implementation containing block is a function and scoping should be treated
as such.  Returning early may be performed with a bare “return;” statement.</p>
<p>EXPECT_* and ASSERT_* are valid in a <a class="reference internal" href="#c.TEST" title="TEST"><code class="xref c c-func docutils literal notranslate"><span class="pre">TEST()</span></code></a> { } context.</p>
<dl class="function">
<dt id="c.TEST_SIGNAL">
<code class="descname">TEST_SIGNAL</code><span class="sig-paren">(</span><em>test_name</em>, <em>signal</em><span class="sig-paren">)</span><a class="headerlink" href="#c.TEST_SIGNAL" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">test_name</span></code></dt>
<dd>test name</dd>
<dt><code class="docutils literal notranslate"><span class="pre">signal</span></code></dt>
<dd>signal number</dd>
</dl>
<p><strong>Description</strong></p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">TEST_SIGNAL</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">signal</span><span class="p">)</span> <span class="p">{</span> <span class="n">implementation</span> <span class="p">}</span>
</pre></div>
</div>
<p>Defines a test by name and the expected term signal.
Names must be unique and tests must not be run in parallel.  The
implementation containing block is a function and scoping should be treated
as such.  Returning early may be performed with a bare “return;” statement.</p>
<p>EXPECT_* and ASSERT_* are valid in a <a class="reference internal" href="#c.TEST" title="TEST"><code class="xref c c-func docutils literal notranslate"><span class="pre">TEST()</span></code></a> { } context.</p>
<dl class="function">
<dt id="c.FIXTURE_DATA">
<code class="descname">FIXTURE_DATA</code><span class="sig-paren">(</span><em>datatype_name</em><span class="sig-paren">)</span><a class="headerlink" href="#c.FIXTURE_DATA" title="Permalink to this definition">¶</a></dt>
<dd><p>Wraps the struct name so we have one less argument to pass around</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">datatype_name</span></code></dt>
<dd>datatype name</dd>
</dl>
<p><strong>Description</strong></p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">FIXTURE_DATA</span><span class="p">(</span><span class="n">datatype</span> <span class="n">name</span><span class="p">)</span>
</pre></div>
</div>
<p>This call may be used when the type of the fixture data
is needed.  In general, this should not be needed unless
the <em>self</em> is being passed to a helper directly.</p>
<dl class="function">
<dt id="c.FIXTURE">
<code class="descname">FIXTURE</code><span class="sig-paren">(</span><em>fixture_name</em><span class="sig-paren">)</span><a class="headerlink" href="#c.FIXTURE" title="Permalink to this definition">¶</a></dt>
<dd><p>Called once per fixture to setup the data and register</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">fixture_name</span></code></dt>
<dd>fixture name</dd>
</dl>
<p><strong>Description</strong></p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">FIXTURE</span><span class="p">(</span><span class="n">datatype</span> <span class="n">name</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">type</span> <span class="n">property1</span><span class="p">;</span>
  <span class="p">...</span>
<span class="p">};</span>
</pre></div>
</div>
<p>Defines the data provided to <a class="reference internal" href="#c.TEST_F" title="TEST_F"><code class="xref c c-func docutils literal notranslate"><span class="pre">TEST_F()</span></code></a>-defined tests as <em>self</em>.  It should be
populated and cleaned up using <a class="reference internal" href="#c.FIXTURE_SETUP" title="FIXTURE_SETUP"><code class="xref c c-func docutils literal notranslate"><span class="pre">FIXTURE_SETUP()</span></code></a> and <a class="reference internal" href="#c.FIXTURE_TEARDOWN" title="FIXTURE_TEARDOWN"><code class="xref c c-func docutils literal notranslate"><span class="pre">FIXTURE_TEARDOWN()</span></code></a>.</p>
<dl class="function">
<dt id="c.FIXTURE_SETUP">
<code class="descname">FIXTURE_SETUP</code><span class="sig-paren">(</span><em>fixture_name</em><span class="sig-paren">)</span><a class="headerlink" href="#c.FIXTURE_SETUP" title="Permalink to this definition">¶</a></dt>
<dd><p>Prepares the setup function for the fixture. <em>_metadata</em> is included so that EXPECT_* and ASSERT_* work correctly.</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">fixture_name</span></code></dt>
<dd>fixture name</dd>
</dl>
<p><strong>Description</strong></p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">FIXTURE_SETUP</span><span class="p">(</span><span class="n">fixture</span> <span class="n">name</span><span class="p">)</span> <span class="p">{</span> <span class="n">implementation</span> <span class="p">}</span>
</pre></div>
</div>
<p>Populates the required “setup” function for a fixture.  An instance of the
datatype defined with <a class="reference internal" href="#c.FIXTURE_DATA" title="FIXTURE_DATA"><code class="xref c c-func docutils literal notranslate"><span class="pre">FIXTURE_DATA()</span></code></a> will be exposed as <em>self</em> for the
implementation.</p>
<p>ASSERT_* are valid for use in this context and will prempt the execution
of any dependent fixture tests.</p>
<p>A bare “return;” statement may be used to return early.</p>
<dl class="function">
<dt id="c.FIXTURE_TEARDOWN">
<code class="descname">FIXTURE_TEARDOWN</code><span class="sig-paren">(</span><em>fixture_name</em><span class="sig-paren">)</span><a class="headerlink" href="#c.FIXTURE_TEARDOWN" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">fixture_name</span></code></dt>
<dd>fixture name</dd>
</dl>
<p><strong>Description</strong></p>
<p><em>_metadata</em> is included so that EXPECT_* and ASSERT_* work correctly.</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">FIXTURE_TEARDOWN</span><span class="p">(</span><span class="n">fixture</span> <span class="n">name</span><span class="p">)</span> <span class="p">{</span> <span class="n">implementation</span> <span class="p">}</span>
</pre></div>
</div>
<p>Populates the required “teardown” function for a fixture.  An instance of the
datatype defined with <a class="reference internal" href="#c.FIXTURE_DATA" title="FIXTURE_DATA"><code class="xref c c-func docutils literal notranslate"><span class="pre">FIXTURE_DATA()</span></code></a> will be exposed as <em>self</em> for the
implementation to clean up.</p>
<p>A bare “return;” statement may be used to return early.</p>
<dl class="function">
<dt id="c.TEST_F">
<code class="descname">TEST_F</code><span class="sig-paren">(</span><em>fixture_name</em>, <em>test_name</em><span class="sig-paren">)</span><a class="headerlink" href="#c.TEST_F" title="Permalink to this definition">¶</a></dt>
<dd><p>Emits test registration and helpers for fixture-based test cases</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">fixture_name</span></code></dt>
<dd>fixture name</dd>
<dt><code class="docutils literal notranslate"><span class="pre">test_name</span></code></dt>
<dd>test name</dd>
</dl>
<p><strong>Description</strong></p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">TEST_F</span><span class="p">(</span><span class="n">fixture</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span> <span class="p">{</span> <span class="n">implementation</span> <span class="p">}</span>
</pre></div>
</div>
<p>Defines a test that depends on a fixture (e.g., is part of a test case).
Very similar to <a class="reference internal" href="#c.TEST" title="TEST"><code class="xref c c-func docutils literal notranslate"><span class="pre">TEST()</span></code></a> except that <em>self</em> is the setup instance of fixture’s
datatype exposed for use by the implementation.</p>
<p>Warning: use of ASSERT_* here will skip TEARDOWN.</p>
<dl class="function">
<dt id="c.TEST_HARNESS_MAIN">
<code class="descname">TEST_HARNESS_MAIN</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#c.TEST_HARNESS_MAIN" title="Permalink to this definition">¶</a></dt>
<dd><p>Simple wrapper to run the test harness</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<p><strong>Description</strong></p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">TEST_HARNESS_MAIN</span>
</pre></div>
</div>
<p>Use once to append a main() to the test file.</p>
</div>
<div class="section" id="operators">
<h3>Operators<a class="headerlink" href="#operators" title="Permalink to this headline">¶</a></h3>
<p>Operators for use in <a class="reference internal" href="#c.TEST" title="TEST"><code class="xref c c-func docutils literal notranslate"><span class="pre">TEST()</span></code></a> and <a class="reference internal" href="#c.TEST_F" title="TEST_F"><code class="xref c c-func docutils literal notranslate"><span class="pre">TEST_F()</span></code></a>.
ASSERT_* calls will stop test execution immediately.
EXPECT_* calls will emit a failure warning, note it, and continue.</p>
<dl class="function">
<dt id="c.ASSERT_EQ">
<code class="descname">ASSERT_EQ</code><span class="sig-paren">(</span><em>expected</em>, <em>seen</em><span class="sig-paren">)</span><a class="headerlink" href="#c.ASSERT_EQ" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">expected</span></code></dt>
<dd>expected value</dd>
<dt><code class="docutils literal notranslate"><span class="pre">seen</span></code></dt>
<dd>measured value</dd>
</dl>
<p><strong>Description</strong></p>
<p>ASSERT_EQ(expected, measured): expected == measured</p>
<dl class="function">
<dt id="c.ASSERT_NE">
<code class="descname">ASSERT_NE</code><span class="sig-paren">(</span><em>expected</em>, <em>seen</em><span class="sig-paren">)</span><a class="headerlink" href="#c.ASSERT_NE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">expected</span></code></dt>
<dd>expected value</dd>
<dt><code class="docutils literal notranslate"><span class="pre">seen</span></code></dt>
<dd>measured value</dd>
</dl>
<p><strong>Description</strong></p>
<p>ASSERT_NE(expected, measured): expected != measured</p>
<dl class="function">
<dt id="c.ASSERT_LT">
<code class="descname">ASSERT_LT</code><span class="sig-paren">(</span><em>expected</em>, <em>seen</em><span class="sig-paren">)</span><a class="headerlink" href="#c.ASSERT_LT" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">expected</span></code></dt>
<dd>expected value</dd>
<dt><code class="docutils literal notranslate"><span class="pre">seen</span></code></dt>
<dd>measured value</dd>
</dl>
<p><strong>Description</strong></p>
<p>ASSERT_LT(expected, measured): expected &lt; measured</p>
<dl class="function">
<dt id="c.ASSERT_LE">
<code class="descname">ASSERT_LE</code><span class="sig-paren">(</span><em>expected</em>, <em>seen</em><span class="sig-paren">)</span><a class="headerlink" href="#c.ASSERT_LE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">expected</span></code></dt>
<dd>expected value</dd>
<dt><code class="docutils literal notranslate"><span class="pre">seen</span></code></dt>
<dd>measured value</dd>
</dl>
<p><strong>Description</strong></p>
<p>ASSERT_LE(expected, measured): expected &lt;= measured</p>
<dl class="function">
<dt id="c.ASSERT_GT">
<code class="descname">ASSERT_GT</code><span class="sig-paren">(</span><em>expected</em>, <em>seen</em><span class="sig-paren">)</span><a class="headerlink" href="#c.ASSERT_GT" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">expected</span></code></dt>
<dd>expected value</dd>
<dt><code class="docutils literal notranslate"><span class="pre">seen</span></code></dt>
<dd>measured value</dd>
</dl>
<p><strong>Description</strong></p>
<p>ASSERT_GT(expected, measured): expected &gt; measured</p>
<dl class="function">
<dt id="c.ASSERT_GE">
<code class="descname">ASSERT_GE</code><span class="sig-paren">(</span><em>expected</em>, <em>seen</em><span class="sig-paren">)</span><a class="headerlink" href="#c.ASSERT_GE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">expected</span></code></dt>
<dd>expected value</dd>
<dt><code class="docutils literal notranslate"><span class="pre">seen</span></code></dt>
<dd>measured value</dd>
</dl>
<p><strong>Description</strong></p>
<p>ASSERT_GE(expected, measured): expected &gt;= measured</p>
<dl class="function">
<dt id="c.ASSERT_NULL">
<code class="descname">ASSERT_NULL</code><span class="sig-paren">(</span><em>seen</em><span class="sig-paren">)</span><a class="headerlink" href="#c.ASSERT_NULL" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">seen</span></code></dt>
<dd>measured value</dd>
</dl>
<p><strong>Description</strong></p>
<p>ASSERT_NULL(measured): NULL == measured</p>
<dl class="function">
<dt id="c.ASSERT_TRUE">
<code class="descname">ASSERT_TRUE</code><span class="sig-paren">(</span><em>seen</em><span class="sig-paren">)</span><a class="headerlink" href="#c.ASSERT_TRUE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">seen</span></code></dt>
<dd>measured value</dd>
</dl>
<p><strong>Description</strong></p>
<p>ASSERT_TRUE(measured): measured != 0</p>
<dl class="function">
<dt id="c.ASSERT_FALSE">
<code class="descname">ASSERT_FALSE</code><span class="sig-paren">(</span><em>seen</em><span class="sig-paren">)</span><a class="headerlink" href="#c.ASSERT_FALSE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">seen</span></code></dt>
<dd>measured value</dd>
</dl>
<p><strong>Description</strong></p>
<p>ASSERT_FALSE(measured): measured == 0</p>
<dl class="function">
<dt id="c.ASSERT_STREQ">
<code class="descname">ASSERT_STREQ</code><span class="sig-paren">(</span><em>expected</em>, <em>seen</em><span class="sig-paren">)</span><a class="headerlink" href="#c.ASSERT_STREQ" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">expected</span></code></dt>
<dd>expected value</dd>
<dt><code class="docutils literal notranslate"><span class="pre">seen</span></code></dt>
<dd>measured value</dd>
</dl>
<p><strong>Description</strong></p>
<p>ASSERT_STREQ(expected, measured): !strcmp(expected, measured)</p>
<dl class="function">
<dt id="c.ASSERT_STRNE">
<code class="descname">ASSERT_STRNE</code><span class="sig-paren">(</span><em>expected</em>, <em>seen</em><span class="sig-paren">)</span><a class="headerlink" href="#c.ASSERT_STRNE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">expected</span></code></dt>
<dd>expected value</dd>
<dt><code class="docutils literal notranslate"><span class="pre">seen</span></code></dt>
<dd>measured value</dd>
</dl>
<p><strong>Description</strong></p>
<p>ASSERT_STRNE(expected, measured): strcmp(expected, measured)</p>
<dl class="function">
<dt id="c.EXPECT_EQ">
<code class="descname">EXPECT_EQ</code><span class="sig-paren">(</span><em>expected</em>, <em>seen</em><span class="sig-paren">)</span><a class="headerlink" href="#c.EXPECT_EQ" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">expected</span></code></dt>
<dd>expected value</dd>
<dt><code class="docutils literal notranslate"><span class="pre">seen</span></code></dt>
<dd>measured value</dd>
</dl>
<p><strong>Description</strong></p>
<p>EXPECT_EQ(expected, measured): expected == measured</p>
<dl class="function">
<dt id="c.EXPECT_NE">
<code class="descname">EXPECT_NE</code><span class="sig-paren">(</span><em>expected</em>, <em>seen</em><span class="sig-paren">)</span><a class="headerlink" href="#c.EXPECT_NE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">expected</span></code></dt>
<dd>expected value</dd>
<dt><code class="docutils literal notranslate"><span class="pre">seen</span></code></dt>
<dd>measured value</dd>
</dl>
<p><strong>Description</strong></p>
<p>EXPECT_NE(expected, measured): expected != measured</p>
<dl class="function">
<dt id="c.EXPECT_LT">
<code class="descname">EXPECT_LT</code><span class="sig-paren">(</span><em>expected</em>, <em>seen</em><span class="sig-paren">)</span><a class="headerlink" href="#c.EXPECT_LT" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">expected</span></code></dt>
<dd>expected value</dd>
<dt><code class="docutils literal notranslate"><span class="pre">seen</span></code></dt>
<dd>measured value</dd>
</dl>
<p><strong>Description</strong></p>
<p>EXPECT_LT(expected, measured): expected &lt; measured</p>
<dl class="function">
<dt id="c.EXPECT_LE">
<code class="descname">EXPECT_LE</code><span class="sig-paren">(</span><em>expected</em>, <em>seen</em><span class="sig-paren">)</span><a class="headerlink" href="#c.EXPECT_LE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">expected</span></code></dt>
<dd>expected value</dd>
<dt><code class="docutils literal notranslate"><span class="pre">seen</span></code></dt>
<dd>measured value</dd>
</dl>
<p><strong>Description</strong></p>
<p>EXPECT_LE(expected, measured): expected &lt;= measured</p>
<dl class="function">
<dt id="c.EXPECT_GT">
<code class="descname">EXPECT_GT</code><span class="sig-paren">(</span><em>expected</em>, <em>seen</em><span class="sig-paren">)</span><a class="headerlink" href="#c.EXPECT_GT" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">expected</span></code></dt>
<dd>expected value</dd>
<dt><code class="docutils literal notranslate"><span class="pre">seen</span></code></dt>
<dd>measured value</dd>
</dl>
<p><strong>Description</strong></p>
<p>EXPECT_GT(expected, measured): expected &gt; measured</p>
<dl class="function">
<dt id="c.EXPECT_GE">
<code class="descname">EXPECT_GE</code><span class="sig-paren">(</span><em>expected</em>, <em>seen</em><span class="sig-paren">)</span><a class="headerlink" href="#c.EXPECT_GE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">expected</span></code></dt>
<dd>expected value</dd>
<dt><code class="docutils literal notranslate"><span class="pre">seen</span></code></dt>
<dd>measured value</dd>
</dl>
<p><strong>Description</strong></p>
<p>EXPECT_GE(expected, measured): expected &gt;= measured</p>
<dl class="function">
<dt id="c.EXPECT_NULL">
<code class="descname">EXPECT_NULL</code><span class="sig-paren">(</span><em>seen</em><span class="sig-paren">)</span><a class="headerlink" href="#c.EXPECT_NULL" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">seen</span></code></dt>
<dd>measured value</dd>
</dl>
<p><strong>Description</strong></p>
<p>EXPECT_NULL(measured): NULL == measured</p>
<dl class="function">
<dt id="c.EXPECT_TRUE">
<code class="descname">EXPECT_TRUE</code><span class="sig-paren">(</span><em>seen</em><span class="sig-paren">)</span><a class="headerlink" href="#c.EXPECT_TRUE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">seen</span></code></dt>
<dd>measured value</dd>
</dl>
<p><strong>Description</strong></p>
<p>EXPECT_TRUE(measured): 0 != measured</p>
<dl class="function">
<dt id="c.EXPECT_FALSE">
<code class="descname">EXPECT_FALSE</code><span class="sig-paren">(</span><em>seen</em><span class="sig-paren">)</span><a class="headerlink" href="#c.EXPECT_FALSE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">seen</span></code></dt>
<dd>measured value</dd>
</dl>
<p><strong>Description</strong></p>
<p>EXPECT_FALSE(measured): 0 == measured</p>
<dl class="function">
<dt id="c.EXPECT_STREQ">
<code class="descname">EXPECT_STREQ</code><span class="sig-paren">(</span><em>expected</em>, <em>seen</em><span class="sig-paren">)</span><a class="headerlink" href="#c.EXPECT_STREQ" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">expected</span></code></dt>
<dd>expected value</dd>
<dt><code class="docutils literal notranslate"><span class="pre">seen</span></code></dt>
<dd>measured value</dd>
</dl>
<p><strong>Description</strong></p>
<p>EXPECT_STREQ(expected, measured): !strcmp(expected, measured)</p>
<dl class="function">
<dt id="c.EXPECT_STRNE">
<code class="descname">EXPECT_STRNE</code><span class="sig-paren">(</span><em>expected</em>, <em>seen</em><span class="sig-paren">)</span><a class="headerlink" href="#c.EXPECT_STRNE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">expected</span></code></dt>
<dd>expected value</dd>
<dt><code class="docutils literal notranslate"><span class="pre">seen</span></code></dt>
<dd>measured value</dd>
</dl>
<p><strong>Description</strong></p>
<p>EXPECT_STRNE(expected, measured): strcmp(expected, measured)</p>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../doc-guide/index.html" class="btn btn-neutral float-right" title="How to write kernel documentation" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="kgdb.html" class="btn btn-neutral float-left" title="Using kgdb, kdb and the kernel debugger internals" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright The kernel development community

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>