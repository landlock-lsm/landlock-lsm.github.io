

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>24. Qualcomm Camera Subsystem driver &mdash; The Linux Kernel 4.16.0-rc1+ documentation</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="../../_static/theme_overrides.css" type="text/css" />
  

  
        <link rel="index" title="Index"
              href="../../genindex.html"/>
        <link rel="search" title="Search" href="../../search.html"/>
    <link rel="top" title="The Linux Kernel 4.16.0-rc1+ documentation" href="../../index.html"/>
        <link rel="up" title="Video4Linux (V4L) driver-specific documentation" href="index.html"/>
        <link rel="next" title="25. The Radiotrack radio driver" href="radiotrack.html"/>
        <link rel="prev" title="23. PXA-Camera Host Driver" href="pxa_camera.html"/> 

  
  <script src="../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../index.html" class="icon icon-home"> The Linux Kernel
          

          
          </a>

          
            
            
              <div class="version">
                4.16.0-rc1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../../process/license-rules.html">Linux kernel licensing rules</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../admin-guide/index.html">The Linux kernel user’s and administrator’s guide</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../userspace-api/index.html">The Linux kernel user-space API guide</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../process/index.html">Working with the kernel development community</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../dev-tools/index.html">Development tools for the kernel</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../doc-guide/index.html">How to write kernel documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../kernel-hacking/index.html">Kernel Hacking Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../maintainer/index.html">Kernel Maintainer Handbook</a></li>
</ul>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../driver-api/index.html">The Linux driver implementer’s API guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../core-api/index.html">Core API Documentation</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Linux Media Subsystem Documentation</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../media_uapi.html">Linux Media Infrastructure userspace API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../media_kapi.html">Media subsystem kernel internal API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../dvb-drivers/index.html">Linux Digital TV driver-specific documentation</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">Video4Linux (V4L)  driver-specific documentation</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="fourcc.html">1. Guidelines for Video4Linux pixel format 4CCs</a></li>
<li class="toctree-l3"><a class="reference internal" href="v4l-with-ir.html">2. Infrared remote control support in video4linux drivers</a></li>
<li class="toctree-l3"><a class="reference internal" href="v4l-with-ir.html#using-with-lircd">3. Using with lircd</a></li>
<li class="toctree-l3"><a class="reference internal" href="v4l-with-ir.html#using-without-lircd">4. Using without lircd</a></li>
<li class="toctree-l3"><a class="reference internal" href="tuners.html">5. Tuner drivers</a></li>
<li class="toctree-l3"><a class="reference internal" href="cardlist.html">6. Cards List</a></li>
<li class="toctree-l3"><a class="reference internal" href="bttv.html">7. The bttv driver</a></li>
<li class="toctree-l3"><a class="reference internal" href="cafe_ccic.html">8. The cafe_ccic driver</a></li>
<li class="toctree-l3"><a class="reference internal" href="cpia2.html">9. The cpia2 driver</a></li>
<li class="toctree-l3"><a class="reference internal" href="cx18.html">10. The cx18 driver</a></li>
<li class="toctree-l3"><a class="reference internal" href="cx2341x.html">11. The cx2341x driver</a></li>
<li class="toctree-l3"><a class="reference internal" href="cx88.html">12. The cx88 driver</a></li>
<li class="toctree-l3"><a class="reference internal" href="davinci-vpbe.html">13. The VPBE V4L2 driver design</a></li>
<li class="toctree-l3"><a class="reference internal" href="fimc.html">14. The Samsung S5P/EXYNOS4 FIMC driver</a></li>
<li class="toctree-l3"><a class="reference internal" href="imx.html">15. i.MX Video Capture Driver</a></li>
<li class="toctree-l3"><a class="reference internal" href="ivtv.html">16. The ivtv driver</a></li>
<li class="toctree-l3"><a class="reference internal" href="max2175.html">17. Maxim Integrated MAX2175 RF to bits tuner driver</a></li>
<li class="toctree-l3"><a class="reference internal" href="meye.html">18. Vaio Picturebook Motion Eye Camera Driver</a></li>
<li class="toctree-l3"><a class="reference internal" href="omap3isp.html">19. OMAP 3 Image Signal Processor (ISP) driver</a></li>
<li class="toctree-l3"><a class="reference internal" href="omap4_camera.html">20. OMAP4 ISS Driver</a></li>
<li class="toctree-l3"><a class="reference internal" href="philips.html">21. Philips webcams (pwc driver)</a></li>
<li class="toctree-l3"><a class="reference internal" href="pvrusb2.html">22. The pvrusb2 driver</a></li>
<li class="toctree-l3"><a class="reference internal" href="pxa_camera.html">23. PXA-Camera Host Driver</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">24. Qualcomm Camera Subsystem driver</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#introduction">24.1. Introduction</a></li>
<li class="toctree-l4"><a class="reference internal" href="#qualcomm-camera-subsystem-hardware">24.2. Qualcomm Camera Subsystem hardware</a></li>
<li class="toctree-l4"><a class="reference internal" href="#supported-functionality">24.3. Supported functionality</a></li>
<li class="toctree-l4"><a class="reference internal" href="#driver-architecture-and-design">24.4. Driver Architecture and Design</a></li>
<li class="toctree-l4"><a class="reference internal" href="#implementation">24.5. Implementation</a></li>
<li class="toctree-l4"><a class="reference internal" href="#documentation">24.6. Documentation</a></li>
<li class="toctree-l4"><a class="reference internal" href="#references">24.7. References</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="radiotrack.html">25. The Radiotrack radio driver</a></li>
<li class="toctree-l3"><a class="reference internal" href="rcar-fdp1.html">26. Renesas R-Car Fine Display Processor (FDP1) Driver</a></li>
<li class="toctree-l3"><a class="reference internal" href="saa7134.html">27. The saa7134 driver</a></li>
<li class="toctree-l3"><a class="reference internal" href="sh_mobile_ceu_camera.html">28. Cropping and Scaling algorithm, used in the sh_mobile_ceu_camera driver</a></li>
<li class="toctree-l3"><a class="reference internal" href="si470x.html">29. The Silicon Labs Si470x FM Radio Receivers driver</a></li>
<li class="toctree-l3"><a class="reference internal" href="si4713.html">30. The Silicon Labs Si4713 FM Radio Transmitter Driver</a></li>
<li class="toctree-l3"><a class="reference internal" href="si476x.html">31. The SI476x Driver</a></li>
<li class="toctree-l3"><a class="reference internal" href="soc-camera.html">32. The Soc-Camera Drivers</a></li>
<li class="toctree-l3"><a class="reference internal" href="uvcvideo.html">33. The Linux USB Video Class (UVC) driver</a></li>
<li class="toctree-l3"><a class="reference internal" href="vivid.html">34. The Virtual Video Test Driver (vivid)</a></li>
<li class="toctree-l3"><a class="reference internal" href="zoran.html">35. The Zoran driver</a></li>
<li class="toctree-l3"><a class="reference internal" href="zr364xx.html">36. Zoran 364xx based USB webcam module</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../cec-drivers/index.html">CEC driver-specific documentation</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../networking/index.html">Linux Networking Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../input/index.html">The Linux Input Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../gpu/index.html">Linux GPU Driver Developer’s Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../security/index.html">Security Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../sound/index.html">Linux Sound Subsystem Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../crypto/index.html">Linux Kernel Crypto API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../filesystems/index.html">Linux Filesystems API</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../sh/index.html">SuperH Interfaces Guide</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../translations/ko_KR/index.html">Korean translations</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../translations/zh_CN/index.html">Chinese translations</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../translations/ja_JP/index.html">Japanese translations</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">The Linux Kernel</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../index.html">Linux Media Subsystem Documentation</a> &raquo;</li>
        
          <li><a href="index.html">Video4Linux (V4L)  driver-specific documentation</a> &raquo;</li>
        
      <li>24. Qualcomm Camera Subsystem driver</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../_sources/media/v4l-drivers/qcom_camss.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="qualcomm-camera-subsystem-driver">
<h1>24. Qualcomm Camera Subsystem driver<a class="headerlink" href="#qualcomm-camera-subsystem-driver" title="Permalink to this headline">¶</a></h1>
<div class="section" id="introduction">
<h2>24.1. Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p>This file documents the Qualcomm Camera Subsystem driver located under
drivers/media/platform/qcom/camss-8x16.</p>
<p>The current version of the driver supports the Camera Subsystem found on
Qualcomm MSM8916 and APQ8016 processors.</p>
<p>The driver implements V4L2, Media controller and V4L2 subdev interfaces.
Camera sensor using V4L2 subdev interface in the kernel is supported.</p>
<p>The driver is implemented using as a reference the Qualcomm Camera Subsystem
driver for Android as found in Code Aurora <a class="footnote-reference" href="#f1" id="id1">[1]</a>.</p>
</div>
<div class="section" id="qualcomm-camera-subsystem-hardware">
<h2>24.2. Qualcomm Camera Subsystem hardware<a class="headerlink" href="#qualcomm-camera-subsystem-hardware" title="Permalink to this headline">¶</a></h2>
<p>The Camera Subsystem hardware found on 8x16 processors and supported by the
driver consists of:</p>
<ul class="simple">
<li>2 CSIPHY modules. They handle the Physical layer of the CSI2 receivers.
A separate camera sensor can be connected to each of the CSIPHY module;</li>
<li>2 CSID (CSI Decoder) modules. They handle the Protocol and Application layer
of the CSI2 receivers. A CSID can decode data stream from any of the CSIPHY.
Each CSID also contains a TG (Test Generator) block which can generate
artificial input data for test purposes;</li>
<li>ISPIF (ISP Interface) module. Handles the routing of the data streams from
the CSIDs to the inputs of the VFE;</li>
<li>VFE (Video Front End) module. Contains a pipeline of image processing hardware
blocks. The VFE has different input interfaces. The PIX (Pixel) input
interface feeds the input data to the image processing pipeline. The image
processing pipeline contains also a scale and crop module at the end. Three
RDI (Raw Dump Interface) input interfaces bypass the image processing
pipeline. The VFE also contains the AXI bus interface which writes the output
data to memory.</li>
</ul>
</div>
<div class="section" id="supported-functionality">
<h2>24.3. Supported functionality<a class="headerlink" href="#supported-functionality" title="Permalink to this headline">¶</a></h2>
<p>The current version of the driver supports:</p>
<ul>
<li><p class="first">Input from camera sensor via CSIPHY;</p>
</li>
<li><p class="first">Generation of test input data by the TG in CSID;</p>
</li>
<li><p class="first">RDI interface of VFE - raw dump of the input data to memory.</p>
<p>Supported formats:</p>
<ul class="simple">
<li>YUYV/UYVY/YVYU/VYUY (packed YUV 4:2:2 - V4L2_PIX_FMT_YUYV /
V4L2_PIX_FMT_UYVY / V4L2_PIX_FMT_YVYU / V4L2_PIX_FMT_VYUY);</li>
<li>MIPI RAW8 (8bit Bayer RAW - V4L2_PIX_FMT_SRGGB8 /
V4L2_PIX_FMT_SGRBG8 / V4L2_PIX_FMT_SGBRG8 / V4L2_PIX_FMT_SBGGR8);</li>
<li>MIPI RAW10 (10bit packed Bayer RAW - V4L2_PIX_FMT_SBGGR10P /
V4L2_PIX_FMT_SGBRG10P / V4L2_PIX_FMT_SGRBG10P / V4L2_PIX_FMT_SRGGB10P);</li>
<li>MIPI RAW12 (12bit packed Bayer RAW - V4L2_PIX_FMT_SRGGB12P /
V4L2_PIX_FMT_SGBRG12P / V4L2_PIX_FMT_SGRBG12P / V4L2_PIX_FMT_SRGGB12P).</li>
</ul>
</li>
<li><p class="first">PIX interface of VFE</p>
<ul>
<li><p class="first">Format conversion of the input data.</p>
<p>Supported input formats:</p>
<ul class="simple">
<li>YUYV/UYVY/YVYU/VYUY (packed YUV 4:2:2 - V4L2_PIX_FMT_YUYV /
V4L2_PIX_FMT_UYVY / V4L2_PIX_FMT_YVYU / V4L2_PIX_FMT_VYUY).</li>
</ul>
<p>Supported output formats:</p>
<ul class="simple">
<li>NV12/NV21 (two plane YUV 4:2:0 - V4L2_PIX_FMT_NV12 / V4L2_PIX_FMT_NV21);</li>
<li>NV16/NV61 (two plane YUV 4:2:2 - V4L2_PIX_FMT_NV16 / V4L2_PIX_FMT_NV61).</li>
</ul>
</li>
<li><p class="first">Scaling support. Configuration of the VFE Encoder Scale module
for downscalling with ratio up to 16x.</p>
</li>
<li><p class="first">Cropping support. Configuration of the VFE Encoder Crop module.</p>
</li>
</ul>
</li>
<li><p class="first">Concurrent and independent usage of two data inputs - could be camera sensors
and/or TG.</p>
</li>
</ul>
</div>
<div class="section" id="driver-architecture-and-design">
<h2>24.4. Driver Architecture and Design<a class="headerlink" href="#driver-architecture-and-design" title="Permalink to this headline">¶</a></h2>
<p>The driver implements the V4L2 subdev interface. With the goal to model the
hardware links between the modules and to expose a clean, logical and usable
interface, the driver is split into V4L2 sub-devices as follows:</p>
<ul class="simple">
<li>2 CSIPHY sub-devices - each CSIPHY is represented by a single sub-device;</li>
<li>2 CSID sub-devices - each CSID is represented by a single sub-device;</li>
<li>2 ISPIF sub-devices - ISPIF is represented by a number of sub-devices equal
to the number of CSID sub-devices;</li>
<li>4 VFE sub-devices - VFE is represented by a number of sub-devices equal to
the number of the input interfaces (3 RDI and 1 PIX).</li>
</ul>
<p>The considerations to split the driver in this particular way are as follows:</p>
<ul class="simple">
<li>representing CSIPHY and CSID modules by a separate sub-device for each module
allows to model the hardware links between these modules;</li>
<li>representing VFE by a separate sub-devices for each input interface allows
to use the input interfaces concurently and independently as this is
supported by the hardware;</li>
<li>representing ISPIF by a number of sub-devices equal to the number of CSID
sub-devices allows to create linear media controller pipelines when using two
cameras simultaneously. This avoids branches in the pipelines which otherwise
will require a) userspace and b) media framework (e.g. power on/off
operations) to  make assumptions about the data flow from a sink pad to a
source pad on a single media entity.</li>
</ul>
<p>Each VFE sub-device is linked to a separate video device node.</p>
<p>The media controller pipeline graph is as follows (with connected two OV5645
camera sensors):</p>
<div class="figure align-center" id="id2">
<img alt="qcom_camss_graph.dot" src="../../_images/qcom_camss_graph.svg" /><p class="caption"><span class="caption-text">Media pipeline graph</span></p>
</div>
</div>
<div class="section" id="implementation">
<h2>24.5. Implementation<a class="headerlink" href="#implementation" title="Permalink to this headline">¶</a></h2>
<p>Runtime configuration of the hardware (updating settings while streaming) is
not required to implement the currently supported functionality. The complete
configuration on each hardware module is applied on STREAMON ioctl based on
the current active media links, formats and controls set.</p>
<p>The output size of the scaler module in the VFE is configured with the actual
compose selection rectangle on the sink pad of the ‘msm_vfe0_pix’ entity.</p>
<p>The crop output area of the crop module in the VFE is configured with the actual
crop selection rectangle on the source pad of the ‘msm_vfe0_pix’ entity.</p>
</div>
<div class="section" id="documentation">
<h2>24.6. Documentation<a class="headerlink" href="#documentation" title="Permalink to this headline">¶</a></h2>
<p>APQ8016 Specification:
<a class="reference external" href="https://developer.qualcomm.com/download/sd410/snapdragon-410-processor-device-specification.pdf">https://developer.qualcomm.com/download/sd410/snapdragon-410-processor-device-specification.pdf</a>
Referenced 2016-11-24.</p>
</div>
<div class="section" id="references">
<h2>24.7. References<a class="headerlink" href="#references" title="Permalink to this headline">¶</a></h2>
<table class="docutils footnote" frame="void" id="f1" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id1">[1]</a></td><td><a class="reference external" href="https://source.codeaurora.org/quic/la/kernel/msm-3.10/">https://source.codeaurora.org/quic/la/kernel/msm-3.10/</a></td></tr>
</tbody>
</table>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="radiotrack.html" class="btn btn-neutral float-right" title="25. The Radiotrack radio driver" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="pxa_camera.html" class="btn btn-neutral" title="23. PXA-Camera Host Driver" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright The kernel development community.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../',
            VERSION:'4.16.0-rc1+',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>