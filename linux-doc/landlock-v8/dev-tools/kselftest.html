

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Linux Kernel Selftests &mdash; The Linux Kernel 4.16.0-rc1+ documentation</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="../_static/theme_overrides.css" type="text/css" />
  

  
        <link rel="index" title="Index"
              href="../genindex.html"/>
        <link rel="search" title="Search" href="../search.html"/>
    <link rel="top" title="The Linux Kernel 4.16.0-rc1+ documentation" href="../index.html"/>
        <link rel="up" title="Development tools for the kernel" href="index.html"/>
        <link rel="next" title="How to write kernel documentation" href="../doc-guide/index.html"/>
        <link rel="prev" title="Using kgdb, kdb and the kernel debugger internals" href="kgdb.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> The Linux Kernel
          

          
          </a>

          
            
            
              <div class="version">
                4.16.0-rc1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../process/license-rules.html">Linux kernel licensing rules</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../admin-guide/index.html">The Linux kernel user’s and administrator’s guide</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../userspace-api/index.html">The Linux kernel user-space API guide</a></li>
</ul>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../process/index.html">Working with the kernel development community</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Development tools for the kernel</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="coccinelle.html">Coccinelle</a></li>
<li class="toctree-l2"><a class="reference internal" href="sparse.html">Sparse</a></li>
<li class="toctree-l2"><a class="reference internal" href="kcov.html">kcov: code coverage for fuzzing</a></li>
<li class="toctree-l2"><a class="reference internal" href="gcov.html">Using gcov with the Linux kernel</a></li>
<li class="toctree-l2"><a class="reference internal" href="kasan.html">The Kernel Address Sanitizer (KASAN)</a></li>
<li class="toctree-l2"><a class="reference internal" href="ubsan.html">The Undefined Behavior Sanitizer - UBSAN</a></li>
<li class="toctree-l2"><a class="reference internal" href="kmemleak.html">Kernel Memory Leak Detector</a></li>
<li class="toctree-l2"><a class="reference internal" href="gdb-kernel-debugging.html">Debugging kernel and modules via gdb</a></li>
<li class="toctree-l2"><a class="reference internal" href="kgdb.html">Using kgdb, kdb and the kernel debugger internals</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Linux Kernel Selftests</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#running-the-selftests-hotplug-tests-are-run-in-limited-mode">Running the selftests (hotplug tests are run in limited mode)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#running-a-subset-of-selftests">Running a subset of selftests</a></li>
<li class="toctree-l3"><a class="reference internal" href="#running-the-full-range-hotplug-selftests">Running the full range hotplug selftests</a></li>
<li class="toctree-l3"><a class="reference internal" href="#install-selftests">Install selftests</a></li>
<li class="toctree-l3"><a class="reference internal" href="#running-installed-selftests">Running installed selftests</a></li>
<li class="toctree-l3"><a class="reference internal" href="#contributing-new-tests">Contributing new tests</a></li>
<li class="toctree-l3"><a class="reference internal" href="#contributing-new-tests-details">Contributing new tests (details)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#test-harness">Test Harness</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#example">Example</a></li>
<li class="toctree-l4"><a class="reference internal" href="#helpers">Helpers</a></li>
<li class="toctree-l4"><a class="reference internal" href="#operators">Operators</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../doc-guide/index.html">How to write kernel documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../kernel-hacking/index.html">Kernel Hacking Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../maintainer/index.html">Kernel Maintainer Handbook</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../driver-api/index.html">The Linux driver implementer’s API guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../core-api/index.html">Core API Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../media/index.html">Linux Media Subsystem Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../networking/index.html">Linux Networking Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../input/index.html">The Linux Input Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../gpu/index.html">Linux GPU Driver Developer’s Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../security/index.html">Security Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../sound/index.html">Linux Sound Subsystem Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../crypto/index.html">Linux Kernel Crypto API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../filesystems/index.html">Linux Filesystems API</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../sh/index.html">SuperH Interfaces Guide</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../translations/ko_KR/index.html">Korean translations</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../translations/zh_CN/index.html">Chinese translations</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../translations/ja_JP/index.html">Japanese translations</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">The Linux Kernel</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="index.html">Development tools for the kernel</a> &raquo;</li>
        
      <li>Linux Kernel Selftests</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/dev-tools/kselftest.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="linux-kernel-selftests">
<h1>Linux Kernel Selftests<a class="headerlink" href="#linux-kernel-selftests" title="Permalink to this headline">¶</a></h1>
<p>The kernel contains a set of “self tests” under the tools/testing/selftests/
directory. These are intended to be small tests to exercise individual code
paths in the kernel. Tests are intended to be run after building, installing
and booting a kernel.</p>
<p>On some systems, hot-plug tests could hang forever waiting for cpu and
memory to be ready to be offlined. A special hot-plug target is created
to run full range of hot-plug tests. In default mode, hot-plug tests run
in safe mode with a limited scope. In limited mode, cpu-hotplug test is
run on a single cpu as opposed to all hotplug capable cpus, and memory
hotplug test is run on 2% of hotplug capable memory instead of 10%.</p>
<div class="section" id="running-the-selftests-hotplug-tests-are-run-in-limited-mode">
<h2>Running the selftests (hotplug tests are run in limited mode)<a class="headerlink" href="#running-the-selftests-hotplug-tests-are-run-in-limited-mode" title="Permalink to this headline">¶</a></h2>
<p>To build the tests:</p>
<div class="highlight-none"><div class="highlight"><pre><span></span>$ make -C tools/testing/selftests
</pre></div>
</div>
<p>To run the tests:</p>
<div class="highlight-none"><div class="highlight"><pre><span></span>$ make -C tools/testing/selftests run_tests
</pre></div>
</div>
<p>To build and run the tests with a single command, use:</p>
<div class="highlight-none"><div class="highlight"><pre><span></span>$ make kselftest
</pre></div>
</div>
<p>Note that some tests will require root privileges.</p>
<p>Build and run from user specific object directory (make O=dir):</p>
<div class="highlight-none"><div class="highlight"><pre><span></span>$ make O=/tmp/kselftest kselftest
</pre></div>
</div>
<p>Build and run KBUILD_OUTPUT directory (make KBUILD_OUTPUT=):</p>
<div class="highlight-none"><div class="highlight"><pre><span></span>$ make KBUILD_OUTPUT=/tmp/kselftest kselftest
</pre></div>
</div>
<p>The above commands run the tests and print pass/fail summary to make it
easier to understand the test results. Please find the detailed individual
test results for each test in /tmp/testname file(s).</p>
</div>
<div class="section" id="running-a-subset-of-selftests">
<h2>Running a subset of selftests<a class="headerlink" href="#running-a-subset-of-selftests" title="Permalink to this headline">¶</a></h2>
<p>You can use the “TARGETS” variable on the make command line to specify
single test to run, or a list of tests to run.</p>
<p>To run only tests targeted for a single subsystem:</p>
<div class="highlight-none"><div class="highlight"><pre><span></span>$ make -C tools/testing/selftests TARGETS=ptrace run_tests
</pre></div>
</div>
<p>You can specify multiple tests to build and run:</p>
<div class="highlight-none"><div class="highlight"><pre><span></span>$  make TARGETS=&quot;size timers&quot; kselftest
</pre></div>
</div>
<p>Build and run from user specific object directory (make O=dir):</p>
<div class="highlight-none"><div class="highlight"><pre><span></span>$ make O=/tmp/kselftest TARGETS=&quot;size timers&quot; kselftest
</pre></div>
</div>
<p>Build and run KBUILD_OUTPUT directory (make KBUILD_OUTPUT=):</p>
<div class="highlight-none"><div class="highlight"><pre><span></span>$ make KBUILD_OUTPUT=/tmp/kselftest TARGETS=&quot;size timers&quot; kselftest
</pre></div>
</div>
<p>The above commands run the tests and print pass/fail summary to make it
easier to understand the test results. Please find the detailed individual
test results for each test in /tmp/testname file(s).</p>
<p>See the top-level tools/testing/selftests/Makefile for the list of all
possible targets.</p>
</div>
<div class="section" id="running-the-full-range-hotplug-selftests">
<h2>Running the full range hotplug selftests<a class="headerlink" href="#running-the-full-range-hotplug-selftests" title="Permalink to this headline">¶</a></h2>
<p>To build the hotplug tests:</p>
<div class="highlight-none"><div class="highlight"><pre><span></span>$ make -C tools/testing/selftests hotplug
</pre></div>
</div>
<p>To run the hotplug tests:</p>
<div class="highlight-none"><div class="highlight"><pre><span></span>$ make -C tools/testing/selftests run_hotplug
</pre></div>
</div>
<p>Note that some tests will require root privileges.</p>
</div>
<div class="section" id="install-selftests">
<h2>Install selftests<a class="headerlink" href="#install-selftests" title="Permalink to this headline">¶</a></h2>
<p>You can use kselftest_install.sh tool installs selftests in default
location which is tools/testing/selftests/kselftest or a user specified
location.</p>
<p>To install selftests in default location:</p>
<div class="highlight-none"><div class="highlight"><pre><span></span>$ cd tools/testing/selftests
$ ./kselftest_install.sh
</pre></div>
</div>
<p>To install selftests in a user specified location:</p>
<div class="highlight-none"><div class="highlight"><pre><span></span>$ cd tools/testing/selftests
$ ./kselftest_install.sh install_dir
</pre></div>
</div>
</div>
<div class="section" id="running-installed-selftests">
<h2>Running installed selftests<a class="headerlink" href="#running-installed-selftests" title="Permalink to this headline">¶</a></h2>
<p>Kselftest install as well as the Kselftest tarball provide a script
named “run_kselftest.sh” to run the tests.</p>
<p>You can simply do the following to run the installed Kselftests.&nbsp;Please
note some tests will require root privileges:</p>
<div class="highlight-none"><div class="highlight"><pre><span></span>$ cd kselftest
$ ./run_kselftest.sh
</pre></div>
</div>
</div>
<div class="section" id="contributing-new-tests">
<h2>Contributing new tests<a class="headerlink" href="#contributing-new-tests" title="Permalink to this headline">¶</a></h2>
<p>In general, the rules for selftests are</p>
<blockquote>
<div><ul class="simple">
<li>Do as much as you can if you’re not root;</li>
<li>Don’t take too long;</li>
<li>Don’t break the build on any architecture, and</li>
<li>Don’t cause the top-level “make run_tests” to fail if your feature is
unconfigured.</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="contributing-new-tests-details">
<h2>Contributing new tests (details)<a class="headerlink" href="#contributing-new-tests-details" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><ul>
<li><p class="first">Use TEST_GEN_XXX if such binaries or files are generated during
compiling.</p>
<p>TEST_PROGS, TEST_GEN_PROGS mean it is the executable tested by
default.</p>
<p>TEST_CUSTOM_PROGS should be used by tests that require custom build
rule and prevent common build rule use.</p>
<p>TEST_PROGS are for test shell scripts. Please ensure shell script has
its exec bit set. Otherwise, lib.mk run_tests will generate a warning.</p>
<p>TEST_CUSTOM_PROGS and TEST_PROGS will be run by common run_tests.</p>
<p>TEST_PROGS_EXTENDED, TEST_GEN_PROGS_EXTENDED mean it is the
executable which is not tested by default.
TEST_FILES, TEST_GEN_FILES mean it is the file which is used by
test.</p>
</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="test-harness">
<h2>Test Harness<a class="headerlink" href="#test-harness" title="Permalink to this headline">¶</a></h2>
<p>The kselftest_harness.h file contains useful helpers to build tests.  The tests
from tools/testing/selftests/seccomp/seccomp_bpf.c can be used as example.</p>
<div class="section" id="example">
<h3>Example<a class="headerlink" href="#example" title="Permalink to this headline">¶</a></h3>
<div class="highlight-c"><div class="highlight"><pre><span></span>#include &quot;../kselftest_harness.h&quot;

TEST(standalone_test) {
  do_some_stuff;
  EXPECT_GT(10, stuff) {
     stuff_state_t state;
     enumerate_stuff_state(:c:type:`state`);
     TH_LOG(&quot;expectation failed with state: ``s``&quot;, state.msg);
  }
  more_stuff;
  ASSERT_NE(some_stuff, NULL) TH_LOG(&quot;how did it happen?!&quot;);
  last_stuff;
  EXPECT_EQ(0, last_stuff);
}

FIXTURE(my_fixture) {
  mytype_t *data;
  int awesomeness_level;
};
FIXTURE_SETUP(my_fixture) {
  self-&gt;data = :c:func:`mytype_new()`;
  ASSERT_NE(NULL, self-&gt;data);
}
FIXTURE_TEARDOWN(my_fixture) {
  mytype_free(self-&gt;data);
}
TEST_F(my_fixture, data_is_good) {
  EXPECT_EQ(1, is_my_data_good(self-&gt;data));
}

TEST_HARNESS_MAIN
</pre></div>
</div>
</div>
<div class="section" id="helpers">
<h3>Helpers<a class="headerlink" href="#helpers" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="c.TH_LOG">
<code class="descname">TH_LOG</code><span class="sig-paren">(</span><em>fmt</em>, <em>…</em><span class="sig-paren">)</span><a class="headerlink" href="#c.TH_LOG" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">fmt</span></code></dt>
<dd>format string</dd>
<dt><code class="docutils literal"><span class="pre">...</span></code></dt>
<dd>optional arguments</dd>
</dl>
<p><strong>Description</strong></p>
<div class="highlight-c"><div class="highlight"><pre><span></span><span class="n">TH_LOG</span><span class="p">(</span><span class="n">format</span><span class="p">,</span> <span class="p">...)</span>
</pre></div>
</div>
<p>Optional debug logging function available for use in tests.
Logging may be enabled or disabled by defining TH_LOG_ENABLED.
E.g., #define TH_LOG_ENABLED 1</p>
<p>If no definition is provided, logging is enabled by default.</p>
<p>If there is no way to print an error message for the process running the
test (e.g. not allowed to write to stderr), it is still possible to get the
ASSERT_* number for which the test failed.  This behavior can be enabled by
writing <cite>_metadata-&gt;no_print = true;</cite> before the check sequence that is
unable to print.  When an error occur, instead of printing an error message
and calling <cite>abort(3)</cite>, the test process call <cite>_exit(2)</cite> with the assert
number as argument, which is then printed by the parent process.</p>
<dl class="function">
<dt id="c.TEST">
<code class="descname">TEST</code><span class="sig-paren">(</span><em>test_name</em><span class="sig-paren">)</span><a class="headerlink" href="#c.TEST" title="Permalink to this definition">¶</a></dt>
<dd><p>Defines the test function and creates the registration stub</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">test_name</span></code></dt>
<dd>test name</dd>
</dl>
<p><strong>Description</strong></p>
<div class="highlight-c"><div class="highlight"><pre><span></span><span class="n">TEST</span><span class="p">(</span><span class="n">name</span><span class="p">)</span> <span class="p">{</span> <span class="n">implementation</span> <span class="p">}</span>
</pre></div>
</div>
<p>Defines a test by name.
Names must be unique and tests must not be run in parallel.  The
implementation containing block is a function and scoping should be treated
as such.  Returning early may be performed with a bare “return;” statement.</p>
<p>EXPECT_* and ASSERT_* are valid in a <a class="reference internal" href="#c.TEST" title="TEST"><code class="xref c c-func docutils literal"><span class="pre">TEST()</span></code></a> { } context.</p>
<dl class="function">
<dt id="c.TEST_SIGNAL">
<code class="descname">TEST_SIGNAL</code><span class="sig-paren">(</span><em>test_name</em>, <em>signal</em><span class="sig-paren">)</span><a class="headerlink" href="#c.TEST_SIGNAL" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">test_name</span></code></dt>
<dd>test name</dd>
<dt><code class="docutils literal"><span class="pre">signal</span></code></dt>
<dd>signal number</dd>
</dl>
<p><strong>Description</strong></p>
<div class="highlight-c"><div class="highlight"><pre><span></span><span class="n">TEST_SIGNAL</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">signal</span><span class="p">)</span> <span class="p">{</span> <span class="n">implementation</span> <span class="p">}</span>
</pre></div>
</div>
<p>Defines a test by name and the expected term signal.
Names must be unique and tests must not be run in parallel.  The
implementation containing block is a function and scoping should be treated
as such.  Returning early may be performed with a bare “return;” statement.</p>
<p>EXPECT_* and ASSERT_* are valid in a <a class="reference internal" href="#c.TEST" title="TEST"><code class="xref c c-func docutils literal"><span class="pre">TEST()</span></code></a> { } context.</p>
<dl class="function">
<dt id="c.FIXTURE_DATA">
<code class="descname">FIXTURE_DATA</code><span class="sig-paren">(</span><em>datatype_name</em><span class="sig-paren">)</span><a class="headerlink" href="#c.FIXTURE_DATA" title="Permalink to this definition">¶</a></dt>
<dd><p>Wraps the struct name so we have one less argument to pass around</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">datatype_name</span></code></dt>
<dd>datatype name</dd>
</dl>
<p><strong>Description</strong></p>
<div class="highlight-c"><div class="highlight"><pre><span></span><span class="n">FIXTURE_DATA</span><span class="p">(</span><span class="n">datatype</span> <span class="n">name</span><span class="p">)</span>
</pre></div>
</div>
<p>This call may be used when the type of the fixture data
is needed.  In general, this should not be needed unless
the <em>self</em> is being passed to a helper directly.</p>
<dl class="function">
<dt id="c.FIXTURE">
<code class="descname">FIXTURE</code><span class="sig-paren">(</span><em>fixture_name</em><span class="sig-paren">)</span><a class="headerlink" href="#c.FIXTURE" title="Permalink to this definition">¶</a></dt>
<dd><p>Called once per fixture to setup the data and register</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">fixture_name</span></code></dt>
<dd>fixture name</dd>
</dl>
<p><strong>Description</strong></p>
<div class="highlight-c"><div class="highlight"><pre><span></span><span class="n">FIXTURE</span><span class="p">(</span><span class="n">datatype</span> <span class="n">name</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">type</span> <span class="n">property1</span><span class="p">;</span>
  <span class="p">...</span>
<span class="p">};</span>
</pre></div>
</div>
<p>Defines the data provided to <a class="reference internal" href="#c.TEST_F" title="TEST_F"><code class="xref c c-func docutils literal"><span class="pre">TEST_F()</span></code></a>-defined tests as <em>self</em>.  It should be
populated and cleaned up using <a class="reference internal" href="#c.FIXTURE_SETUP" title="FIXTURE_SETUP"><code class="xref c c-func docutils literal"><span class="pre">FIXTURE_SETUP()</span></code></a> and <a class="reference internal" href="#c.FIXTURE_TEARDOWN" title="FIXTURE_TEARDOWN"><code class="xref c c-func docutils literal"><span class="pre">FIXTURE_TEARDOWN()</span></code></a>.</p>
<dl class="function">
<dt id="c.FIXTURE_SETUP">
<code class="descname">FIXTURE_SETUP</code><span class="sig-paren">(</span><em>fixture_name</em><span class="sig-paren">)</span><a class="headerlink" href="#c.FIXTURE_SETUP" title="Permalink to this definition">¶</a></dt>
<dd><p>Prepares the setup function for the fixture. <em>_metadata</em> is included so that ASSERT_* work as a convenience</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">fixture_name</span></code></dt>
<dd>fixture name</dd>
</dl>
<p><strong>Description</strong></p>
<div class="highlight-c"><div class="highlight"><pre><span></span><span class="n">FIXTURE_SETUP</span><span class="p">(</span><span class="n">fixture</span> <span class="n">name</span><span class="p">)</span> <span class="p">{</span> <span class="n">implementation</span> <span class="p">}</span>
</pre></div>
</div>
<p>Populates the required “setup” function for a fixture.  An instance of the
datatype defined with <a class="reference internal" href="#c.FIXTURE_DATA" title="FIXTURE_DATA"><code class="xref c c-func docutils literal"><span class="pre">FIXTURE_DATA()</span></code></a> will be exposed as <em>self</em> for the
implementation.</p>
<p>ASSERT_* are valid for use in this context and will prempt the execution
of any dependent fixture tests.</p>
<p>A bare “return;” statement may be used to return early.</p>
<dl class="function">
<dt id="c.FIXTURE_TEARDOWN">
<code class="descname">FIXTURE_TEARDOWN</code><span class="sig-paren">(</span><em>fixture_name</em><span class="sig-paren">)</span><a class="headerlink" href="#c.FIXTURE_TEARDOWN" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">fixture_name</span></code></dt>
<dd>fixture name</dd>
</dl>
<p><strong>Description</strong></p>
<div class="highlight-c"><div class="highlight"><pre><span></span><span class="n">FIXTURE_TEARDOWN</span><span class="p">(</span><span class="n">fixture</span> <span class="n">name</span><span class="p">)</span> <span class="p">{</span> <span class="n">implementation</span> <span class="p">}</span>
</pre></div>
</div>
<p>Populates the required “teardown” function for a fixture.  An instance of the
datatype defined with <a class="reference internal" href="#c.FIXTURE_DATA" title="FIXTURE_DATA"><code class="xref c c-func docutils literal"><span class="pre">FIXTURE_DATA()</span></code></a> will be exposed as <em>self</em> for the
implementation to clean up.</p>
<p>A bare “return;” statement may be used to return early.</p>
<dl class="function">
<dt id="c.TEST_F">
<code class="descname">TEST_F</code><span class="sig-paren">(</span><em>fixture_name</em>, <em>test_name</em><span class="sig-paren">)</span><a class="headerlink" href="#c.TEST_F" title="Permalink to this definition">¶</a></dt>
<dd><p>Emits test registration and helpers for fixture-based test cases</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">fixture_name</span></code></dt>
<dd>fixture name</dd>
<dt><code class="docutils literal"><span class="pre">test_name</span></code></dt>
<dd>test name</dd>
</dl>
<p><strong>Description</strong></p>
<div class="highlight-c"><div class="highlight"><pre><span></span><span class="n">TEST_F</span><span class="p">(</span><span class="n">fixture</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span> <span class="p">{</span> <span class="n">implementation</span> <span class="p">}</span>
</pre></div>
</div>
<p>Defines a test that depends on a fixture (e.g., is part of a test case).
Very similar to <a class="reference internal" href="#c.TEST" title="TEST"><code class="xref c c-func docutils literal"><span class="pre">TEST()</span></code></a> except that <em>self</em> is the setup instance of fixture’s
datatype exposed for use by the implementation.</p>
<dl class="function">
<dt id="c.TEST_HARNESS_MAIN">
<code class="descname">TEST_HARNESS_MAIN</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#c.TEST_HARNESS_MAIN" title="Permalink to this definition">¶</a></dt>
<dd><p>Simple wrapper to run the test harness</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<p><strong>Description</strong></p>
<div class="highlight-c"><div class="highlight"><pre><span></span><span class="n">TEST_HARNESS_MAIN</span>
</pre></div>
</div>
<p>Use once to append a <code class="xref c c-func docutils literal"><span class="pre">main()</span></code> to the test file.</p>
</div>
<div class="section" id="operators">
<h3>Operators<a class="headerlink" href="#operators" title="Permalink to this headline">¶</a></h3>
<p>Operators for use in <a class="reference internal" href="#c.TEST" title="TEST"><code class="xref c c-func docutils literal"><span class="pre">TEST()</span></code></a> and <a class="reference internal" href="#c.TEST_F" title="TEST_F"><code class="xref c c-func docutils literal"><span class="pre">TEST_F()</span></code></a>.
ASSERT_* calls will stop test execution immediately.
EXPECT_* calls will emit a failure warning, note it, and continue.</p>
<dl class="function">
<dt id="c.ASSERT_EQ">
<code class="descname">ASSERT_EQ</code><span class="sig-paren">(</span><em>expected</em>, <em>seen</em><span class="sig-paren">)</span><a class="headerlink" href="#c.ASSERT_EQ" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">expected</span></code></dt>
<dd>expected value</dd>
<dt><code class="docutils literal"><span class="pre">seen</span></code></dt>
<dd>measured value</dd>
</dl>
<p><strong>Description</strong></p>
<p>ASSERT_EQ(expected, measured): expected == measured</p>
<dl class="function">
<dt id="c.ASSERT_NE">
<code class="descname">ASSERT_NE</code><span class="sig-paren">(</span><em>expected</em>, <em>seen</em><span class="sig-paren">)</span><a class="headerlink" href="#c.ASSERT_NE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">expected</span></code></dt>
<dd>expected value</dd>
<dt><code class="docutils literal"><span class="pre">seen</span></code></dt>
<dd>measured value</dd>
</dl>
<p><strong>Description</strong></p>
<p>ASSERT_NE(expected, measured): expected != measured</p>
<dl class="function">
<dt id="c.ASSERT_LT">
<code class="descname">ASSERT_LT</code><span class="sig-paren">(</span><em>expected</em>, <em>seen</em><span class="sig-paren">)</span><a class="headerlink" href="#c.ASSERT_LT" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">expected</span></code></dt>
<dd>expected value</dd>
<dt><code class="docutils literal"><span class="pre">seen</span></code></dt>
<dd>measured value</dd>
</dl>
<p><strong>Description</strong></p>
<p>ASSERT_LT(expected, measured): expected &lt; measured</p>
<dl class="function">
<dt id="c.ASSERT_LE">
<code class="descname">ASSERT_LE</code><span class="sig-paren">(</span><em>expected</em>, <em>seen</em><span class="sig-paren">)</span><a class="headerlink" href="#c.ASSERT_LE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">expected</span></code></dt>
<dd>expected value</dd>
<dt><code class="docutils literal"><span class="pre">seen</span></code></dt>
<dd>measured value</dd>
</dl>
<p><strong>Description</strong></p>
<p>ASSERT_LE(expected, measured): expected &lt;= measured</p>
<dl class="function">
<dt id="c.ASSERT_GT">
<code class="descname">ASSERT_GT</code><span class="sig-paren">(</span><em>expected</em>, <em>seen</em><span class="sig-paren">)</span><a class="headerlink" href="#c.ASSERT_GT" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">expected</span></code></dt>
<dd>expected value</dd>
<dt><code class="docutils literal"><span class="pre">seen</span></code></dt>
<dd>measured value</dd>
</dl>
<p><strong>Description</strong></p>
<p>ASSERT_GT(expected, measured): expected &gt; measured</p>
<dl class="function">
<dt id="c.ASSERT_GE">
<code class="descname">ASSERT_GE</code><span class="sig-paren">(</span><em>expected</em>, <em>seen</em><span class="sig-paren">)</span><a class="headerlink" href="#c.ASSERT_GE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">expected</span></code></dt>
<dd>expected value</dd>
<dt><code class="docutils literal"><span class="pre">seen</span></code></dt>
<dd>measured value</dd>
</dl>
<p><strong>Description</strong></p>
<p>ASSERT_GE(expected, measured): expected &gt;= measured</p>
<dl class="function">
<dt id="c.ASSERT_NULL">
<code class="descname">ASSERT_NULL</code><span class="sig-paren">(</span><em>seen</em><span class="sig-paren">)</span><a class="headerlink" href="#c.ASSERT_NULL" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">seen</span></code></dt>
<dd>measured value</dd>
</dl>
<p><strong>Description</strong></p>
<p>ASSERT_NULL(measured): NULL == measured</p>
<dl class="function">
<dt id="c.ASSERT_TRUE">
<code class="descname">ASSERT_TRUE</code><span class="sig-paren">(</span><em>seen</em><span class="sig-paren">)</span><a class="headerlink" href="#c.ASSERT_TRUE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">seen</span></code></dt>
<dd>measured value</dd>
</dl>
<p><strong>Description</strong></p>
<p>ASSERT_TRUE(measured): measured != 0</p>
<dl class="function">
<dt id="c.ASSERT_FALSE">
<code class="descname">ASSERT_FALSE</code><span class="sig-paren">(</span><em>seen</em><span class="sig-paren">)</span><a class="headerlink" href="#c.ASSERT_FALSE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">seen</span></code></dt>
<dd>measured value</dd>
</dl>
<p><strong>Description</strong></p>
<p>ASSERT_FALSE(measured): measured == 0</p>
<dl class="function">
<dt id="c.ASSERT_STREQ">
<code class="descname">ASSERT_STREQ</code><span class="sig-paren">(</span><em>expected</em>, <em>seen</em><span class="sig-paren">)</span><a class="headerlink" href="#c.ASSERT_STREQ" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">expected</span></code></dt>
<dd>expected value</dd>
<dt><code class="docutils literal"><span class="pre">seen</span></code></dt>
<dd>measured value</dd>
</dl>
<p><strong>Description</strong></p>
<p>ASSERT_STREQ(expected, measured): !strcmp(expected, measured)</p>
<dl class="function">
<dt id="c.ASSERT_STRNE">
<code class="descname">ASSERT_STRNE</code><span class="sig-paren">(</span><em>expected</em>, <em>seen</em><span class="sig-paren">)</span><a class="headerlink" href="#c.ASSERT_STRNE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">expected</span></code></dt>
<dd>expected value</dd>
<dt><code class="docutils literal"><span class="pre">seen</span></code></dt>
<dd>measured value</dd>
</dl>
<p><strong>Description</strong></p>
<p>ASSERT_STRNE(expected, measured): strcmp(expected, measured)</p>
<dl class="function">
<dt id="c.EXPECT_EQ">
<code class="descname">EXPECT_EQ</code><span class="sig-paren">(</span><em>expected</em>, <em>seen</em><span class="sig-paren">)</span><a class="headerlink" href="#c.EXPECT_EQ" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">expected</span></code></dt>
<dd>expected value</dd>
<dt><code class="docutils literal"><span class="pre">seen</span></code></dt>
<dd>measured value</dd>
</dl>
<p><strong>Description</strong></p>
<p>EXPECT_EQ(expected, measured): expected == measured</p>
<dl class="function">
<dt id="c.EXPECT_NE">
<code class="descname">EXPECT_NE</code><span class="sig-paren">(</span><em>expected</em>, <em>seen</em><span class="sig-paren">)</span><a class="headerlink" href="#c.EXPECT_NE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">expected</span></code></dt>
<dd>expected value</dd>
<dt><code class="docutils literal"><span class="pre">seen</span></code></dt>
<dd>measured value</dd>
</dl>
<p><strong>Description</strong></p>
<p>EXPECT_NE(expected, measured): expected != measured</p>
<dl class="function">
<dt id="c.EXPECT_LT">
<code class="descname">EXPECT_LT</code><span class="sig-paren">(</span><em>expected</em>, <em>seen</em><span class="sig-paren">)</span><a class="headerlink" href="#c.EXPECT_LT" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">expected</span></code></dt>
<dd>expected value</dd>
<dt><code class="docutils literal"><span class="pre">seen</span></code></dt>
<dd>measured value</dd>
</dl>
<p><strong>Description</strong></p>
<p>EXPECT_LT(expected, measured): expected &lt; measured</p>
<dl class="function">
<dt id="c.EXPECT_LE">
<code class="descname">EXPECT_LE</code><span class="sig-paren">(</span><em>expected</em>, <em>seen</em><span class="sig-paren">)</span><a class="headerlink" href="#c.EXPECT_LE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">expected</span></code></dt>
<dd>expected value</dd>
<dt><code class="docutils literal"><span class="pre">seen</span></code></dt>
<dd>measured value</dd>
</dl>
<p><strong>Description</strong></p>
<p>EXPECT_LE(expected, measured): expected &lt;= measured</p>
<dl class="function">
<dt id="c.EXPECT_GT">
<code class="descname">EXPECT_GT</code><span class="sig-paren">(</span><em>expected</em>, <em>seen</em><span class="sig-paren">)</span><a class="headerlink" href="#c.EXPECT_GT" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">expected</span></code></dt>
<dd>expected value</dd>
<dt><code class="docutils literal"><span class="pre">seen</span></code></dt>
<dd>measured value</dd>
</dl>
<p><strong>Description</strong></p>
<p>EXPECT_GT(expected, measured): expected &gt; measured</p>
<dl class="function">
<dt id="c.EXPECT_GE">
<code class="descname">EXPECT_GE</code><span class="sig-paren">(</span><em>expected</em>, <em>seen</em><span class="sig-paren">)</span><a class="headerlink" href="#c.EXPECT_GE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">expected</span></code></dt>
<dd>expected value</dd>
<dt><code class="docutils literal"><span class="pre">seen</span></code></dt>
<dd>measured value</dd>
</dl>
<p><strong>Description</strong></p>
<p>EXPECT_GE(expected, measured): expected &gt;= measured</p>
<dl class="function">
<dt id="c.EXPECT_NULL">
<code class="descname">EXPECT_NULL</code><span class="sig-paren">(</span><em>seen</em><span class="sig-paren">)</span><a class="headerlink" href="#c.EXPECT_NULL" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">seen</span></code></dt>
<dd>measured value</dd>
</dl>
<p><strong>Description</strong></p>
<p>EXPECT_NULL(measured): NULL == measured</p>
<dl class="function">
<dt id="c.EXPECT_TRUE">
<code class="descname">EXPECT_TRUE</code><span class="sig-paren">(</span><em>seen</em><span class="sig-paren">)</span><a class="headerlink" href="#c.EXPECT_TRUE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">seen</span></code></dt>
<dd>measured value</dd>
</dl>
<p><strong>Description</strong></p>
<p>EXPECT_TRUE(measured): 0 != measured</p>
<dl class="function">
<dt id="c.EXPECT_FALSE">
<code class="descname">EXPECT_FALSE</code><span class="sig-paren">(</span><em>seen</em><span class="sig-paren">)</span><a class="headerlink" href="#c.EXPECT_FALSE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">seen</span></code></dt>
<dd>measured value</dd>
</dl>
<p><strong>Description</strong></p>
<p>EXPECT_FALSE(measured): 0 == measured</p>
<dl class="function">
<dt id="c.EXPECT_STREQ">
<code class="descname">EXPECT_STREQ</code><span class="sig-paren">(</span><em>expected</em>, <em>seen</em><span class="sig-paren">)</span><a class="headerlink" href="#c.EXPECT_STREQ" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">expected</span></code></dt>
<dd>expected value</dd>
<dt><code class="docutils literal"><span class="pre">seen</span></code></dt>
<dd>measured value</dd>
</dl>
<p><strong>Description</strong></p>
<p>EXPECT_STREQ(expected, measured): !strcmp(expected, measured)</p>
<dl class="function">
<dt id="c.EXPECT_STRNE">
<code class="descname">EXPECT_STRNE</code><span class="sig-paren">(</span><em>expected</em>, <em>seen</em><span class="sig-paren">)</span><a class="headerlink" href="#c.EXPECT_STRNE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">expected</span></code></dt>
<dd>expected value</dd>
<dt><code class="docutils literal"><span class="pre">seen</span></code></dt>
<dd>measured value</dd>
</dl>
<p><strong>Description</strong></p>
<p>EXPECT_STRNE(expected, measured): strcmp(expected, measured)</p>
</div>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../doc-guide/index.html" class="btn btn-neutral float-right" title="How to write kernel documentation" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="kgdb.html" class="btn btn-neutral" title="Using kgdb, kdb and the kernel debugger internals" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright The kernel development community.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'4.16.0-rc1+',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>