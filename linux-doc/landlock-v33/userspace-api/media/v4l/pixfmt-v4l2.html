

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>2.1. Single-planar format structure &mdash; The Linux Kernel 5.12.0-rc3+ documentation</title>
  

  
  <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/theme_overrides.css" type="text/css" />

  
  

  
  

  

  
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../../" src="../../../_static/documentation_options.js"></script>
        <script src="../../../_static/jquery.js"></script>
        <script src="../../../_static/underscore.js"></script>
        <script src="../../../_static/doctools.js"></script>
    
    <script type="text/javascript" src="../../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="2.2. Multi-planar format structures" href="pixfmt-v4l2-mplane.html" />
    <link rel="prev" title="2. Image Formats" href="pixfmt.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../../index.html" class="icon icon-home"> The Linux Kernel
          

          
          </a>

          
            
            
              <div class="version">
                5.12.0-rc3
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../../../admin-guide/index.html">The Linux kernel user’s and administrator’s guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../kbuild/index.html">Kernel Build System</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../firmware-guide/index.html">The Linux kernel firmware guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../devicetree/index.html">Open Firmware and Device Tree</a></li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../../index.html">The Linux kernel user-space API guide</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../no_new_privs.html">No New Privileges Flag</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../seccomp_filter.html">Seccomp BPF (SECure COMPuting with filters)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../landlock.html">Landlock: unprivileged access control</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../unshare.html">unshare system call</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../spec_ctrl.html">Speculation Control</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../accelerators/ocxl.html">OpenCAPI (Open Coherent Accelerator Processor Interface)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../ioctl/index.html">IOCTLs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../iommu.html">IOMMU Userspace API</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../index.html">Linux Media Infrastructure userspace API</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../intro.html">Introduction</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="v4l2.html">Part I - Video for Linux API</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="common.html">1. Common API Elements</a></li>
<li class="toctree-l4 current"><a class="reference internal" href="pixfmt.html">2. Image Formats</a></li>
<li class="toctree-l4"><a class="reference internal" href="io.html">3. Input/Output</a></li>
<li class="toctree-l4"><a class="reference internal" href="devices.html">4. Interfaces</a></li>
<li class="toctree-l4"><a class="reference internal" href="libv4l.html">5. Libv4l Userspace Library</a></li>
<li class="toctree-l4"><a class="reference internal" href="compat.html">6. Changes</a></li>
<li class="toctree-l4"><a class="reference internal" href="user-func.html">7. Function Reference</a></li>
<li class="toctree-l4"><a class="reference internal" href="common-defs.html">8. Common definitions for V4L2 and V4L2 subdev interfaces</a></li>
<li class="toctree-l4"><a class="reference internal" href="videodev.html">9. Video For Linux Two Header File</a></li>
<li class="toctree-l4"><a class="reference internal" href="capture-example.html">10. Video Capture Example</a></li>
<li class="toctree-l4"><a class="reference internal" href="v4l2grab-example.html">11. Video Grabber example using libv4l</a></li>
<li class="toctree-l4"><a class="reference internal" href="biblio.html">12. References</a></li>
<li class="toctree-l4"><a class="reference internal" href="v4l2.html#revision-and-copyright">Revision and Copyright</a></li>
<li class="toctree-l4"><a class="reference internal" href="v4l2.html#revision-history">Revision History</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../dvb/dvbapi.html">Part II - Digital TV API</a></li>
<li class="toctree-l3"><a class="reference internal" href="../rc/remote_controllers.html">Part III - Remote Controller API</a></li>
<li class="toctree-l3"><a class="reference internal" href="../mediactl/media-controller.html">Part IV - Media Controller API</a></li>
<li class="toctree-l3"><a class="reference internal" href="../cec/cec-api.html">Part V - Consumer Electronics Control API</a></li>
<li class="toctree-l3"><a class="reference internal" href="../gen-errors.html">Generic Error Codes</a></li>
<li class="toctree-l3"><a class="reference internal" href="../glossary.html">Glossary</a></li>
<li class="toctree-l3"><a class="reference internal" href="../fdl-appendix.html">GNU Free Documentation License</a></li>
<li class="toctree-l3"><a class="reference internal" href="../drivers/index.html">Video4Linux (V4L)  driver-specific documentation</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../sysfs-platform_profile.html">Platform Profile Selection (e.g. /sys/firmware/acpi/platform_profile)</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../process/index.html">Working with the kernel development community</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../dev-tools/index.html">Development tools for the kernel</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../doc-guide/index.html">How to write kernel documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../kernel-hacking/index.html">Kernel Hacking Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../trace/index.html">Linux Tracing Technologies</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../maintainer/index.html">Kernel Maintainer Handbook</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../fault-injection/index.html">fault-injection</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../livepatch/index.html">Kernel Livepatching</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../driver-api/index.html">The Linux driver implementer’s API guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../core-api/index.html">Core API Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../locking/index.html">locking</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../accounting/index.html">Accounting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../block/index.html">Block</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../cdrom/index.html">cdrom</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../cpu-freq/index.html">Linux CPUFreq - CPU frequency and voltage scaling code in the Linux(TM) kernel</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../ide/index.html">Integrated Drive Electronics (IDE)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../fb/index.html">Frame Buffer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../fpga/index.html">fpga</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../hid/index.html">Human Interface Devices (HID)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../i2c/index.html">I2C/SMBus Subsystem</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../iio/index.html">Industrial I/O</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../isdn/index.html">ISDN</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../infiniband/index.html">InfiniBand</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../leds/index.html">LEDs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../netlabel/index.html">NetLabel</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../networking/index.html">Linux Networking Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../pcmcia/index.html">pcmcia</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../power/index.html">Power Management</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../target/index.html">TCM Virtual Device</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../timers/index.html">timers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../spi/index.html">Serial Peripheral Interface (SPI)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../w1/index.html">1-Wire Subsystem</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../watchdog/index.html">Linux Watchdog Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../virt/index.html">Linux Virtualization Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../input/index.html">The Linux Input Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../hwmon/index.html">Linux Hardware Monitoring</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../gpu/index.html">Linux GPU Driver Developer’s Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../security/index.html">Security Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../sound/index.html">Linux Sound Subsystem Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../crypto/index.html">Linux Kernel Crypto API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../filesystems/index.html">Filesystems in the Linux kernel</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../vm/index.html">Linux Memory Management Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../bpf/index.html">BPF Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../usb/index.html">USB support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../PCI/index.html">Linux PCI Bus Subsystem</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../scsi/index.html">Linux SCSI Subsystem</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../misc-devices/index.html">Assorted Miscellaneous Devices Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../scheduler/index.html">Linux Scheduler</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../mhi/index.html">MHI</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../asm-annotations.html">Assembler Annotations</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../arm/index.html">ARM Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../arm64/index.html">ARM64 Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../ia64/index.html">IA-64 Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../m68k/index.html">m68k Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../mips/index.html">MIPS-specific Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../nios2/index.html">Nios II Specific Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../openrisc/index.html">OpenRISC Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../parisc/index.html">PA-RISC Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../powerpc/index.html">powerpc</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../riscv/index.html">RISC-V architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../s390/index.html">s390 Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../sh/index.html">SuperH Interfaces Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../sparc/index.html">Sparc Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../x86/index.html">x86-specific Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../xtensa/index.html">Xtensa Architecture</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../staging/index.html">Unsorted Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../staging/index.html#atomic-types">Atomic Types</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../staging/index.html#atomic-bitops">Atomic bitops</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../staging/index.html#memory-barriers">Memory Barriers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../watch_queue.html">General notification mechanism</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../translations/index.html">Translations</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">The Linux Kernel</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../../index.html">The Linux kernel user-space API guide</a> &raquo;</li>
        
          <li><a href="../index.html">Linux Media Infrastructure userspace API</a> &raquo;</li>
        
          <li><a href="v4l2.html">Part I - Video for Linux API</a> &raquo;</li>
        
          <li><a href="pixfmt.html"><span class="section-number">2. </span>Image Formats</a> &raquo;</li>
        
      <li><span class="section-number">2.1. </span>Single-planar format structure</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../../../_sources/userspace-api/media/v4l/pixfmt-v4l2.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="single-planar-format-structure">
<h1><span class="section-number">2.1. </span>Single-planar format structure<a class="headerlink" href="#single-planar-format-structure" title="Permalink to this headline">¶</a></h1>
<dl class="c type">
<dt id="c.v4l2_pix_format">
<em class="property">type </em><code class="sig-name descname">v4l2_pix_format</code><a class="headerlink" href="#c.v4l2_pix_format" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<table class="longtable docutils align-default" id="id1">
<caption><span class="caption-text">struct v4l2_pix_format</span><a class="headerlink" href="#id1" title="Permalink to this table">¶</a></caption>
<colgroup>
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 50%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>__u32</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">width</span></code></p></td>
<td><p>Image width in pixels.</p></td>
</tr>
<tr class="row-even"><td><p>__u32</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">height</span></code></p></td>
<td><p>Image height in pixels. If <code class="docutils literal notranslate"><span class="pre">field</span></code> is one of <code class="docutils literal notranslate"><span class="pre">V4L2_FIELD_TOP</span></code>,
<code class="docutils literal notranslate"><span class="pre">V4L2_FIELD_BOTTOM</span></code> or <code class="docutils literal notranslate"><span class="pre">V4L2_FIELD_ALTERNATE</span></code> then height
refers to the number of lines in the field, otherwise it refers to
the number of lines in the frame (which is twice the field height
for interlaced formats).</p></td>
</tr>
<tr class="row-odd"><td colspan="3"><p> Applications set these fields to request an image
size, drivers return the closest possible values. In case of
planar formats the <code class="docutils literal notranslate"><span class="pre">width</span></code> and <code class="docutils literal notranslate"><span class="pre">height</span></code> applies to the largest
plane. To avoid ambiguities drivers must return values rounded up
to a multiple of the scale factor of any smaller planes. For
example when the image format is YUV 4:2:0, <code class="docutils literal notranslate"><span class="pre">width</span></code> and
<code class="docutils literal notranslate"><span class="pre">height</span></code> must be multiples of two.</p>
<p>For compressed formats that contain the resolution information encoded
inside the stream, when fed to a stateful mem2mem decoder, the fields
may be zero to rely on the decoder to detect the right values. For more
details see <a class="reference internal" href="dev-decoder.html#decoder"><span class="std std-ref">Memory-to-Memory Stateful Video Decoder Interface</span></a> and format descriptions.</p>
<p>For compressed formats on the CAPTURE side of a stateful mem2mem
encoder, the fields must be zero, since the coded size is expected to
be calculated internally by the encoder itself, based on the OUTPUT
side. For more details see <a class="reference internal" href="dev-encoder.html#encoder"><span class="std std-ref">Memory-to-Memory Stateful Video Encoder Interface</span></a> and format descriptions.</p>
</td>
</tr>
<tr class="row-even"><td><p>__u32</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">pixelformat</span></code></p></td>
<td><p>The pixel format or type of compression, set by the application.
This is a little endian
<a class="reference internal" href="vidioc-enum-fmt.html#v4l2-fourcc"><span class="std std-ref">four character code</span></a>. V4L2 defines standard
RGB formats in <a class="reference internal" href="pixfmt-rgb.html#pixfmt-rgb"><span class="std std-ref">RGB Formats</span></a>, YUV formats in
<a class="reference internal" href="yuv-formats.html#yuv-formats"><span class="std std-ref">YUV Formats</span></a>, and reserved codes in
<a class="reference internal" href="pixfmt-reserved.html#reserved-formats"><span class="std std-ref">Reserved Image Formats</span></a></p></td>
</tr>
<tr class="row-odd"><td><p>__u32</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">field</span></code></p></td>
<td><p>Field order, from enum <a class="reference internal" href="field-order.html#c.v4l2_field" title="v4l2_field"><code class="xref c c-type docutils literal notranslate"><span class="pre">v4l2_field</span></code></a>.
Video images are typically interlaced. Applications can request to
capture or output only the top or bottom field, or both fields
interlaced or sequentially stored in one buffer or alternating in
separate buffers. Drivers return the actual field order selected.
For more details on fields see <a class="reference internal" href="field-order.html#field-order"><span class="std std-ref">Field Order</span></a>.</p></td>
</tr>
<tr class="row-even"><td><p>__u32</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">bytesperline</span></code></p></td>
<td><p>Distance in bytes between the leftmost pixels in two adjacent
lines.</p></td>
</tr>
<tr class="row-odd"><td colspan="3"><p></p>
<p>Both applications and drivers can set this field to request
padding bytes at the end of each line. Drivers however may ignore
the value requested by the application, returning <code class="docutils literal notranslate"><span class="pre">width</span></code> times
bytes per pixel or a larger value required by the hardware. That
implies applications can just set this field to zero to get a
reasonable default.</p>
<p>Video hardware may access padding bytes, therefore they must
reside in accessible memory. Consider cases where padding bytes
after the last line of an image cross a system page boundary.
Input devices may write padding bytes, the value is undefined.
Output devices ignore the contents of padding bytes.</p>
<p>When the image format is planar the <code class="docutils literal notranslate"><span class="pre">bytesperline</span></code> value applies
to the first plane and is divided by the same factor as the
<code class="docutils literal notranslate"><span class="pre">width</span></code> field for the other planes. For example the Cb and Cr
planes of a YUV 4:2:0 image have half as many padding bytes
following each line as the Y plane. To avoid ambiguities drivers
must return a <code class="docutils literal notranslate"><span class="pre">bytesperline</span></code> value rounded up to a multiple of
the scale factor.</p>
<p>For compressed formats the <code class="docutils literal notranslate"><span class="pre">bytesperline</span></code> value makes no sense.
Applications and drivers must set this to 0 in that case.</p>
</td>
</tr>
<tr class="row-even"><td><p>__u32</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">sizeimage</span></code></p></td>
<td><p>Size in bytes of the buffer to hold a complete image, set by the
driver. Usually this is <code class="docutils literal notranslate"><span class="pre">bytesperline</span></code> times <code class="docutils literal notranslate"><span class="pre">height</span></code>. When
the image consists of variable length compressed data this is the
number of bytes required by the codec to support the worst-case
compression scenario.</p>
<p>The driver will set the value for uncompressed images.</p>
<p>Clients are allowed to set the sizeimage field for variable length
compressed data flagged with <code class="docutils literal notranslate"><span class="pre">V4L2_FMT_FLAG_COMPRESSED</span></code> at
<a class="reference internal" href="vidioc-enum-fmt.html#vidioc-enum-fmt"><span class="std std-ref">ioctl VIDIOC_ENUM_FMT</span></a>, but the driver may ignore it and set the
value itself, or it may modify the provided value based on
alignment requirements or minimum/maximum size requirements.
If the client wants to leave this to the driver, then it should
set sizeimage to 0.</p>
</td>
</tr>
<tr class="row-odd"><td><p>__u32</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">colorspace</span></code></p></td>
<td><p>Image colorspace, from enum <a class="reference internal" href="colorspaces-defs.html#c.v4l2_colorspace" title="v4l2_colorspace"><code class="xref c c-type docutils literal notranslate"><span class="pre">v4l2_colorspace</span></code></a>.
This information supplements the <code class="docutils literal notranslate"><span class="pre">pixelformat</span></code> and must be set
by the driver for capture streams and by the application for
output streams, see <a class="reference internal" href="colorspaces.html#colorspaces"><span class="std std-ref">Colorspaces</span></a>. If the application sets the
flag <code class="docutils literal notranslate"><span class="pre">V4L2_PIX_FMT_FLAG_SET_CSC</span></code> then the application can set
this field for a capture stream to request a specific colorspace
for the captured image data. If the driver cannot handle requested
conversion, it will return another supported colorspace.
The driver indicates that colorspace conversion is supported by setting
the flag V4L2_FMT_FLAG_CSC_COLORSPACE in the corresponding struct
<code class="xref c c-type docutils literal notranslate"><span class="pre">v4l2_fmtdesc</span></code> during enumeration. See <a class="reference internal" href="vidioc-enum-fmt.html#fmtdesc-flags"><span class="std std-ref">Image Format Description Flags</span></a>.</p></td>
</tr>
<tr class="row-even"><td><p>__u32</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">priv</span></code></p></td>
<td><p>This field indicates whether the remaining fields of the
struct <a class="reference internal" href="#c.v4l2_pix_format" title="v4l2_pix_format"><code class="xref c c-type docutils literal notranslate"><span class="pre">v4l2_pix_format</span></code></a>, also called the
extended fields, are valid. When set to
<code class="docutils literal notranslate"><span class="pre">V4L2_PIX_FMT_PRIV_MAGIC</span></code>, it indicates that the extended fields
have been correctly initialized. When set to any other value it
indicates that the extended fields contain undefined values.</p>
<p>Applications that wish to use the pixel format extended fields
must first ensure that the feature is supported by querying the
device for the <a class="reference internal" href="querycap.html#querycap"><span class="std std-ref">V4L2_CAP_EXT_PIX_FORMAT</span></a>
capability. If the capability isn’t set the pixel format extended
fields are not supported and using the extended fields will lead
to undefined results.</p>
<p>To use the extended fields, applications must set the <code class="docutils literal notranslate"><span class="pre">priv</span></code>
field to <code class="docutils literal notranslate"><span class="pre">V4L2_PIX_FMT_PRIV_MAGIC</span></code>, initialize all the extended
fields and zero the unused bytes of the
struct <code class="xref c c-type docutils literal notranslate"><span class="pre">v4l2_format</span></code> <code class="docutils literal notranslate"><span class="pre">raw_data</span></code> field.</p>
<p>When the <code class="docutils literal notranslate"><span class="pre">priv</span></code> field isn’t set to <code class="docutils literal notranslate"><span class="pre">V4L2_PIX_FMT_PRIV_MAGIC</span></code>
drivers must act as if all the extended fields were set to zero.
On return drivers must set the <code class="docutils literal notranslate"><span class="pre">priv</span></code> field to
<code class="docutils literal notranslate"><span class="pre">V4L2_PIX_FMT_PRIV_MAGIC</span></code> and all the extended fields to
applicable values.</p>
</td>
</tr>
<tr class="row-odd"><td><p>__u32</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">flags</span></code></p></td>
<td><p>Flags set by the application or driver, see <a class="reference internal" href="#format-flags"><span class="std std-ref">Format Flags</span></a>.</p></td>
</tr>
<tr class="row-even"><td><p>union {</p></td>
<td colspan="2"><p>(anonymous)</p></td>
</tr>
<tr class="row-odd"><td><p>__u32</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">ycbcr_enc</span></code></p></td>
<td><p>Y’CbCr encoding, from enum <a class="reference internal" href="colorspaces-defs.html#c.v4l2_ycbcr_encoding" title="v4l2_ycbcr_encoding"><code class="xref c c-type docutils literal notranslate"><span class="pre">v4l2_ycbcr_encoding</span></code></a>.
This information supplements the <code class="docutils literal notranslate"><span class="pre">colorspace</span></code> and must be set by
the driver for capture streams and by the application for output
streams, see <a class="reference internal" href="colorspaces.html#colorspaces"><span class="std std-ref">Colorspaces</span></a>. If the application sets the
flag <code class="docutils literal notranslate"><span class="pre">V4L2_PIX_FMT_FLAG_SET_CSC</span></code> then the application can set
this field for a capture stream to request a specific Y’CbCr encoding
for the captured image data. If the driver cannot handle requested
conversion, it will return another supported encoding.
This field is ignored for HSV pixelformats. The driver indicates that
ycbcr_enc conversion is supported by setting the flag
V4L2_FMT_FLAG_CSC_YCBCR_ENC in the corresponding struct
<code class="xref c c-type docutils literal notranslate"><span class="pre">v4l2_fmtdesc</span></code> during enumeration. See <a class="reference internal" href="vidioc-enum-fmt.html#fmtdesc-flags"><span class="std std-ref">Image Format Description Flags</span></a>.</p></td>
</tr>
<tr class="row-even"><td><p>__u32</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">hsv_enc</span></code></p></td>
<td><p>HSV encoding, from enum <a class="reference internal" href="colorspaces-defs.html#c.v4l2_hsv_encoding" title="v4l2_hsv_encoding"><code class="xref c c-type docutils literal notranslate"><span class="pre">v4l2_hsv_encoding</span></code></a>.
This information supplements the <code class="docutils literal notranslate"><span class="pre">colorspace</span></code> and must be set by
the driver for capture streams and by the application for output
streams, see <a class="reference internal" href="colorspaces.html#colorspaces"><span class="std std-ref">Colorspaces</span></a>. If the application sets the flag
<code class="docutils literal notranslate"><span class="pre">V4L2_PIX_FMT_FLAG_SET_CSC</span></code> then the application can set this
field for a capture stream to request a specific HSV encoding for the
captured image data. If the driver cannot handle requested
conversion, it will return another supported encoding.
This field is ignored for non-HSV pixelformats. The driver indicates
that hsv_enc conversion is supported by setting the flag
V4L2_FMT_FLAG_CSC_HSV_ENC in the corresponding struct
<code class="xref c c-type docutils literal notranslate"><span class="pre">v4l2_fmtdesc</span></code> during enumeration. See <a class="reference internal" href="vidioc-enum-fmt.html#fmtdesc-flags"><span class="std std-ref">Image Format Description Flags</span></a>.</p></td>
</tr>
<tr class="row-odd"><td><p>}</p></td>
<td colspan="2"></td>
</tr>
<tr class="row-even"><td><p>__u32</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">quantization</span></code></p></td>
<td><p>Quantization range, from enum <a class="reference internal" href="colorspaces-defs.html#c.v4l2_quantization" title="v4l2_quantization"><code class="xref c c-type docutils literal notranslate"><span class="pre">v4l2_quantization</span></code></a>.
This information supplements the <code class="docutils literal notranslate"><span class="pre">colorspace</span></code> and must be set by
the driver for capture streams and by the application for output
streams, see <a class="reference internal" href="colorspaces.html#colorspaces"><span class="std std-ref">Colorspaces</span></a>. If the application sets the flag
<code class="docutils literal notranslate"><span class="pre">V4L2_PIX_FMT_FLAG_SET_CSC</span></code> then the application can set
this field for a capture stream to request a specific quantization
range for the captured image data. If the driver cannot handle requested
conversion, it will return another supported quantization.
The driver indicates that quantization conversion is supported by setting
the flag V4L2_FMT_FLAG_CSC_QUANTIZATION in the corresponding struct
<code class="xref c c-type docutils literal notranslate"><span class="pre">v4l2_fmtdesc</span></code> during enumeration. See <a class="reference internal" href="vidioc-enum-fmt.html#fmtdesc-flags"><span class="std std-ref">Image Format Description Flags</span></a>.</p></td>
</tr>
<tr class="row-odd"><td><p>__u32</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">xfer_func</span></code></p></td>
<td><p>Transfer function, from enum <a class="reference internal" href="colorspaces-defs.html#c.v4l2_xfer_func" title="v4l2_xfer_func"><code class="xref c c-type docutils literal notranslate"><span class="pre">v4l2_xfer_func</span></code></a>.
This information supplements the <code class="docutils literal notranslate"><span class="pre">colorspace</span></code> and must be set by
the driver for capture streams and by the application for output
streams, see <a class="reference internal" href="colorspaces.html#colorspaces"><span class="std std-ref">Colorspaces</span></a>. If the application sets the flag
<code class="docutils literal notranslate"><span class="pre">V4L2_PIX_FMT_FLAG_SET_CSC</span></code> then the application can set
this field for a capture stream to request a specific transfer function
for the captured image data. If the driver cannot handle requested
conversion, it will return another supported transfer function.
The driver indicates that xfer_func conversion is supported by setting
the flag V4L2_FMT_FLAG_CSC_XFER_FUNC in the corresponding struct
<code class="xref c c-type docutils literal notranslate"><span class="pre">v4l2_fmtdesc</span></code> during enumeration. See <a class="reference internal" href="vidioc-enum-fmt.html#fmtdesc-flags"><span class="std std-ref">Image Format Description Flags</span></a>.</p></td>
</tr>
</tbody>
</table>
<span id="format-flags"></span><table class="docutils align-default" id="id2">
<caption><span class="caption-text">Format Flags</span><a class="headerlink" href="#id2" title="Permalink to this table">¶</a></caption>
<colgroup>
<col style="width: 38%" />
<col style="width: 13%" />
<col style="width: 50%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">V4L2_PIX_FMT_FLAG_PREMUL_ALPHA</span></code></p></td>
<td><p>0x00000001</p></td>
<td><p>The color values are premultiplied by the alpha channel value. For
example, if a light blue pixel with 50% transparency was described
by RGBA values (128, 192, 255, 128), the same pixel described with
premultiplied colors would be described by RGBA values (64, 96,
128, 128)</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">V4L2_PIX_FMT_FLAG_SET_CSC</span></code></p>
</td>
<td><p>0x00000002</p>
</td>
<td><p id="v4l2-pix-fmt-flag-set-csc">Set by the application. It is only used for capture and is
ignored for output streams. If set, then request the device to do
colorspace conversion from the received colorspace to the requested
colorspace values. If the colorimetry field (<code class="docutils literal notranslate"><span class="pre">colorspace</span></code>, <code class="docutils literal notranslate"><span class="pre">xfer_func</span></code>,
<code class="docutils literal notranslate"><span class="pre">ycbcr_enc</span></code>, <code class="docutils literal notranslate"><span class="pre">hsv_enc</span></code> or <code class="docutils literal notranslate"><span class="pre">quantization</span></code>) is set to <code class="docutils literal notranslate"><span class="pre">*_DEFAULT</span></code>,
then that colorimetry setting will remain unchanged from what was received.
So in order to change the quantization, only the <code class="docutils literal notranslate"><span class="pre">quantization</span></code> field shall
be set to non default value (<code class="docutils literal notranslate"><span class="pre">V4L2_QUANTIZATION_FULL_RANGE</span></code> or
<code class="docutils literal notranslate"><span class="pre">V4L2_QUANTIZATION_LIM_RANGE</span></code>) and all other colorimetry fields shall
be set to <code class="docutils literal notranslate"><span class="pre">*_DEFAULT</span></code>.</p>
<p>To check which conversions are supported by the hardware for the current
pixel format, see <a class="reference internal" href="vidioc-enum-fmt.html#fmtdesc-flags"><span class="std std-ref">Image Format Description Flags</span></a>.</p>
</td>
</tr>
</tbody>
</table>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="pixfmt-v4l2-mplane.html" class="btn btn-neutral float-right" title="2.2. Multi-planar format structures" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="pixfmt.html" class="btn btn-neutral float-left" title="2. Image Formats" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright The kernel development community.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>