

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>2.10. ioctls CEC_G_MODE and CEC_S_MODE &mdash; The Linux Kernel 5.7.0-rc5+ documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../../" src="../../../_static/documentation_options.js"></script>
        <script src="../../../_static/jquery.js"></script>
        <script src="../../../_static/underscore.js"></script>
        <script src="../../../_static/doctools.js"></script>
        <script src="../../../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/theme_overrides.css" type="text/css" />
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="2.11. ioctls CEC_RECEIVE and CEC_TRANSMIT" href="cec-ioc-receive.html" />
    <link rel="prev" title="2.9. ioctl CEC_DQEVENT" href="cec-ioc-dqevent.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../../index.html" class="icon icon-home"> The Linux Kernel
          

          
          </a>

          
            
            
              <div class="version">
                5.7.0-rc5
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../../../admin-guide/index.html">The Linux kernel user’s and administrator’s guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../kbuild/index.html">Kernel Build System</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../firmware-guide/index.html">The Linux kernel firmware guide</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../userspace-api/index.html">The Linux kernel user-space API guide</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../process/index.html">Working with the kernel development community</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../dev-tools/index.html">Development tools for the kernel</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../doc-guide/index.html">How to write kernel documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../kernel-hacking/index.html">Kernel Hacking Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../trace/index.html">Linux Tracing Technologies</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../maintainer/index.html">Kernel Maintainer Handbook</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../fault-injection/index.html">fault-injection</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../livepatch/index.html">Kernel Livepatching</a></li>
</ul>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../driver-api/index.html">The Linux driver implementer’s API guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../core-api/index.html">Core API Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../locking/index.html">locking</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../accounting/index.html">Accounting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../block/index.html">Block</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../cdrom/index.html">cdrom</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../cpu-freq/index.html">Linux CPUFreq - CPU frequency and voltage scaling code in the Linux(TM) kernel</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../ide/index.html">Integrated Drive Electronics (IDE)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../fb/index.html">Frame Buffer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../fpga/index.html">fpga</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../hid/index.html">Human Interface Devices (HID)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../i2c/index.html">I2C/SMBus Subsystem</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../iio/index.html">Industrial I/O</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../isdn/index.html">ISDN</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../infiniband/index.html">InfiniBand</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../leds/index.html">LEDs</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../index.html">Linux Media Subsystem Documentation</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="../../media_uapi.html">Linux Media Infrastructure userspace API</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../../intro.html">Introduction</a></li>
<li class="toctree-l3"><a class="reference internal" href="../v4l/v4l2.html">Part I - Video for Linux API</a></li>
<li class="toctree-l3"><a class="reference internal" href="../dvb/dvbapi.html">Part II - Digital TV API</a></li>
<li class="toctree-l3"><a class="reference internal" href="../rc/remote_controllers.html">Part III - Remote Controller API</a></li>
<li class="toctree-l3"><a class="reference internal" href="../mediactl/media-controller.html">Part IV - Media Controller API</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="cec-api.html">Part V - Consumer Electronics Control API</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="cec-intro.html">1. Introduction</a></li>
<li class="toctree-l4 current"><a class="reference internal" href="cec-funcs.html">2. Function Reference</a></li>
<li class="toctree-l4"><a class="reference internal" href="cec-pin-error-inj.html">3. CEC Pin Framework Error Injection</a></li>
<li class="toctree-l4"><a class="reference internal" href="cec-header.html">4. CEC Header File</a></li>
<li class="toctree-l4"><a class="reference internal" href="cec-api.html#revision-and-copyright">Revision and Copyright</a></li>
<li class="toctree-l4"><a class="reference internal" href="cec-api.html#revision-history">Revision History</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../gen-errors.html">Generic Error Codes</a></li>
<li class="toctree-l3"><a class="reference internal" href="../fdl-appendix.html">GNU Free Documentation License</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../media_kapi.html">Media subsystem kernel internal API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../dvb-drivers/index.html">Linux Digital TV driver-specific documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../v4l-drivers/index.html">Video4Linux (V4L)  driver-specific documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cec-drivers/index.html">CEC driver-specific documentation</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../netlabel/index.html">NetLabel</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../networking/index.html">Linux Networking Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../pcmcia/index.html">pcmcia</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../power/index.html">Power Management</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../target/index.html">TCM Virtual Device</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../timers/index.html">timers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../spi/index.html">Serial Peripheral Interface (SPI)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../w1/index.html">1-Wire Subsystem</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../watchdog/index.html">Linux Watchdog Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../virt/index.html">Linux Virtualization Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../input/index.html">The Linux Input Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../hwmon/index.html">Linux Hardware Monitoring</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../gpu/index.html">Linux GPU Driver Developer’s Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../security/index.html">Security Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../sound/index.html">Linux Sound Subsystem Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../crypto/index.html">Linux Kernel Crypto API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../filesystems/index.html">Filesystems in the Linux kernel</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../vm/index.html">Linux Memory Management Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../bpf/index.html">BPF Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../usb/index.html">USB support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../PCI/index.html">Linux PCI Bus Subsystem</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../scsi/index.html">Linux SCSI Subsystem</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../misc-devices/index.html">Assorted Miscellaneous Devices Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../scheduler/index.html">Linux Scheduler</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../mhi/index.html">MHI</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../asm-annotations.html">Assembler Annotations</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../arm/index.html">ARM Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../arm64/index.html">ARM64 Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../ia64/index.html">IA-64 Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../m68k/index.html">m68k Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../mips/index.html">MIPS-specific Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../nios2/nios2.html">Linux on the Nios II architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../openrisc/index.html">OpenRISC Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../parisc/index.html">PA-RISC Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../powerpc/index.html">powerpc</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../riscv/index.html">RISC-V architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../s390/index.html">s390 Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../sh/index.html">SuperH Interfaces Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../sparc/index.html">Sparc Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../x86/index.html">x86-specific Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../xtensa/index.html">Xtensa Architecture</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../filesystems/ext4/index.html">ext4 Data Structures and Algorithms</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../translations/index.html">Translations</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">The Linux Kernel</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../../index.html">Linux Media Subsystem Documentation</a> &raquo;</li>
        
          <li><a href="../../media_uapi.html">Linux Media Infrastructure userspace API</a> &raquo;</li>
        
          <li><a href="cec-api.html">Part V - Consumer Electronics Control API</a> &raquo;</li>
        
          <li><a href="cec-funcs.html"><span class="section-number">2. </span>Function Reference</a> &raquo;</li>
        
      <li><span class="section-number">2.10. </span>ioctls CEC_G_MODE and CEC_S_MODE</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../../_sources/media/uapi/cec/cec-ioc-g-mode.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="ioctls-cec-g-mode-and-cec-s-mode">
<span id="cec-s-mode"></span><span id="cec-g-mode"></span><span id="cec-mode"></span><h1><span class="section-number">2.10. </span>ioctls CEC_G_MODE and CEC_S_MODE<a class="headerlink" href="#ioctls-cec-g-mode-and-cec-s-mode" title="Permalink to this headline">¶</a></h1>
<p>CEC_G_MODE, CEC_S_MODE - Get or set exclusive use of the CEC adapter</p>
<div class="section" id="synopsis">
<h2><span class="section-number">2.10.1. </span>Synopsis<a class="headerlink" href="#synopsis" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="c.CEC_G_MODE">
int <code class="sig-name descname">ioctl</code><span class="sig-paren">(</span>int<em> fd</em>, <a class="reference internal" href="#c.CEC_G_MODE" title="CEC_G_MODE">CEC_G_MODE</a>, __u32<em> *argp</em><span class="sig-paren">)</span><a class="headerlink" href="#c.CEC_G_MODE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="c.CEC_S_MODE">
int <code class="sig-name descname">ioctl</code><span class="sig-paren">(</span>int<em> fd</em>, <a class="reference internal" href="#c.CEC_S_MODE" title="CEC_S_MODE">CEC_S_MODE</a>, __u32<em> *argp</em><span class="sig-paren">)</span><a class="headerlink" href="#c.CEC_S_MODE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="arguments">
<h2><span class="section-number">2.10.2. </span>Arguments<a class="headerlink" href="#arguments" title="Permalink to this headline">¶</a></h2>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">fd</span></code></dt><dd><p>File descriptor returned by <a class="reference internal" href="cec-func-open.html#c.cec-open" title="cec-open"><code class="xref c c-func docutils literal notranslate"><span class="pre">open()</span></code></a>.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">argp</span></code></dt><dd><p>Pointer to CEC mode.</p>
</dd>
</dl>
</div>
<div class="section" id="description">
<h2><span class="section-number">2.10.3. </span>Description<a class="headerlink" href="#description" title="Permalink to this headline">¶</a></h2>
<p>By default any filehandle can use <a class="reference internal" href="cec-ioc-receive.html#cec-transmit"><span class="std std-ref">ioctls CEC_RECEIVE and CEC_TRANSMIT</span></a>, but in order to prevent
applications from stepping on each others toes it must be possible to
obtain exclusive access to the CEC adapter. This ioctl sets the
filehandle to initiator and/or follower mode which can be exclusive
depending on the chosen mode. The initiator is the filehandle that is
used to initiate messages, i.e. it commands other CEC devices. The
follower is the filehandle that receives messages sent to the CEC
adapter and processes them. The same filehandle can be both initiator
and follower, or this role can be taken by two different filehandles.</p>
<p>When a CEC message is received, then the CEC framework will decide how
it will be processed. If the message is a reply to an earlier
transmitted message, then the reply is sent back to the filehandle that
is waiting for it. In addition the CEC framework will process it.</p>
<p>If the message is not a reply, then the CEC framework will process it
first. If there is no follower, then the message is just discarded and a
feature abort is sent back to the initiator if the framework couldn’t
process it. If there is a follower, then the message is passed on to the
follower who will use <a class="reference internal" href="cec-ioc-receive.html#cec-receive"><span class="std std-ref">ioctl CEC_RECEIVE</span></a> to dequeue
the new message. The framework expects the follower to make the right
decisions.</p>
<p>The CEC framework will process core messages unless requested otherwise
by the follower. The follower can enable the passthrough mode. In that
case, the CEC framework will pass on most core messages without
processing them and the follower will have to implement those messages.
There are some messages that the core will always process, regardless of
the passthrough mode. See <a class="reference internal" href="#cec-core-processing"><span class="std std-ref">Core Message Processing</span></a> for details.</p>
<p>If there is no initiator, then any CEC filehandle can use
<a class="reference internal" href="cec-ioc-receive.html#cec-transmit"><span class="std std-ref">ioctl CEC_TRANSMIT</span></a>. If there is an exclusive
initiator then only that initiator can call
<a class="reference internal" href="cec-ioc-receive.html#cec-transmit"><span class="std std-ref">ioctls CEC_RECEIVE and CEC_TRANSMIT</span></a>. The follower can of course
always call <a class="reference internal" href="cec-ioc-receive.html#cec-transmit"><span class="std std-ref">ioctl CEC_TRANSMIT</span></a>.</p>
<p>Available initiator modes are:</p>
<span id="cec-mode-initiator-e"></span><table class="docutils align-default" id="id1">
<caption><span class="caption-text">Initiator Modes</span><a class="headerlink" href="#id1" title="Permalink to this table">¶</a></caption>
<colgroup>
<col style="width: 15%" />
<col style="width: 5%" />
<col style="width: 80%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">CEC_MODE_NO_INITIATOR</span></code></p>
</td>
<td><p>0x0</p>
</td>
<td><p id="cec-mode-no-initiator">This is not an initiator, i.e. it cannot transmit CEC messages or
make any other changes to the CEC adapter.</p>
</td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">CEC_MODE_INITIATOR</span></code></p>
</td>
<td><p>0x1</p>
</td>
<td><p id="cec-mode-initiator">This is an initiator (the default when the device is opened) and
it can transmit CEC messages and make changes to the CEC adapter,
unless there is an exclusive initiator.</p>
</td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">CEC_MODE_EXCL_INITIATOR</span></code></p>
</td>
<td><p>0x2</p>
</td>
<td><p id="cec-mode-excl-initiator">This is an exclusive initiator and this file descriptor is the
only one that can transmit CEC messages and make changes to the
CEC adapter. If someone else is already the exclusive initiator
then an attempt to become one will return the <code class="docutils literal notranslate"><span class="pre">EBUSY</span></code> error code
error.</p>
</td>
</tr>
</tbody>
</table>
<p>Available follower modes are:</p>
<span id="cec-mode-follower-e"></span><table class="longtable docutils align-default" id="id2">
<caption><span class="caption-text">Follower Modes</span><a class="headerlink" href="#id2" title="Permalink to this table">¶</a></caption>
<colgroup>
<col style="width: 15%" />
<col style="width: 5%" />
<col style="width: 80%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">CEC_MODE_NO_FOLLOWER</span></code></p>
</td>
<td><p>0x00</p>
</td>
<td><p id="cec-mode-no-follower">This is not a follower (the default when the device is opened).</p>
</td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">CEC_MODE_FOLLOWER</span></code></p>
</td>
<td><p>0x10</p>
</td>
<td><p id="cec-mode-follower">This is a follower and it will receive CEC messages unless there
is an exclusive follower. You cannot become a follower if
<a class="reference internal" href="cec-ioc-adap-g-caps.html#cec-cap-transmit"><span class="std std-ref">CEC_CAP_TRANSMIT</span></a> is not set or if <a class="reference internal" href="#cec-mode-no-initiator"><span class="std std-ref">CEC_MODE_NO_INITIATOR</span></a>
was specified, the <code class="docutils literal notranslate"><span class="pre">EINVAL</span></code> error code is returned in that case.</p>
</td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">CEC_MODE_EXCL_FOLLOWER</span></code></p>
</td>
<td><p>0x20</p>
</td>
<td><p id="cec-mode-excl-follower">This is an exclusive follower and only this file descriptor will
receive CEC messages for processing. If someone else is already
the exclusive follower then an attempt to become one will return
the <code class="docutils literal notranslate"><span class="pre">EBUSY</span></code> error code. You cannot become a follower if
<a class="reference internal" href="cec-ioc-adap-g-caps.html#cec-cap-transmit"><span class="std std-ref">CEC_CAP_TRANSMIT</span></a> is not set or if <a class="reference internal" href="#cec-mode-no-initiator"><span class="std std-ref">CEC_MODE_NO_INITIATOR</span></a>
was specified, the <code class="docutils literal notranslate"><span class="pre">EINVAL</span></code> error code is returned in that case.</p>
</td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">CEC_MODE_EXCL_FOLLOWER_PASSTHRU</span></code></p>
</td>
<td><p>0x30</p>
</td>
<td><p id="cec-mode-excl-follower-passthru">This is an exclusive follower and only this file descriptor will
receive CEC messages for processing. In addition it will put the
CEC device into passthrough mode, allowing the exclusive follower
to handle most core messages instead of relying on the CEC
framework for that. If someone else is already the exclusive
follower then an attempt to become one will return the <code class="docutils literal notranslate"><span class="pre">EBUSY</span></code> error
code. You cannot become a follower if <a class="reference internal" href="cec-ioc-adap-g-caps.html#cec-cap-transmit"><span class="std std-ref">CEC_CAP_TRANSMIT</span></a>
is not set or if <a class="reference internal" href="#cec-mode-no-initiator"><span class="std std-ref">CEC_MODE_NO_INITIATOR</span></a> was specified,
the <code class="docutils literal notranslate"><span class="pre">EINVAL</span></code> error code is returned in that case.</p>
</td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">CEC_MODE_MONITOR_PIN</span></code></p>
</td>
<td><p>0xd0</p>
</td>
<td><p id="cec-mode-monitor-pin">Put the file descriptor into pin monitoring mode. Can only be used in
combination with <a class="reference internal" href="#cec-mode-no-initiator"><span class="std std-ref">CEC_MODE_NO_INITIATOR</span></a>,
otherwise the <code class="docutils literal notranslate"><span class="pre">EINVAL</span></code> error code will be returned.
This mode requires that the <a class="reference internal" href="cec-ioc-adap-g-caps.html#cec-cap-monitor-pin"><span class="std std-ref">CEC_CAP_MONITOR_PIN</span></a>
capability is set, otherwise the <code class="docutils literal notranslate"><span class="pre">EINVAL</span></code> error code is returned.
While in pin monitoring mode this file descriptor can receive the
<code class="docutils literal notranslate"><span class="pre">CEC_EVENT_PIN_CEC_LOW</span></code> and <code class="docutils literal notranslate"><span class="pre">CEC_EVENT_PIN_CEC_HIGH</span></code> events to see the
low-level CEC pin transitions. This is very useful for debugging.
This mode is only allowed if the process has the <code class="docutils literal notranslate"><span class="pre">CAP_NET_ADMIN</span></code>
capability. If that is not set, then the <code class="docutils literal notranslate"><span class="pre">EPERM</span></code> error code is returned.</p>
</td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">CEC_MODE_MONITOR</span></code></p>
</td>
<td><p>0xe0</p>
</td>
<td><p id="cec-mode-monitor">Put the file descriptor into monitor mode. Can only be used in
combination with <a class="reference internal" href="#cec-mode-no-initiator"><span class="std std-ref">CEC_MODE_NO_INITIATOR</span></a>,
otherwise the <code class="docutils literal notranslate"><span class="pre">EINVAL</span></code> error code will be returned.
In monitor mode all messages this CEC
device transmits and all messages it receives (both broadcast
messages and directed messages for one its logical addresses) will
be reported. This is very useful for debugging. This is only
allowed if the process has the <code class="docutils literal notranslate"><span class="pre">CAP_NET_ADMIN</span></code> capability. If
that is not set, then the <code class="docutils literal notranslate"><span class="pre">EPERM</span></code> error code is returned.</p>
</td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">CEC_MODE_MONITOR_ALL</span></code></p>
</td>
<td><p>0xf0</p>
</td>
<td><p id="cec-mode-monitor-all">Put the file descriptor into ‘monitor all’ mode. Can only be used
in combination with <a class="reference internal" href="#cec-mode-no-initiator"><span class="std std-ref">CEC_MODE_NO_INITIATOR</span></a>, otherwise
the <code class="docutils literal notranslate"><span class="pre">EINVAL</span></code> error code will be returned. In ‘monitor all’ mode all messages
this CEC device transmits and all messages it receives, including
directed messages for other CEC devices will be reported. This is
very useful for debugging, but not all devices support this. This
mode requires that the <a class="reference internal" href="cec-ioc-adap-g-caps.html#cec-cap-monitor-all"><span class="std std-ref">CEC_CAP_MONITOR_ALL</span></a> capability is set,
otherwise the <code class="docutils literal notranslate"><span class="pre">EINVAL</span></code> error code is returned. This is only allowed if
the process has the <code class="docutils literal notranslate"><span class="pre">CAP_NET_ADMIN</span></code> capability. If that is not
set, then the <code class="docutils literal notranslate"><span class="pre">EPERM</span></code> error code is returned.</p>
</td>
</tr>
</tbody>
</table>
<p>Core message processing details:</p>
<span id="cec-core-processing"></span><table class="docutils align-default" id="id3">
<caption><span class="caption-text">Core Message Processing</span><a class="headerlink" href="#id3" title="Permalink to this table">¶</a></caption>
<colgroup>
<col style="width: 11%" />
<col style="width: 89%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">CEC_MSG_GET_CEC_VERSION</span></code></p>
</td>
<td><p id="cec-msg-get-cec-version">The core will return the CEC version that was set with
<a class="reference internal" href="cec-ioc-adap-g-log-addrs.html#cec-adap-s-log-addrs"><span class="std std-ref">ioctl CEC_ADAP_S_LOG_ADDRS</span></a>,
except when in passthrough mode. In passthrough mode the core
does nothing and this message has to be handled by a follower
instead.</p>
</td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">CEC_MSG_GIVE_DEVICE_VENDOR_ID</span></code></p>
</td>
<td><p id="cec-msg-give-device-vendor-id">The core will return the vendor ID that was set with
<a class="reference internal" href="cec-ioc-adap-g-log-addrs.html#cec-adap-s-log-addrs"><span class="std std-ref">ioctl CEC_ADAP_S_LOG_ADDRS</span></a>,
except when in passthrough mode. In passthrough mode the core
does nothing and this message has to be handled by a follower
instead.</p>
</td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">CEC_MSG_ABORT</span></code></p>
</td>
<td><p id="cec-msg-abort">The core will return a Feature Abort message with reason
‘Feature Refused’ as per the specification, except when in
passthrough mode. In passthrough mode the core does nothing
and this message has to be handled by a follower instead.</p>
</td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">CEC_MSG_GIVE_PHYSICAL_ADDR</span></code></p>
</td>
<td><p id="cec-msg-give-physical-addr">The core will report the current physical address, except when
in passthrough mode. In passthrough mode the core does nothing
and this message has to be handled by a follower instead.</p>
</td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">CEC_MSG_GIVE_OSD_NAME</span></code></p>
</td>
<td><p id="cec-msg-give-osd-name">The core will report the current OSD name that was set with
<a class="reference internal" href="cec-ioc-adap-g-log-addrs.html#cec-adap-s-log-addrs"><span class="std std-ref">ioctl CEC_ADAP_S_LOG_ADDRS</span></a>,
except when in passthrough mode. In passthrough mode the core
does nothing and this message has to be handled by a follower
instead.</p>
</td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">CEC_MSG_GIVE_FEATURES</span></code></p>
</td>
<td><p id="cec-msg-give-features">The core will do nothing if the CEC version is older than 2.0,
otherwise it will report the current features that were set with
<a class="reference internal" href="cec-ioc-adap-g-log-addrs.html#cec-adap-s-log-addrs"><span class="std std-ref">ioctl CEC_ADAP_S_LOG_ADDRS</span></a>,
except when in passthrough mode. In passthrough mode the core
does nothing (for any CEC version) and this message has to be handled
by a follower instead.</p>
</td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">CEC_MSG_USER_CONTROL_PRESSED</span></code></p>
</td>
<td><p id="cec-msg-user-control-pressed">If <a class="reference internal" href="cec-ioc-adap-g-caps.html#cec-cap-rc"><span class="std std-ref">CEC_CAP_RC</span></a> is set and if
<a class="reference internal" href="cec-ioc-adap-g-log-addrs.html#cec-log-addrs-fl-allow-rc-passthru"><span class="std std-ref">CEC_LOG_ADDRS_FL_ALLOW_RC_PASSTHRU</span></a>
is set, then generate a remote control key
press. This message is always passed on to the follower(s).</p>
</td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">CEC_MSG_USER_CONTROL_RELEASED</span></code></p>
</td>
<td><p id="cec-msg-user-control-released">If <a class="reference internal" href="cec-ioc-adap-g-caps.html#cec-cap-rc"><span class="std std-ref">CEC_CAP_RC</span></a> is set and if
<a class="reference internal" href="cec-ioc-adap-g-log-addrs.html#cec-log-addrs-fl-allow-rc-passthru"><span class="std std-ref">CEC_LOG_ADDRS_FL_ALLOW_RC_PASSTHRU</span></a>
is set, then generate a remote control key
release. This message is always passed on to the follower(s).</p>
</td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">CEC_MSG_REPORT_PHYSICAL_ADDR</span></code></p>
</td>
<td><p id="cec-msg-report-physical-addr">The CEC framework will make note of the reported physical address
and then just pass the message on to the follower(s).</p>
</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="return-value">
<h2><span class="section-number">2.10.4. </span>Return Value<a class="headerlink" href="#return-value" title="Permalink to this headline">¶</a></h2>
<p>On success 0 is returned, on error -1 and the <code class="docutils literal notranslate"><span class="pre">errno</span></code> variable is set
appropriately. The generic error codes are described at the
<a class="reference internal" href="../gen-errors.html#id1"><span class="std std-ref">Generic Error Codes</span></a> chapter.</p>
<p>The <a class="reference internal" href="#cec-s-mode"><span class="std std-ref">ioctl CEC_S_MODE</span></a> can return the following
error codes:</p>
<dl class="simple">
<dt>EINVAL</dt><dd><p>The requested mode is invalid.</p>
</dd>
<dt>EPERM</dt><dd><p>Monitor mode is requested, but the process does have the <code class="docutils literal notranslate"><span class="pre">CAP_NET_ADMIN</span></code>
capability.</p>
</dd>
<dt>EBUSY</dt><dd><p>Someone else is already an exclusive follower or initiator.</p>
</dd>
</dl>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="cec-ioc-receive.html" class="btn btn-neutral float-right" title="2.11. ioctls CEC_RECEIVE and CEC_TRANSMIT" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="cec-ioc-dqevent.html" class="btn btn-neutral float-left" title="2.9. ioctl CEC_DQEVENT" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright The kernel development community

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>