

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>4. Linux Gamepad Specification &mdash; The Linux Kernel 4.13.0-rc5+ documentation</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="../_static/theme_overrides.css" type="text/css" />
  

  
        <link rel="index" title="Index"
              href="../genindex.html"/>
        <link rel="search" title="Search" href="../search.html"/>
    <link rel="top" title="The Linux Kernel 4.13.0-rc5+ documentation" href="../index.html"/>
        <link rel="up" title="Linux Input Subsystem userspace API" href="input_uapi.html"/>
        <link rel="next" title="5. Force feedback for Linux" href="ff.html"/>
        <link rel="prev" title="3. Multi-touch (MT) Protocol" href="multi-touch-protocol.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> The Linux Kernel
          

          
          </a>

          
            
            
              <div class="version">
                4.13.0-rc5
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../admin-guide/index.html">The Linux kernel user&#8217;s and administrator&#8217;s guide</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../userspace-api/index.html">The Linux kernel user-space API guide</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../process/index.html">Working with the kernel development community</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dev-tools/index.html">Development tools for the kernel</a></li>
<li class="toctree-l1"><a class="reference internal" href="../doc-guide/index.html">How to write kernel documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../kernel-hacking/index.html">Kernel Hacking Guides</a></li>
</ul>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../driver-api/index.html">The Linux driver implementer&#8217;s API guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../core-api/index.html">Core API Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../media/index.html">Linux Media Subsystem Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../networking/index.html">Linux Networking Documentation</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">The Linux Input Documentation</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="input_uapi.html">Linux Input Subsystem userspace API</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="input.html">1. Introduction</a></li>
<li class="toctree-l3"><a class="reference internal" href="event-codes.html">2. Input event codes</a></li>
<li class="toctree-l3"><a class="reference internal" href="multi-touch-protocol.html">3. Multi-touch (MT) Protocol</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">4. Linux Gamepad Specification</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#introduction">4.1. Introduction</a></li>
<li class="toctree-l4"><a class="reference internal" href="#geometry">4.2. Geometry</a></li>
<li class="toctree-l4"><a class="reference internal" href="#detection">4.3. Detection</a></li>
<li class="toctree-l4"><a class="reference internal" href="#events">4.4. Events</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="ff.html">5. Force feedback for Linux</a></li>
<li class="toctree-l3"><a class="reference internal" href="joydev/index.html">6. Linux Joystick support</a></li>
<li class="toctree-l3"><a class="reference internal" href="uinput.html">7. uinput module</a></li>
<li class="toctree-l3"><a class="reference internal" href="userio.html">8. The userio Protocol</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="input_kapi.html">Linux Input Subsystem kernel API</a></li>
<li class="toctree-l2"><a class="reference internal" href="devices/index.html">Driver-specific documentation</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../gpu/index.html">Linux GPU Driver Developer&#8217;s Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../security/index.html">Security Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../sound/index.html">Linux Sound Subsystem Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../crypto/index.html">Linux Kernel Crypto API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../filesystems/index.html">Linux Filesystems API</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../sh/index.html">SuperH Interfaces Guide</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../translations/ko_KR/index.html">Korean translations</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../translations/zh_CN/index.html">Chinese translations</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../translations/ja_JP/index.html">Japanese translations</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">The Linux Kernel</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="index.html">The Linux Input Documentation</a> &raquo;</li>
        
          <li><a href="input_uapi.html">Linux Input Subsystem userspace API</a> &raquo;</li>
        
      <li>4. Linux Gamepad Specification</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/input/gamepad.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="linux-gamepad-specification">
<h1>4. Linux Gamepad Specification<a class="headerlink" href="#linux-gamepad-specification" title="Permalink to this headline">¶</a></h1>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Author:</th><td class="field-body">2013 by David Herrmann &lt;<a class="reference external" href="mailto:dh&#46;herrmann&#37;&#52;&#48;gmail&#46;com">dh<span>&#46;</span>herrmann<span>&#64;</span>gmail<span>&#46;</span>com</a>&gt;</td>
</tr>
</tbody>
</table>
<div class="section" id="introduction">
<h2>4.1. Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p>Linux provides many different input drivers for gamepad hardware. To avoid
having user-space deal with different button-mappings for each gamepad, this
document defines how gamepads are supposed to report their data.</p>
</div>
<div class="section" id="geometry">
<h2>4.2. Geometry<a class="headerlink" href="#geometry" title="Permalink to this headline">¶</a></h2>
<p>As &#8220;gamepad&#8221; we define devices which roughly look like this:</p>
<div class="highlight-none"><div class="highlight"><pre><span></span>          ____________________________              __
         / [__ZL__]          [__ZR__] \               |
        / [__ TL __]        [__ TR __] \              | Front Triggers
     __/________________________________\__         __|
    /                                  _   \          |
   /      /\           __             (N)   \         |
  /       ||      __  |MO|  __     _       _ \        | Main Pad
 |    &lt;===DP===&gt; |SE|      |ST|   (W) -|- (E) |       |
  \       ||    ___          ___       _     /        |
  /\      \/   /   \        /   \     (S)   /\      __|
 /  \________ | LS  | ____ |  RS | ________/  \       |
|         /  \ \___/ /    \ \___/ /  \         |      | Control Sticks
|        /    \_____/      \_____/    \        |    __|
|       /                              \       |
 \_____/                                \_____/

     |________|______|    |______|___________|
       D-Pad    Left       Right   Action Pad
               Stick       Stick

                 |_____________|
                    Menu Pad
</pre></div>
</div>
<p>Most gamepads have the following features:</p>
<blockquote>
<div><ul class="simple">
<li>Action-Pad
4 buttons in diamonds-shape (on the right side). The buttons are
differently labeled on most devices so we define them as NORTH,
SOUTH, WEST and EAST.</li>
<li>D-Pad (Direction-pad)
4 buttons (on the left side) that point up, down, left and right.</li>
<li>Menu-Pad
Different constellations, but most-times 2 buttons: SELECT - START
Furthermore, many gamepads have a fancy branded button that is used as
special system-button. It often looks different to the other buttons and
is used to pop up system-menus or system-settings.</li>
<li>Analog-Sticks
Analog-sticks provide freely moveable sticks to control directions. Not
all devices have both or any, but they are present at most times.
Analog-sticks may also provide a digital button if you press them.</li>
<li>Triggers
Triggers are located on the upper-side of the pad in vertical direction.
Not all devices provide them, but the upper buttons are normally named
Left- and Right-Triggers, the lower buttons Z-Left and Z-Right.</li>
<li>Rumble
Many devices provide force-feedback features. But are mostly just
simple rumble motors.</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="detection">
<h2>4.3. Detection<a class="headerlink" href="#detection" title="Permalink to this headline">¶</a></h2>
<p>All gamepads that follow the protocol described here map BTN_GAMEPAD. This is
an alias for BTN_SOUTH/BTN_A. It can be used to identify a gamepad as such.
However, not all gamepads provide all features, so you need to test for all
features that you need, first. How each feature is mapped is described below.</p>
<p>Legacy drivers often don&#8217;t comply to these rules. As we cannot change them
for backwards-compatibility reasons, you need to provide fixup mappings in
user-space yourself. Some of them might also provide module-options that
change the mappings so you can advise users to set these.</p>
<p>All new gamepads are supposed to comply with this mapping. Please report any
bugs, if they don&#8217;t.</p>
<p>There are a lot of less-featured/less-powerful devices out there, which re-use
the buttons from this protocol. However, they try to do this in a compatible
fashion. For example, the &#8220;Nintendo Wii Nunchuk&#8221; provides two trigger buttons
and one analog stick. It reports them as if it were a gamepad with only one
analog stick and two trigger buttons on the right side.
But that means, that if you only support &#8220;real&#8221; gamepads, you must test
devices for _all_ reported events that you need. Otherwise, you will also get
devices that report a small subset of the events.</p>
<p>No other devices, that do not look/feel like a gamepad, shall report these
events.</p>
</div>
<div class="section" id="events">
<h2>4.4. Events<a class="headerlink" href="#events" title="Permalink to this headline">¶</a></h2>
<p>Gamepads report the following events:</p>
<ul>
<li><p class="first">Action-Pad:</p>
<p>Every gamepad device has at least 2 action buttons. This means, that every
device reports BTN_SOUTH (which BTN_GAMEPAD is an alias for). Regardless
of the labels on the buttons, the codes are sent according to the
physical position of the buttons.</p>
<p>Please note that 2- and 3-button pads are fairly rare and old. You might
want to filter gamepads that do not report all four.</p>
<blockquote>
<div><ul>
<li><p class="first">2-Button Pad:</p>
<p>If only 2 action-buttons are present, they are reported as BTN_SOUTH and
BTN_EAST. For vertical layouts, the upper button is BTN_EAST. For
horizontal layouts, the button more on the right is BTN_EAST.</p>
</li>
<li><p class="first">3-Button Pad:</p>
<p>If only 3 action-buttons are present, they are reported as (from left
to right): BTN_WEST, BTN_SOUTH, BTN_EAST
If the buttons are aligned perfectly vertically, they are reported as
(from top down): BTN_WEST, BTN_SOUTH, BTN_EAST</p>
</li>
<li><p class="first">4-Button Pad:</p>
<p>If all 4 action-buttons are present, they can be aligned in two
different formations. If diamond-shaped, they are reported as BTN_NORTH,
BTN_WEST, BTN_SOUTH, BTN_EAST according to their physical location.
If rectangular-shaped, the upper-left button is BTN_NORTH, lower-left
is BTN_WEST, lower-right is BTN_SOUTH and upper-right is BTN_EAST.</p>
</li>
</ul>
</div></blockquote>
</li>
<li><p class="first">D-Pad:</p>
<p>Every gamepad provides a D-Pad with four directions: Up, Down, Left, Right
Some of these are available as digital buttons, some as analog buttons. Some
may even report both. The kernel does not convert between these so
applications should support both and choose what is more appropriate if
both are reported.</p>
<blockquote>
<div><ul>
<li><p class="first">Digital buttons are reported as:</p>
<p>BTN_DPAD_*</p>
</li>
<li><p class="first">Analog buttons are reported as:</p>
<p>ABS_HAT0X and ABS_HAT0Y</p>
</li>
</ul>
</div></blockquote>
<p>(for ABS values negative is left/up, positive is right/down)</p>
</li>
<li><p class="first">Analog-Sticks:</p>
<p>The left analog-stick is reported as ABS_X, ABS_Y. The right analog stick is
reported as ABS_RX, ABS_RY. Zero, one or two sticks may be present.
If analog-sticks provide digital buttons, they are mapped accordingly as
BTN_THUMBL (first/left) and BTN_THUMBR (second/right).</p>
<p>(for ABS values negative is left/up, positive is right/down)</p>
</li>
<li><p class="first">Triggers:</p>
<p>Trigger buttons can be available as digital or analog buttons or both. User-
space must correctly deal with any situation and choose the most appropriate
mode.</p>
<p>Upper trigger buttons are reported as BTN_TR or ABS_HAT1X (right) and BTN_TL
or ABS_HAT1Y (left). Lower trigger buttons are reported as BTN_TR2 or
ABS_HAT2X (right/ZR) and BTN_TL2 or ABS_HAT2Y (left/ZL).</p>
<p>If only one trigger-button combination is present (upper+lower), they are
reported as &#8220;right&#8221; triggers (BTN_TR/ABS_HAT1X).</p>
<p>(ABS trigger values start at 0, pressure is reported as positive values)</p>
</li>
<li><p class="first">Menu-Pad:</p>
<p>Menu buttons are always digital and are mapped according to their location
instead of their labels. That is:</p>
<blockquote>
<div><ul>
<li><p class="first">1-button Pad:</p>
<p>Mapped as BTN_START</p>
</li>
<li><p class="first">2-button Pad:</p>
<p>Left button mapped as BTN_SELECT, right button mapped as BTN_START</p>
</li>
</ul>
</div></blockquote>
<p>Many pads also have a third button which is branded or has a special symbol
and meaning. Such buttons are mapped as BTN_MODE. Examples are the Nintendo
&#8220;HOME&#8221; button, the XBox &#8220;X&#8221;-button or Sony &#8220;PS&#8221; button.</p>
</li>
<li><p class="first">Rumble:</p>
<p>Rumble is advertised as FF_RUMBLE.</p>
</li>
</ul>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="ff.html" class="btn btn-neutral float-right" title="5. Force feedback for Linux" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="multi-touch-protocol.html" class="btn btn-neutral" title="3. Multi-touch (MT) Protocol" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright The kernel development community.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'4.13.0-rc5+',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>