

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Berkshire Products PC Watchdog Card &mdash; The Linux Kernel 5.2.0+ documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/theme_overrides.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> The Linux Kernel
          

          
          </a>

          
            
            
              <div class="version">
                5.2.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../admin-guide/index.html">The Linux kernel user’s and administrator’s guide</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../firmware-guide/index.html">The Linux kernel firmware guide</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../userspace-api/index.html">The Linux kernel user-space API guide</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../process/index.html">Working with the kernel development community</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dev-tools/index.html">Development tools for the kernel</a></li>
<li class="toctree-l1"><a class="reference internal" href="../doc-guide/index.html">How to write kernel documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../kernel-hacking/index.html">Kernel Hacking Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../trace/index.html">Linux Tracing Technologies</a></li>
<li class="toctree-l1"><a class="reference internal" href="../maintainer/index.html">Kernel Maintainer Handbook</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../driver-api/index.html">The Linux driver implementer’s API guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../core-api/index.html">Core API Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../media/index.html">Linux Media Subsystem Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../networking/index.html">Linux Networking Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../input/index.html">The Linux Input Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../hwmon/index.html">Linux Hardware Monitoring</a></li>
<li class="toctree-l1"><a class="reference internal" href="../gpu/index.html">Linux GPU Driver Developer’s Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../security/index.html">Security Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../sound/index.html">Linux Sound Subsystem Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../crypto/index.html">Linux Kernel Crypto API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../filesystems/index.html">Filesystems in the Linux kernel</a></li>
<li class="toctree-l1"><a class="reference internal" href="../vm/index.html">Linux Memory Management Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../bpf/index.html">BPF Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../usb/index.html">USB support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../misc-devices/index.html">Assorted Miscellaneous Devices Documentation</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../sh/index.html">SuperH Interfaces Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../x86/index.html">x86-specific Documentation</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../filesystems/ext4/index.html">ext4 Data Structures and Algorithms</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../translations/index.html">Translations</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">The Linux Kernel</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
      <li>Berkshire Products PC Watchdog Card</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/watchdog/pcwd-watchdog.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="berkshire-products-pc-watchdog-card">
<h1>Berkshire Products PC Watchdog Card<a class="headerlink" href="#berkshire-products-pc-watchdog-card" title="Permalink to this headline">¶</a></h1>
<p>Last reviewed: 10/05/2007</p>
<div class="section" id="support-for-isa-cards-revision-a-and-c">
<h2>Support for ISA Cards  Revision A and C<a class="headerlink" href="#support-for-isa-cards-revision-a-and-c" title="Permalink to this headline">¶</a></h2>
<p>Documentation and Driver by Ken Hollis &lt;<a class="reference external" href="mailto:kenji&#37;&#52;&#48;bitgate&#46;com">kenji<span>&#64;</span>bitgate<span>&#46;</span>com</a>&gt;</p>
<blockquote>
<div><p>The PC Watchdog is a card that offers the same type of functionality that
the WDT card does, only it doesn’t require an IRQ to run.  Furthermore,
the Revision C card allows you to monitor any IO Port to automatically
trigger the card into being reset.  This way you can make the card
monitor hard drive status, or anything else you need.</p>
<p>The Watchdog Driver has one basic role: to talk to the card and send
signals to it so it doesn’t reset your computer … at least during
normal operation.</p>
<p>The Watchdog Driver will automatically find your watchdog card, and will
attach a running driver for use with that card.  After the watchdog
drivers have initialized, you can then talk to the card using a PC
Watchdog program.</p>
<p>I suggest putting a “watchdog -d” before the beginning of an fsck, and
a “watchdog -e -t 1” immediately after the end of an fsck.  (Remember
to run the program with an “&amp;” to run it in the background!)</p>
<p>If you want to write a program to be compatible with the PC Watchdog
driver, simply use of modify the watchdog test program:
tools/testing/selftests/watchdog/watchdog-test.c</p>
<p>Other IOCTL functions include:</p>
<blockquote>
<div><dl class="docutils">
<dt>WDIOC_GETSUPPORT</dt>
<dd><p class="first">This returns the support of the card itself.  This
returns in structure “PCWDS” which returns:</p>
<blockquote class="last">
<div><dl class="docutils">
<dt>options = WDIOS_TEMPPANIC</dt>
<dd>(This card supports temperature)</dd>
<dt>firmware_version = xxxx</dt>
<dd>(Firmware version of the card)</dd>
</dl>
</div></blockquote>
</dd>
<dt>WDIOC_GETSTATUS</dt>
<dd>This returns the status of the card, with the bits of
WDIOF_* bitwise-anded into the value.  (The comments
are in linux/pcwd.h)</dd>
<dt>WDIOC_GETBOOTSTATUS</dt>
<dd>This returns the status of the card that was reported
at bootup.</dd>
<dt>WDIOC_GETTEMP</dt>
<dd>This returns the temperature of the card.  (You can also
read /dev/watchdog, which gives a temperature update
every second.)</dd>
<dt>WDIOC_SETOPTIONS</dt>
<dd>This lets you set the options of the card.  You can either
enable or disable the card this way.</dd>
<dt>WDIOC_KEEPALIVE</dt>
<dd>This pings the card to tell it not to reset your computer.</dd>
</dl>
</div></blockquote>
<p>And that’s all she wrote!</p>
<p class="attribution">&mdash;Ken Hollis
(<a class="reference external" href="mailto:kenji&#37;&#52;&#48;bitgate&#46;com">kenji<span>&#64;</span>bitgate<span>&#46;</span>com</a>)</p>
</div></blockquote>
</div>
</div>


           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright The kernel development community

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>