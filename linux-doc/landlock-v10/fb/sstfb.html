

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>sstfb &mdash; The Linux Kernel 5.2.0+ documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/theme_overrides.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> The Linux Kernel
          

          
          </a>

          
            
            
              <div class="version">
                5.2.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../admin-guide/index.html">The Linux kernel user’s and administrator’s guide</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../firmware-guide/index.html">The Linux kernel firmware guide</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../userspace-api/index.html">The Linux kernel user-space API guide</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../process/index.html">Working with the kernel development community</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dev-tools/index.html">Development tools for the kernel</a></li>
<li class="toctree-l1"><a class="reference internal" href="../doc-guide/index.html">How to write kernel documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../kernel-hacking/index.html">Kernel Hacking Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../trace/index.html">Linux Tracing Technologies</a></li>
<li class="toctree-l1"><a class="reference internal" href="../maintainer/index.html">Kernel Maintainer Handbook</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../driver-api/index.html">The Linux driver implementer’s API guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../core-api/index.html">Core API Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../media/index.html">Linux Media Subsystem Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../networking/index.html">Linux Networking Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../input/index.html">The Linux Input Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../hwmon/index.html">Linux Hardware Monitoring</a></li>
<li class="toctree-l1"><a class="reference internal" href="../gpu/index.html">Linux GPU Driver Developer’s Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../security/index.html">Security Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../sound/index.html">Linux Sound Subsystem Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../crypto/index.html">Linux Kernel Crypto API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../filesystems/index.html">Filesystems in the Linux kernel</a></li>
<li class="toctree-l1"><a class="reference internal" href="../vm/index.html">Linux Memory Management Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../bpf/index.html">BPF Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../usb/index.html">USB support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../misc-devices/index.html">Assorted Miscellaneous Devices Documentation</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../sh/index.html">SuperH Interfaces Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../x86/index.html">x86-specific Documentation</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../filesystems/ext4/index.html">ext4 Data Structures and Algorithms</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../translations/index.html">Translations</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">The Linux Kernel</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
      <li>sstfb</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/fb/sstfb.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="sstfb">
<h1>sstfb<a class="headerlink" href="#sstfb" title="Permalink to this headline">¶</a></h1>
<div class="section" id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p>This is a frame buffer device driver for 3dfx’ Voodoo Graphics
(aka voodoo 1, aka sst1) and Voodoo² (aka Voodoo 2, aka CVG) based
video boards. It’s highly experimental code, but is guaranteed to work
on my computer, with my “Maxi Gamer 3D” and “Maxi Gamer 3d²” boards,
and with me “between chair and keyboard”. Some people tested other
combinations and it seems that it works.
The main page is located at &lt;<a class="reference external" href="http://sstfb.sourceforge.net">http://sstfb.sourceforge.net</a>&gt;, and if
you want the latest version, check out the CVS, as the driver is a work
in progress, I feel uncomfortable with releasing tarballs of something
not completely working…Don’t worry, it’s still more than usable
(I eat my own dog food)</p>
<p>Please read the Bug section, and report any success or failure to me
(Ghozlane Toumi &lt;<a class="reference external" href="mailto:gtoumi&#37;&#52;&#48;laposte&#46;net">gtoumi<span>&#64;</span>laposte<span>&#46;</span>net</a>&gt;).
BTW, If you have only one monitor , and you don’t feel like playing
with the vga passthrou cable, I can only suggest borrowing a screen
somewhere…</p>
</div>
<div class="section" id="installation">
<h2>Installation<a class="headerlink" href="#installation" title="Permalink to this headline">¶</a></h2>
<p>This driver (should) work on ix86, with “late” 2.2.x kernel (tested
with x = 19) and “recent” 2.4.x kernel, as a module or compiled in.
It has been included in mainstream kernel since the infamous 2.4.10.
You can apply the patches found in <cite>sstfb/kernel/*-2.{2|4}.x.patch</cite>,
and copy sstfb.c to linux/drivers/video/, or apply a single patch,
<cite>sstfb/patch-2.{2|4}.x-sstfb-yymmdd</cite> to your linux source tree.</p>
<p>Then configure your kernel as usual: choose “m” or “y” to 3Dfx Voodoo
Graphics in section “console”. Compile, install, have fun… and please
drop me a report :)</p>
</div>
<div class="section" id="module-usage">
<h2>Module Usage<a class="headerlink" href="#module-usage" title="Permalink to this headline">¶</a></h2>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<ol class="last arabic simple">
<li>You should read completely this section before issuing any command.</li>
<li>If you have only one monitor to play with, once you insmod the
module, the 3dfx takes control of the output, so you’ll have to
plug the monitor to the “normal” video board in order to issue
the commands, or you can blindly use sst_dbg_vgapass
in the tools directory (See Tools). The latest solution is pass the
parameter vgapass=1 when insmodding the driver. (See Kernel/Modules
Options)</li>
</ol>
</div>
<div class="section" id="module-insertion">
<h3>Module insertion<a class="headerlink" href="#module-insertion" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><ol class="arabic">
<li><p class="first">insmod sstfb.o</p>
<p>you should see some strange output from the board:
a big blue square, a green and a red small squares and a vertical
white rectangle. why? the function’s name is self-explanatory:
“sstfb_test()”…
(if you don’t have a second monitor, you’ll have to plug your monitor
directly to the 2D videocard to see what you’re typing)</p>
</li>
<li><p class="first">con2fb /dev/fbx /dev/ttyx</p>
<p>bind a tty to the new frame buffer. if you already have a frame
buffer driver, the voodoo fb will likely be /dev/fb1. if not,
the device will be /dev/fb0. You can check this by doing a
cat /proc/fb. You can find a copy of con2fb in tools/ directory.
if you don’t have another fb device, this step is superfluous,
as the console subsystem automagicaly binds ttys to the fb.</p>
</li>
<li><p class="first">switch to the virtual console you just mapped. “tadaaa” …</p>
</li>
</ol>
</div></blockquote>
</div>
<div class="section" id="module-removal">
<h3>Module removal<a class="headerlink" href="#module-removal" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><ol class="arabic">
<li><p class="first">con2fb /dev/fbx /dev/ttyx</p>
<p>bind the tty to the old frame buffer so the module can be removed.
(how does it work with vgacon ? short answer : it doesn’t work)</p>
</li>
<li><p class="first">rmmod sstfb</p>
</li>
</ol>
</div></blockquote>
</div>
<div class="section" id="kernel-modules-options">
<h3>Kernel/Modules Options<a class="headerlink" href="#kernel-modules-options" title="Permalink to this headline">¶</a></h3>
<p>You can pass some options to the sstfb module, and via the kernel
command line when the driver is compiled in:
for module : insmod sstfb.o option1=value1 option2=value2 …
in kernel :  video=sstfb:option1,option2:value2,option3 …</p>
<p>sstfb supports the following options:</p>
<table border="1" class="docutils">
<colgroup>
<col width="19%" />
<col width="19%" />
<col width="61%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Module</th>
<th class="head">Kernel</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>vgapass=0</td>
<td>vganopass</td>
<td>Enable or disable VGA passthrou cable.</td>
</tr>
<tr class="row-odd"><td>vgapass=1</td>
<td>vgapass</td>
<td><p class="first">When enabled, the monitor will get the signal
from the VGA board and not from the voodoo.</p>
<p class="last">Default: nopass</p>
</td>
</tr>
<tr class="row-even"><td>mem=x</td>
<td>mem:x</td>
<td><p class="first">Force frame buffer memory in MiB
allowed values: 0, 1, 2, 4.</p>
<p class="last">Default: 0 (= autodetect)</p>
</td>
</tr>
<tr class="row-odd"><td>inverse=1</td>
<td>inverse</td>
<td>Supposed to enable inverse console.
doesn’t work yet…</td>
</tr>
<tr class="row-even"><td>clipping=1</td>
<td>clipping</td>
<td>Enable or disable clipping.</td>
</tr>
<tr class="row-odd"><td>clipping=0</td>
<td>noclipping</td>
<td><p class="first">With clipping enabled, all offscreen
reads and writes are discarded.</p>
<p class="last">Default: enable clipping.</p>
</td>
</tr>
<tr class="row-even"><td>gfxclk=x</td>
<td>gfxclk:x</td>
<td><p class="first">Force graphic clock frequency (in MHz).
Be careful with this option, it may be
DANGEROUS.</p>
<p>Default: auto</p>
<blockquote class="last">
<div><ul class="simple">
<li>50Mhz for Voodoo 1,</li>
<li>75MHz for Voodoo 2.</li>
</ul>
</div></blockquote>
</td>
</tr>
<tr class="row-odd"><td>slowpci=1</td>
<td>fastpci</td>
<td>Enable or disable fast PCI read/writes.</td>
</tr>
<tr class="row-even"><td>slowpci=1</td>
<td>slowpci</td>
<td>Default : fastpci</td>
</tr>
<tr class="row-odd"><td>dev=x</td>
<td>dev:x</td>
<td>Attach the driver to device number x.
0 is the first compatible board (in
lspci order)</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="tools">
<h2>Tools<a class="headerlink" href="#tools" title="Permalink to this headline">¶</a></h2>
<p>These tools are mostly for debugging purposes, but you can
find some of these interesting:</p>
<ul>
<li><p class="first"><cite>con2fb</cite>, maps a tty to a fbramebuffer:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>con2fb /dev/fb1 /dev/tty5
</pre></div>
</div>
</li>
<li><p class="first"><cite>sst_dbg_vgapass</cite>, changes vga passthrou. You have to recompile the
driver with SST_DEBUG and SST_DEBUG_IOCTL set to 1:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>sst_dbg_vgapass /dev/fb1 1 (enables vga cable)
sst_dbg_vgapass /dev/fb1 0 (disables vga cable)
</pre></div>
</div>
</li>
<li><p class="first"><cite>glide_reset</cite>, resets the voodoo using glide
use this after rmmoding sstfb, if the module refuses to
reinsert.</p>
</li>
</ul>
</div>
<div class="section" id="bugs">
<h2>Bugs<a class="headerlink" href="#bugs" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p class="first">DO NOT use glide while the sstfb module is in, you’ll most likely
hang your computer.</p>
</li>
<li><p class="first">If you see some artefacts (pixels not cleaning and stuff like that),
try turning off clipping (clipping=0), and/or using slowpci</p>
</li>
<li><p class="first">the driver don’t detect the 4Mb frame buffer voodoos, it seems that
the 2 last Mbs wrap around. looking into that .</p>
</li>
<li><p class="first">The driver is 16 bpp only, 24/32 won’t work.</p>
</li>
<li><p class="first">The driver is not your_favorite_toy-safe. this includes SMP…</p>
<blockquote>
<div><p>[Actually from inspection it seems to be safe - Alan]</p>
</div></blockquote>
</li>
<li><p class="first">When using XFree86 FBdev (X over fbdev) you may see strange color
patterns at the border of your windows (the pixels lose the lowest
byte -&gt; basically the blue component and some of the green). I’m unable
to reproduce this with XFree86-3.3, but one of the testers has this
problem with XFree86-4. Apparently recent Xfree86-4.x solve this
problem.</p>
</li>
<li><p class="first">I didn’t really test changing the palette, so you may find some weird
things when playing with that.</p>
</li>
<li><p class="first">Sometimes the driver will not recognise the DAC, and the
initialisation will fail. This is specifically true for
voodoo 2 boards, but it should be solved in recent versions. Please
contact me.</p>
</li>
<li><p class="first">The 24/32 is not likely to work anytime soon, knowing that the
hardware does … unusual things in 24/32 bpp.</p>
</li>
<li><p class="first">When used with another video board, current limitations of the linux
console subsystem can cause some troubles, specifically, you should
disable software scrollback, as it can oops badly …</p>
</li>
</ul>
</div>
<div class="section" id="todo">
<h2>Todo<a class="headerlink" href="#todo" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Get rid of the previous paragraph.</li>
<li>Buy more coffee.</li>
<li>test/port to other arch.</li>
<li>try to add panning using tweeks with front and back buffer .</li>
<li>try to implement accel on voodoo2, this board can actually do a
lot in 2D even if it was sold as a 3D only board …</li>
</ul>
<p>Ghozlane Toumi &lt;<a class="reference external" href="mailto:gtoumi&#37;&#52;&#48;laposte&#46;net">gtoumi<span>&#64;</span>laposte<span>&#46;</span>net</a>&gt;</p>
<p>Date: 2002/05/09 20:11:45</p>
<p><a class="reference external" href="http://sstfb.sourceforge.net/README">http://sstfb.sourceforge.net/README</a></p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright The kernel development community

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>