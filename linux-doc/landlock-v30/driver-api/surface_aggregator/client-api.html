

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Client Driver API Documentation &mdash; The Linux Kernel 5.12.0-rc3+ documentation</title>
  

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/theme_overrides.css" type="text/css" />

  
  

  
  

  

  
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Client Driver Documentation" href="clients/index.html" />
    <link rel="prev" title="Writing Client Drivers" href="client.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html" class="icon icon-home"> The Linux Kernel
          

          
          </a>

          
            
            
              <div class="version">
                5.12.0-rc3
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../../admin-guide/index.html">The Linux kernel user’s and administrator’s guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../kbuild/index.html">Kernel Build System</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../firmware-guide/index.html">The Linux kernel firmware guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../devicetree/index.html">Open Firmware and Device Tree</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../userspace-api/index.html">The Linux kernel user-space API guide</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../process/index.html">Working with the kernel development community</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../dev-tools/index.html">Development tools for the kernel</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../doc-guide/index.html">How to write kernel documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../kernel-hacking/index.html">Kernel Hacking Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../trace/index.html">Linux Tracing Technologies</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../maintainer/index.html">Kernel Maintainer Handbook</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../fault-injection/index.html">fault-injection</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../livepatch/index.html">Kernel Livepatching</a></li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">The Linux driver implementer’s API guide</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../driver-model/index.html">Driver Model</a></li>
<li class="toctree-l2"><a class="reference internal" href="../basics.html">Driver Basics</a></li>
<li class="toctree-l2"><a class="reference internal" href="../infrastructure.html">Device drivers infrastructure</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ioctl.html">ioctl based interfaces</a></li>
<li class="toctree-l2"><a class="reference internal" href="../early-userspace/index.html">Early Userspace</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pm/index.html">CPU and Device Power Management</a></li>
<li class="toctree-l2"><a class="reference internal" href="../clk.html">The Common Clk Framework</a></li>
<li class="toctree-l2"><a class="reference internal" href="../device-io.html">Bus-Independent Device Accesses</a></li>
<li class="toctree-l2"><a class="reference internal" href="../dma-buf.html">Buffer Sharing and Synchronization</a></li>
<li class="toctree-l2"><a class="reference internal" href="../device_link.html">Device links</a></li>
<li class="toctree-l2"><a class="reference internal" href="../component.html">Component Helper for Aggregate Drivers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../message-based.html">Message-based devices</a></li>
<li class="toctree-l2"><a class="reference internal" href="../infiniband.html">InfiniBand and Remote DMA (RDMA) Interfaces</a></li>
<li class="toctree-l2"><a class="reference internal" href="../frame-buffer.html">Frame Buffer Library</a></li>
<li class="toctree-l2"><a class="reference internal" href="../regulator.html">Voltage and current regulator API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reset.html">Reset controller API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio/index.html">Industrial I/O</a></li>
<li class="toctree-l2"><a class="reference internal" href="../input.html">Input Subsystem</a></li>
<li class="toctree-l2"><a class="reference internal" href="../usb/index.html">Linux USB API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../firewire.html">Firewire (IEEE 1394) driver Interface Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pci/index.html">The Linux PCI driver implementer’s API guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cxl/index.html">Compute Express Link</a></li>
<li class="toctree-l2"><a class="reference internal" href="../spi.html">Serial Peripheral Interface (SPI)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../i2c.html">I<sup>2</sup>C and SMBus Subsystem</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ipmb.html">IPMB Driver for a Satellite MC</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ipmi.html">The Linux IPMI Driver</a></li>
<li class="toctree-l2"><a class="reference internal" href="../i3c/index.html">I3C subsystem</a></li>
<li class="toctree-l2"><a class="reference internal" href="../interconnect.html">Generic System Interconnect Subsystem</a></li>
<li class="toctree-l2"><a class="reference internal" href="../devfreq.html">Device Frequency Scaling</a></li>
<li class="toctree-l2"><a class="reference internal" href="../hsi.html">High Speed Synchronous Serial Interface (HSI)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../edac.html">Error Detection And Correction (EDAC) Devices</a></li>
<li class="toctree-l2"><a class="reference internal" href="../scsi.html">SCSI Interfaces Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="../libata.html">libATA Developer’s Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="../target.html">target and iSCSI Interfaces Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="../mailbox.html">The Common Mailbox Framework</a></li>
<li class="toctree-l2"><a class="reference internal" href="../mtdnand.html">MTD NAND Driver Programming Interface</a></li>
<li class="toctree-l2"><a class="reference internal" href="../miscellaneous.html">Parallel Port Devices</a></li>
<li class="toctree-l2"><a class="reference internal" href="../miscellaneous.html#x50-uart-driver">16x50 UART Driver</a></li>
<li class="toctree-l2"><a class="reference internal" href="../miscellaneous.html#pulse-width-modulation-pwm">Pulse-Width Modulation (PWM)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../mei/index.html">Intel(R) Management Engine Interface (Intel(R) MEI)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../mtd/index.html">Memory Technology Device (MTD)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../mmc/index.html">MMC/SD/SDIO card support</a></li>
<li class="toctree-l2"><a class="reference internal" href="../nvdimm/index.html">Non-Volatile Memory Device (NVDIMM)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../w1.html">W1: Dallas’ 1-wire bus</a></li>
<li class="toctree-l2"><a class="reference internal" href="../rapidio/index.html">The Linux RapidIO Subsystem</a></li>
<li class="toctree-l2"><a class="reference internal" href="../s390-drivers.html">Writing s390 channel device drivers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../vme.html">VME Device Drivers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../80211/index.html">Linux 802.11 Driver Developer’s Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="../uio-howto.html">The Userspace I/O HOWTO</a></li>
<li class="toctree-l2"><a class="reference internal" href="../firmware/index.html">Linux Firmware API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pinctl.html">PINCTRL (PIN CONTROL) subsystem</a></li>
<li class="toctree-l2"><a class="reference internal" href="../gpio/index.html">General Purpose Input/Output (GPIO)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../md/index.html">RAID</a></li>
<li class="toctree-l2"><a class="reference internal" href="../media/index.html">Media subsystem kernel internal API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../misc_devices.html">Miscellaneous Devices</a></li>
<li class="toctree-l2"><a class="reference internal" href="../nfc/index.html">Near Field Communication</a></li>
<li class="toctree-l2"><a class="reference internal" href="../dmaengine/index.html">DMAEngine documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../slimbus.html">Linux kernel SLIMbus support</a></li>
<li class="toctree-l2"><a class="reference internal" href="../soundwire/index.html">SoundWire Documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../thermal/index.html">Thermal</a></li>
<li class="toctree-l2"><a class="reference internal" href="../fpga/index.html">FPGA Subsystem</a></li>
<li class="toctree-l2"><a class="reference internal" href="../acpi/index.html">ACPI Support</a></li>
<li class="toctree-l2"><a class="reference internal" href="../auxiliary_bus.html">Auxiliary Bus</a></li>
<li class="toctree-l2"><a class="reference internal" href="../backlight/lp855x-driver.html">Kernel driver lp855x</a></li>
<li class="toctree-l2"><a class="reference internal" href="../connector.html">Kernel Connector</a></li>
<li class="toctree-l2"><a class="reference internal" href="../console.html">Console Drivers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../dcdbas.html">Dell Systems Management Base Driver</a></li>
<li class="toctree-l2"><a class="reference internal" href="../eisa.html">EISA bus support</a></li>
<li class="toctree-l2"><a class="reference internal" href="../isa.html">ISA Drivers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../isapnp.html">ISA Plug &amp; Play support by Jaroslav Kysela &lt;perex&#64;suse.cz&gt;</a></li>
<li class="toctree-l2"><a class="reference internal" href="../io-mapping.html">The io_mapping functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../io_ordering.html">Ordering I/O writes to memory-mapped addresses</a></li>
<li class="toctree-l2"><a class="reference internal" href="../generic-counter.html">Generic Counter Interface</a></li>
<li class="toctree-l2"><a class="reference internal" href="../lightnvm-pblk.html">pblk: Physical Block Device Target</a></li>
<li class="toctree-l2"><a class="reference internal" href="../memory-devices/index.html">Memory Controller drivers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../men-chameleon-bus.html">MEN Chameleon Bus</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ntb.html">NTB Drivers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../nvmem.html">NVMEM Subsystem</a></li>
<li class="toctree-l2"><a class="reference internal" href="../parport-lowlevel.html">PARPORT interface documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pps.html">PPS - Pulse Per Second</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ptp.html">PTP hardware clock infrastructure for Linux</a></li>
<li class="toctree-l2"><a class="reference internal" href="../phy/index.html">Generic PHY Framework</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pwm.html">Pulse Width Modulation (PWM) interface</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pldmfw/index.html">PLDM Firmware Flash Update Library</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pldmfw/index.html#overview-of-the-pldmfw-library">Overview of the <code class="docutils literal notranslate"><span class="pre">pldmfw</span></code> library</a></li>
<li class="toctree-l2"><a class="reference internal" href="../rfkill.html">rfkill - RF kill switch support</a></li>
<li class="toctree-l2"><a class="reference internal" href="../serial/index.html">Support for Serial devices</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sm501.html">SM501 Driver</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">Surface System Aggregator Module (SSAM)</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="overview.html">Overview</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="client.html">Writing Client Drivers</a><ul class="current">
<li class="toctree-l4 current"><a class="current reference internal" href="#">Client Driver API Documentation</a></li>
<li class="toctree-l4"><a class="reference internal" href="client.html#overview">Overview</a></li>
<li class="toctree-l4"><a class="reference internal" href="client.html#non-ssam-client-drivers">Non-SSAM Client Drivers</a></li>
<li class="toctree-l4"><a class="reference internal" href="client.html#adding-ssam-devices">Adding SSAM Devices</a></li>
<li class="toctree-l4"><a class="reference internal" href="client.html#ssam-client-drivers">SSAM Client Drivers</a></li>
<li class="toctree-l4"><a class="reference internal" href="client.html#making-synchronous-requests">Making Synchronous Requests</a></li>
<li class="toctree-l4"><a class="reference internal" href="client.html#handling-events">Handling Events</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="clients/index.html">Client Driver Documentation</a></li>
<li class="toctree-l3"><a class="reference internal" href="ssh.html">Surface Serial Hub Protocol</a></li>
<li class="toctree-l3"><a class="reference internal" href="internal.html">Core Driver Internals</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../switchtec.html">Linux Switchtec Support</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sync_file.html">Sync File API Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="../vfio-mediated-device.html">VFIO Mediated devices</a></li>
<li class="toctree-l2"><a class="reference internal" href="../vfio.html">VFIO - “Virtual Function I/O” </a></li>
<li class="toctree-l2"><a class="reference internal" href="../xilinx/index.html">Xilinx FPGA</a></li>
<li class="toctree-l2"><a class="reference internal" href="../xillybus.html">Xillybus driver for generic FPGA interface</a></li>
<li class="toctree-l2"><a class="reference internal" href="../zorro.html">Writing Device Drivers for Zorro Devices</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../core-api/index.html">Core API Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../locking/index.html">locking</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../accounting/index.html">Accounting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../block/index.html">Block</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../cdrom/index.html">cdrom</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../cpu-freq/index.html">Linux CPUFreq - CPU frequency and voltage scaling code in the Linux(TM) kernel</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../ide/index.html">Integrated Drive Electronics (IDE)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../fb/index.html">Frame Buffer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../fpga/index.html">fpga</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../hid/index.html">Human Interface Devices (HID)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../i2c/index.html">I2C/SMBus Subsystem</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../iio/index.html">Industrial I/O</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../isdn/index.html">ISDN</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../infiniband/index.html">InfiniBand</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../leds/index.html">LEDs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../netlabel/index.html">NetLabel</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../networking/index.html">Linux Networking Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../pcmcia/index.html">pcmcia</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../power/index.html">Power Management</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../target/index.html">TCM Virtual Device</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../timers/index.html">timers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../spi/index.html">Serial Peripheral Interface (SPI)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../w1/index.html">1-Wire Subsystem</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../watchdog/index.html">Linux Watchdog Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../virt/index.html">Linux Virtualization Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../input/index.html">The Linux Input Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../hwmon/index.html">Linux Hardware Monitoring</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../gpu/index.html">Linux GPU Driver Developer’s Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../security/index.html">Security Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../sound/index.html">Linux Sound Subsystem Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../crypto/index.html">Linux Kernel Crypto API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../filesystems/index.html">Filesystems in the Linux kernel</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../vm/index.html">Linux Memory Management Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../bpf/index.html">BPF Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../usb/index.html">USB support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../PCI/index.html">Linux PCI Bus Subsystem</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../scsi/index.html">Linux SCSI Subsystem</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../misc-devices/index.html">Assorted Miscellaneous Devices Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../scheduler/index.html">Linux Scheduler</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../mhi/index.html">MHI</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../asm-annotations.html">Assembler Annotations</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../arm/index.html">ARM Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../arm64/index.html">ARM64 Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../ia64/index.html">IA-64 Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../m68k/index.html">m68k Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../mips/index.html">MIPS-specific Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../nios2/index.html">Nios II Specific Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../openrisc/index.html">OpenRISC Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../parisc/index.html">PA-RISC Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../powerpc/index.html">powerpc</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../riscv/index.html">RISC-V architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../s390/index.html">s390 Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../sh/index.html">SuperH Interfaces Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../sparc/index.html">Sparc Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../x86/index.html">x86-specific Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../xtensa/index.html">Xtensa Architecture</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../staging/index.html">Unsorted Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../staging/index.html#atomic-types">Atomic Types</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../staging/index.html#atomic-bitops">Atomic bitops</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../staging/index.html#memory-barriers">Memory Barriers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../watch_queue.html">General notification mechanism</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../translations/index.html">Translations</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">The Linux Kernel</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../index.html">The Linux driver implementer’s API guide</a> &raquo;</li>
        
          <li><a href="index.html">Surface System Aggregator Module (SSAM)</a> &raquo;</li>
        
          <li><a href="client.html">Writing Client Drivers</a> &raquo;</li>
        
      <li>Client Driver API Documentation</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../../_sources/driver-api/surface_aggregator/client-api.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="client-driver-api-documentation">
<h1><a class="toc-backref" href="#id1">Client Driver API Documentation</a><a class="headerlink" href="#client-driver-api-documentation" title="Permalink to this headline">¶</a></h1>
<div class="contents topic" id="contents">
<p class="topic-title">Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#client-driver-api-documentation" id="id1">Client Driver API Documentation</a></p>
<ul>
<li><p><a class="reference internal" href="#serial-hub-communication" id="id2">Serial Hub Communication</a></p></li>
<li><p><a class="reference internal" href="#controller-and-core-interface" id="id3">Controller and Core Interface</a></p></li>
<li><p><a class="reference internal" href="#client-bus-and-client-device-api" id="id4">Client Bus and Client Device API</a></p></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="serial-hub-communication">
<h2><a class="toc-backref" href="#id2">Serial Hub Communication</a><a class="headerlink" href="#serial-hub-communication" title="Permalink to this headline">¶</a></h2>
<dl class="c enum">
<dt id="c.ssh_frame_type">
<em class="property">enum </em><code class="sig-name descname">ssh_frame_type</code><a class="headerlink" href="#c.ssh_frame_type" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Frame types for SSH frames.</p>
</dd></dl>

<p><strong>Constants</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">SSH_FRAME_TYPE_DATA_SEQ</span></code></dt><dd><p>Indicates a data frame, followed by a payload with the length specified
in the <code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">ssh_frame.len</span></code> field. This frame is sequenced, meaning
that an ACK is required.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">SSH_FRAME_TYPE_DATA_NSQ</span></code></dt><dd><p>Same as <code class="docutils literal notranslate"><span class="pre">SSH_FRAME_TYPE_DATA_SEQ</span></code>, but unsequenced, meaning that the
message does not have to be ACKed.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">SSH_FRAME_TYPE_ACK</span></code></dt><dd><p>Indicates an ACK message.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">SSH_FRAME_TYPE_NAK</span></code></dt><dd><p>Indicates an error response for previously sent frame. In general, this
means that the frame and/or payload is malformed, e.g. a CRC is wrong.
For command-type payloads, this can also mean that the command is
invalid.</p>
</dd>
</dl>
<dl class="c struct">
<dt id="c.ssh_frame">
<em class="property">struct </em><code class="sig-name descname">ssh_frame</code><a class="headerlink" href="#c.ssh_frame" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>SSH communication frame.</p>
</dd></dl>

<p><strong>Definition</strong></p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>struct ssh_frame {
  u8 type;
  __le16 len;
  u8 seq;
};
</pre></div>
</div>
<p><strong>Members</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">type</span></code></dt><dd><p>The type of the frame. See <a class="reference internal" href="#c.ssh_frame_type" title="ssh_frame_type"><code class="xref c c-type docutils literal notranslate"><span class="pre">enum</span> <span class="pre">ssh_frame_type</span></code></a>.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">len</span></code></dt><dd><p>The length of the frame payload directly following the CRC for this
frame. Does not include the final CRC for that payload.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">seq</span></code></dt><dd><p>The sequence number for this message/exchange.</p>
</dd>
</dl>
<dl class="c enum">
<dt id="c.ssh_payload_type">
<em class="property">enum </em><code class="sig-name descname">ssh_payload_type</code><a class="headerlink" href="#c.ssh_payload_type" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Type indicator for the SSH payload.</p>
</dd></dl>

<p><strong>Constants</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">SSH_PLD_TYPE_CMD</span></code></dt><dd><p>The payload is a command structure with optional command
payload.</p>
</dd>
</dl>
<dl class="c struct">
<dt id="c.ssh_command">
<em class="property">struct </em><code class="sig-name descname">ssh_command</code><a class="headerlink" href="#c.ssh_command" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Payload of a command-type frame.</p>
</dd></dl>

<p><strong>Definition</strong></p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>struct ssh_command {
  u8 type;
  u8 tc;
  u8 tid_out;
  u8 tid_in;
  u8 iid;
  __le16 rqid;
  u8 cid;
};
</pre></div>
</div>
<p><strong>Members</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">type</span></code></dt><dd><p>The type of the payload. See <a class="reference internal" href="#c.ssh_payload_type" title="ssh_payload_type"><code class="xref c c-type docutils literal notranslate"><span class="pre">enum</span> <span class="pre">ssh_payload_type</span></code></a>. Should be
SSH_PLD_TYPE_CMD for this struct.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">tc</span></code></dt><dd><p>Command target category.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">tid_out</span></code></dt><dd><p>Output target ID. Should be zero if this an incoming (EC to host)
message.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">tid_in</span></code></dt><dd><p>Input target ID. Should be zero if this is an outgoing (host to
EC) message.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">iid</span></code></dt><dd><p>Instance ID.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">rqid</span></code></dt><dd><p>Request ID. Used to match requests with responses and differentiate
between responses and events.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">cid</span></code></dt><dd><p>Command ID.</p>
</dd>
</dl>
<dl class="c macro">
<dt id="c.SSH_MESSAGE_LENGTH">
<code class="sig-name descname">SSH_MESSAGE_LENGTH</code><a class="headerlink" href="#c.SSH_MESSAGE_LENGTH" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<p><code class="docutils literal notranslate"><span class="pre">SSH_MESSAGE_LENGTH</span> <span class="pre">(payload_size)</span></code></p>
<blockquote>
<div><p>Compute length of SSH message.</p>
</div></blockquote>
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">payload_size</span></code></dt><dd><p>Length of the payload inside the SSH frame.</p>
</dd>
</dl>
<p><strong>Return</strong></p>
<p>Returns the length of a SSH message with payload of specified size.</p>
<dl class="c macro">
<dt id="c.SSH_COMMAND_MESSAGE_LENGTH">
<code class="sig-name descname">SSH_COMMAND_MESSAGE_LENGTH</code><a class="headerlink" href="#c.SSH_COMMAND_MESSAGE_LENGTH" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<p><code class="docutils literal notranslate"><span class="pre">SSH_COMMAND_MESSAGE_LENGTH</span> <span class="pre">(payload_size)</span></code></p>
<blockquote>
<div><p>Compute length of SSH command message.</p>
</div></blockquote>
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">payload_size</span></code></dt><dd><p>Length of the command payload.</p>
</dd>
</dl>
<p><strong>Return</strong></p>
<p>Returns the length of a SSH command message with command payload of
specified size.</p>
<dl class="c macro">
<dt id="c.SSH_MSGOFFSET_FRAME">
<code class="sig-name descname">SSH_MSGOFFSET_FRAME</code><a class="headerlink" href="#c.SSH_MSGOFFSET_FRAME" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<p><code class="docutils literal notranslate"><span class="pre">SSH_MSGOFFSET_FRAME</span> <span class="pre">(field)</span></code></p>
<blockquote>
<div><p>Compute offset in SSH message to specified field in frame.</p>
</div></blockquote>
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">field</span></code></dt><dd><p>The field for which the offset should be computed.</p>
</dd>
</dl>
<p><strong>Return</strong></p>
<p>Returns the offset of the specified <a class="reference internal" href="#c.ssh_frame" title="ssh_frame"><code class="xref c c-type docutils literal notranslate"><span class="pre">struct</span> <span class="pre">ssh_frame</span></code></a> field in the
raw SSH message data as. Takes SYN bytes (u16) preceding the frame into
account.</p>
<dl class="c macro">
<dt id="c.SSH_MSGOFFSET_COMMAND">
<code class="sig-name descname">SSH_MSGOFFSET_COMMAND</code><a class="headerlink" href="#c.SSH_MSGOFFSET_COMMAND" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<p><code class="docutils literal notranslate"><span class="pre">SSH_MSGOFFSET_COMMAND</span> <span class="pre">(field)</span></code></p>
<blockquote>
<div><p>Compute offset in SSH message to specified field in command.</p>
</div></blockquote>
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">field</span></code></dt><dd><p>The field for which the offset should be computed.</p>
</dd>
</dl>
<p><strong>Return</strong></p>
<p>Returns the offset of the specified <a class="reference internal" href="#c.ssh_command" title="ssh_command"><code class="xref c c-type docutils literal notranslate"><span class="pre">struct</span> <span class="pre">ssh_command</span></code></a> field in
the raw SSH message data. Takes SYN bytes (u16) preceding the frame and the
frame CRC (u16) between frame and command into account.</p>
<dl class="c function">
<dt id="c.ssh_crc">
u16 <code class="sig-name descname">ssh_crc</code><span class="sig-paren">(</span><em class="property">const</em> u8 *<em>buf</em>, size_t <em>len</em><span class="sig-paren">)</span><a class="headerlink" href="#c.ssh_crc" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Compute CRC for SSH messages.</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">const</span> <span class="pre">u8</span> <span class="pre">*buf</span></code></dt><dd><p>The pointer pointing to the data for which the CRC should be computed.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">size_t</span> <span class="pre">len</span></code></dt><dd><p>The length of the data for which the CRC should be computed.</p>
</dd>
</dl>
<p><strong>Return</strong></p>
<p>Returns the CRC computed on the provided data, as used for SSH
messages.</p>
<dl class="c function">
<dt id="c.ssh_rqid_next_valid">
u16 <code class="sig-name descname">ssh_rqid_next_valid</code><span class="sig-paren">(</span>u16 <em>rqid</em><span class="sig-paren">)</span><a class="headerlink" href="#c.ssh_rqid_next_valid" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Return the next valid request ID.</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">u16</span> <span class="pre">rqid</span></code></dt><dd><p>The current request ID.</p>
</dd>
</dl>
<p><strong>Return</strong></p>
<p>Returns the next valid request ID, following the current request ID
provided to this function. This function skips any request IDs reserved for
events.</p>
<dl class="c function">
<dt id="c.ssh_rqid_to_event">
u16 <code class="sig-name descname">ssh_rqid_to_event</code><span class="sig-paren">(</span>u16 <em>rqid</em><span class="sig-paren">)</span><a class="headerlink" href="#c.ssh_rqid_to_event" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Convert request ID to its corresponding event ID.</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">u16</span> <span class="pre">rqid</span></code></dt><dd><p>The request ID to convert.</p>
</dd>
</dl>
<dl class="c function">
<dt id="c.ssh_rqid_is_event">
bool <code class="sig-name descname">ssh_rqid_is_event</code><span class="sig-paren">(</span>u16 <em>rqid</em><span class="sig-paren">)</span><a class="headerlink" href="#c.ssh_rqid_is_event" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Check if given request ID is a valid event ID.</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">u16</span> <span class="pre">rqid</span></code></dt><dd><p>The request ID to check.</p>
</dd>
</dl>
<dl class="c function">
<dt id="c.ssh_tc_to_rqid">
u16 <code class="sig-name descname">ssh_tc_to_rqid</code><span class="sig-paren">(</span>u8 <em>tc</em><span class="sig-paren">)</span><a class="headerlink" href="#c.ssh_tc_to_rqid" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Convert target category to its corresponding request ID.</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">u8</span> <span class="pre">tc</span></code></dt><dd><p>The target category to convert.</p>
</dd>
</dl>
<dl class="c function">
<dt id="c.ssh_tid_to_index">
u8 <code class="sig-name descname">ssh_tid_to_index</code><span class="sig-paren">(</span>u8 <em>tid</em><span class="sig-paren">)</span><a class="headerlink" href="#c.ssh_tid_to_index" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Convert target ID to its corresponding target index.</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">u8</span> <span class="pre">tid</span></code></dt><dd><p>The target ID to convert.</p>
</dd>
</dl>
<dl class="c function">
<dt id="c.ssh_tid_is_valid">
bool <code class="sig-name descname">ssh_tid_is_valid</code><span class="sig-paren">(</span>u8 <em>tid</em><span class="sig-paren">)</span><a class="headerlink" href="#c.ssh_tid_is_valid" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Check if target ID is valid/supported.</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">u8</span> <span class="pre">tid</span></code></dt><dd><p>The target ID to check.</p>
</dd>
</dl>
<dl class="c struct">
<dt id="c.ssam_span">
<em class="property">struct </em><code class="sig-name descname">ssam_span</code><a class="headerlink" href="#c.ssam_span" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Reference to a buffer region.</p>
</dd></dl>

<p><strong>Definition</strong></p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>struct ssam_span {
  u8 *ptr;
  size_t len;
};
</pre></div>
</div>
<p><strong>Members</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">ptr</span></code></dt><dd><p>Pointer to the buffer region.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">len</span></code></dt><dd><p>Length of the buffer region.</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>A reference to a (non-owned) buffer segment, consisting of pointer and
length. Use of this struct indicates non-owned data, i.e. data of which the
life-time is managed (i.e. it is allocated/freed) via another pointer.</p>
<dl class="c enum">
<dt id="c.ssh_packet_base_priority">
<em class="property">enum </em><code class="sig-name descname">ssh_packet_base_priority</code><a class="headerlink" href="#c.ssh_packet_base_priority" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Base priorities for <a class="reference internal" href="#c.ssh_packet" title="ssh_packet"><code class="xref c c-type docutils literal notranslate"><span class="pre">struct</span> <span class="pre">ssh_packet</span></code></a>.</p>
</dd></dl>

<p><strong>Constants</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">SSH_PACKET_PRIORITY_FLUSH</span></code></dt><dd><p>Base priority for flush packets.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">SSH_PACKET_PRIORITY_DATA</span></code></dt><dd><p>Base priority for normal data packets.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">SSH_PACKET_PRIORITY_NAK</span></code></dt><dd><p>Base priority for NAK packets.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">SSH_PACKET_PRIORITY_ACK</span></code></dt><dd><p>Base priority for ACK packets.</p>
</dd>
</dl>
<dl class="c macro">
<dt id="c.SSH_PACKET_PRIORITY">
<code class="sig-name descname">SSH_PACKET_PRIORITY</code><a class="headerlink" href="#c.SSH_PACKET_PRIORITY" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<p><code class="docutils literal notranslate"><span class="pre">SSH_PACKET_PRIORITY</span> <span class="pre">(base,</span> <span class="pre">try)</span></code></p>
<blockquote>
<div><p>Compute packet priority from base priority and number of tries.</p>
</div></blockquote>
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">base</span></code></dt><dd><p>The base priority as suffix of <a class="reference internal" href="#c.ssh_packet_base_priority" title="ssh_packet_base_priority"><code class="xref c c-type docutils literal notranslate"><span class="pre">enum</span> <span class="pre">ssh_packet_base_priority</span></code></a>, e.g.
<code class="docutils literal notranslate"><span class="pre">FLUSH</span></code>, <code class="docutils literal notranslate"><span class="pre">DATA</span></code>, <code class="docutils literal notranslate"><span class="pre">ACK</span></code>, or <code class="docutils literal notranslate"><span class="pre">NAK</span></code>.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">try</span></code></dt><dd><p>The number of tries (must be less than 16).</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Compute the combined packet priority. The combined priority is dominated by
the base priority, whereas the number of (re-)tries decides the precedence
of packets with the same base priority, giving higher priority to packets
that already have more tries.</p>
<p><strong>Return</strong></p>
<p>Returns the computed priority as value fitting inside a <code class="xref c c-type docutils literal notranslate"><span class="pre">u8</span></code>. A
higher number means a higher priority.</p>
<dl class="c function">
<dt id="c.ssh_packet_priority_get_try">
u8 <code class="sig-name descname">ssh_packet_priority_get_try</code><span class="sig-paren">(</span>u8 <em>priority</em><span class="sig-paren">)</span><a class="headerlink" href="#c.ssh_packet_priority_get_try" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Get number of tries from packet priority.</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">u8</span> <span class="pre">priority</span></code></dt><dd><p>The packet priority.</p>
</dd>
</dl>
<p><strong>Return</strong></p>
<p>Returns the number of tries encoded in the specified packet
priority.</p>
<dl class="c function">
<dt id="c.ssh_packet_priority_get_base">
u8 <code class="sig-name descname">ssh_packet_priority_get_base</code><span class="sig-paren">(</span>u8 <em>priority</em><span class="sig-paren">)</span><a class="headerlink" href="#c.ssh_packet_priority_get_base" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Get base priority from packet priority.</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">u8</span> <span class="pre">priority</span></code></dt><dd><p>The packet priority.</p>
</dd>
</dl>
<p><strong>Return</strong></p>
<p>Returns the base priority encoded in the given packet priority.</p>
<dl class="c struct">
<dt id="c.ssh_packet_ops">
<em class="property">struct </em><code class="sig-name descname">ssh_packet_ops</code><a class="headerlink" href="#c.ssh_packet_ops" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Callback operations for a SSH packet.</p>
</dd></dl>

<p><strong>Definition</strong></p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>struct ssh_packet_ops {
  void (*release)(struct ssh_packet *p);
  void (*complete)(struct ssh_packet *p, int status);
};
</pre></div>
</div>
<p><strong>Members</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">release</span></code></dt><dd><p>Function called when the packet reference count reaches zero.
This callback must be relied upon to ensure that the packet has
left the transport system(s).</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">complete</span></code></dt><dd><p>Function called when the packet is completed, either with
success or failure. In case of failure, the reason for the
failure is indicated by the value of the provided status code
argument. This value will be zero in case of success. Note that
a call to this callback does not guarantee that the packet is
not in use by the transport system any more.</p>
</dd>
</dl>
<dl class="c struct">
<dt id="c.ssh_packet">
<em class="property">struct </em><code class="sig-name descname">ssh_packet</code><a class="headerlink" href="#c.ssh_packet" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>SSH transport packet.</p>
</dd></dl>

<p><strong>Definition</strong></p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>struct ssh_packet {
  struct ssh_ptl *ptl;
  struct kref refcnt;
  u8 priority;
  struct {
    size_t len;
    u8 *ptr;
  } data;
  unsigned long state;
  ktime_t timestamp;
  struct list_head queue_node;
  struct list_head pending_node;
  const struct ssh_packet_ops *ops;
};
</pre></div>
</div>
<p><strong>Members</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">ptl</span></code></dt><dd><p>Pointer to the packet transport layer. May be <code class="docutils literal notranslate"><span class="pre">NULL</span></code> if the packet
(or enclosing request) has not been submitted yet.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">refcnt</span></code></dt><dd><p>Reference count of the packet.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">priority</span></code></dt><dd><p>Priority of the packet. Must be computed via
<a class="reference internal" href="#c.SSH_PACKET_PRIORITY" title="SSH_PACKET_PRIORITY"><code class="xref c c-func docutils literal notranslate"><span class="pre">SSH_PACKET_PRIORITY()</span></code></a>. Must only be accessed while holding the
queue lock after first submission.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">data</span></code></dt><dd><p>Raw message data.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">data.len</span></code></dt><dd><p>Length of the raw message data.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">data.ptr</span></code></dt><dd><p>Pointer to the raw message data buffer.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">state</span></code></dt><dd><p>State and type flags describing current packet state (dynamic)
and type (static). See <code class="xref c c-type docutils literal notranslate"><span class="pre">enum</span> <span class="pre">ssh_packet_flags</span></code> for possible
options.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">timestamp</span></code></dt><dd><p>Timestamp specifying when the latest transmission of a
currently pending packet has been started. May be <code class="docutils literal notranslate"><span class="pre">KTIME_MAX</span></code>
before or in-between transmission attempts. Used for the packet
timeout implementation. Must only be accessed while holding the
pending lock after first submission.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">queue_node</span></code></dt><dd><p>The list node for the packet queue.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">pending_node</span></code></dt><dd><p>The list node for the set of pending packets.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">ops</span></code></dt><dd><p>Packet operations.</p>
</dd>
</dl>
<dl class="c function">
<dt id="c.ssh_packet_set_data">
void <code class="sig-name descname">ssh_packet_set_data</code><span class="sig-paren">(</span><em class="property">struct</em> <a class="reference internal" href="#c.ssh_packet" title="ssh_packet">ssh_packet</a> *<em>p</em>, u8 *<em>ptr</em>, size_t <em>len</em><span class="sig-paren">)</span><a class="headerlink" href="#c.ssh_packet_set_data" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Set raw message data of packet.</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">ssh_packet</span> <span class="pre">*p</span></code></dt><dd><p>The packet for which the message data should be set.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">u8</span> <span class="pre">*ptr</span></code></dt><dd><p>Pointer to the memory holding the message data.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">size_t</span> <span class="pre">len</span></code></dt><dd><p>Length of the message data.</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Sets the raw message data buffer of the packet to the provided memory. The
memory is not copied. Instead, the caller is responsible for management
(i.e. allocation and deallocation) of the memory. The caller must ensure
that the provided memory is valid and contains a valid SSH message,
starting from the time of submission of the packet until the <code class="docutils literal notranslate"><span class="pre">release</span></code>
callback has been called. During this time, the memory may not be altered
in any way.</p>
<dl class="c struct">
<dt id="c.ssh_request_ops">
<em class="property">struct </em><code class="sig-name descname">ssh_request_ops</code><a class="headerlink" href="#c.ssh_request_ops" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Callback operations for a SSH request.</p>
</dd></dl>

<p><strong>Definition</strong></p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>struct ssh_request_ops {
  void (*release)(struct ssh_request *rqst);
  void (*complete)(struct ssh_request *rqst,const struct ssh_command *cmd, const struct ssam_span *data, int status);
};
</pre></div>
</div>
<p><strong>Members</strong></p>
<dl>
<dt><code class="docutils literal notranslate"><span class="pre">release</span></code></dt><dd><p>Function called when the request’s reference count reaches zero.
This callback must be relied upon to ensure that the request has
left the transport systems (both, packet an request systems).</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">complete</span></code></dt><dd><p>Function called when the request is completed, either with
success or failure. The command data for the request response
is provided via the <a class="reference internal" href="#c.ssh_command" title="ssh_command"><code class="xref c c-type docutils literal notranslate"><span class="pre">struct</span> <span class="pre">ssh_command</span></code></a> parameter (<code class="docutils literal notranslate"><span class="pre">cmd</span></code>),
the command payload of the request response via the <code class="xref c c-type docutils literal notranslate"><span class="pre">struct</span>
<span class="pre">ssh_span</span></code> parameter (<code class="docutils literal notranslate"><span class="pre">data</span></code>).</p>
<p>If the request does not have any response or has not been
completed with success, both <code class="docutils literal notranslate"><span class="pre">cmd</span></code> and <code class="docutils literal notranslate"><span class="pre">data</span></code> parameters will
be NULL. If the request response does not have any command
payload, the <code class="docutils literal notranslate"><span class="pre">data</span></code> span will be an empty (zero-length) span.</p>
<p>In case of failure, the reason for the failure is indicated by
the value of the provided status code argument (<code class="docutils literal notranslate"><span class="pre">status</span></code>). This
value will be zero in case of success and a regular errno
otherwise.</p>
<p>Note that a call to this callback does not guarantee that the
request is not in use by the transport systems any more.</p>
</dd>
</dl>
<dl class="c struct">
<dt id="c.ssh_request">
<em class="property">struct </em><code class="sig-name descname">ssh_request</code><a class="headerlink" href="#c.ssh_request" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>SSH transport request.</p>
</dd></dl>

<p><strong>Definition</strong></p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>struct ssh_request {
  struct ssh_packet packet;
  struct list_head node;
  unsigned long state;
  ktime_t timestamp;
  const struct ssh_request_ops *ops;
};
</pre></div>
</div>
<p><strong>Members</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">packet</span></code></dt><dd><p>The underlying SSH transport packet.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">node</span></code></dt><dd><p>List node for the request queue and pending set.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">state</span></code></dt><dd><p>State and type flags describing current request state (dynamic)
and type (static). See <code class="xref c c-type docutils literal notranslate"><span class="pre">enum</span> <span class="pre">ssh_request_flags</span></code> for possible
options.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">timestamp</span></code></dt><dd><p>Timestamp specifying when we start waiting on the response of
the request. This is set once the underlying packet has been
completed and may be <code class="docutils literal notranslate"><span class="pre">KTIME_MAX</span></code> before that, or when the request
does not expect a response. Used for the request timeout
implementation.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">ops</span></code></dt><dd><p>Request Operations.</p>
</dd>
</dl>
<dl class="c function">
<dt id="c.to_ssh_request">
<em class="property">struct</em> <a class="reference internal" href="#c.ssh_request" title="ssh_request">ssh_request</a> *<code class="sig-name descname">to_ssh_request</code><span class="sig-paren">(</span><em class="property">struct</em> <a class="reference internal" href="#c.ssh_packet" title="ssh_packet">ssh_packet</a> *<em>p</em><span class="sig-paren">)</span><a class="headerlink" href="#c.to_ssh_request" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Cast a SSH packet to its enclosing SSH request.</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">ssh_packet</span> <span class="pre">*p</span></code></dt><dd><p>The packet to cast.</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Casts the given <a class="reference internal" href="#c.ssh_packet" title="ssh_packet"><code class="xref c c-type docutils literal notranslate"><span class="pre">struct</span> <span class="pre">ssh_packet</span></code></a> to its enclosing <a class="reference internal" href="#c.ssh_request" title="ssh_request"><code class="xref c c-type docutils literal notranslate"><span class="pre">struct</span> <span class="pre">ssh_request</span></code></a>.
The caller is responsible for making sure that the packet is actually
wrapped in a <a class="reference internal" href="#c.ssh_request" title="ssh_request"><code class="xref c c-type docutils literal notranslate"><span class="pre">struct</span> <span class="pre">ssh_request</span></code></a>.</p>
<p><strong>Return</strong></p>
<p>Returns the <a class="reference internal" href="#c.ssh_request" title="ssh_request"><code class="xref c c-type docutils literal notranslate"><span class="pre">struct</span> <span class="pre">ssh_request</span></code></a> wrapping the provided packet.</p>
<dl class="c function">
<dt id="c.ssh_request_get">
<em class="property">struct</em> <a class="reference internal" href="#c.ssh_request" title="ssh_request">ssh_request</a> *<code class="sig-name descname">ssh_request_get</code><span class="sig-paren">(</span><em class="property">struct</em> <a class="reference internal" href="#c.ssh_request" title="ssh_request">ssh_request</a> *<em>r</em><span class="sig-paren">)</span><a class="headerlink" href="#c.ssh_request_get" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Increment reference count of request.</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">ssh_request</span> <span class="pre">*r</span></code></dt><dd><p>The request to increment the reference count of.</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Increments the reference count of the given request by incrementing the
reference count of the underlying <a class="reference internal" href="#c.ssh_packet" title="ssh_packet"><code class="xref c c-type docutils literal notranslate"><span class="pre">struct</span> <span class="pre">ssh_packet</span></code></a>, enclosed in it.</p>
<p>See also <a class="reference internal" href="#c.ssh_request_put" title="ssh_request_put"><code class="xref c c-func docutils literal notranslate"><span class="pre">ssh_request_put()</span></code></a>, <a class="reference internal" href="#c.ssh_packet_get" title="ssh_packet_get"><code class="xref c c-func docutils literal notranslate"><span class="pre">ssh_packet_get()</span></code></a>.</p>
<p><strong>Return</strong></p>
<p>Returns the request provided as input.</p>
<dl class="c function">
<dt id="c.ssh_request_put">
void <code class="sig-name descname">ssh_request_put</code><span class="sig-paren">(</span><em class="property">struct</em> <a class="reference internal" href="#c.ssh_request" title="ssh_request">ssh_request</a> *<em>r</em><span class="sig-paren">)</span><a class="headerlink" href="#c.ssh_request_put" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Decrement reference count of request.</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">ssh_request</span> <span class="pre">*r</span></code></dt><dd><p>The request to decrement the reference count of.</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Decrements the reference count of the given request by decrementing the
reference count of the underlying <a class="reference internal" href="#c.ssh_packet" title="ssh_packet"><code class="xref c c-type docutils literal notranslate"><span class="pre">struct</span> <span class="pre">ssh_packet</span></code></a>, enclosed in it. If
the reference count reaches zero, the <code class="docutils literal notranslate"><span class="pre">release</span></code> callback specified in the
request’s <a class="reference internal" href="#c.ssh_request_ops" title="ssh_request_ops"><code class="xref c c-type docutils literal notranslate"><span class="pre">struct</span> <span class="pre">ssh_request_ops</span></code></a>, i.e. <code class="docutils literal notranslate"><span class="pre">r-&gt;ops-&gt;release</span></code>, will be
called.</p>
<p>See also <a class="reference internal" href="#c.ssh_request_get" title="ssh_request_get"><code class="xref c c-func docutils literal notranslate"><span class="pre">ssh_request_get()</span></code></a>, <a class="reference internal" href="#c.ssh_packet_put" title="ssh_packet_put"><code class="xref c c-func docutils literal notranslate"><span class="pre">ssh_packet_put()</span></code></a>.</p>
<dl class="c function">
<dt id="c.ssh_request_set_data">
void <code class="sig-name descname">ssh_request_set_data</code><span class="sig-paren">(</span><em class="property">struct</em> <a class="reference internal" href="#c.ssh_request" title="ssh_request">ssh_request</a> *<em>r</em>, u8 *<em>ptr</em>, size_t <em>len</em><span class="sig-paren">)</span><a class="headerlink" href="#c.ssh_request_set_data" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Set raw message data of request.</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">ssh_request</span> <span class="pre">*r</span></code></dt><dd><p>The request for which the message data should be set.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">u8</span> <span class="pre">*ptr</span></code></dt><dd><p>Pointer to the memory holding the message data.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">size_t</span> <span class="pre">len</span></code></dt><dd><p>Length of the message data.</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Sets the raw message data buffer of the underlying packet to the specified
buffer. Does not copy the actual message data, just sets the buffer pointer
and length. Refer to <a class="reference internal" href="#c.ssh_packet_set_data" title="ssh_packet_set_data"><code class="xref c c-func docutils literal notranslate"><span class="pre">ssh_packet_set_data()</span></code></a> for more details.</p>
<dl class="c function">
<dt id="c.ssh_packet_get">
<em class="property">struct</em> <a class="reference internal" href="#c.ssh_packet" title="ssh_packet">ssh_packet</a> *<code class="sig-name descname">ssh_packet_get</code><span class="sig-paren">(</span><em class="property">struct</em> <a class="reference internal" href="#c.ssh_packet" title="ssh_packet">ssh_packet</a> *<em>packet</em><span class="sig-paren">)</span><a class="headerlink" href="#c.ssh_packet_get" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Increment reference count of packet.</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">ssh_packet</span> <span class="pre">*packet</span></code></dt><dd><p>The packet to increment the reference count of.</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Increments the reference count of the given packet. See <a class="reference internal" href="#c.ssh_packet_put" title="ssh_packet_put"><code class="xref c c-func docutils literal notranslate"><span class="pre">ssh_packet_put()</span></code></a>
for the counter-part of this function.</p>
<p><strong>Return</strong></p>
<p>Returns the packet provided as input.</p>
<dl class="c function">
<dt id="c.ssh_packet_put">
void <code class="sig-name descname">ssh_packet_put</code><span class="sig-paren">(</span><em class="property">struct</em> <a class="reference internal" href="#c.ssh_packet" title="ssh_packet">ssh_packet</a> *<em>packet</em><span class="sig-paren">)</span><a class="headerlink" href="#c.ssh_packet_put" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Decrement reference count of packet.</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">ssh_packet</span> <span class="pre">*packet</span></code></dt><dd><p>The packet to decrement the reference count of.</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>If the reference count reaches zero, the <code class="docutils literal notranslate"><span class="pre">release</span></code> callback specified in
the packet’s <a class="reference internal" href="#c.ssh_packet_ops" title="ssh_packet_ops"><code class="xref c c-type docutils literal notranslate"><span class="pre">struct</span> <span class="pre">ssh_packet_ops</span></code></a>, i.e. <code class="docutils literal notranslate"><span class="pre">packet-&gt;ops-&gt;release</span></code>, will be
called.</p>
<p>See <a class="reference internal" href="#c.ssh_packet_get" title="ssh_packet_get"><code class="xref c c-func docutils literal notranslate"><span class="pre">ssh_packet_get()</span></code></a> for the counter-part of this function.</p>
</div>
<div class="section" id="controller-and-core-interface">
<h2><a class="toc-backref" href="#id3">Controller and Core Interface</a><a class="headerlink" href="#controller-and-core-interface" title="Permalink to this headline">¶</a></h2>
<dl class="c enum">
<dt id="c.ssam_event_flags">
<em class="property">enum </em><code class="sig-name descname">ssam_event_flags</code><a class="headerlink" href="#c.ssam_event_flags" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Flags for enabling/disabling SAM events</p>
</dd></dl>

<p><strong>Constants</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">SSAM_EVENT_SEQUENCED</span></code></dt><dd><p>The event will be sent via a sequenced data frame.</p>
</dd>
</dl>
<dl class="c struct">
<dt id="c.ssam_event">
<em class="property">struct </em><code class="sig-name descname">ssam_event</code><a class="headerlink" href="#c.ssam_event" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>SAM event sent from the EC to the host.</p>
</dd></dl>

<p><strong>Definition</strong></p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>struct ssam_event {
  u8 target_category;
  u8 target_id;
  u8 command_id;
  u8 instance_id;
  u16 length;
  u8 data[];
};
</pre></div>
</div>
<p><strong>Members</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">target_category</span></code></dt><dd><p>Target category of the event source. See <code class="xref c c-type docutils literal notranslate"><span class="pre">enum</span> <span class="pre">ssam_ssh_tc</span></code>.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">target_id</span></code></dt><dd><p>Target ID of the event source.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">command_id</span></code></dt><dd><p>Command ID of the event.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">instance_id</span></code></dt><dd><p>Instance ID of the event source.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">length</span></code></dt><dd><p>Length of the event payload in bytes.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">data</span></code></dt><dd><p>Event payload data.</p>
</dd>
</dl>
<dl class="c enum">
<dt id="c.ssam_request_flags">
<em class="property">enum </em><code class="sig-name descname">ssam_request_flags</code><a class="headerlink" href="#c.ssam_request_flags" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Flags for SAM requests.</p>
</dd></dl>

<p><strong>Constants</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">SSAM_REQUEST_HAS_RESPONSE</span></code></dt><dd><p>Specifies that the request expects a response. If not set, the request
will be directly completed after its underlying packet has been
transmitted. If set, the request transport system waits for a response
of the request.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">SSAM_REQUEST_UNSEQUENCED</span></code></dt><dd><p>Specifies that the request should be transmitted via an unsequenced
packet. If set, the request must not have a response, meaning that this
flag and the <code class="docutils literal notranslate"><span class="pre">SSAM_REQUEST_HAS_RESPONSE</span></code> flag are mutually exclusive.</p>
</dd>
</dl>
<dl class="c struct">
<dt id="c.ssam_request">
<em class="property">struct </em><code class="sig-name descname">ssam_request</code><a class="headerlink" href="#c.ssam_request" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>SAM request description.</p>
</dd></dl>

<p><strong>Definition</strong></p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>struct ssam_request {
  u8 target_category;
  u8 target_id;
  u8 command_id;
  u8 instance_id;
  u16 flags;
  u16 length;
  const u8 *payload;
};
</pre></div>
</div>
<p><strong>Members</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">target_category</span></code></dt><dd><p>Category of the request’s target. See <code class="xref c c-type docutils literal notranslate"><span class="pre">enum</span> <span class="pre">ssam_ssh_tc</span></code>.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">target_id</span></code></dt><dd><p>ID of the request’s target.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">command_id</span></code></dt><dd><p>Command ID of the request.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">instance_id</span></code></dt><dd><p>Instance ID of the request’s target.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">flags</span></code></dt><dd><p>Flags for the request. See <a class="reference internal" href="#c.ssam_request_flags" title="ssam_request_flags"><code class="xref c c-type docutils literal notranslate"><span class="pre">enum</span> <span class="pre">ssam_request_flags</span></code></a>.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">length</span></code></dt><dd><p>Length of the request payload in bytes.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">payload</span></code></dt><dd><p>Request payload data.</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>This struct fully describes a SAM request with payload. It is intended to
help set up the actual transport struct, e.g. <a class="reference internal" href="#c.ssam_request_sync" title="ssam_request_sync"><code class="xref c c-type docutils literal notranslate"><span class="pre">struct</span> <span class="pre">ssam_request_sync</span></code></a>,
and specifically its raw message data via <a class="reference internal" href="#c.ssam_request_write_data" title="ssam_request_write_data"><code class="xref c c-func docutils literal notranslate"><span class="pre">ssam_request_write_data()</span></code></a>.</p>
<dl class="c struct">
<dt id="c.ssam_response">
<em class="property">struct </em><code class="sig-name descname">ssam_response</code><a class="headerlink" href="#c.ssam_response" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Response buffer for SAM request.</p>
</dd></dl>

<p><strong>Definition</strong></p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>struct ssam_response {
  size_t capacity;
  size_t length;
  u8 *pointer;
};
</pre></div>
</div>
<p><strong>Members</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">capacity</span></code></dt><dd><p>Capacity of the buffer, in bytes.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">length</span></code></dt><dd><p>Length of the actual data stored in the memory pointed to by
<strong>pointer</strong>, in bytes. Set by the transport system.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">pointer</span></code></dt><dd><p>Pointer to the buffer’s memory, storing the response payload data.</p>
</dd>
</dl>
<dl class="c struct">
<dt id="c.ssam_request_sync">
<em class="property">struct </em><code class="sig-name descname">ssam_request_sync</code><a class="headerlink" href="#c.ssam_request_sync" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Synchronous SAM request struct.</p>
</dd></dl>

<p><strong>Definition</strong></p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>struct ssam_request_sync {
  struct ssh_request base;
  struct completion comp;
  struct ssam_response *resp;
  int status;
};
</pre></div>
</div>
<p><strong>Members</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">base</span></code></dt><dd><p>Underlying SSH request.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">comp</span></code></dt><dd><p>Completion used to signal full completion of the request. After the
request has been submitted, this struct may only be modified or
deallocated after the completion has been signaled.
request has been submitted,</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">resp</span></code></dt><dd><p>Buffer to store the response.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">status</span></code></dt><dd><p>Status of the request, set after the base request has been
completed or has failed.</p>
</dd>
</dl>
<dl class="c function">
<dt id="c.ssam_request_sync_set_data">
void <code class="sig-name descname">ssam_request_sync_set_data</code><span class="sig-paren">(</span><em class="property">struct</em> <a class="reference internal" href="#c.ssam_request_sync" title="ssam_request_sync">ssam_request_sync</a> *<em>rqst</em>, u8 *<em>ptr</em>, size_t <em>len</em><span class="sig-paren">)</span><a class="headerlink" href="#c.ssam_request_sync_set_data" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Set message data of a synchronous request.</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">ssam_request_sync</span> <span class="pre">*rqst</span></code></dt><dd><p>The request.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">u8</span> <span class="pre">*ptr</span></code></dt><dd><p>Pointer to the request message data.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">size_t</span> <span class="pre">len</span></code></dt><dd><p>Length of the request message data.</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Set the request message data of a synchronous request. The provided buffer
needs to live until the request has been completed.</p>
<dl class="c function">
<dt id="c.ssam_request_sync_set_resp">
void <code class="sig-name descname">ssam_request_sync_set_resp</code><span class="sig-paren">(</span><em class="property">struct</em> <a class="reference internal" href="#c.ssam_request_sync" title="ssam_request_sync">ssam_request_sync</a> *<em>rqst</em>, <em class="property">struct</em> <a class="reference internal" href="#c.ssam_response" title="ssam_response">ssam_response</a> *<em>resp</em><span class="sig-paren">)</span><a class="headerlink" href="#c.ssam_request_sync_set_resp" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Set response buffer of a synchronous request.</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">ssam_request_sync</span> <span class="pre">*rqst</span></code></dt><dd><p>The request.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">ssam_response</span> <span class="pre">*resp</span></code></dt><dd><p>The response buffer.</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Sets the response buffer of a synchronous request. This buffer will store
the response of the request after it has been completed. May be <code class="docutils literal notranslate"><span class="pre">NULL</span></code> if no
response is expected.</p>
<dl class="c function">
<dt id="c.ssam_request_sync_wait">
int <code class="sig-name descname">ssam_request_sync_wait</code><span class="sig-paren">(</span><em class="property">struct</em> <a class="reference internal" href="#c.ssam_request_sync" title="ssam_request_sync">ssam_request_sync</a> *<em>rqst</em><span class="sig-paren">)</span><a class="headerlink" href="#c.ssam_request_sync_wait" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Wait for completion of a synchronous request.</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">ssam_request_sync</span> <span class="pre">*rqst</span></code></dt><dd><p>The request to wait for.</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Wait for completion and release of a synchronous request. After this
function terminates, the request is guaranteed to have left the transport
system. After successful submission of a request, this function must be
called before accessing the response of the request, freeing the request,
or freeing any of the buffers associated with the request.</p>
<p>This function must not be called if the request has not been submitted yet
and may lead to a deadlock/infinite wait if a subsequent request submission
fails in that case, due to the completion never triggering.</p>
<p><strong>Return</strong></p>
<p>Returns the status of the given request, which is set on completion
of the packet. This value is zero on success and negative on failure.</p>
<dl class="c macro">
<dt id="c.ssam_request_sync_onstack">
<code class="sig-name descname">ssam_request_sync_onstack</code><a class="headerlink" href="#c.ssam_request_sync_onstack" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<p><code class="docutils literal notranslate"><span class="pre">ssam_request_sync_onstack</span> <span class="pre">(ctrl,</span> <span class="pre">rqst,</span> <span class="pre">rsp,</span> <span class="pre">payload_len)</span></code></p>
<blockquote>
<div><p>Execute a synchronous request on the stack.</p>
</div></blockquote>
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">ctrl</span></code></dt><dd><p>The controller via which the request is submitted.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">rqst</span></code></dt><dd><p>The request specification.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">rsp</span></code></dt><dd><p>The response buffer.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">payload_len</span></code></dt><dd><p>The (maximum) request payload length.</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Allocates a synchronous request with specified payload length on the stack,
fully initializes it via the provided request specification, submits it,
and finally waits for its completion before returning its status. This
helper macro essentially allocates the request message buffer on the stack
and then calls <a class="reference internal" href="#c.ssam_request_sync_with_buffer" title="ssam_request_sync_with_buffer"><code class="xref c c-func docutils literal notranslate"><span class="pre">ssam_request_sync_with_buffer()</span></code></a>.</p>
<p><strong>Note</strong></p>
<p>The <strong>payload_len</strong> parameter specifies the maximum payload length, used
for buffer allocation. The actual payload length may be smaller.</p>
<p><strong>Return</strong></p>
<p>Returns the status of the request or any failure during setup, i.e.
zero on success and a negative value on failure.</p>
<dl class="c macro">
<dt id="c.__ssam_retry">
<code class="sig-name descname">__ssam_retry</code><a class="headerlink" href="#c.__ssam_retry" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<p><code class="docutils literal notranslate"><span class="pre">__ssam_retry</span> <span class="pre">(request,</span> <span class="pre">n,</span> <span class="pre">args...)</span></code></p>
<blockquote>
<div><p>Retry request in case of I/O errors or timeouts.</p>
</div></blockquote>
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">request</span></code></dt><dd><p>The request function to execute. Must return an integer.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">n</span></code></dt><dd><p>Number of tries.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">args...</span></code></dt><dd><p>Arguments for the request function.</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Executes the given request function, i.e. calls <strong>request</strong>. In case the
request returns <code class="docutils literal notranslate"><span class="pre">-EREMOTEIO</span></code> (indicates I/O error) or <code class="docutils literal notranslate"><span class="pre">-ETIMEDOUT</span></code> (request
or underlying packet timed out), <strong>request</strong> will be re-executed again, up to
<strong>n</strong> times in total.</p>
<p><strong>Return</strong></p>
<p>Returns the return value of the last execution of <strong>request</strong>.</p>
<dl class="c macro">
<dt id="c.ssam_retry">
<code class="sig-name descname">ssam_retry</code><a class="headerlink" href="#c.ssam_retry" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<p><code class="docutils literal notranslate"><span class="pre">ssam_retry</span> <span class="pre">(request,</span> <span class="pre">args...)</span></code></p>
<blockquote>
<div><p>Retry request in case of I/O errors or timeouts up to three times in total.</p>
</div></blockquote>
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">request</span></code></dt><dd><p>The request function to execute. Must return an integer.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">args...</span></code></dt><dd><p>Arguments for the request function.</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Executes the given request function, i.e. calls <strong>request</strong>. In case the
request returns <code class="docutils literal notranslate"><span class="pre">-EREMOTEIO</span></code> (indicates I/O error) or -<code class="docutils literal notranslate"><span class="pre">ETIMEDOUT</span></code> (request
or underlying packet timed out), <strong>request</strong> will be re-executed again, up to
three times in total.</p>
<p>See <a class="reference internal" href="#c.__ssam_retry" title="__ssam_retry"><code class="xref c c-func docutils literal notranslate"><span class="pre">__ssam_retry()</span></code></a> for a more generic macro for this purpose.</p>
<p><strong>Return</strong></p>
<p>Returns the return value of the last execution of <strong>request</strong>.</p>
<dl class="c struct">
<dt id="c.ssam_request_spec">
<em class="property">struct </em><code class="sig-name descname">ssam_request_spec</code><a class="headerlink" href="#c.ssam_request_spec" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Blue-print specification of SAM request.</p>
</dd></dl>

<p><strong>Definition</strong></p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>struct ssam_request_spec {
  u8 target_category;
  u8 target_id;
  u8 command_id;
  u8 instance_id;
  u8 flags;
};
</pre></div>
</div>
<p><strong>Members</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">target_category</span></code></dt><dd><p>Category of the request’s target. See <code class="xref c c-type docutils literal notranslate"><span class="pre">enum</span> <span class="pre">ssam_ssh_tc</span></code>.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">target_id</span></code></dt><dd><p>ID of the request’s target.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">command_id</span></code></dt><dd><p>Command ID of the request.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">instance_id</span></code></dt><dd><p>Instance ID of the request’s target.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">flags</span></code></dt><dd><p>Flags for the request. See <a class="reference internal" href="#c.ssam_request_flags" title="ssam_request_flags"><code class="xref c c-type docutils literal notranslate"><span class="pre">enum</span> <span class="pre">ssam_request_flags</span></code></a>.</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Blue-print specification for a SAM request. This struct describes the
unique static parameters of a request (i.e. type) without specifying any of
its instance-specific data (e.g. payload). It is intended to be used as base
for defining simple request functions via the
<code class="docutils literal notranslate"><span class="pre">SSAM_DEFINE_SYNC_REQUEST_x()</span></code> family of macros.</p>
<dl class="c struct">
<dt id="c.ssam_request_spec_md">
<em class="property">struct </em><code class="sig-name descname">ssam_request_spec_md</code><a class="headerlink" href="#c.ssam_request_spec_md" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Blue-print specification for multi-device SAM request.</p>
</dd></dl>

<p><strong>Definition</strong></p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>struct ssam_request_spec_md {
  u8 target_category;
  u8 command_id;
  u8 flags;
};
</pre></div>
</div>
<p><strong>Members</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">target_category</span></code></dt><dd><p>Category of the request’s target. See <code class="xref c c-type docutils literal notranslate"><span class="pre">enum</span> <span class="pre">ssam_ssh_tc</span></code>.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">command_id</span></code></dt><dd><p>Command ID of the request.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">flags</span></code></dt><dd><p>Flags for the request. See <a class="reference internal" href="#c.ssam_request_flags" title="ssam_request_flags"><code class="xref c c-type docutils literal notranslate"><span class="pre">enum</span> <span class="pre">ssam_request_flags</span></code></a>.</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Blue-print specification for a multi-device SAM request, i.e. a request
that is applicable to multiple device instances, described by their
individual target and instance IDs. This struct describes the unique static
parameters of a request (i.e. type) without specifying any of its
instance-specific data (e.g. payload) and without specifying any of its
device specific IDs (i.e. target and instance ID). It is intended to be
used as base for defining simple multi-device request functions via the
<code class="docutils literal notranslate"><span class="pre">SSAM_DEFINE_SYNC_REQUEST_MD_x()</span></code> and <code class="docutils literal notranslate"><span class="pre">SSAM_DEFINE_SYNC_REQUEST_CL_x()</span></code>
families of macros.</p>
<dl class="c macro">
<dt id="c.SSAM_DEFINE_SYNC_REQUEST_N">
<code class="sig-name descname">SSAM_DEFINE_SYNC_REQUEST_N</code><a class="headerlink" href="#c.SSAM_DEFINE_SYNC_REQUEST_N" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<p><code class="docutils literal notranslate"><span class="pre">SSAM_DEFINE_SYNC_REQUEST_N</span> <span class="pre">(name,</span> <span class="pre">spec...)</span></code></p>
<blockquote>
<div><p>Define synchronous SAM request function with neither argument nor return value.</p>
</div></blockquote>
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">name</span></code></dt><dd><p>Name of the generated function.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">spec...</span></code></dt><dd><p>Specification (<a class="reference internal" href="#c.ssam_request_spec" title="ssam_request_spec"><code class="xref c c-type docutils literal notranslate"><span class="pre">struct</span> <span class="pre">ssam_request_spec</span></code></a>) defining the request.</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Defines a function executing the synchronous SAM request specified by
<strong>spec</strong>, with the request having neither argument nor return value. The
generated function takes care of setting up the request struct and buffer
allocation, as well as execution of the request itself, returning once the
request has been fully completed. The required transport buffer will be
allocated on the stack.</p>
<p>The generated function is defined as <code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">name(struct</span> <span class="pre">ssam_controller</span>
<span class="pre">*ctrl)</span></code>, returning the status of the request, which is zero on success and
negative on failure. The <code class="docutils literal notranslate"><span class="pre">ctrl</span></code> parameter is the controller via which the
request is being sent.</p>
<p>Refer to <a class="reference internal" href="#c.ssam_request_sync_onstack" title="ssam_request_sync_onstack"><code class="xref c c-func docutils literal notranslate"><span class="pre">ssam_request_sync_onstack()</span></code></a> for more details on the behavior of
the generated function.</p>
<dl class="c macro">
<dt id="c.SSAM_DEFINE_SYNC_REQUEST_W">
<code class="sig-name descname">SSAM_DEFINE_SYNC_REQUEST_W</code><a class="headerlink" href="#c.SSAM_DEFINE_SYNC_REQUEST_W" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<p><code class="docutils literal notranslate"><span class="pre">SSAM_DEFINE_SYNC_REQUEST_W</span> <span class="pre">(name,</span> <span class="pre">atype,</span> <span class="pre">spec...)</span></code></p>
<blockquote>
<div><p>Define synchronous SAM request function with argument.</p>
</div></blockquote>
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">name</span></code></dt><dd><p>Name of the generated function.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">atype</span></code></dt><dd><p>Type of the request’s argument.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">spec...</span></code></dt><dd><p>Specification (<a class="reference internal" href="#c.ssam_request_spec" title="ssam_request_spec"><code class="xref c c-type docutils literal notranslate"><span class="pre">struct</span> <span class="pre">ssam_request_spec</span></code></a>) defining the request.</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Defines a function executing the synchronous SAM request specified by
<strong>spec</strong>, with the request taking an argument of type <strong>atype</strong> and having no
return value. The generated function takes care of setting up the request
struct, buffer allocation, as well as execution of the request itself,
returning once the request has been fully completed. The required transport
buffer will be allocated on the stack.</p>
<p>The generated function is defined as <code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">name(struct</span> <span class="pre">ssam_controller</span>
<span class="pre">*ctrl,</span> <span class="pre">const</span> <span class="pre">atype</span> <span class="pre">*arg)</span></code>, returning the status of the request, which is
zero on success and negative on failure. The <code class="docutils literal notranslate"><span class="pre">ctrl</span></code> parameter is the
controller via which the request is sent. The request argument is specified
via the <code class="docutils literal notranslate"><span class="pre">arg</span></code> pointer.</p>
<p>Refer to <a class="reference internal" href="#c.ssam_request_sync_onstack" title="ssam_request_sync_onstack"><code class="xref c c-func docutils literal notranslate"><span class="pre">ssam_request_sync_onstack()</span></code></a> for more details on the behavior of
the generated function.</p>
<dl class="c macro">
<dt id="c.SSAM_DEFINE_SYNC_REQUEST_R">
<code class="sig-name descname">SSAM_DEFINE_SYNC_REQUEST_R</code><a class="headerlink" href="#c.SSAM_DEFINE_SYNC_REQUEST_R" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<p><code class="docutils literal notranslate"><span class="pre">SSAM_DEFINE_SYNC_REQUEST_R</span> <span class="pre">(name,</span> <span class="pre">rtype,</span> <span class="pre">spec...)</span></code></p>
<blockquote>
<div><p>Define synchronous SAM request function with return value.</p>
</div></blockquote>
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">name</span></code></dt><dd><p>Name of the generated function.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">rtype</span></code></dt><dd><p>Type of the request’s return value.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">spec...</span></code></dt><dd><p>Specification (<a class="reference internal" href="#c.ssam_request_spec" title="ssam_request_spec"><code class="xref c c-type docutils literal notranslate"><span class="pre">struct</span> <span class="pre">ssam_request_spec</span></code></a>) defining the request.</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Defines a function executing the synchronous SAM request specified by
<strong>spec</strong>, with the request taking no argument but having a return value of
type <strong>rtype</strong>. The generated function takes care of setting up the request
and response structs, buffer allocation, as well as execution of the
request itself, returning once the request has been fully completed. The
required transport buffer will be allocated on the stack.</p>
<p>The generated function is defined as <code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">name(struct</span> <span class="pre">ssam_controller</span>
<span class="pre">*ctrl,</span> <span class="pre">rtype</span> <span class="pre">*ret)</span></code>, returning the status of the request, which is zero on
success and negative on failure. The <code class="docutils literal notranslate"><span class="pre">ctrl</span></code> parameter is the controller
via which the request is sent. The request’s return value is written to the
memory pointed to by the <code class="docutils literal notranslate"><span class="pre">ret</span></code> parameter.</p>
<p>Refer to <a class="reference internal" href="#c.ssam_request_sync_onstack" title="ssam_request_sync_onstack"><code class="xref c c-func docutils literal notranslate"><span class="pre">ssam_request_sync_onstack()</span></code></a> for more details on the behavior of
the generated function.</p>
<dl class="c macro">
<dt id="c.SSAM_DEFINE_SYNC_REQUEST_MD_N">
<code class="sig-name descname">SSAM_DEFINE_SYNC_REQUEST_MD_N</code><a class="headerlink" href="#c.SSAM_DEFINE_SYNC_REQUEST_MD_N" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<p><code class="docutils literal notranslate"><span class="pre">SSAM_DEFINE_SYNC_REQUEST_MD_N</span> <span class="pre">(name,</span> <span class="pre">spec...)</span></code></p>
<blockquote>
<div><p>Define synchronous multi-device SAM request function with neither argument nor return value.</p>
</div></blockquote>
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">name</span></code></dt><dd><p>Name of the generated function.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">spec...</span></code></dt><dd><p>Specification (<a class="reference internal" href="#c.ssam_request_spec_md" title="ssam_request_spec_md"><code class="xref c c-type docutils literal notranslate"><span class="pre">struct</span> <span class="pre">ssam_request_spec_md</span></code></a>) defining the request.</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Defines a function executing the synchronous SAM request specified by
<strong>spec</strong>, with the request having neither argument nor return value. Device
specifying parameters are not hard-coded, but instead must be provided to
the function. The generated function takes care of setting up the request
struct, buffer allocation, as well as execution of the request itself,
returning once the request has been fully completed. The required transport
buffer will be allocated on the stack.</p>
<p>The generated function is defined as <code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">name(struct</span> <span class="pre">ssam_controller</span>
<span class="pre">*ctrl,</span> <span class="pre">u8</span> <span class="pre">tid,</span> <span class="pre">u8</span> <span class="pre">iid)</span></code>, returning the status of the request, which is
zero on success and negative on failure. The <code class="docutils literal notranslate"><span class="pre">ctrl</span></code> parameter is the
controller via which the request is sent, <code class="docutils literal notranslate"><span class="pre">tid</span></code> the target ID for the
request, and <code class="docutils literal notranslate"><span class="pre">iid</span></code> the instance ID.</p>
<p>Refer to <a class="reference internal" href="#c.ssam_request_sync_onstack" title="ssam_request_sync_onstack"><code class="xref c c-func docutils literal notranslate"><span class="pre">ssam_request_sync_onstack()</span></code></a> for more details on the behavior of
the generated function.</p>
<dl class="c macro">
<dt id="c.SSAM_DEFINE_SYNC_REQUEST_MD_W">
<code class="sig-name descname">SSAM_DEFINE_SYNC_REQUEST_MD_W</code><a class="headerlink" href="#c.SSAM_DEFINE_SYNC_REQUEST_MD_W" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<p><code class="docutils literal notranslate"><span class="pre">SSAM_DEFINE_SYNC_REQUEST_MD_W</span> <span class="pre">(name,</span> <span class="pre">atype,</span> <span class="pre">spec...)</span></code></p>
<blockquote>
<div><p>Define synchronous multi-device SAM request function with argument.</p>
</div></blockquote>
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">name</span></code></dt><dd><p>Name of the generated function.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">atype</span></code></dt><dd><p>Type of the request’s argument.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">spec...</span></code></dt><dd><p>Specification (<a class="reference internal" href="#c.ssam_request_spec_md" title="ssam_request_spec_md"><code class="xref c c-type docutils literal notranslate"><span class="pre">struct</span> <span class="pre">ssam_request_spec_md</span></code></a>) defining the request.</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Defines a function executing the synchronous SAM request specified by
<strong>spec</strong>, with the request taking an argument of type <strong>atype</strong> and having no
return value. Device specifying parameters are not hard-coded, but instead
must be provided to the function. The generated function takes care of
setting up the request struct, buffer allocation, as well as execution of
the request itself, returning once the request has been fully completed.
The required transport buffer will be allocated on the stack.</p>
<p>The generated function is defined as <code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">name(struct</span> <span class="pre">ssam_controller</span>
<span class="pre">*ctrl,</span> <span class="pre">u8</span> <span class="pre">tid,</span> <span class="pre">u8</span> <span class="pre">iid,</span> <span class="pre">const</span> <span class="pre">atype</span> <span class="pre">*arg)</span></code>, returning the status of the
request, which is zero on success and negative on failure. The <code class="docutils literal notranslate"><span class="pre">ctrl</span></code>
parameter is the controller via which the request is sent, <code class="docutils literal notranslate"><span class="pre">tid</span></code> the
target ID for the request, and <code class="docutils literal notranslate"><span class="pre">iid</span></code> the instance ID. The request argument
is specified via the <code class="docutils literal notranslate"><span class="pre">arg</span></code> pointer.</p>
<p>Refer to <a class="reference internal" href="#c.ssam_request_sync_onstack" title="ssam_request_sync_onstack"><code class="xref c c-func docutils literal notranslate"><span class="pre">ssam_request_sync_onstack()</span></code></a> for more details on the behavior of
the generated function.</p>
<dl class="c macro">
<dt id="c.SSAM_DEFINE_SYNC_REQUEST_MD_R">
<code class="sig-name descname">SSAM_DEFINE_SYNC_REQUEST_MD_R</code><a class="headerlink" href="#c.SSAM_DEFINE_SYNC_REQUEST_MD_R" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<p><code class="docutils literal notranslate"><span class="pre">SSAM_DEFINE_SYNC_REQUEST_MD_R</span> <span class="pre">(name,</span> <span class="pre">rtype,</span> <span class="pre">spec...)</span></code></p>
<blockquote>
<div><p>Define synchronous multi-device SAM request function with return value.</p>
</div></blockquote>
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">name</span></code></dt><dd><p>Name of the generated function.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">rtype</span></code></dt><dd><p>Type of the request’s return value.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">spec...</span></code></dt><dd><p>Specification (<a class="reference internal" href="#c.ssam_request_spec_md" title="ssam_request_spec_md"><code class="xref c c-type docutils literal notranslate"><span class="pre">struct</span> <span class="pre">ssam_request_spec_md</span></code></a>) defining the request.</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Defines a function executing the synchronous SAM request specified by
<strong>spec</strong>, with the request taking no argument but having a return value of
type <strong>rtype</strong>. Device specifying parameters are not hard-coded, but instead
must be provided to the function. The generated function takes care of
setting up the request and response structs, buffer allocation, as well as
execution of the request itself, returning once the request has been fully
completed. The required transport buffer will be allocated on the stack.</p>
<p>The generated function is defined as <code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">name(struct</span> <span class="pre">ssam_controller</span>
<span class="pre">*ctrl,</span> <span class="pre">u8</span> <span class="pre">tid,</span> <span class="pre">u8</span> <span class="pre">iid,</span> <span class="pre">rtype</span> <span class="pre">*ret)</span></code>, returning the status of the request,
which is zero on success and negative on failure. The <code class="docutils literal notranslate"><span class="pre">ctrl</span></code> parameter is
the controller via which the request is sent, <code class="docutils literal notranslate"><span class="pre">tid</span></code> the target ID for the
request, and <code class="docutils literal notranslate"><span class="pre">iid</span></code> the instance ID. The request’s return value is written
to the memory pointed to by the <code class="docutils literal notranslate"><span class="pre">ret</span></code> parameter.</p>
<p>Refer to <a class="reference internal" href="#c.ssam_request_sync_onstack" title="ssam_request_sync_onstack"><code class="xref c c-func docutils literal notranslate"><span class="pre">ssam_request_sync_onstack()</span></code></a> for more details on the behavior of
the generated function.</p>
<dl class="c enum">
<dt id="c.ssam_notif_flags">
<em class="property">enum </em><code class="sig-name descname">ssam_notif_flags</code><a class="headerlink" href="#c.ssam_notif_flags" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Flags used in return values from SSAM notifier callback functions.</p>
</dd></dl>

<p><strong>Constants</strong></p>
<dl>
<dt><code class="docutils literal notranslate"><span class="pre">SSAM_NOTIF_HANDLED</span></code></dt><dd><p>Indicates that the notification has been handled. This flag should be
set by the handler if the handler can act/has acted upon the event
provided to it. This flag should not be set if the handler is not a
primary handler intended for the provided event.</p>
<p>If this flag has not been set by any handler after the notifier chain
has been traversed, a warning will be emitted, stating that the event
has not been handled.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">SSAM_NOTIF_STOP</span></code></dt><dd><p>Indicates that the notifier traversal should stop. If this flag is
returned from a notifier callback, notifier chain traversal will
immediately stop and any remaining notifiers will not be called. This
flag is automatically set when <a class="reference internal" href="#c.ssam_notifier_from_errno" title="ssam_notifier_from_errno"><code class="xref c c-func docutils literal notranslate"><span class="pre">ssam_notifier_from_errno()</span></code></a> is called
with a negative error value.</p>
</dd>
</dl>
<dl class="c struct">
<dt id="c.ssam_notifier_block">
<em class="property">struct </em><code class="sig-name descname">ssam_notifier_block</code><a class="headerlink" href="#c.ssam_notifier_block" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Base notifier block for SSAM event notifications.</p>
</dd></dl>

<p><strong>Definition</strong></p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>struct ssam_notifier_block {
  struct list_head node;
  ssam_notifier_fn_t fn;
  int priority;
};
</pre></div>
</div>
<p><strong>Members</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">node</span></code></dt><dd><p>The node for the list of notifiers.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">fn</span></code></dt><dd><p>The callback function of this notifier. This function takes the
respective notifier block and event as input and should return
a notifier value, which can either be obtained from the flags
provided in <a class="reference internal" href="#c.ssam_notif_flags" title="ssam_notif_flags"><code class="xref c c-type docutils literal notranslate"><span class="pre">enum</span> <span class="pre">ssam_notif_flags</span></code></a>, converted from a standard
error value via <a class="reference internal" href="#c.ssam_notifier_from_errno" title="ssam_notifier_from_errno"><code class="xref c c-func docutils literal notranslate"><span class="pre">ssam_notifier_from_errno()</span></code></a>, or a combination of
both (e.g. <code class="docutils literal notranslate"><span class="pre">ssam_notifier_from_errno(e)</span> <span class="pre">|</span> <span class="pre">SSAM_NOTIF_HANDLED</span></code>).</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">priority</span></code></dt><dd><p>Priority value determining the order in which notifier callbacks
will be called. A higher value means higher priority, i.e. the
associated callback will be executed earlier than other (lower
priority) callbacks.</p>
</dd>
</dl>
<dl class="c function">
<dt id="c.ssam_notifier_from_errno">
u32 <code class="sig-name descname">ssam_notifier_from_errno</code><span class="sig-paren">(</span>int <em>err</em><span class="sig-paren">)</span><a class="headerlink" href="#c.ssam_notifier_from_errno" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Convert standard error value to notifier return code.</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">err</span></code></dt><dd><p>The error code to convert, must be negative (in case of failure) or
zero (in case of success).</p>
</dd>
</dl>
<p><strong>Return</strong></p>
<p>Returns the notifier return value obtained by converting the
specified <strong>err</strong> value. In case <strong>err</strong> is negative, the <code class="docutils literal notranslate"><span class="pre">SSAM_NOTIF_STOP</span></code> flag
will be set, causing notifier call chain traversal to abort.</p>
<dl class="c function">
<dt id="c.ssam_notifier_to_errno">
int <code class="sig-name descname">ssam_notifier_to_errno</code><span class="sig-paren">(</span>u32 <em>ret</em><span class="sig-paren">)</span><a class="headerlink" href="#c.ssam_notifier_to_errno" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Convert notifier return code to standard error value.</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">u32</span> <span class="pre">ret</span></code></dt><dd><p>The notifier return value to convert.</p>
</dd>
</dl>
<p><strong>Return</strong></p>
<p>Returns the negative error value encoded in <strong>ret</strong> or zero if <strong>ret</strong>
indicates success.</p>
<dl class="c struct">
<dt id="c.ssam_event_registry">
<em class="property">struct </em><code class="sig-name descname">ssam_event_registry</code><a class="headerlink" href="#c.ssam_event_registry" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Registry specification used for enabling events.</p>
</dd></dl>

<p><strong>Definition</strong></p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>struct ssam_event_registry {
  u8 target_category;
  u8 target_id;
  u8 cid_enable;
  u8 cid_disable;
};
</pre></div>
</div>
<p><strong>Members</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">target_category</span></code></dt><dd><p>Target category for the event registry requests.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">target_id</span></code></dt><dd><p>Target ID for the event registry requests.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">cid_enable</span></code></dt><dd><p>Command ID for the event-enable request.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">cid_disable</span></code></dt><dd><p>Command ID for the event-disable request.</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>This struct describes a SAM event registry via the minimal collection of
SAM IDs specifying the requests to use for enabling and disabling an event.
The individual event to be enabled/disabled itself is specified via <a class="reference internal" href="#c.ssam_event_id" title="ssam_event_id"><code class="xref c c-type docutils literal notranslate"><span class="pre">struct</span>
<span class="pre">ssam_event_id</span></code></a>.</p>
<dl class="c struct">
<dt id="c.ssam_event_id">
<em class="property">struct </em><code class="sig-name descname">ssam_event_id</code><a class="headerlink" href="#c.ssam_event_id" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Unique event ID used for enabling events.</p>
</dd></dl>

<p><strong>Definition</strong></p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>struct ssam_event_id {
  u8 target_category;
  u8 instance;
};
</pre></div>
</div>
<p><strong>Members</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">target_category</span></code></dt><dd><p>Target category of the event source.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">instance</span></code></dt><dd><p>Instance ID of the event source.</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>This struct specifies the event to be enabled/disabled via an externally
provided registry. It does not specify the registry to be used itself, this
is done via <a class="reference internal" href="#c.ssam_event_registry" title="ssam_event_registry"><code class="xref c c-type docutils literal notranslate"><span class="pre">struct</span> <span class="pre">ssam_event_registry</span></code></a>.</p>
<dl class="c enum">
<dt id="c.ssam_event_mask">
<em class="property">enum </em><code class="sig-name descname">ssam_event_mask</code><a class="headerlink" href="#c.ssam_event_mask" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Flags specifying how events are matched to notifiers.</p>
</dd></dl>

<p><strong>Constants</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">SSAM_EVENT_MASK_TARGET</span></code></dt><dd><p>In addition to filtering by target category, only execute the notifier
callback for events with a target ID matching to the one of the
registry used for enabling/disabling the event.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">SSAM_EVENT_MASK_INSTANCE</span></code></dt><dd><p>In addition to filtering by target category, only execute the notifier
callback for events with an instance ID matching to the instance ID
used when enabling the event.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">SSAM_EVENT_MASK_NONE</span></code></dt><dd><p>Run the callback for any event with matching target category. Do not
do any additional filtering.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">SSAM_EVENT_MASK_STRICT</span></code></dt><dd><p>Do all the filtering above.</p>
</dd>
</dl>
<dl class="c macro">
<dt id="c.SSAM_EVENT_REGISTRY">
<code class="sig-name descname">SSAM_EVENT_REGISTRY</code><a class="headerlink" href="#c.SSAM_EVENT_REGISTRY" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<p><code class="docutils literal notranslate"><span class="pre">SSAM_EVENT_REGISTRY</span> <span class="pre">(tc,</span> <span class="pre">tid,</span> <span class="pre">cid_en,</span> <span class="pre">cid_dis)</span></code></p>
<blockquote>
<div><p>Define a new event registry.</p>
</div></blockquote>
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">tc</span></code></dt><dd><p>Target category for the event registry requests.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">tid</span></code></dt><dd><p>Target ID for the event registry requests.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">cid_en</span></code></dt><dd><p>Command ID for the event-enable request.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">cid_dis</span></code></dt><dd><p>Command ID for the event-disable request.</p>
</dd>
</dl>
<p><strong>Return</strong></p>
<p>Returns the <a class="reference internal" href="#c.ssam_event_registry" title="ssam_event_registry"><code class="xref c c-type docutils literal notranslate"><span class="pre">struct</span> <span class="pre">ssam_event_registry</span></code></a> specified by the given
parameters.</p>
<dl class="c struct">
<dt id="c.ssam_event_notifier">
<em class="property">struct </em><code class="sig-name descname">ssam_event_notifier</code><a class="headerlink" href="#c.ssam_event_notifier" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Notifier block for SSAM events.</p>
</dd></dl>

<p><strong>Definition</strong></p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>struct ssam_event_notifier {
  struct ssam_notifier_block base;
  struct {
    struct ssam_event_registry reg;
    struct ssam_event_id id;
    enum ssam_event_mask mask;
    u8 flags;
  } event;
};
</pre></div>
</div>
<p><strong>Members</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">base</span></code></dt><dd><p>The base notifier block with callback function and priority.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">event</span></code></dt><dd><p>The event for which this block will receive notifications.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">event.reg</span></code></dt><dd><p>Registry via which the event will be enabled/disabled.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">event.id</span></code></dt><dd><p>ID specifying the event.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">event.mask</span></code></dt><dd><p>Flags determining how events are matched to the notifier.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">event.flags</span></code></dt><dd><p>Flags used for enabling the event.</p>
</dd>
</dl>
<dl class="c function">
<dt id="c.ssam_controller_device">
<em class="property">struct</em> <a class="reference internal" href="../infrastructure.html#c.device" title="device">device</a> *<code class="sig-name descname">ssam_controller_device</code><span class="sig-paren">(</span><em class="property">struct</em> <a class="reference internal" href="internal-api.html#c.ssam_controller" title="ssam_controller">ssam_controller</a> *<em>c</em><span class="sig-paren">)</span><a class="headerlink" href="#c.ssam_controller_device" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Get the <a class="reference internal" href="../infrastructure.html#c.device" title="device"><code class="xref c c-type docutils literal notranslate"><span class="pre">struct</span> <span class="pre">device</span></code></a> associated with this controller.</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">ssam_controller</span> <span class="pre">*c</span></code></dt><dd><p>The controller for which to get the device.</p>
</dd>
</dl>
<p><strong>Return</strong></p>
<p>Returns the <a class="reference internal" href="../infrastructure.html#c.device" title="device"><code class="xref c c-type docutils literal notranslate"><span class="pre">struct</span> <span class="pre">device</span></code></a> associated with this controller,
providing its lower-level transport.</p>
<dl class="c function">
<dt id="c.ssam_controller_get">
<em class="property">struct</em> <a class="reference internal" href="internal-api.html#c.ssam_controller" title="ssam_controller">ssam_controller</a> *<code class="sig-name descname">ssam_controller_get</code><span class="sig-paren">(</span><em class="property">struct</em> <a class="reference internal" href="internal-api.html#c.ssam_controller" title="ssam_controller">ssam_controller</a> *<em>c</em><span class="sig-paren">)</span><a class="headerlink" href="#c.ssam_controller_get" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Increment reference count of controller.</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">ssam_controller</span> <span class="pre">*c</span></code></dt><dd><p>The controller.</p>
</dd>
</dl>
<p><strong>Return</strong></p>
<p>Returns the controller provided as input.</p>
<dl class="c function">
<dt id="c.ssam_controller_put">
void <code class="sig-name descname">ssam_controller_put</code><span class="sig-paren">(</span><em class="property">struct</em> <a class="reference internal" href="internal-api.html#c.ssam_controller" title="ssam_controller">ssam_controller</a> *<em>c</em><span class="sig-paren">)</span><a class="headerlink" href="#c.ssam_controller_put" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Decrement reference count of controller.</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">ssam_controller</span> <span class="pre">*c</span></code></dt><dd><p>The controller.</p>
</dd>
</dl>
<dl class="c function">
<dt id="c.ssam_controller_statelock">
void <code class="sig-name descname">ssam_controller_statelock</code><span class="sig-paren">(</span><em class="property">struct</em> <a class="reference internal" href="internal-api.html#c.ssam_controller" title="ssam_controller">ssam_controller</a> *<em>c</em><span class="sig-paren">)</span><a class="headerlink" href="#c.ssam_controller_statelock" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Lock the controller against state transitions.</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">ssam_controller</span> <span class="pre">*c</span></code></dt><dd><p>The controller to lock.</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Lock the controller against state transitions. Holding this lock guarantees
that the controller will not transition between states, i.e. if the
controller is in state “started”, when this lock has been acquired, it will
remain in this state at least until the lock has been released.</p>
<p>Multiple clients may concurrently hold this lock. In other words: The
<code class="docutils literal notranslate"><span class="pre">statelock</span></code> functions represent the read-lock part of a r/w-semaphore.
Actions causing state transitions of the controller must be executed while
holding the write-part of this r/w-semaphore (see <a class="reference internal" href="internal-api.html#c.ssam_controller_lock" title="ssam_controller_lock"><code class="xref c c-func docutils literal notranslate"><span class="pre">ssam_controller_lock()</span></code></a>
and ssam_controller_unlock() for that).</p>
<p>See <a class="reference internal" href="#c.ssam_controller_stateunlock" title="ssam_controller_stateunlock"><code class="xref c c-func docutils literal notranslate"><span class="pre">ssam_controller_stateunlock()</span></code></a> for the corresponding unlock function.</p>
<dl class="c function">
<dt id="c.ssam_controller_stateunlock">
void <code class="sig-name descname">ssam_controller_stateunlock</code><span class="sig-paren">(</span><em class="property">struct</em> <a class="reference internal" href="internal-api.html#c.ssam_controller" title="ssam_controller">ssam_controller</a> *<em>c</em><span class="sig-paren">)</span><a class="headerlink" href="#c.ssam_controller_stateunlock" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Unlock controller state transitions.</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">ssam_controller</span> <span class="pre">*c</span></code></dt><dd><p>The controller to unlock.</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>See <a class="reference internal" href="#c.ssam_controller_statelock" title="ssam_controller_statelock"><code class="xref c c-func docutils literal notranslate"><span class="pre">ssam_controller_statelock()</span></code></a> for the corresponding lock function.</p>
<dl class="c function">
<dt id="c.ssam_request_write_data">
ssize_t <code class="sig-name descname">ssam_request_write_data</code><span class="sig-paren">(</span><em class="property">struct</em> <a class="reference internal" href="#c.ssam_span" title="ssam_span">ssam_span</a> *<em>buf</em>, <em class="property">struct</em> <a class="reference internal" href="internal-api.html#c.ssam_controller" title="ssam_controller">ssam_controller</a> *<em>ctrl</em>, <em class="property">const</em> <em class="property">struct</em> <a class="reference internal" href="#c.ssam_request" title="ssam_request">ssam_request</a> *<em>spec</em><span class="sig-paren">)</span><a class="headerlink" href="#c.ssam_request_write_data" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Construct and write SAM request message to buffer.</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">ssam_span</span> <span class="pre">*buf</span></code></dt><dd><p>The buffer to write the data to.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">ssam_controller</span> <span class="pre">*ctrl</span></code></dt><dd><p>The controller via which the request will be sent.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">const</span> <span class="pre">struct</span> <span class="pre">ssam_request</span> <span class="pre">*spec</span></code></dt><dd><p>The request data and specification.</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Constructs a SAM/SSH request message and writes it to the provided buffer.
The request and transport counters, specifically RQID and SEQ, will be set
in this call. These counters are obtained from the controller. It is thus
only valid to send the resulting message via the controller specified here.</p>
<p>For calculation of the required buffer size, refer to the
<a class="reference internal" href="#c.SSH_COMMAND_MESSAGE_LENGTH" title="SSH_COMMAND_MESSAGE_LENGTH"><code class="xref c c-func docutils literal notranslate"><span class="pre">SSH_COMMAND_MESSAGE_LENGTH()</span></code></a> macro.</p>
<p><strong>Return</strong></p>
<p>Returns the number of bytes used in the buffer on success. Returns
<code class="docutils literal notranslate"><span class="pre">-EINVAL</span></code> if the payload length provided in the request specification is too
large (larger than <code class="docutils literal notranslate"><span class="pre">SSH_COMMAND_MAX_PAYLOAD_SIZE</span></code>) or if the provided buffer
is too small.</p>
<dl class="c function">
<dt id="c.ssam_request_sync_alloc">
int <code class="sig-name descname">ssam_request_sync_alloc</code><span class="sig-paren">(</span>size_t <em>payload_len</em>, <a class="reference internal" href="../../core-api/mm-api.html#c.gfp_t" title="gfp_t">gfp_t</a> <em>flags</em>, <em class="property">struct</em> <a class="reference internal" href="#c.ssam_request_sync" title="ssam_request_sync">ssam_request_sync</a> **<em>rqst</em>, <em class="property">struct</em> <a class="reference internal" href="#c.ssam_span" title="ssam_span">ssam_span</a> *<em>buffer</em><span class="sig-paren">)</span><a class="headerlink" href="#c.ssam_request_sync_alloc" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Allocate a synchronous request.</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">size_t</span> <span class="pre">payload_len</span></code></dt><dd><p>The length of the request payload.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">gfp_t</span> <span class="pre">flags</span></code></dt><dd><p>Flags used for allocation.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">ssam_request_sync</span> <span class="pre">**rqst</span></code></dt><dd><p>Where to store the pointer to the allocated request.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">ssam_span</span> <span class="pre">*buffer</span></code></dt><dd><p>Where to store the buffer descriptor for the message buffer of
the request.</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Allocates a synchronous request with corresponding message buffer. The
request still needs to be initialized <a class="reference internal" href="#c.ssam_request_sync_init" title="ssam_request_sync_init"><code class="xref c c-func docutils literal notranslate"><span class="pre">ssam_request_sync_init()</span></code></a> before
it can be submitted, and the message buffer data must still be set to the
returned buffer via <a class="reference internal" href="#c.ssam_request_sync_set_data" title="ssam_request_sync_set_data"><code class="xref c c-func docutils literal notranslate"><span class="pre">ssam_request_sync_set_data()</span></code></a> after it has been filled,
if need be with adjusted message length.</p>
<p>After use, the request and its corresponding message buffer should be freed
via <a class="reference internal" href="#c.ssam_request_sync_free" title="ssam_request_sync_free"><code class="xref c c-func docutils literal notranslate"><span class="pre">ssam_request_sync_free()</span></code></a>. The buffer must not be freed separately.</p>
<p><strong>Return</strong></p>
<p>Returns zero on success, <code class="docutils literal notranslate"><span class="pre">-ENOMEM</span></code> if the request could not be
allocated.</p>
<dl class="c function">
<dt id="c.ssam_request_sync_free">
void <code class="sig-name descname">ssam_request_sync_free</code><span class="sig-paren">(</span><em class="property">struct</em> <a class="reference internal" href="#c.ssam_request_sync" title="ssam_request_sync">ssam_request_sync</a> *<em>rqst</em><span class="sig-paren">)</span><a class="headerlink" href="#c.ssam_request_sync_free" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Free a synchronous request.</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">ssam_request_sync</span> <span class="pre">*rqst</span></code></dt><dd><p>The request to be freed.</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Free a synchronous request and its corresponding buffer allocated with
<a class="reference internal" href="#c.ssam_request_sync_alloc" title="ssam_request_sync_alloc"><code class="xref c c-func docutils literal notranslate"><span class="pre">ssam_request_sync_alloc()</span></code></a>. Do not use for requests allocated on the stack
or via any other function.</p>
<p>Warning: The caller must ensure that the request is not in use any more.
I.e. the caller must ensure that it has the only reference to the request
and the request is not currently pending. This means that the caller has
either never submitted the request, request submission has failed, or the
caller has waited until the submitted request has been completed via
<a class="reference internal" href="#c.ssam_request_sync_wait" title="ssam_request_sync_wait"><code class="xref c c-func docutils literal notranslate"><span class="pre">ssam_request_sync_wait()</span></code></a>.</p>
<dl class="c function">
<dt id="c.ssam_request_sync_init">
int <code class="sig-name descname">ssam_request_sync_init</code><span class="sig-paren">(</span><em class="property">struct</em> <a class="reference internal" href="#c.ssam_request_sync" title="ssam_request_sync">ssam_request_sync</a> *<em>rqst</em>, <em class="property">enum</em> <a class="reference internal" href="#c.ssam_request_flags" title="ssam_request_flags">ssam_request_flags</a> <em>flags</em><span class="sig-paren">)</span><a class="headerlink" href="#c.ssam_request_sync_init" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Initialize a synchronous request struct.</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">ssam_request_sync</span> <span class="pre">*rqst</span></code></dt><dd><p>The request to initialize.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">enum</span> <span class="pre">ssam_request_flags</span> <span class="pre">flags</span></code></dt><dd><p>The request flags.</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Initializes the given request struct. Does not initialize the request
message data. This has to be done explicitly after this call via
<a class="reference internal" href="#c.ssam_request_sync_set_data" title="ssam_request_sync_set_data"><code class="xref c c-func docutils literal notranslate"><span class="pre">ssam_request_sync_set_data()</span></code></a> and the actual message data has to be written
via <a class="reference internal" href="#c.ssam_request_write_data" title="ssam_request_write_data"><code class="xref c c-func docutils literal notranslate"><span class="pre">ssam_request_write_data()</span></code></a>.</p>
<p><strong>Return</strong></p>
<p>Returns zero on success or <code class="docutils literal notranslate"><span class="pre">-EINVAL</span></code> if the given flags are invalid.</p>
<dl class="c function">
<dt id="c.ssam_request_sync_submit">
int <code class="sig-name descname">ssam_request_sync_submit</code><span class="sig-paren">(</span><em class="property">struct</em> <a class="reference internal" href="internal-api.html#c.ssam_controller" title="ssam_controller">ssam_controller</a> *<em>ctrl</em>, <em class="property">struct</em> <a class="reference internal" href="#c.ssam_request_sync" title="ssam_request_sync">ssam_request_sync</a> *<em>rqst</em><span class="sig-paren">)</span><a class="headerlink" href="#c.ssam_request_sync_submit" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Submit a synchronous request.</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">ssam_controller</span> <span class="pre">*ctrl</span></code></dt><dd><p>The controller with which to submit the request.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">ssam_request_sync</span> <span class="pre">*rqst</span></code></dt><dd><p>The request to submit.</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Submit a synchronous request. The request has to be initialized and
properly set up, including response buffer (may be <code class="docutils literal notranslate"><span class="pre">NULL</span></code> if no response is
expected) and command message data. This function does not wait for the
request to be completed.</p>
<p>If this function succeeds, <a class="reference internal" href="#c.ssam_request_sync_wait" title="ssam_request_sync_wait"><code class="xref c c-func docutils literal notranslate"><span class="pre">ssam_request_sync_wait()</span></code></a> must be used to ensure
that the request has been completed before the response data can be
accessed and/or the request can be freed. On failure, the request may
immediately be freed.</p>
<p>This function may only be used if the controller is active, i.e. has been
initialized and not suspended.</p>
<dl class="c function">
<dt>
int <code class="sig-name descname">ssam_request_sync</code><span class="sig-paren">(</span><em class="property">struct</em> <a class="reference internal" href="internal-api.html#c.ssam_controller" title="ssam_controller">ssam_controller</a> *<em>ctrl</em>, <em class="property">const</em> <em class="property">struct</em> <a class="reference internal" href="#c.ssam_request" title="ssam_request">ssam_request</a> *<em>spec</em>, <em class="property">struct</em> <a class="reference internal" href="#c.ssam_response" title="ssam_response">ssam_response</a> *<em>rsp</em><span class="sig-paren">)</span><br /></dt>
<dd><p>Execute a synchronous request.</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">ssam_controller</span> <span class="pre">*ctrl</span></code></dt><dd><p>The controller via which the request will be submitted.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">const</span> <span class="pre">struct</span> <span class="pre">ssam_request</span> <span class="pre">*spec</span></code></dt><dd><p>The request specification and payload.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">ssam_response</span> <span class="pre">*rsp</span></code></dt><dd><p>The response buffer.</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Allocates a synchronous request with its message data buffer on the heap
via <a class="reference internal" href="#c.ssam_request_sync_alloc" title="ssam_request_sync_alloc"><code class="xref c c-func docutils literal notranslate"><span class="pre">ssam_request_sync_alloc()</span></code></a>, fully initializes it via the provided
request specification, submits it, and finally waits for its completion
before freeing it and returning its status.</p>
<p><strong>Return</strong></p>
<p>Returns the status of the request or any failure during setup.</p>
<dl class="c function">
<dt id="c.ssam_request_sync_with_buffer">
int <code class="sig-name descname">ssam_request_sync_with_buffer</code><span class="sig-paren">(</span><em class="property">struct</em> <a class="reference internal" href="internal-api.html#c.ssam_controller" title="ssam_controller">ssam_controller</a> *<em>ctrl</em>, <em class="property">const</em> <em class="property">struct</em> <a class="reference internal" href="#c.ssam_request" title="ssam_request">ssam_request</a> *<em>spec</em>, <em class="property">struct</em> <a class="reference internal" href="#c.ssam_response" title="ssam_response">ssam_response</a> *<em>rsp</em>, <em class="property">struct</em> <a class="reference internal" href="#c.ssam_span" title="ssam_span">ssam_span</a> *<em>buf</em><span class="sig-paren">)</span><a class="headerlink" href="#c.ssam_request_sync_with_buffer" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Execute a synchronous request with the provided buffer as back-end for the message buffer.</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">ssam_controller</span> <span class="pre">*ctrl</span></code></dt><dd><p>The controller via which the request will be submitted.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">const</span> <span class="pre">struct</span> <span class="pre">ssam_request</span> <span class="pre">*spec</span></code></dt><dd><p>The request specification and payload.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">ssam_response</span> <span class="pre">*rsp</span></code></dt><dd><p>The response buffer.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">ssam_span</span> <span class="pre">*buf</span></code></dt><dd><p>The buffer for the request message data.</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Allocates a synchronous request struct on the stack, fully initializes it
using the provided buffer as message data buffer, submits it, and then
waits for its completion before returning its status. The
<a class="reference internal" href="#c.SSH_COMMAND_MESSAGE_LENGTH" title="SSH_COMMAND_MESSAGE_LENGTH"><code class="xref c c-func docutils literal notranslate"><span class="pre">SSH_COMMAND_MESSAGE_LENGTH()</span></code></a> macro can be used to compute the required
message buffer size.</p>
<p>This function does essentially the same as <a class="reference internal" href="#c.ssam_request_sync" title="ssam_request_sync"><code class="xref c c-func docutils literal notranslate"><span class="pre">ssam_request_sync()</span></code></a>, but instead
of dynamically allocating the request and message data buffer, it uses the
provided message data buffer and stores the (small) request struct on the
heap.</p>
<p><strong>Return</strong></p>
<p>Returns the status of the request or any failure during setup.</p>
<dl class="c function">
<dt id="c.ssam_notifier_register">
int <code class="sig-name descname">ssam_notifier_register</code><span class="sig-paren">(</span><em class="property">struct</em> <a class="reference internal" href="internal-api.html#c.ssam_controller" title="ssam_controller">ssam_controller</a> *<em>ctrl</em>, <em class="property">struct</em> <a class="reference internal" href="#c.ssam_event_notifier" title="ssam_event_notifier">ssam_event_notifier</a> *<em>n</em><span class="sig-paren">)</span><a class="headerlink" href="#c.ssam_notifier_register" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Register an event notifier.</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">ssam_controller</span> <span class="pre">*ctrl</span></code></dt><dd><p>The controller to register the notifier on.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">ssam_event_notifier</span> <span class="pre">*n</span></code></dt><dd><p>The event notifier to register.</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Register an event notifier and increment the usage counter of the
associated SAM event. If the event was previously not enabled, it will be
enabled during this call.</p>
<p><strong>Return</strong></p>
<p>Returns zero on success, <code class="docutils literal notranslate"><span class="pre">-ENOSPC</span></code> if there have already been
<code class="docutils literal notranslate"><span class="pre">INT_MAX</span></code> notifiers for the event ID/type associated with the notifier block
registered, <code class="docutils literal notranslate"><span class="pre">-ENOMEM</span></code> if the corresponding event entry could not be
allocated. If this is the first time that a notifier block is registered
for the specific associated event, returns the status of the event-enable
EC-command.</p>
<dl class="c function">
<dt id="c.ssam_notifier_unregister">
int <code class="sig-name descname">ssam_notifier_unregister</code><span class="sig-paren">(</span><em class="property">struct</em> <a class="reference internal" href="internal-api.html#c.ssam_controller" title="ssam_controller">ssam_controller</a> *<em>ctrl</em>, <em class="property">struct</em> <a class="reference internal" href="#c.ssam_event_notifier" title="ssam_event_notifier">ssam_event_notifier</a> *<em>n</em><span class="sig-paren">)</span><a class="headerlink" href="#c.ssam_notifier_unregister" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Unregister an event notifier.</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">ssam_controller</span> <span class="pre">*ctrl</span></code></dt><dd><p>The controller the notifier has been registered on.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">ssam_event_notifier</span> <span class="pre">*n</span></code></dt><dd><p>The event notifier to unregister.</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Unregister an event notifier and decrement the usage counter of the
associated SAM event. If the usage counter reaches zero, the event will be
disabled.</p>
<p><strong>Return</strong></p>
<p>Returns zero on success, <code class="docutils literal notranslate"><span class="pre">-ENOENT</span></code> if the given notifier block has
not been registered on the controller. If the given notifier block was the
last one associated with its specific event, returns the status of the
event-disable EC-command.</p>
<dl class="c function">
<dt id="c.ssam_get_controller">
<em class="property">struct</em> <a class="reference internal" href="internal-api.html#c.ssam_controller" title="ssam_controller">ssam_controller</a> *<code class="sig-name descname">ssam_get_controller</code><span class="sig-paren">(</span>void<span class="sig-paren">)</span><a class="headerlink" href="#c.ssam_get_controller" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Get reference to SSAM controller.</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">void</span></code></dt><dd><p>no arguments</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Returns a reference to the SSAM controller of the system or <code class="docutils literal notranslate"><span class="pre">NULL</span></code> if there
is none, it hasn’t been set up yet, or it has already been unregistered.
This function automatically increments the reference count of the
controller, thus the calling party must ensure that <a class="reference internal" href="#c.ssam_controller_put" title="ssam_controller_put"><code class="xref c c-func docutils literal notranslate"><span class="pre">ssam_controller_put()</span></code></a>
is called when it doesn’t need the controller any more.</p>
<dl class="c function">
<dt id="c.ssam_client_link">
int <code class="sig-name descname">ssam_client_link</code><span class="sig-paren">(</span><em class="property">struct</em> <a class="reference internal" href="internal-api.html#c.ssam_controller" title="ssam_controller">ssam_controller</a> *<em>c</em>, <em class="property">struct</em> <a class="reference internal" href="../infrastructure.html#c.device" title="device">device</a> *<em>client</em><span class="sig-paren">)</span><a class="headerlink" href="#c.ssam_client_link" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Link an arbitrary client device to the controller.</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">ssam_controller</span> <span class="pre">*c</span></code></dt><dd><p>The controller to link to.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">device</span> <span class="pre">*client</span></code></dt><dd><p>The client device.</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Link an arbitrary client device to the controller by creating a device link
between it as consumer and the controller device as provider. This function
can be used for non-SSAM devices (or SSAM devices not registered as child
under the controller) to guarantee that the controller is valid for as long
as the driver of the client device is bound, and that proper suspend and
resume ordering is guaranteed.</p>
<p>The device link does not have to be destructed manually. It is removed
automatically once the driver of the client device unbinds.</p>
<p><strong>Return</strong></p>
<p>Returns zero on success, <code class="docutils literal notranslate"><span class="pre">-ENODEV</span></code> if the controller is not ready or
going to be removed soon, or <code class="docutils literal notranslate"><span class="pre">-ENOMEM</span></code> if the device link could not be
created for other reasons.</p>
<dl class="c function">
<dt id="c.ssam_client_bind">
<em class="property">struct</em> <a class="reference internal" href="internal-api.html#c.ssam_controller" title="ssam_controller">ssam_controller</a> *<code class="sig-name descname">ssam_client_bind</code><span class="sig-paren">(</span><em class="property">struct</em> <a class="reference internal" href="../infrastructure.html#c.device" title="device">device</a> *<em>client</em><span class="sig-paren">)</span><a class="headerlink" href="#c.ssam_client_bind" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Bind an arbitrary client device to the controller.</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">device</span> <span class="pre">*client</span></code></dt><dd><p>The client device.</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Link an arbitrary client device to the controller by creating a device link
between it as consumer and the main controller device as provider. This
function can be used for non-SSAM devices to guarantee that the controller
returned by this function is valid for as long as the driver of the client
device is bound, and that proper suspend and resume ordering is guaranteed.</p>
<p>This function does essentially the same as <a class="reference internal" href="#c.ssam_client_link" title="ssam_client_link"><code class="xref c c-func docutils literal notranslate"><span class="pre">ssam_client_link()</span></code></a>, except that
it first fetches the main controller reference, then creates the link, and
finally returns this reference. Note that this function does not increment
the reference counter of the controller, as, due to the link, the
controller lifetime is assured as long as the driver of the client device
is bound.</p>
<p>It is not valid to use the controller reference obtained by this method
outside of the driver bound to the client device at the time of calling
this function, without first incrementing the reference count of the
controller via <a class="reference internal" href="#c.ssam_controller_get" title="ssam_controller_get"><code class="xref c c-func docutils literal notranslate"><span class="pre">ssam_controller_get()</span></code></a>. Even after doing this, care must be
taken that requests are only submitted and notifiers are only
(un-)registered when the controller is active and not suspended. In other
words: The device link only lives as long as the client driver is bound and
any guarantees enforced by this link (e.g. active controller state) can
only be relied upon as long as this link exists and may need to be enforced
in other ways afterwards.</p>
<p>The created device link does not have to be destructed manually. It is
removed automatically once the driver of the client device unbinds.</p>
<p><strong>Return</strong></p>
<p>Returns the controller on success, an error pointer with <code class="docutils literal notranslate"><span class="pre">-ENODEV</span></code>
if the controller is not present, not ready or going to be removed soon, or
<code class="docutils literal notranslate"><span class="pre">-ENOMEM</span></code> if the device link could not be created for other reasons.</p>
</div>
<div class="section" id="client-bus-and-client-device-api">
<h2><a class="toc-backref" href="#id4">Client Bus and Client Device API</a><a class="headerlink" href="#client-bus-and-client-device-api" title="Permalink to this headline">¶</a></h2>
<dl class="c enum">
<dt id="c.ssam_device_domain">
<em class="property">enum </em><code class="sig-name descname">ssam_device_domain</code><a class="headerlink" href="#c.ssam_device_domain" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>SAM device domain.</p>
</dd></dl>

<p><strong>Constants</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">SSAM_DOMAIN_VIRTUAL</span></code></dt><dd><p>Virtual device.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">SSAM_DOMAIN_SERIALHUB</span></code></dt><dd><p>Physical device connected via Surface Serial Hub.</p>
</dd>
</dl>
<dl class="c enum">
<dt id="c.ssam_virtual_tc">
<em class="property">enum </em><code class="sig-name descname">ssam_virtual_tc</code><a class="headerlink" href="#c.ssam_virtual_tc" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Target categories for the virtual SAM domain.</p>
</dd></dl>

<p><strong>Constants</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">SSAM_VIRTUAL_TC_HUB</span></code></dt><dd><p>Device hub category.</p>
</dd>
</dl>
<dl class="c struct">
<dt id="c.ssam_device_uid">
<em class="property">struct </em><code class="sig-name descname">ssam_device_uid</code><a class="headerlink" href="#c.ssam_device_uid" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Unique identifier for SSAM device.</p>
</dd></dl>

<p><strong>Definition</strong></p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>struct ssam_device_uid {
  u8 domain;
  u8 category;
  u8 target;
  u8 instance;
  u8 function;
};
</pre></div>
</div>
<p><strong>Members</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">domain</span></code></dt><dd><p>Domain of the device.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">category</span></code></dt><dd><p>Target category of the device.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">target</span></code></dt><dd><p>Target ID of the device.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">instance</span></code></dt><dd><p>Instance ID of the device.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">function</span></code></dt><dd><p>Sub-function of the device. This field can be used to split a
single SAM device into multiple virtual subdevices to separate
different functionality of that device and allow one driver per
such functionality.</p>
</dd>
</dl>
<dl class="c macro">
<dt id="c.SSAM_DEVICE">
<code class="sig-name descname">SSAM_DEVICE</code><a class="headerlink" href="#c.SSAM_DEVICE" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<p><code class="docutils literal notranslate"><span class="pre">SSAM_DEVICE</span> <span class="pre">(d,</span> <span class="pre">cat,</span> <span class="pre">tid,</span> <span class="pre">iid,</span> <span class="pre">fun)</span></code></p>
<blockquote>
<div><p>Initialize a <code class="xref c c-type docutils literal notranslate"><span class="pre">struct</span> <span class="pre">ssam_device_id</span></code> with the given parameters.</p>
</div></blockquote>
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">d</span></code></dt><dd><p>Domain of the device.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">cat</span></code></dt><dd><p>Target category of the device.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">tid</span></code></dt><dd><p>Target ID of the device.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">iid</span></code></dt><dd><p>Instance ID of the device.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">fun</span></code></dt><dd><p>Sub-function of the device.</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Initializes a <code class="xref c c-type docutils literal notranslate"><span class="pre">struct</span> <span class="pre">ssam_device_id</span></code> with the given parameters. See <a class="reference internal" href="#c.ssam_device_uid" title="ssam_device_uid"><code class="xref c c-type docutils literal notranslate"><span class="pre">struct</span>
<span class="pre">ssam_device_uid</span></code></a> for details regarding the parameters. The special values
<code class="docutils literal notranslate"><span class="pre">SSAM_ANY_TID</span></code>, <code class="docutils literal notranslate"><span class="pre">SSAM_ANY_IID</span></code>, and <code class="docutils literal notranslate"><span class="pre">SSAM_ANY_FUN</span></code> can be used to specify that
matching should ignore target ID, instance ID, and/or sub-function,
respectively. This macro initializes the <code class="docutils literal notranslate"><span class="pre">match_flags</span></code> field based on the
given parameters.</p>
<p><strong>Note</strong></p>
<p>The parameters <strong>d</strong> and <strong>cat</strong> must be valid <code class="xref c c-type docutils literal notranslate"><span class="pre">u8</span></code> values, the parameters
<strong>tid</strong>, <strong>iid</strong>, and <strong>fun</strong> must be either valid <code class="xref c c-type docutils literal notranslate"><span class="pre">u8</span></code> values or <code class="docutils literal notranslate"><span class="pre">SSAM_ANY_TID</span></code>,
<code class="docutils literal notranslate"><span class="pre">SSAM_ANY_IID</span></code>, or <code class="docutils literal notranslate"><span class="pre">SSAM_ANY_FUN</span></code>, respectively. Other non-<code class="xref c c-type docutils literal notranslate"><span class="pre">u8</span></code> values are not
allowed.</p>
<dl class="c macro">
<dt id="c.SSAM_VDEV">
<code class="sig-name descname">SSAM_VDEV</code><a class="headerlink" href="#c.SSAM_VDEV" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<p><code class="docutils literal notranslate"><span class="pre">SSAM_VDEV</span> <span class="pre">(cat,</span> <span class="pre">tid,</span> <span class="pre">iid,</span> <span class="pre">fun)</span></code></p>
<blockquote>
<div><p>Initialize a <code class="xref c c-type docutils literal notranslate"><span class="pre">struct</span> <span class="pre">ssam_device_id</span></code> as virtual device with the given parameters.</p>
</div></blockquote>
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">cat</span></code></dt><dd><p>Target category of the device.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">tid</span></code></dt><dd><p>Target ID of the device.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">iid</span></code></dt><dd><p>Instance ID of the device.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">fun</span></code></dt><dd><p>Sub-function of the device.</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Initializes a <code class="xref c c-type docutils literal notranslate"><span class="pre">struct</span> <span class="pre">ssam_device_id</span></code> with the given parameters in the
virtual domain. See <a class="reference internal" href="#c.ssam_device_uid" title="ssam_device_uid"><code class="xref c c-type docutils literal notranslate"><span class="pre">struct</span> <span class="pre">ssam_device_uid</span></code></a> for details regarding the
parameters. The special values <code class="docutils literal notranslate"><span class="pre">SSAM_ANY_TID</span></code>, <code class="docutils literal notranslate"><span class="pre">SSAM_ANY_IID</span></code>, and
<code class="docutils literal notranslate"><span class="pre">SSAM_ANY_FUN</span></code> can be used to specify that matching should ignore target ID,
instance ID, and/or sub-function, respectively. This macro initializes the
<code class="docutils literal notranslate"><span class="pre">match_flags</span></code> field based on the given parameters.</p>
<p><strong>Note</strong></p>
<p>The parameter <strong>cat</strong> must be a valid <code class="xref c c-type docutils literal notranslate"><span class="pre">u8</span></code> value, the parameters <strong>tid</strong>,
<strong>iid</strong>, and <strong>fun</strong> must be either valid <code class="xref c c-type docutils literal notranslate"><span class="pre">u8</span></code> values or <code class="docutils literal notranslate"><span class="pre">SSAM_ANY_TID</span></code>,
<code class="docutils literal notranslate"><span class="pre">SSAM_ANY_IID</span></code>, or <code class="docutils literal notranslate"><span class="pre">SSAM_ANY_FUN</span></code>, respectively. Other non-<code class="xref c c-type docutils literal notranslate"><span class="pre">u8</span></code> values are not
allowed.</p>
<dl class="c macro">
<dt id="c.SSAM_SDEV">
<code class="sig-name descname">SSAM_SDEV</code><a class="headerlink" href="#c.SSAM_SDEV" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<p><code class="docutils literal notranslate"><span class="pre">SSAM_SDEV</span> <span class="pre">(cat,</span> <span class="pre">tid,</span> <span class="pre">iid,</span> <span class="pre">fun)</span></code></p>
<blockquote>
<div><p>Initialize a <code class="xref c c-type docutils literal notranslate"><span class="pre">struct</span> <span class="pre">ssam_device_id</span></code> as physical SSH device with the given parameters.</p>
</div></blockquote>
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">cat</span></code></dt><dd><p>Target category of the device.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">tid</span></code></dt><dd><p>Target ID of the device.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">iid</span></code></dt><dd><p>Instance ID of the device.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">fun</span></code></dt><dd><p>Sub-function of the device.</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Initializes a <code class="xref c c-type docutils literal notranslate"><span class="pre">struct</span> <span class="pre">ssam_device_id</span></code> with the given parameters in the SSH
domain. See <a class="reference internal" href="#c.ssam_device_uid" title="ssam_device_uid"><code class="xref c c-type docutils literal notranslate"><span class="pre">struct</span> <span class="pre">ssam_device_uid</span></code></a> for details regarding the parameters.
The special values <code class="docutils literal notranslate"><span class="pre">SSAM_ANY_TID</span></code>, <code class="docutils literal notranslate"><span class="pre">SSAM_ANY_IID</span></code>, and <code class="docutils literal notranslate"><span class="pre">SSAM_ANY_FUN</span></code> can be
used to specify that matching should ignore target ID, instance ID, and/or
sub-function, respectively. This macro initializes the <code class="docutils literal notranslate"><span class="pre">match_flags</span></code>
field based on the given parameters.</p>
<p><strong>Note</strong></p>
<p>The parameter <strong>cat</strong> must be a valid <code class="xref c c-type docutils literal notranslate"><span class="pre">u8</span></code> value, the parameters <strong>tid</strong>,
<strong>iid</strong>, and <strong>fun</strong> must be either valid <code class="xref c c-type docutils literal notranslate"><span class="pre">u8</span></code> values or <code class="docutils literal notranslate"><span class="pre">SSAM_ANY_TID</span></code>,
<code class="docutils literal notranslate"><span class="pre">SSAM_ANY_IID</span></code>, or <code class="docutils literal notranslate"><span class="pre">SSAM_ANY_FUN</span></code>, respectively. Other non-<code class="xref c c-type docutils literal notranslate"><span class="pre">u8</span></code> values are not
allowed.</p>
<dl class="c struct">
<dt id="c.ssam_device">
<em class="property">struct </em><code class="sig-name descname">ssam_device</code><a class="headerlink" href="#c.ssam_device" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>SSAM client device.</p>
</dd></dl>

<p><strong>Definition</strong></p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>struct ssam_device {
  struct device dev;
  struct ssam_controller *ctrl;
  struct ssam_device_uid uid;
};
</pre></div>
</div>
<p><strong>Members</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">dev</span></code></dt><dd><p>Driver model representation of the device.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">ctrl</span></code></dt><dd><p>SSAM controller managing this device.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">uid</span></code></dt><dd><p>UID identifying the device.</p>
</dd>
</dl>
<dl class="c struct">
<dt id="c.ssam_device_driver">
<em class="property">struct </em><code class="sig-name descname">ssam_device_driver</code><a class="headerlink" href="#c.ssam_device_driver" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>SSAM client device driver.</p>
</dd></dl>

<p><strong>Definition</strong></p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>struct ssam_device_driver {
  struct device_driver driver;
  const struct ssam_device_id *match_table;
  int (*probe)(struct ssam_device *sdev);
  void (*remove)(struct ssam_device *sdev);
};
</pre></div>
</div>
<p><strong>Members</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">driver</span></code></dt><dd><p>Base driver model structure.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">match_table</span></code></dt><dd><p>Match table specifying which devices the driver should bind to.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">probe</span></code></dt><dd><p>Called when the driver is being bound to a device.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">remove</span></code></dt><dd><p>Called when the driver is being unbound from the device.</p>
</dd>
</dl>
<dl class="c function">
<dt id="c.is_ssam_device">
bool <code class="sig-name descname">is_ssam_device</code><span class="sig-paren">(</span><em class="property">struct</em> <a class="reference internal" href="../infrastructure.html#c.device" title="device">device</a> *<em>d</em><span class="sig-paren">)</span><a class="headerlink" href="#c.is_ssam_device" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Check if the given device is a SSAM client device.</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">device</span> <span class="pre">*d</span></code></dt><dd><p>The device to test the type of.</p>
</dd>
</dl>
<p><strong>Return</strong></p>
<p>Returns <code class="docutils literal notranslate"><span class="pre">true</span></code> if the specified device is of type <a class="reference internal" href="#c.ssam_device" title="ssam_device"><code class="xref c c-type docutils literal notranslate"><span class="pre">struct</span>
<span class="pre">ssam_device</span></code></a>, i.e. the device type points to <code class="docutils literal notranslate"><span class="pre">ssam_device_type</span></code>, and <code class="docutils literal notranslate"><span class="pre">false</span></code>
otherwise.</p>
<dl class="c function">
<dt id="c.to_ssam_device">
<em class="property">struct</em> <a class="reference internal" href="#c.ssam_device" title="ssam_device">ssam_device</a> *<code class="sig-name descname">to_ssam_device</code><span class="sig-paren">(</span><em class="property">struct</em> <a class="reference internal" href="../infrastructure.html#c.device" title="device">device</a> *<em>d</em><span class="sig-paren">)</span><a class="headerlink" href="#c.to_ssam_device" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Casts the given device to a SSAM client device.</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">device</span> <span class="pre">*d</span></code></dt><dd><p>The device to cast.</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Casts the given <a class="reference internal" href="../infrastructure.html#c.device" title="device"><code class="xref c c-type docutils literal notranslate"><span class="pre">struct</span> <span class="pre">device</span></code></a> to a <a class="reference internal" href="#c.ssam_device" title="ssam_device"><code class="xref c c-type docutils literal notranslate"><span class="pre">struct</span> <span class="pre">ssam_device</span></code></a>. The caller has to
ensure that the given device is actually enclosed in a <a class="reference internal" href="#c.ssam_device" title="ssam_device"><code class="xref c c-type docutils literal notranslate"><span class="pre">struct</span> <span class="pre">ssam_device</span></code></a>,
e.g. by calling <a class="reference internal" href="#c.is_ssam_device" title="is_ssam_device"><code class="xref c c-func docutils literal notranslate"><span class="pre">is_ssam_device()</span></code></a>.</p>
<p><strong>Return</strong></p>
<p>Returns a pointer to the <a class="reference internal" href="#c.ssam_device" title="ssam_device"><code class="xref c c-type docutils literal notranslate"><span class="pre">struct</span> <span class="pre">ssam_device</span></code></a> wrapping the given
device <strong>d</strong>.</p>
<dl class="c function">
<dt id="c.to_ssam_device_driver">
<em class="property">struct</em> <a class="reference internal" href="#c.ssam_device_driver" title="ssam_device_driver">ssam_device_driver</a> *<code class="sig-name descname">to_ssam_device_driver</code><span class="sig-paren">(</span><em class="property">struct</em> device_driver *<em>d</em><span class="sig-paren">)</span><a class="headerlink" href="#c.to_ssam_device_driver" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Casts the given device driver to a SSAM client device driver.</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">device_driver</span> <span class="pre">*d</span></code></dt><dd><p>The driver to cast.</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Casts the given <code class="xref c c-type docutils literal notranslate"><span class="pre">struct</span> <span class="pre">device_driver</span></code> to a <a class="reference internal" href="#c.ssam_device_driver" title="ssam_device_driver"><code class="xref c c-type docutils literal notranslate"><span class="pre">struct</span> <span class="pre">ssam_device_driver</span></code></a>. The
caller has to ensure that the given driver is actually enclosed in a
<a class="reference internal" href="#c.ssam_device_driver" title="ssam_device_driver"><code class="xref c c-type docutils literal notranslate"><span class="pre">struct</span> <span class="pre">ssam_device_driver</span></code></a>.</p>
<p><strong>Return</strong></p>
<p>Returns the pointer to the <a class="reference internal" href="#c.ssam_device_driver" title="ssam_device_driver"><code class="xref c c-type docutils literal notranslate"><span class="pre">struct</span> <span class="pre">ssam_device_driver</span></code></a> wrapping the
given device driver <strong>d</strong>.</p>
<dl class="c function">
<dt id="c.ssam_device_get">
<em class="property">struct</em> <a class="reference internal" href="#c.ssam_device" title="ssam_device">ssam_device</a> *<code class="sig-name descname">ssam_device_get</code><span class="sig-paren">(</span><em class="property">struct</em> <a class="reference internal" href="#c.ssam_device" title="ssam_device">ssam_device</a> *<em>sdev</em><span class="sig-paren">)</span><a class="headerlink" href="#c.ssam_device_get" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Increment reference count of SSAM client device.</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">ssam_device</span> <span class="pre">*sdev</span></code></dt><dd><p>The device to increment the reference count of.</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Increments the reference count of the given SSAM client device by
incrementing the reference count of the enclosed <a class="reference internal" href="../infrastructure.html#c.device" title="device"><code class="xref c c-type docutils literal notranslate"><span class="pre">struct</span> <span class="pre">device</span></code></a> via
<a class="reference internal" href="../infrastructure.html#c.get_device" title="get_device"><code class="xref c c-func docutils literal notranslate"><span class="pre">get_device()</span></code></a>.</p>
<p>See <a class="reference internal" href="#c.ssam_device_put" title="ssam_device_put"><code class="xref c c-func docutils literal notranslate"><span class="pre">ssam_device_put()</span></code></a> for the counter-part of this function.</p>
<p><strong>Return</strong></p>
<p>Returns the device provided as input.</p>
<dl class="c function">
<dt id="c.ssam_device_put">
void <code class="sig-name descname">ssam_device_put</code><span class="sig-paren">(</span><em class="property">struct</em> <a class="reference internal" href="#c.ssam_device" title="ssam_device">ssam_device</a> *<em>sdev</em><span class="sig-paren">)</span><a class="headerlink" href="#c.ssam_device_put" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Decrement reference count of SSAM client device.</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">ssam_device</span> <span class="pre">*sdev</span></code></dt><dd><p>The device to decrement the reference count of.</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Decrements the reference count of the given SSAM client device by
decrementing the reference count of the enclosed <a class="reference internal" href="../infrastructure.html#c.device" title="device"><code class="xref c c-type docutils literal notranslate"><span class="pre">struct</span> <span class="pre">device</span></code></a> via
<a class="reference internal" href="../infrastructure.html#c.put_device" title="put_device"><code class="xref c c-func docutils literal notranslate"><span class="pre">put_device()</span></code></a>.</p>
<p>See <a class="reference internal" href="#c.ssam_device_get" title="ssam_device_get"><code class="xref c c-func docutils literal notranslate"><span class="pre">ssam_device_get()</span></code></a> for the counter-part of this function.</p>
<dl class="c function">
<dt id="c.ssam_device_get_drvdata">
void *<code class="sig-name descname">ssam_device_get_drvdata</code><span class="sig-paren">(</span><em class="property">struct</em> <a class="reference internal" href="#c.ssam_device" title="ssam_device">ssam_device</a> *<em>sdev</em><span class="sig-paren">)</span><a class="headerlink" href="#c.ssam_device_get_drvdata" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Get driver-data of SSAM client device.</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">ssam_device</span> <span class="pre">*sdev</span></code></dt><dd><p>The device to get the driver-data from.</p>
</dd>
</dl>
<p><strong>Return</strong></p>
<p>Returns the driver-data of the given device, previously set via
<a class="reference internal" href="#c.ssam_device_set_drvdata" title="ssam_device_set_drvdata"><code class="xref c c-func docutils literal notranslate"><span class="pre">ssam_device_set_drvdata()</span></code></a>.</p>
<dl class="c function">
<dt id="c.ssam_device_set_drvdata">
void <code class="sig-name descname">ssam_device_set_drvdata</code><span class="sig-paren">(</span><em class="property">struct</em> <a class="reference internal" href="#c.ssam_device" title="ssam_device">ssam_device</a> *<em>sdev</em>, void *<em>data</em><span class="sig-paren">)</span><a class="headerlink" href="#c.ssam_device_set_drvdata" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Set driver-data of SSAM client device.</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">ssam_device</span> <span class="pre">*sdev</span></code></dt><dd><p>The device to set the driver-data of.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">*data</span></code></dt><dd><p>The data to set the device’s driver-data pointer to.</p>
</dd>
</dl>
<dl class="c macro">
<dt id="c.ssam_device_driver_register">
<code class="sig-name descname">ssam_device_driver_register</code><a class="headerlink" href="#c.ssam_device_driver_register" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<p><code class="docutils literal notranslate"><span class="pre">ssam_device_driver_register</span> <span class="pre">(drv)</span></code></p>
<blockquote>
<div><p>Register a SSAM client device driver.</p>
</div></blockquote>
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">drv</span></code></dt><dd><p>The driver to register.</p>
</dd>
</dl>
<dl class="c macro">
<dt id="c.module_ssam_device_driver">
<code class="sig-name descname">module_ssam_device_driver</code><a class="headerlink" href="#c.module_ssam_device_driver" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<p><code class="docutils literal notranslate"><span class="pre">module_ssam_device_driver</span> <span class="pre">(drv)</span></code></p>
<blockquote>
<div><p>Helper macro for SSAM device driver registration.</p>
</div></blockquote>
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">drv</span></code></dt><dd><p>The driver managed by this module.</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Helper macro to register a SSAM device driver via <a class="reference internal" href="../basics.html#c.module_init" title="module_init"><code class="xref c c-func docutils literal notranslate"><span class="pre">module_init()</span></code></a> and
<a class="reference internal" href="../basics.html#c.module_exit" title="module_exit"><code class="xref c c-func docutils literal notranslate"><span class="pre">module_exit()</span></code></a>. This macro may only be used once per module and replaces the
aforementioned definitions.</p>
<dl class="c macro">
<dt id="c.SSAM_DEFINE_SYNC_REQUEST_CL_N">
<code class="sig-name descname">SSAM_DEFINE_SYNC_REQUEST_CL_N</code><a class="headerlink" href="#c.SSAM_DEFINE_SYNC_REQUEST_CL_N" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<p><code class="docutils literal notranslate"><span class="pre">SSAM_DEFINE_SYNC_REQUEST_CL_N</span> <span class="pre">(name,</span> <span class="pre">spec...)</span></code></p>
<blockquote>
<div><p>Define synchronous client-device SAM request function with neither argument nor return value.</p>
</div></blockquote>
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">name</span></code></dt><dd><p>Name of the generated function.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">spec...</span></code></dt><dd><p>Specification (<a class="reference internal" href="#c.ssam_request_spec_md" title="ssam_request_spec_md"><code class="xref c c-type docutils literal notranslate"><span class="pre">struct</span> <span class="pre">ssam_request_spec_md</span></code></a>) defining the request.</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Defines a function executing the synchronous SAM request specified by
<strong>spec</strong>, with the request having neither argument nor return value. Device
specifying parameters are not hard-coded, but instead are provided via the
client device, specifically its UID, supplied when calling this function.
The generated function takes care of setting up the request struct, buffer
allocation, as well as execution of the request itself, returning once the
request has been fully completed. The required transport buffer will be
allocated on the stack.</p>
<p>The generated function is defined as <code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">name(struct</span> <span class="pre">ssam_device</span> <span class="pre">*sdev)</span></code>,
returning the status of the request, which is zero on success and negative
on failure. The <code class="docutils literal notranslate"><span class="pre">sdev</span></code> parameter specifies both the target device of the
request and by association the controller via which the request is sent.</p>
<p>Refer to <a class="reference internal" href="#c.ssam_request_sync_onstack" title="ssam_request_sync_onstack"><code class="xref c c-func docutils literal notranslate"><span class="pre">ssam_request_sync_onstack()</span></code></a> for more details on the behavior of
the generated function.</p>
<dl class="c macro">
<dt id="c.SSAM_DEFINE_SYNC_REQUEST_CL_W">
<code class="sig-name descname">SSAM_DEFINE_SYNC_REQUEST_CL_W</code><a class="headerlink" href="#c.SSAM_DEFINE_SYNC_REQUEST_CL_W" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<p><code class="docutils literal notranslate"><span class="pre">SSAM_DEFINE_SYNC_REQUEST_CL_W</span> <span class="pre">(name,</span> <span class="pre">atype,</span> <span class="pre">spec...)</span></code></p>
<blockquote>
<div><p>Define synchronous client-device SAM request function with argument.</p>
</div></blockquote>
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">name</span></code></dt><dd><p>Name of the generated function.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">atype</span></code></dt><dd><p>Type of the request’s argument.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">spec...</span></code></dt><dd><p>Specification (<a class="reference internal" href="#c.ssam_request_spec_md" title="ssam_request_spec_md"><code class="xref c c-type docutils literal notranslate"><span class="pre">struct</span> <span class="pre">ssam_request_spec_md</span></code></a>) defining the request.</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Defines a function executing the synchronous SAM request specified by
<strong>spec</strong>, with the request taking an argument of type <strong>atype</strong> and having no
return value. Device specifying parameters are not hard-coded, but instead
are provided via the client device, specifically its UID, supplied when
calling this function. The generated function takes care of setting up the
request struct, buffer allocation, as well as execution of the request
itself, returning once the request has been fully completed. The required
transport buffer will be allocated on the stack.</p>
<p>The generated function is defined as <code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">name(struct</span> <span class="pre">ssam_device</span> <span class="pre">*sdev,</span>
<span class="pre">const</span> <span class="pre">atype</span> <span class="pre">*arg)</span></code>, returning the status of the request, which is zero on
success and negative on failure. The <code class="docutils literal notranslate"><span class="pre">sdev</span></code> parameter specifies both the
target device of the request and by association the controller via which
the request is sent. The request’s argument is specified via the <code class="docutils literal notranslate"><span class="pre">arg</span></code>
pointer.</p>
<p>Refer to <a class="reference internal" href="#c.ssam_request_sync_onstack" title="ssam_request_sync_onstack"><code class="xref c c-func docutils literal notranslate"><span class="pre">ssam_request_sync_onstack()</span></code></a> for more details on the behavior of
the generated function.</p>
<dl class="c macro">
<dt id="c.SSAM_DEFINE_SYNC_REQUEST_CL_R">
<code class="sig-name descname">SSAM_DEFINE_SYNC_REQUEST_CL_R</code><a class="headerlink" href="#c.SSAM_DEFINE_SYNC_REQUEST_CL_R" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<p><code class="docutils literal notranslate"><span class="pre">SSAM_DEFINE_SYNC_REQUEST_CL_R</span> <span class="pre">(name,</span> <span class="pre">rtype,</span> <span class="pre">spec...)</span></code></p>
<blockquote>
<div><p>Define synchronous client-device SAM request function with return value.</p>
</div></blockquote>
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">name</span></code></dt><dd><p>Name of the generated function.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">rtype</span></code></dt><dd><p>Type of the request’s return value.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">spec...</span></code></dt><dd><p>Specification (<a class="reference internal" href="#c.ssam_request_spec_md" title="ssam_request_spec_md"><code class="xref c c-type docutils literal notranslate"><span class="pre">struct</span> <span class="pre">ssam_request_spec_md</span></code></a>) defining the request.</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Defines a function executing the synchronous SAM request specified by
<strong>spec</strong>, with the request taking no argument but having a return value of
type <strong>rtype</strong>. Device specifying parameters are not hard-coded, but instead
are provided via the client device, specifically its UID, supplied when
calling this function. The generated function takes care of setting up the
request struct, buffer allocation, as well as execution of the request
itself, returning once the request has been fully completed. The required
transport buffer will be allocated on the stack.</p>
<p>The generated function is defined as <code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">name(struct</span> <span class="pre">ssam_device</span> <span class="pre">*sdev,</span>
<span class="pre">rtype</span> <span class="pre">*ret)</span></code>, returning the status of the request, which is zero on
success and negative on failure. The <code class="docutils literal notranslate"><span class="pre">sdev</span></code> parameter specifies both the
target device of the request and by association the controller via which
the request is sent. The request’s return value is written to the memory
pointed to by the <code class="docutils literal notranslate"><span class="pre">ret</span></code> parameter.</p>
<p>Refer to <a class="reference internal" href="#c.ssam_request_sync_onstack" title="ssam_request_sync_onstack"><code class="xref c c-func docutils literal notranslate"><span class="pre">ssam_request_sync_onstack()</span></code></a> for more details on the behavior of
the generated function.</p>
<dl class="c function">
<dt id="c.ssam_device_alloc">
<em class="property">struct</em> <a class="reference internal" href="#c.ssam_device" title="ssam_device">ssam_device</a> *<code class="sig-name descname">ssam_device_alloc</code><span class="sig-paren">(</span><em class="property">struct</em> <a class="reference internal" href="internal-api.html#c.ssam_controller" title="ssam_controller">ssam_controller</a> *<em>ctrl</em>, <em class="property">struct</em> <a class="reference internal" href="#c.ssam_device_uid" title="ssam_device_uid">ssam_device_uid</a> <em>uid</em><span class="sig-paren">)</span><a class="headerlink" href="#c.ssam_device_alloc" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Allocate and initialize a SSAM client device.</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">ssam_controller</span> <span class="pre">*ctrl</span></code></dt><dd><p>The controller under which the device should be added.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">ssam_device_uid</span> <span class="pre">uid</span></code></dt><dd><p>The UID of the device to be added.</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Allocates and initializes a new client device. The parent of the device
will be set to the controller device and the name will be set based on the
UID. Note that the device still has to be added via <a class="reference internal" href="#c.ssam_device_add" title="ssam_device_add"><code class="xref c c-func docutils literal notranslate"><span class="pre">ssam_device_add()</span></code></a>.
Refer to that function for more details.</p>
<p><strong>Return</strong></p>
<p>Returns the newly allocated and initialized SSAM client device, or
<code class="docutils literal notranslate"><span class="pre">NULL</span></code> if it could not be allocated.</p>
<dl class="c function">
<dt id="c.ssam_device_add">
int <code class="sig-name descname">ssam_device_add</code><span class="sig-paren">(</span><em class="property">struct</em> <a class="reference internal" href="#c.ssam_device" title="ssam_device">ssam_device</a> *<em>sdev</em><span class="sig-paren">)</span><a class="headerlink" href="#c.ssam_device_add" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Add a SSAM client device.</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">ssam_device</span> <span class="pre">*sdev</span></code></dt><dd><p>The SSAM client device to be added.</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Added client devices must be guaranteed to always have a valid and active
controller. Thus, this function will fail with <code class="docutils literal notranslate"><span class="pre">-ENODEV</span></code> if the controller
of the device has not been initialized yet, has been suspended, or has been
shut down.</p>
<p>The caller of this function should ensure that the corresponding call to
<a class="reference internal" href="#c.ssam_device_remove" title="ssam_device_remove"><code class="xref c c-func docutils literal notranslate"><span class="pre">ssam_device_remove()</span></code></a> is issued before the controller is shut down. If the
added device is a direct child of the controller device (default), it will
be automatically removed when the controller is shut down.</p>
<p>By default, the controller device will become the parent of the newly
created client device. The parent may be changed before ssam_device_add is
called, but care must be taken that a) the correct suspend/resume ordering
is guaranteed and b) the client device does not outlive the controller,
i.e. that the device is removed before the controller is being shut down.
In case these guarantees have to be manually enforced, please refer to the
<a class="reference internal" href="#c.ssam_client_link" title="ssam_client_link"><code class="xref c c-func docutils literal notranslate"><span class="pre">ssam_client_link()</span></code></a> and <a class="reference internal" href="#c.ssam_client_bind" title="ssam_client_bind"><code class="xref c c-func docutils literal notranslate"><span class="pre">ssam_client_bind()</span></code></a> functions, which are intended to
set up device-links for this purpose.</p>
<p><strong>Return</strong></p>
<p>Returns zero on success, a negative error code on failure.</p>
<dl class="c function">
<dt id="c.ssam_device_remove">
void <code class="sig-name descname">ssam_device_remove</code><span class="sig-paren">(</span><em class="property">struct</em> <a class="reference internal" href="#c.ssam_device" title="ssam_device">ssam_device</a> *<em>sdev</em><span class="sig-paren">)</span><a class="headerlink" href="#c.ssam_device_remove" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Remove a SSAM client device.</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">ssam_device</span> <span class="pre">*sdev</span></code></dt><dd><p>The device to remove.</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Removes and unregisters the provided SSAM client device.</p>
<dl class="c function">
<dt id="c.ssam_device_id_match">
<em class="property">const</em> <em class="property">struct</em> ssam_device_id *<code class="sig-name descname">ssam_device_id_match</code><span class="sig-paren">(</span><em class="property">const</em> <em class="property">struct</em> ssam_device_id *<em>table</em>, <em class="property">const</em> <em class="property">struct</em> <a class="reference internal" href="#c.ssam_device_uid" title="ssam_device_uid">ssam_device_uid</a> <em>uid</em><span class="sig-paren">)</span><a class="headerlink" href="#c.ssam_device_id_match" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Find the matching ID table entry for the given UID.</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">const</span> <span class="pre">struct</span> <span class="pre">ssam_device_id</span> <span class="pre">*table</span></code></dt><dd><p>The table to search in.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">const</span> <span class="pre">struct</span> <span class="pre">ssam_device_uid</span> <span class="pre">uid</span></code></dt><dd><p>The UID to matched against the individual table entries.</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Find the first match for the provided device UID in the provided ID table
and return it. Returns <code class="docutils literal notranslate"><span class="pre">NULL</span></code> if no match could be found.</p>
<dl class="c function">
<dt id="c.ssam_device_get_match">
<em class="property">const</em> <em class="property">struct</em> ssam_device_id *<code class="sig-name descname">ssam_device_get_match</code><span class="sig-paren">(</span><em class="property">const</em> <em class="property">struct</em> <a class="reference internal" href="#c.ssam_device" title="ssam_device">ssam_device</a> *<em>dev</em><span class="sig-paren">)</span><a class="headerlink" href="#c.ssam_device_get_match" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Find and return the ID matching the device in the ID table of the bound driver.</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">const</span> <span class="pre">struct</span> <span class="pre">ssam_device</span> <span class="pre">*dev</span></code></dt><dd><p>The device for which to get the matching ID table entry.</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Find the fist match for the UID of the device in the ID table of the
currently bound driver and return it. Returns <code class="docutils literal notranslate"><span class="pre">NULL</span></code> if the device does not
have a driver bound to it, the driver does not have match_table (i.e. it is
<code class="docutils literal notranslate"><span class="pre">NULL</span></code>), or there is no match in the driver’s match_table.</p>
<p>This function essentially calls <a class="reference internal" href="#c.ssam_device_id_match" title="ssam_device_id_match"><code class="xref c c-func docutils literal notranslate"><span class="pre">ssam_device_id_match()</span></code></a> with the ID table of
the bound device driver and the UID of the device.</p>
<p><strong>Return</strong></p>
<p>Returns the first match for the UID of the device in the device
driver’s match table, or <code class="docutils literal notranslate"><span class="pre">NULL</span></code> if no such match could be found.</p>
<dl class="c function">
<dt id="c.ssam_device_get_match_data">
<em class="property">const</em> void *<code class="sig-name descname">ssam_device_get_match_data</code><span class="sig-paren">(</span><em class="property">const</em> <em class="property">struct</em> <a class="reference internal" href="#c.ssam_device" title="ssam_device">ssam_device</a> *<em>dev</em><span class="sig-paren">)</span><a class="headerlink" href="#c.ssam_device_get_match_data" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Find the ID matching the device in the ID table of the bound driver and return its <code class="docutils literal notranslate"><span class="pre">driver_data</span></code> member.</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">const</span> <span class="pre">struct</span> <span class="pre">ssam_device</span> <span class="pre">*dev</span></code></dt><dd><p>The device for which to get the match data.</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Find the fist match for the UID of the device in the ID table of the
corresponding driver and return its driver_data. Returns <code class="docutils literal notranslate"><span class="pre">NULL</span></code> if the
device does not have a driver bound to it, the driver does not have
match_table (i.e. it is <code class="docutils literal notranslate"><span class="pre">NULL</span></code>), there is no match in the driver’s
match_table, or the match does not have any driver_data.</p>
<p>This function essentially calls <a class="reference internal" href="#c.ssam_device_get_match" title="ssam_device_get_match"><code class="xref c c-func docutils literal notranslate"><span class="pre">ssam_device_get_match()</span></code></a> and, if any match
could be found, returns its <code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">ssam_device_id.driver_data</span></code> member.</p>
<p><strong>Return</strong></p>
<p>Returns the driver data associated with the first match for the UID
of the device in the device driver’s match table, or <code class="docutils literal notranslate"><span class="pre">NULL</span></code> if no such match
could be found.</p>
<dl class="c function">
<dt id="c.__ssam_device_driver_register">
int <code class="sig-name descname">__ssam_device_driver_register</code><span class="sig-paren">(</span><em class="property">struct</em> <a class="reference internal" href="#c.ssam_device_driver" title="ssam_device_driver">ssam_device_driver</a> *<em>sdrv</em>, <em class="property">struct</em> module *<em>owner</em><span class="sig-paren">)</span><a class="headerlink" href="#c.__ssam_device_driver_register" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Register a SSAM client device driver.</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">ssam_device_driver</span> <span class="pre">*sdrv</span></code></dt><dd><p>The driver to register.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">module</span> <span class="pre">*owner</span></code></dt><dd><p>The module owning the provided driver.</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Please refer to the <a class="reference internal" href="#c.ssam_device_driver_register" title="ssam_device_driver_register"><code class="xref c c-func docutils literal notranslate"><span class="pre">ssam_device_driver_register()</span></code></a> macro for the normal way
to register a driver from inside its owning module.</p>
<dl class="c function">
<dt id="c.ssam_device_driver_unregister">
void <code class="sig-name descname">ssam_device_driver_unregister</code><span class="sig-paren">(</span><em class="property">struct</em> <a class="reference internal" href="#c.ssam_device_driver" title="ssam_device_driver">ssam_device_driver</a> *<em>sdrv</em><span class="sig-paren">)</span><a class="headerlink" href="#c.ssam_device_driver_unregister" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Unregister a SSAM device driver.</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">ssam_device_driver</span> <span class="pre">*sdrv</span></code></dt><dd><p>The driver to unregister.</p>
</dd>
</dl>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="clients/index.html" class="btn btn-neutral float-right" title="Client Driver Documentation" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="client.html" class="btn btn-neutral float-left" title="Writing Client Drivers" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright The kernel development community.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>