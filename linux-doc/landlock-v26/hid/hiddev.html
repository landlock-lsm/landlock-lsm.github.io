

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Care and feeding of your Human Interface Devices &mdash; The Linux Kernel  documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/theme_overrides.css" type="text/css" />

  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="HIDRAW - Raw Access to USB and Bluetooth Human Interface Devices" href="hidraw.html" />
    <link rel="prev" title="Human Interface Devices (HID)" href="index.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home" alt="Documentation Home"> The Linux Kernel
          

          
          </a>

          
            
            
              <div class="version">
                5.10.0-rc7
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../admin-guide/index.html">The Linux kernel user’s and administrator’s guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../kbuild/index.html">Kernel Build System</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../firmware-guide/index.html">The Linux kernel firmware guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../devicetree/index.html">Open Firmware and Device Tree</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../userspace-api/index.html">The Linux kernel user-space API guide</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../process/index.html">Working with the kernel development community</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dev-tools/index.html">Development tools for the kernel</a></li>
<li class="toctree-l1"><a class="reference internal" href="../doc-guide/index.html">How to write kernel documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../kernel-hacking/index.html">Kernel Hacking Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../trace/index.html">Linux Tracing Technologies</a></li>
<li class="toctree-l1"><a class="reference internal" href="../maintainer/index.html">Kernel Maintainer Handbook</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fault-injection/index.html">fault-injection</a></li>
<li class="toctree-l1"><a class="reference internal" href="../livepatch/index.html">Kernel Livepatching</a></li>
</ul>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../driver-api/index.html">The Linux driver implementer’s API guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../core-api/index.html">Core API Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../locking/index.html">locking</a></li>
<li class="toctree-l1"><a class="reference internal" href="../accounting/index.html">Accounting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../block/index.html">Block</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cdrom/index.html">cdrom</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cpu-freq/index.html">Linux CPUFreq - CPU frequency and voltage scaling code in the Linux(TM) kernel</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ide/index.html">Integrated Drive Electronics (IDE)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fb/index.html">Frame Buffer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fpga/index.html">fpga</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Human Interface Devices (HID)</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">Care and feeding of your Human Interface Devices</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#introduction">Introduction</a></li>
<li class="toctree-l3"><a class="reference internal" href="#using-the-hid-device-interface">Using the HID Device Interface</a></li>
<li class="toctree-l3"><a class="reference internal" href="#the-hiddev-api">The HIDDEV API</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#read">read():</a></li>
<li class="toctree-l4"><a class="reference internal" href="#ioctl">ioctl():</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="hidraw.html">HIDRAW - Raw Access to USB and Bluetooth Human Interface Devices</a></li>
<li class="toctree-l2"><a class="reference internal" href="hid-sensor.html">HID Sensors Framework</a></li>
<li class="toctree-l2"><a class="reference internal" href="hid-transport.html">HID I/O Transport Drivers</a></li>
<li class="toctree-l2"><a class="reference internal" href="uhid.html">UHID - User-space I/O driver support for HID subsystem</a></li>
<li class="toctree-l2"><a class="reference internal" href="hid-alps.html">ALPS HID Touchpad Protocol</a></li>
<li class="toctree-l2"><a class="reference internal" href="intel-ish-hid.html">Intel Integrated Sensor Hub (ISH)</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../i2c/index.html">I2C/SMBus Subsystem</a></li>
<li class="toctree-l1"><a class="reference internal" href="../iio/index.html">Industrial I/O</a></li>
<li class="toctree-l1"><a class="reference internal" href="../isdn/index.html">ISDN</a></li>
<li class="toctree-l1"><a class="reference internal" href="../infiniband/index.html">InfiniBand</a></li>
<li class="toctree-l1"><a class="reference internal" href="../leds/index.html">LEDs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../netlabel/index.html">NetLabel</a></li>
<li class="toctree-l1"><a class="reference internal" href="../networking/index.html">Linux Networking Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pcmcia/index.html">pcmcia</a></li>
<li class="toctree-l1"><a class="reference internal" href="../power/index.html">Power Management</a></li>
<li class="toctree-l1"><a class="reference internal" href="../target/index.html">TCM Virtual Device</a></li>
<li class="toctree-l1"><a class="reference internal" href="../timers/index.html">timers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../spi/index.html">Serial Peripheral Interface (SPI)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../w1/index.html">1-Wire Subsystem</a></li>
<li class="toctree-l1"><a class="reference internal" href="../watchdog/index.html">Linux Watchdog Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../virt/index.html">Linux Virtualization Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../input/index.html">The Linux Input Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../hwmon/index.html">Linux Hardware Monitoring</a></li>
<li class="toctree-l1"><a class="reference internal" href="../gpu/index.html">Linux GPU Driver Developer’s Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../security/index.html">Security Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../sound/index.html">Linux Sound Subsystem Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../crypto/index.html">Linux Kernel Crypto API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../filesystems/index.html">Filesystems in the Linux kernel</a></li>
<li class="toctree-l1"><a class="reference internal" href="../vm/index.html">Linux Memory Management Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../bpf/index.html">BPF Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../usb/index.html">USB support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../PCI/index.html">Linux PCI Bus Subsystem</a></li>
<li class="toctree-l1"><a class="reference internal" href="../scsi/index.html">Linux SCSI Subsystem</a></li>
<li class="toctree-l1"><a class="reference internal" href="../misc-devices/index.html">Assorted Miscellaneous Devices Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../scheduler/index.html">Linux Scheduler</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mhi/index.html">MHI</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../asm-annotations.html">Assembler Annotations</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../arm/index.html">ARM Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../arm64/index.html">ARM64 Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ia64/index.html">IA-64 Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../m68k/index.html">m68k Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mips/index.html">MIPS-specific Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../nios2/nios2.html">Linux on the Nios II architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../openrisc/index.html">OpenRISC Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../parisc/index.html">PA-RISC Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../powerpc/index.html">powerpc</a></li>
<li class="toctree-l1"><a class="reference internal" href="../riscv/index.html">RISC-V architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../s390/index.html">s390 Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../sh/index.html">SuperH Interfaces Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../sparc/index.html">Sparc Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../x86/index.html">x86-specific Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../xtensa/index.html">Xtensa Architecture</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../filesystems/ext4/index.html">ext4 Data Structures and Algorithms</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../staging/index.html">Unsorted Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../staging/index.html#atomic-types">Atomic Types</a></li>
<li class="toctree-l1"><a class="reference internal" href="../staging/index.html#atomic-bitops">Atomic bitops</a></li>
<li class="toctree-l1"><a class="reference internal" href="../staging/index.html#memory-barriers">Memory Barriers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../watch_queue.html">General notification mechanism</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../translations/index.html">Translations</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">The Linux Kernel</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="index.html">Human Interface Devices (HID)</a> &raquo;</li>
        
      <li>Care and feeding of your Human Interface Devices</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/hid/hiddev.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="care-and-feeding-of-your-human-interface-devices">
<h1>Care and feeding of your Human Interface Devices<a class="headerlink" href="#care-and-feeding-of-your-human-interface-devices" title="Permalink to this headline">¶</a></h1>
<div class="section" id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p>In addition to the normal input type HID devices, USB also uses the
human interface device protocols for things that are not really human
interfaces, but have similar sorts of communication needs. The two big
examples for this are power devices (especially uninterruptable power
supplies) and monitor control on higher end monitors.</p>
<p>To support these disparate requirements, the Linux USB system provides
HID events to two separate interfaces:
* the input subsystem, which converts HID events into normal input
device interfaces (such as keyboard, mouse and joystick) and a
normalised event interface - see <a class="reference internal" href="../input/input.html"><span class="doc">Introduction</span></a>
* the hiddev interface, which provides fairly raw HID events</p>
<p>The data flow for a HID event produced by a device is something like
the following:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>usb.c ---&gt; hid-core.c  ----&gt; hid-input.c ----&gt; [keyboard/mouse/joystick/event]
                        |
                        |
                         --&gt; hiddev.c ----&gt; POWER / MONITOR CONTROL
</pre></div>
</div>
<p>In addition, other subsystems (apart from USB) can potentially feed
events into the input subsystem, but these have no effect on the hid
device interface.</p>
</div>
<div class="section" id="using-the-hid-device-interface">
<h2>Using the HID Device Interface<a class="headerlink" href="#using-the-hid-device-interface" title="Permalink to this headline">¶</a></h2>
<p>The hiddev interface is a char interface using the normal USB major,
with the minor numbers starting at 96 and finishing at 111. Therefore,
you need the following commands:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>mknod /dev/usb/hiddev0 c 180 96
mknod /dev/usb/hiddev1 c 180 97
mknod /dev/usb/hiddev2 c 180 98
mknod /dev/usb/hiddev3 c 180 99
mknod /dev/usb/hiddev4 c 180 100
mknod /dev/usb/hiddev5 c 180 101
mknod /dev/usb/hiddev6 c 180 102
mknod /dev/usb/hiddev7 c 180 103
mknod /dev/usb/hiddev8 c 180 104
mknod /dev/usb/hiddev9 c 180 105
mknod /dev/usb/hiddev10 c 180 106
mknod /dev/usb/hiddev11 c 180 107
mknod /dev/usb/hiddev12 c 180 108
mknod /dev/usb/hiddev13 c 180 109
mknod /dev/usb/hiddev14 c 180 110
mknod /dev/usb/hiddev15 c 180 111
</pre></div>
</div>
<p>So you point your hiddev compliant user-space program at the correct
interface for your device, and it all just works.</p>
<p>Assuming that you have a hiddev compliant user-space program, of
course. If you need to write one, read on.</p>
</div>
<div class="section" id="the-hiddev-api">
<h2>The HIDDEV API<a class="headerlink" href="#the-hiddev-api" title="Permalink to this headline">¶</a></h2>
<p>This description should be read in conjunction with the HID
specification, freely available from <a class="reference external" href="https://www.usb.org">https://www.usb.org</a>, and
conveniently linked of <a class="reference external" href="http://www.linux-usb.org">http://www.linux-usb.org</a>.</p>
<p>The hiddev API uses a read() interface, and a set of ioctl() calls.</p>
<p>HID devices exchange data with the host computer using data
bundles called “reports”.  Each report is divided into “fields”,
each of which can have one or more “usages”.  In the hid-core,
each one of these usages has a single signed 32 bit value.</p>
<div class="section" id="read">
<h3>read():<a class="headerlink" href="#read" title="Permalink to this headline">¶</a></h3>
<p>This is the event interface.  When the HID device’s state changes,
it performs an interrupt transfer containing a report which contains
the changed value.  The hid-core.c module parses the report, and
returns to hiddev.c the individual usages that have changed within
the report.  In its basic mode, the hiddev will make these individual
usage changes available to the reader using a struct hiddev_event:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>struct hiddev_event {
    unsigned hid;
    signed int value;
};
</pre></div>
</div>
<p>containing the HID usage identifier for the status that changed, and
the value that it was changed to. Note that the structure is defined
within &lt;linux/hiddev.h&gt;, along with some other useful #defines and
structures.  The HID usage identifier is a composite of the HID usage
page shifted to the 16 high order bits ORed with the usage code.  The
behavior of the read() function can be modified using the HIDIOCSFLAG
ioctl() described below.</p>
</div>
<div class="section" id="ioctl">
<h3>ioctl():<a class="headerlink" href="#ioctl" title="Permalink to this headline">¶</a></h3>
<p>This is the control interface. There are a number of controls:</p>
<dl>
<dt>HIDIOCGVERSION</dt><dd><blockquote>
<div><ul class="simple">
<li><p>int (read)</p></li>
</ul>
</div></blockquote>
<p>Gets the version code out of the hiddev driver.</p>
</dd>
<dt>HIDIOCAPPLICATION</dt><dd><ul class="simple">
<li><p>(none)</p></li>
</ul>
</dd>
</dl>
<p>This ioctl call returns the HID application usage associated with the
hid device. The third argument to ioctl() specifies which application
index to get. This is useful when the device has more than one
application collection. If the index is invalid (greater or equal to
the number of application collections this device has) the ioctl
returns -1. You can find out beforehand how many application
collections the device has from the num_applications field from the
hiddev_devinfo structure.</p>
<dl class="simple">
<dt>HIDIOCGCOLLECTIONINFO</dt><dd><ul class="simple">
<li><p>struct hiddev_collection_info (read/write)</p></li>
</ul>
</dd>
</dl>
<p>This returns a superset of the information above, providing not only
application collections, but all the collections the device has.  It
also returns the level the collection lives in the hierarchy.
The user passes in a hiddev_collection_info struct with the index
field set to the index that should be returned.  The ioctl fills in
the other fields.  If the index is larger than the last collection
index, the ioctl returns -1 and sets errno to -EINVAL.</p>
<dl class="simple">
<dt>HIDIOCGDEVINFO</dt><dd><ul class="simple">
<li><p>struct hiddev_devinfo (read)</p></li>
</ul>
</dd>
</dl>
<p>Gets a hiddev_devinfo structure which describes the device.</p>
<dl class="simple">
<dt>HIDIOCGSTRING</dt><dd><ul class="simple">
<li><p>struct hiddev_string_descriptor (read/write)</p></li>
</ul>
</dd>
</dl>
<p>Gets a string descriptor from the device. The caller must fill in the
“index” field to indicate which descriptor should be returned.</p>
<dl class="simple">
<dt>HIDIOCINITREPORT</dt><dd><ul class="simple">
<li><p>(none)</p></li>
</ul>
</dd>
</dl>
<p>Instructs the kernel to retrieve all input and feature report values
from the device. At this point, all the usage structures will contain
current values for the device, and will maintain it as the device
changes.  Note that the use of this ioctl is unnecessary in general,
since later kernels automatically initialize the reports from the
device at attach time.</p>
<dl class="simple">
<dt>HIDIOCGNAME</dt><dd><ul class="simple">
<li><p>string (variable length)</p></li>
</ul>
</dd>
</dl>
<p>Gets the device name</p>
<dl class="simple">
<dt>HIDIOCGREPORT</dt><dd><ul class="simple">
<li><p>struct hiddev_report_info (write)</p></li>
</ul>
</dd>
</dl>
<p>Instructs the kernel to get a feature or input report from the device,
in order to selectively update the usage structures (in contrast to
INITREPORT).</p>
<dl class="simple">
<dt>HIDIOCSREPORT</dt><dd><ul class="simple">
<li><p>struct hiddev_report_info (write)</p></li>
</ul>
</dd>
</dl>
<p>Instructs the kernel to send a report to the device. This report can
be filled in by the user through HIDIOCSUSAGE calls (below) to fill in
individual usage values in the report before sending the report in full
to the device.</p>
<dl class="simple">
<dt>HIDIOCGREPORTINFO</dt><dd><ul class="simple">
<li><p>struct hiddev_report_info (read/write)</p></li>
</ul>
</dd>
</dl>
<p>Fills in a hiddev_report_info structure for the user. The report is
looked up by type (input, output or feature) and id, so these fields
must be filled in by the user. The ID can be absolute – the actual
report id as reported by the device – or relative –
HID_REPORT_ID_FIRST for the first report, and (HID_REPORT_ID_NEXT |
report_id) for the next report after report_id. Without a-priori
information about report ids, the right way to use this ioctl is to
use the relative IDs above to enumerate the valid IDs. The ioctl
returns non-zero when there is no more next ID. The real report ID is
filled into the returned hiddev_report_info structure.</p>
<dl class="simple">
<dt>HIDIOCGFIELDINFO</dt><dd><ul class="simple">
<li><p>struct hiddev_field_info (read/write)</p></li>
</ul>
</dd>
</dl>
<p>Returns the field information associated with a report in a
hiddev_field_info structure. The user must fill in report_id and
report_type in this structure, as above. The field_index should also
be filled in, which should be a number from 0 and maxfield-1, as
returned from a previous HIDIOCGREPORTINFO call.</p>
<dl class="simple">
<dt>HIDIOCGUCODE</dt><dd><ul class="simple">
<li><p>struct hiddev_usage_ref (read/write)</p></li>
</ul>
</dd>
</dl>
<p>Returns the usage_code in a hiddev_usage_ref structure, given that
given its report type, report id, field index, and index within the
field have already been filled into the structure.</p>
<dl class="simple">
<dt>HIDIOCGUSAGE</dt><dd><ul class="simple">
<li><p>struct hiddev_usage_ref (read/write)</p></li>
</ul>
</dd>
</dl>
<p>Returns the value of a usage in a hiddev_usage_ref structure. The
usage to be retrieved can be specified as above, or the user can
choose to fill in the report_type field and specify the report_id as
HID_REPORT_ID_UNKNOWN. In this case, the hiddev_usage_ref will be
filled in with the report and field information associated with this
usage if it is found.</p>
<dl class="simple">
<dt>HIDIOCSUSAGE</dt><dd><ul class="simple">
<li><p>struct hiddev_usage_ref (write)</p></li>
</ul>
</dd>
</dl>
<p>Sets the value of a usage in an output report.  The user fills in
the hiddev_usage_ref structure as above, but additionally fills in
the value field.</p>
<dl class="simple">
<dt>HIDIOGCOLLECTIONINDEX</dt><dd><ul class="simple">
<li><p>struct hiddev_usage_ref (write)</p></li>
</ul>
</dd>
</dl>
<p>Returns the collection index associated with this usage.  This
indicates where in the collection hierarchy this usage sits.</p>
<dl class="simple">
<dt>HIDIOCGFLAG</dt><dd><ul class="simple">
<li><p>int (read)</p></li>
</ul>
</dd>
<dt>HIDIOCSFLAG</dt><dd><ul class="simple">
<li><p>int (write)</p></li>
</ul>
</dd>
</dl>
<p>These operations respectively inspect and replace the mode flags
that influence the read() call above.  The flags are as follows:</p>
<blockquote>
<div><dl class="simple">
<dt>HIDDEV_FLAG_UREF</dt><dd><ul class="simple">
<li><p>read() calls will now return
struct hiddev_usage_ref instead of struct hiddev_event.
This is a larger structure, but in situations where the
device has more than one usage in its reports with the
same usage code, this mode serves to resolve such
ambiguity.</p></li>
</ul>
</dd>
<dt>HIDDEV_FLAG_REPORT</dt><dd><ul class="simple">
<li><p>This flag can only be used in conjunction
with HIDDEV_FLAG_UREF.  With this flag set, when the device
sends a report, a struct hiddev_usage_ref will be returned
to read() filled in with the report_type and report_id, but
with field_index set to FIELD_INDEX_NONE.  This serves as
additional notification when the device has sent a report.</p></li>
</ul>
</dd>
</dl>
</div></blockquote>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="hidraw.html" class="btn btn-neutral float-right" title="HIDRAW - Raw Access to USB and Bluetooth Human Interface Devices" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="index.html" class="btn btn-neutral float-left" title="Human Interface Devices (HID)" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright The kernel development community

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>