

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>FPGA Region &mdash; The Linux Kernel  documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../_static/doctools.js"></script>
        <script type="text/javascript" src="../../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/theme_overrides.css" type="text/css" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="In-kernel API for FPGA Programming" href="fpga-programming.html" />
    <link rel="prev" title="FPGA Bridge" href="fpga-bridge.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html" class="icon icon-home"> The Linux Kernel
          

          
          </a>

          
            
            
              <div class="version">
                5.9.0-rc8
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../../admin-guide/index.html">The Linux kernel user’s and administrator’s guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../kbuild/index.html">Kernel Build System</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../firmware-guide/index.html">The Linux kernel firmware guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../devicetree/index.html">Open Firmware and Device Tree</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../userspace-api/index.html">The Linux kernel user-space API guide</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../process/index.html">Working with the kernel development community</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../dev-tools/index.html">Development tools for the kernel</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../doc-guide/index.html">How to write kernel documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../kernel-hacking/index.html">Kernel Hacking Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../trace/index.html">Linux Tracing Technologies</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../maintainer/index.html">Kernel Maintainer Handbook</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../fault-injection/index.html">fault-injection</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../livepatch/index.html">Kernel Livepatching</a></li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">The Linux driver implementer’s API guide</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../driver-model/index.html">Driver Model</a></li>
<li class="toctree-l2"><a class="reference internal" href="../basics.html">Driver Basics</a></li>
<li class="toctree-l2"><a class="reference internal" href="../infrastructure.html">Device drivers infrastructure</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ioctl.html">ioctl based interfaces</a></li>
<li class="toctree-l2"><a class="reference internal" href="../early-userspace/index.html">Early Userspace</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pm/index.html">CPU and Device Power Management</a></li>
<li class="toctree-l2"><a class="reference internal" href="../clk.html">The Common Clk Framework</a></li>
<li class="toctree-l2"><a class="reference internal" href="../device-io.html">Bus-Independent Device Accesses</a></li>
<li class="toctree-l2"><a class="reference internal" href="../device_connection.html">Device connections</a></li>
<li class="toctree-l2"><a class="reference internal" href="../dma-buf.html">Buffer Sharing and Synchronization</a></li>
<li class="toctree-l2"><a class="reference internal" href="../device_link.html">Device links</a></li>
<li class="toctree-l2"><a class="reference internal" href="../component.html">Component Helper for Aggregate Drivers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../message-based.html">Message-based devices</a></li>
<li class="toctree-l2"><a class="reference internal" href="../infiniband.html">InfiniBand and Remote DMA (RDMA) Interfaces</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sound.html">Sound Devices</a></li>
<li class="toctree-l2"><a class="reference internal" href="../frame-buffer.html">Frame Buffer Library</a></li>
<li class="toctree-l2"><a class="reference internal" href="../regulator.html">Voltage and current regulator API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio/index.html">Industrial I/O</a></li>
<li class="toctree-l2"><a class="reference internal" href="../input.html">Input Subsystem</a></li>
<li class="toctree-l2"><a class="reference internal" href="../usb/index.html">Linux USB API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../firewire.html">Firewire (IEEE 1394) driver Interface Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pci/index.html">The Linux PCI driver implementer’s API guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="../spi.html">Serial Peripheral Interface (SPI)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../i2c.html">I<sup>2</sup>C and SMBus Subsystem</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ipmb.html">IPMB Driver for a Satellite MC</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ipmi.html">The Linux IPMI Driver</a></li>
<li class="toctree-l2"><a class="reference internal" href="../i3c/index.html">I3C subsystem</a></li>
<li class="toctree-l2"><a class="reference internal" href="../interconnect.html">Generic System Interconnect Subsystem</a></li>
<li class="toctree-l2"><a class="reference internal" href="../devfreq.html">Device Frequency Scaling</a></li>
<li class="toctree-l2"><a class="reference internal" href="../hsi.html">High Speed Synchronous Serial Interface (HSI)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../edac.html">Error Detection And Correction (EDAC) Devices</a></li>
<li class="toctree-l2"><a class="reference internal" href="../scsi.html">SCSI Interfaces Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="../libata.html">libATA Developer’s Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="../target.html">target and iSCSI Interfaces Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="../mailbox.html">The Common Mailbox Framework</a></li>
<li class="toctree-l2"><a class="reference internal" href="../mtdnand.html">MTD NAND Driver Programming Interface</a></li>
<li class="toctree-l2"><a class="reference internal" href="../miscellaneous.html">Parallel Port Devices</a></li>
<li class="toctree-l2"><a class="reference internal" href="../miscellaneous.html#x50-uart-driver">16x50 UART Driver</a></li>
<li class="toctree-l2"><a class="reference internal" href="../miscellaneous.html#pulse-width-modulation-pwm">Pulse-Width Modulation (PWM)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../mei/index.html">Intel(R) Management Engine Interface (Intel(R) MEI)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../mtd/index.html">Memory Technology Device (MTD)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../mmc/index.html">MMC/SD/SDIO card support</a></li>
<li class="toctree-l2"><a class="reference internal" href="../nvdimm/index.html">Non-Volatile Memory Device (NVDIMM)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../w1.html">W1: Dallas’ 1-wire bus</a></li>
<li class="toctree-l2"><a class="reference internal" href="../rapidio/index.html">The Linux RapidIO Subsystem</a></li>
<li class="toctree-l2"><a class="reference internal" href="../s390-drivers.html">Writing s390 channel device drivers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../vme.html">VME Device Drivers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../80211/index.html">Linux 802.11 Driver Developer’s Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="../uio-howto.html">The Userspace I/O HOWTO</a></li>
<li class="toctree-l2"><a class="reference internal" href="../firmware/index.html">Linux Firmware API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pinctl.html">PINCTRL (PIN CONTROL) subsystem</a></li>
<li class="toctree-l2"><a class="reference internal" href="../gpio/index.html">General Purpose Input/Output (GPIO)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../md/index.html">RAID</a></li>
<li class="toctree-l2"><a class="reference internal" href="../media/index.html">Media subsystem kernel internal API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../misc_devices.html">Miscellaneous Devices</a></li>
<li class="toctree-l2"><a class="reference internal" href="../nfc/index.html">Near Field Communication</a></li>
<li class="toctree-l2"><a class="reference internal" href="../dmaengine/index.html">DMAEngine documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../slimbus.html">Linux kernel SLIMbus support</a></li>
<li class="toctree-l2"><a class="reference internal" href="../soundwire/index.html">SoundWire Documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../thermal/index.html">Thermal</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">FPGA Subsystem</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="intro.html">Introduction</a></li>
<li class="toctree-l3"><a class="reference internal" href="fpga-mgr.html">FPGA Manager</a></li>
<li class="toctree-l3"><a class="reference internal" href="fpga-bridge.html">FPGA Bridge</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">FPGA Region</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#overview">Overview</a></li>
<li class="toctree-l4"><a class="reference internal" href="#how-to-add-a-new-fpga-region">How to add a new FPGA region</a></li>
<li class="toctree-l4"><a class="reference internal" href="#api-to-add-a-new-fpga-region">API to add a new FPGA region</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="fpga-programming.html">In-kernel API for FPGA Programming</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../acpi/index.html">ACPI Support</a></li>
<li class="toctree-l2"><a class="reference internal" href="../backlight/lp855x-driver.html">Kernel driver lp855x</a></li>
<li class="toctree-l2"><a class="reference internal" href="../connector.html">Kernel Connector</a></li>
<li class="toctree-l2"><a class="reference internal" href="../console.html">Console Drivers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../dcdbas.html">Dell Systems Management Base Driver</a></li>
<li class="toctree-l2"><a class="reference internal" href="../eisa.html">EISA bus support</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ipmb.html">IPMB Driver for a Satellite MC</a></li>
<li class="toctree-l2"><a class="reference internal" href="../isa.html">ISA Drivers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../isapnp.html">ISA Plug &amp; Play support by Jaroslav Kysela &lt;perex&#64;suse.cz&gt;</a></li>
<li class="toctree-l2"><a class="reference internal" href="../io-mapping.html">The io_mapping functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../io_ordering.html">Ordering I/O writes to memory-mapped addresses</a></li>
<li class="toctree-l2"><a class="reference internal" href="../generic-counter.html">Generic Counter Interface</a></li>
<li class="toctree-l2"><a class="reference internal" href="../lightnvm-pblk.html">pblk: Physical Block Device Target</a></li>
<li class="toctree-l2"><a class="reference internal" href="../memory-devices/index.html">Memory Controller drivers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../men-chameleon-bus.html">MEN Chameleon Bus</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ntb.html">NTB Drivers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../nvmem.html">NVMEM Subsystem</a></li>
<li class="toctree-l2"><a class="reference internal" href="../parport-lowlevel.html">PARPORT interface documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pps.html">PPS - Pulse Per Second</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ptp.html">PTP hardware clock infrastructure for Linux</a></li>
<li class="toctree-l2"><a class="reference internal" href="../phy/index.html">Generic PHY Framework</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pti_intel_mid.html">Intel MID PTI</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pwm.html">Pulse Width Modulation (PWM) interface</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pldmfw/index.html">PLDM Firmware Flash Update Library</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pldmfw/index.html#overview-of-the-pldmfw-library">Overview of the <code class="docutils literal notranslate"><span class="pre">pldmfw</span></code> library</a></li>
<li class="toctree-l2"><a class="reference internal" href="../rfkill.html">rfkill - RF kill switch support</a></li>
<li class="toctree-l2"><a class="reference internal" href="../serial/index.html">Support for Serial devices</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sm501.html">SM501 Driver</a></li>
<li class="toctree-l2"><a class="reference internal" href="../switchtec.html">Linux Switchtec Support</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sync_file.html">Sync File API Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="../vfio-mediated-device.html">VFIO Mediated devices</a></li>
<li class="toctree-l2"><a class="reference internal" href="../vfio.html">VFIO - “Virtual Function I/O” </a></li>
<li class="toctree-l2"><a class="reference internal" href="../xilinx/index.html">Xilinx FPGA</a></li>
<li class="toctree-l2"><a class="reference internal" href="../xillybus.html">Xillybus driver for generic FPGA interface</a></li>
<li class="toctree-l2"><a class="reference internal" href="../zorro.html">Writing Device Drivers for Zorro Devices</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../core-api/index.html">Core API Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../locking/index.html">locking</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../accounting/index.html">Accounting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../block/index.html">Block</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../cdrom/index.html">cdrom</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../cpu-freq/index.html">Linux CPUFreq - CPU frequency and voltage scaling code in the Linux(TM) kernel</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../ide/index.html">Integrated Drive Electronics (IDE)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../fb/index.html">Frame Buffer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../fpga/index.html">fpga</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../hid/index.html">Human Interface Devices (HID)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../i2c/index.html">I2C/SMBus Subsystem</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../iio/index.html">Industrial I/O</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../isdn/index.html">ISDN</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../infiniband/index.html">InfiniBand</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../leds/index.html">LEDs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../netlabel/index.html">NetLabel</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../networking/index.html">Linux Networking Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../pcmcia/index.html">pcmcia</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../power/index.html">Power Management</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../target/index.html">TCM Virtual Device</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../timers/index.html">timers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../spi/index.html">Serial Peripheral Interface (SPI)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../w1/index.html">1-Wire Subsystem</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../watchdog/index.html">Linux Watchdog Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../virt/index.html">Linux Virtualization Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../input/index.html">The Linux Input Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../hwmon/index.html">Linux Hardware Monitoring</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../gpu/index.html">Linux GPU Driver Developer’s Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../security/index.html">Security Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../sound/index.html">Linux Sound Subsystem Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../crypto/index.html">Linux Kernel Crypto API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../filesystems/index.html">Filesystems in the Linux kernel</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../vm/index.html">Linux Memory Management Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../bpf/index.html">BPF Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../usb/index.html">USB support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../PCI/index.html">Linux PCI Bus Subsystem</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../scsi/index.html">Linux SCSI Subsystem</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../misc-devices/index.html">Assorted Miscellaneous Devices Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../scheduler/index.html">Linux Scheduler</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../mhi/index.html">MHI</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../asm-annotations.html">Assembler Annotations</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../arm/index.html">ARM Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../arm64/index.html">ARM64 Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../ia64/index.html">IA-64 Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../m68k/index.html">m68k Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../mips/index.html">MIPS-specific Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../nios2/nios2.html">Linux on the Nios II architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../openrisc/index.html">OpenRISC Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../parisc/index.html">PA-RISC Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../powerpc/index.html">powerpc</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../riscv/index.html">RISC-V architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../s390/index.html">s390 Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../sh/index.html">SuperH Interfaces Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../sparc/index.html">Sparc Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../x86/index.html">x86-specific Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../xtensa/index.html">Xtensa Architecture</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../filesystems/ext4/index.html">ext4 Data Structures and Algorithms</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../staging/index.html">Unsorted Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../staging/index.html#atomic-types">Atomic Types</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../staging/index.html#atomic-bitops">Atomic bitops</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../staging/index.html#memory-barriers">Memory Barriers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../watch_queue.html">General notification mechanism</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../translations/index.html">Translations</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">The Linux Kernel</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../index.html">The Linux driver implementer’s API guide</a> &raquo;</li>
        
          <li><a href="index.html">FPGA Subsystem</a> &raquo;</li>
        
      <li>FPGA Region</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../_sources/driver-api/fpga/fpga-region.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="fpga-region">
<h1>FPGA Region<a class="headerlink" href="#fpga-region" title="Permalink to this headline">¶</a></h1>
<div class="section" id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h2>
<p>This document is meant to be a brief overview of the FPGA region API usage.  A
more conceptual look at regions can be found in the Device Tree binding
document <a class="footnote-reference" href="#f1" id="id1">[1]</a>.</p>
<p>For the purposes of this API document, let’s just say that a region associates
an FPGA Manager and a bridge (or bridges) with a reprogrammable region of an
FPGA or the whole FPGA.  The API provides a way to register a region and to
program a region.</p>
<p>Currently the only layer above fpga-region.c in the kernel is the Device Tree
support (of-fpga-region.c) described in <a class="footnote-reference" href="#f1" id="id2">[1]</a>.  The DT support layer uses regions
to program the FPGA and then DT to handle enumeration.  The common region code
is intended to be used by other schemes that have other ways of accomplishing
enumeration after programming.</p>
<p>An fpga-region can be set up to know the following things:</p>
<blockquote>
<div><ul class="simple">
<li>which FPGA manager to use to do the programming</li>
<li>which bridges to disable before programming and enable afterwards.</li>
</ul>
</div></blockquote>
<p>Additional info needed to program the FPGA image is passed in the struct
fpga_image_info including:</p>
<blockquote>
<div><ul class="simple">
<li>pointers to the image as either a scatter-gather buffer, a contiguous
buffer, or the name of firmware file</li>
<li>flags indicating specifics such as whether the image is for partial
reconfiguration.</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="how-to-add-a-new-fpga-region">
<h2>How to add a new FPGA region<a class="headerlink" href="#how-to-add-a-new-fpga-region" title="Permalink to this headline">¶</a></h2>
<p>An example of usage can be seen in the probe function of <a class="footnote-reference" href="#f2" id="id3">[2]</a>.</p>
<table class="docutils footnote" frame="void" id="f1" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[1]</td><td><em>(<a class="fn-backref" href="#id1">1</a>, <a class="fn-backref" href="#id2">2</a>)</em> ../devicetree/bindings/fpga/fpga-region.txt</td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="f2" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id3">[2]</a></td><td>../../drivers/fpga/of-fpga-region.c</td></tr>
</tbody>
</table>
</div>
<div class="section" id="api-to-add-a-new-fpga-region">
<h2>API to add a new FPGA region<a class="headerlink" href="#api-to-add-a-new-fpga-region" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>struct <a class="reference internal" href="#c.fpga_region" title="fpga_region"><code class="xref c c-type docutils literal notranslate"><span class="pre">fpga_region</span></code></a> — The FPGA region struct</li>
<li><a class="reference internal" href="#c.devm_fpga_region_create" title="devm_fpga_region_create"><code class="xref c c-func docutils literal notranslate"><span class="pre">devm_fpga_region_create()</span></code></a> — Allocate and init a region struct</li>
<li><a class="reference internal" href="#c.fpga_region_register" title="fpga_region_register"><code class="xref c c-func docutils literal notranslate"><span class="pre">fpga_region_register()</span></code></a> —  Register an FPGA region</li>
<li><a class="reference internal" href="#c.fpga_region_unregister" title="fpga_region_unregister"><code class="xref c c-func docutils literal notranslate"><span class="pre">fpga_region_unregister()</span></code></a> —  Unregister an FPGA region</li>
</ul>
<p>The FPGA region’s probe function will need to get a reference to the FPGA
Manager it will be using to do the programming.  This usually would happen
during the region’s probe function.</p>
<ul class="simple">
<li><a class="reference internal" href="#c.fpga_mgr_get" title="fpga_mgr_get"><code class="xref c c-func docutils literal notranslate"><span class="pre">fpga_mgr_get()</span></code></a> — Get a reference to an FPGA manager, raise ref count</li>
<li><a class="reference internal" href="#c.of_fpga_mgr_get" title="of_fpga_mgr_get"><code class="xref c c-func docutils literal notranslate"><span class="pre">of_fpga_mgr_get()</span></code></a> —  Get a reference to an FPGA manager, raise ref count,
given a device node.</li>
<li><a class="reference internal" href="#c.fpga_mgr_put" title="fpga_mgr_put"><code class="xref c c-func docutils literal notranslate"><span class="pre">fpga_mgr_put()</span></code></a> — Put an FPGA manager</li>
</ul>
<p>The FPGA region will need to specify which bridges to control while programming
the FPGA.  The region driver can build a list of bridges during probe time
(<code class="xref c c-member docutils literal notranslate"><span class="pre">fpga_region-&gt;bridge_list</span></code>) or it can have a function that creates
the list of bridges to program just before programming
(<code class="xref c c-member docutils literal notranslate"><span class="pre">fpga_region-&gt;get_bridges</span></code>).  The FPGA bridge framework supplies the
following APIs to handle building or tearing down that list.</p>
<ul class="simple">
<li><a class="reference internal" href="#c.fpga_bridge_get_to_list" title="fpga_bridge_get_to_list"><code class="xref c c-func docutils literal notranslate"><span class="pre">fpga_bridge_get_to_list()</span></code></a> — Get a ref of an FPGA bridge, add it to a
list</li>
<li><a class="reference internal" href="#c.of_fpga_bridge_get_to_list" title="of_fpga_bridge_get_to_list"><code class="xref c c-func docutils literal notranslate"><span class="pre">of_fpga_bridge_get_to_list()</span></code></a> — Get a ref of an FPGA bridge, add it to a
list, given a device node</li>
<li><a class="reference internal" href="#c.fpga_bridges_put" title="fpga_bridges_put"><code class="xref c c-func docutils literal notranslate"><span class="pre">fpga_bridges_put()</span></code></a> — Given a list of bridges, put them</li>
</ul>
<dl class="type">
<dt id="c.fpga_region">
struct <code class="descname">fpga_region</code><a class="headerlink" href="#c.fpga_region" title="Permalink to this definition">¶</a></dt>
<dd><p>FPGA Region structure</p>
</dd></dl>

<p><strong>Definition</strong></p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>struct fpga_region {
  struct device dev;
  struct mutex mutex;
  struct list_head bridge_list;
  struct fpga_manager *mgr;
  struct fpga_image_info *info;
  struct fpga_compat_id *compat_id;
  void *priv;
  int (*get_bridges)(struct fpga_region *region);
};
</pre></div>
</div>
<p><strong>Members</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">dev</span></code></dt>
<dd>FPGA Region device</dd>
<dt><code class="docutils literal notranslate"><span class="pre">mutex</span></code></dt>
<dd>enforces exclusive reference to region</dd>
<dt><code class="docutils literal notranslate"><span class="pre">bridge_list</span></code></dt>
<dd>list of FPGA bridges specified in region</dd>
<dt><code class="docutils literal notranslate"><span class="pre">mgr</span></code></dt>
<dd>FPGA manager</dd>
<dt><code class="docutils literal notranslate"><span class="pre">info</span></code></dt>
<dd>FPGA image info</dd>
<dt><code class="docutils literal notranslate"><span class="pre">compat_id</span></code></dt>
<dd>FPGA region id for compatibility check.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">priv</span></code></dt>
<dd>private data</dd>
<dt><code class="docutils literal notranslate"><span class="pre">get_bridges</span></code></dt>
<dd>optional function to get bridges to a list</dd>
</dl>
<dl class="function">
<dt id="c.devm_fpga_region_create">
struct <a class="reference internal" href="#c.fpga_region" title="fpga_region">fpga_region</a> * <code class="descname">devm_fpga_region_create</code><span class="sig-paren">(</span>struct <a class="reference internal" href="../infrastructure.html#c.device" title="device">device</a> *<em>&nbsp;dev</em>, struct <a class="reference internal" href="fpga-mgr.html#c.fpga_manager" title="fpga_manager">fpga_manager</a> *<em>&nbsp;mgr</em>, int (<em>*get_bridges</em>)(struct <a class="reference internal" href="#c.fpga_region" title="fpga_region">fpga_region</a> *)<span class="sig-paren">)</span><a class="headerlink" href="#c.devm_fpga_region_create" title="Permalink to this definition">¶</a></dt>
<dd><p>create and initialize a managed FPGA region struct</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">device</span> <span class="pre">*</span> <span class="pre">dev</span></code></dt>
<dd>device parent</dd>
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">fpga_manager</span> <span class="pre">*</span> <span class="pre">mgr</span></code></dt>
<dd>manager that programs this region</dd>
<dt><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">(*)(struct</span> <span class="pre">fpga_region</span> <span class="pre">*)</span> <span class="pre">get_bridges</span></code></dt>
<dd>optional function to get bridges to a list</dd>
</dl>
<p><strong>Description</strong></p>
<p>This function is intended for use in a FPGA region driver’s probe function.
After the region driver creates the region struct with
<a class="reference internal" href="#c.devm_fpga_region_create" title="devm_fpga_region_create"><code class="xref c c-func docutils literal notranslate"><span class="pre">devm_fpga_region_create()</span></code></a>, it should register it with <a class="reference internal" href="#c.fpga_region_register" title="fpga_region_register"><code class="xref c c-func docutils literal notranslate"><span class="pre">fpga_region_register()</span></code></a>.
The region driver’s remove function should call <a class="reference internal" href="#c.fpga_region_unregister" title="fpga_region_unregister"><code class="xref c c-func docutils literal notranslate"><span class="pre">fpga_region_unregister()</span></code></a>.
The region struct allocated with this function will be freed automatically on
driver detach.  This includes the case of a probe function returning error
before calling <a class="reference internal" href="#c.fpga_region_register" title="fpga_region_register"><code class="xref c c-func docutils literal notranslate"><span class="pre">fpga_region_register()</span></code></a>, the struct will still get cleaned up.</p>
<p><strong>Return</strong></p>
<p>struct fpga_region or NULL</p>
<dl class="function">
<dt id="c.fpga_region_register">
int <code class="descname">fpga_region_register</code><span class="sig-paren">(</span>struct <a class="reference internal" href="#c.fpga_region" title="fpga_region">fpga_region</a> *<em>&nbsp;region</em><span class="sig-paren">)</span><a class="headerlink" href="#c.fpga_region_register" title="Permalink to this definition">¶</a></dt>
<dd><p>register a FPGA region</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">fpga_region</span> <span class="pre">*</span> <span class="pre">region</span></code></dt>
<dd>FPGA region</dd>
</dl>
<p><strong>Return</strong></p>
<p>0 or -errno</p>
<dl class="function">
<dt id="c.fpga_region_unregister">
void <code class="descname">fpga_region_unregister</code><span class="sig-paren">(</span>struct <a class="reference internal" href="#c.fpga_region" title="fpga_region">fpga_region</a> *<em>&nbsp;region</em><span class="sig-paren">)</span><a class="headerlink" href="#c.fpga_region_unregister" title="Permalink to this definition">¶</a></dt>
<dd><p>unregister a FPGA region</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">fpga_region</span> <span class="pre">*</span> <span class="pre">region</span></code></dt>
<dd>FPGA region</dd>
</dl>
<p><strong>Description</strong></p>
<p>This function is intended for use in a FPGA region driver’s remove function.</p>
<dl class="function">
<dt id="c.fpga_mgr_get">
struct <a class="reference internal" href="fpga-mgr.html#c.fpga_manager" title="fpga_manager">fpga_manager</a> * <code class="descname">fpga_mgr_get</code><span class="sig-paren">(</span>struct <a class="reference internal" href="../infrastructure.html#c.device" title="device">device</a> *<em>&nbsp;dev</em><span class="sig-paren">)</span><a class="headerlink" href="#c.fpga_mgr_get" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a device, get a reference to a fpga mgr.</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">device</span> <span class="pre">*</span> <span class="pre">dev</span></code></dt>
<dd>parent device that fpga mgr was registered with</dd>
</dl>
<p><strong>Return</strong></p>
<p>fpga manager struct or IS_ERR() condition containing error code.</p>
<dl class="function">
<dt id="c.of_fpga_mgr_get">
struct <a class="reference internal" href="fpga-mgr.html#c.fpga_manager" title="fpga_manager">fpga_manager</a> * <code class="descname">of_fpga_mgr_get</code><span class="sig-paren">(</span>struct device_node *<em>&nbsp;node</em><span class="sig-paren">)</span><a class="headerlink" href="#c.of_fpga_mgr_get" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a device node, get a reference to a fpga mgr.</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">device_node</span> <span class="pre">*</span> <span class="pre">node</span></code></dt>
<dd>device node</dd>
</dl>
<p><strong>Return</strong></p>
<p>fpga manager struct or IS_ERR() condition containing error code.</p>
<dl class="function">
<dt id="c.fpga_mgr_put">
void <code class="descname">fpga_mgr_put</code><span class="sig-paren">(</span>struct <a class="reference internal" href="fpga-mgr.html#c.fpga_manager" title="fpga_manager">fpga_manager</a> *<em>&nbsp;mgr</em><span class="sig-paren">)</span><a class="headerlink" href="#c.fpga_mgr_put" title="Permalink to this definition">¶</a></dt>
<dd><p>release a reference to a fpga manager</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">fpga_manager</span> <span class="pre">*</span> <span class="pre">mgr</span></code></dt>
<dd>fpga manager structure</dd>
</dl>
<dl class="function">
<dt id="c.fpga_bridge_get_to_list">
int <code class="descname">fpga_bridge_get_to_list</code><span class="sig-paren">(</span>struct <a class="reference internal" href="../infrastructure.html#c.device" title="device">device</a> *<em>&nbsp;dev</em>, struct <a class="reference internal" href="fpga-programming.html#c.fpga_image_info" title="fpga_image_info">fpga_image_info</a> *<em>&nbsp;info</em>, struct list_head *<em>&nbsp;bridge_list</em><span class="sig-paren">)</span><a class="headerlink" href="#c.fpga_bridge_get_to_list" title="Permalink to this definition">¶</a></dt>
<dd><p>given device, get a bridge, add it to a list</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">device</span> <span class="pre">*</span> <span class="pre">dev</span></code></dt>
<dd>FPGA bridge device</dd>
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">fpga_image_info</span> <span class="pre">*</span> <span class="pre">info</span></code></dt>
<dd>fpga image specific information</dd>
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">list_head</span> <span class="pre">*</span> <span class="pre">bridge_list</span></code></dt>
<dd>list of FPGA bridges</dd>
</dl>
<p><strong>Description</strong></p>
<p>Get an exclusive reference to the bridge and and it to the list.</p>
<p>Return 0 for success, error code from fpga_bridge_get() othewise.</p>
<dl class="function">
<dt id="c.of_fpga_bridge_get_to_list">
int <code class="descname">of_fpga_bridge_get_to_list</code><span class="sig-paren">(</span>struct device_node *<em>&nbsp;np</em>, struct <a class="reference internal" href="fpga-programming.html#c.fpga_image_info" title="fpga_image_info">fpga_image_info</a> *<em>&nbsp;info</em>, struct list_head *<em>&nbsp;bridge_list</em><span class="sig-paren">)</span><a class="headerlink" href="#c.of_fpga_bridge_get_to_list" title="Permalink to this definition">¶</a></dt>
<dd><p>get a bridge, add it to a list</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">device_node</span> <span class="pre">*</span> <span class="pre">np</span></code></dt>
<dd>node pointer of a FPGA bridge</dd>
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">fpga_image_info</span> <span class="pre">*</span> <span class="pre">info</span></code></dt>
<dd>fpga image specific information</dd>
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">list_head</span> <span class="pre">*</span> <span class="pre">bridge_list</span></code></dt>
<dd>list of FPGA bridges</dd>
</dl>
<p><strong>Description</strong></p>
<p>Get an exclusive reference to the bridge and and it to the list.</p>
<p>Return 0 for success, error code from of_fpga_bridge_get() othewise.</p>
<dl class="function">
<dt id="c.fpga_bridges_put">
void <code class="descname">fpga_bridges_put</code><span class="sig-paren">(</span>struct list_head *<em>&nbsp;bridge_list</em><span class="sig-paren">)</span><a class="headerlink" href="#c.fpga_bridges_put" title="Permalink to this definition">¶</a></dt>
<dd><p>put bridges</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">list_head</span> <span class="pre">*</span> <span class="pre">bridge_list</span></code></dt>
<dd>list of FPGA bridges</dd>
</dl>
<p><strong>Description</strong></p>
<p>For each bridge in the list, put the bridge and remove it from the list.
If list is empty, do nothing.</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="fpga-programming.html" class="btn btn-neutral float-right" title="In-kernel API for FPGA Programming" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="fpga-bridge.html" class="btn btn-neutral float-left" title="FPGA Bridge" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright The kernel development community

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>